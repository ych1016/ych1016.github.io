<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>ã€åŠ›æ‰£ã€‘é¢è¯•ç»å…¸150é¢˜</title>
    <url>/2024/12/01/Algorithm/%E3%80%90%E5%8A%9B%E6%89%A3%E3%80%91%E9%9D%A2%E8%AF%95%E7%BB%8F%E5%85%B8150%E9%A2%98/</url>
    <content><![CDATA[<blockquote>
<p>ğŸš© å­¦å¦‚é€†æ°´è¡ŒèˆŸï¼Œä¸è¿›åˆ™é€€ã€‚ â€”â€” ã€Šå¢å¹¿è´¤æ–‡ã€‹</p>
</blockquote>
<h1 id="ä¸€åŠ›æ‰£é¢è¯•ç»å…¸-150-é¢˜">ä¸€ã€åŠ›æ‰£é¢è¯•ç»å…¸ 150 é¢˜</h1>
<h2 id="æ•°ç»„å­—ç¬¦ä¸²">1. æ•°ç»„/å­—ç¬¦ä¸²</h2>
<h3 id="åˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„">1.1 <a
href="https://leetcode.cn/problems/merge-sorted-array/description/?envType=study-plan-v2&amp;envId=top-interview-150">åˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„</a></h3>
<p>è¿™é“é¢˜ç›®ä¸»è¦æ˜¯åˆ©ç”¨åˆ°å½’å¹¶æ’åºçš„æ€è·¯ï¼Œå®šä¹‰ä¸¤ä¸ªæ•°ç»„ä¸‹æ ‡ï¼Œæ¯”è¾ƒæ•°ç»„å¯¹åº”çš„å€¼ï¼Œé€‰æ‹©å°çš„å€¼æ’è¿›æ–°æ•°ç»„ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œwhile
å¾ªç¯åè¿˜éœ€è¦æŠŠå‰©ä¸‹çš„æ•°ç»„éå†ä¸‹å»ã€‚è¿™é‡Œè¿˜æœ‰ä¸€ä¸ªç‚¹éœ€è¦æ³¨æ„ï¼Œå°±æ˜¯ Java
çš„å‡½æ•°ä¼ å‚å’Œæ•°ç»„èµ‹å€¼é—®é¢˜ï¼ŒJava
å‡½æ•°ä¼ é€’æ•°ç»„æ—¶ï¼Œä¼ è¿›æ¥çš„æ˜¯æ•°ç»„åœ°å€ï¼Œæ‰€ä»¥å¦‚æœåªæ˜¯ç®€å•çš„ç»™æ•°ç»„èµ‹å€¼æ–°çš„æ•°ç»„ï¼Œå®é™…çš„æ•°ç»„å¹¶ä¸ä¼šå‘ç”Ÿæ”¹å˜
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">merge</span><span class="params">(<span class="type">int</span>[] nums1, <span class="type">int</span> m, <span class="type">int</span>[] nums2, <span class="type">int</span> n)</span> &#123;</span><br><span class="line">    <span class="type">int</span>[] res = <span class="keyword">new</span> <span class="title class_">int</span>[m + n];</span><br><span class="line">    <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>, j = <span class="number">0</span>, k = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (i &lt; m &amp;&amp; j &lt; n) &#123;</span><br><span class="line">        <span class="keyword">if</span>(nums1[i] &lt; nums2[j]) res[k++] = nums1[i++];</span><br><span class="line">        <span class="keyword">else</span> res[k++] = nums2[j++];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (i &lt; m) res[k++] = nums1[i++];</span><br><span class="line">    <span class="keyword">while</span> (j &lt; n) res[k++] = nums2[j++];</span><br><span class="line">    <span class="keyword">if</span> (m + n &gt;= <span class="number">0</span>) System.arraycopy(res, <span class="number">0</span>, nums1, <span class="number">0</span>, m + n);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> ### 1.2 <a
href="https://leetcode.cn/problems/remove-element/description/?envType=study-plan-v2&amp;envId=top-interview-150">ç§»é™¤å…ƒç´ </a></p>
<p>è¿™ä¸ªå°±æ˜¯ä¸€ä¸ªç®€å•çš„åŒæŒ‡é’ˆé—®é¢˜ï¼Œæˆ‘ä»¬åªéœ€è¦è®°å½•ä¸ç­‰äºç»™å®šå€¼çš„ä¸‹æ ‡ï¼Œç„¶åéå†æ•°ç»„ï¼Œåªè¦æ•°å€¼ä¸ç­‰äºç»™å®šå€¼çš„æ•°å­—ï¼Œæˆ‘ä»¬å°±ä½¿ç”¨åˆå§‹å®šä¹‰çš„ä¸‹æ ‡è®°å½•ä¸‹æ¥
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">removeElement</span><span class="params">(<span class="type">int</span>[] nums, <span class="type">int</span> val)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span>(nums[i] != val)&#123;</span><br><span class="line">            nums[k++] = nums[i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> k;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> ### 1.3 <a
href="https://leetcode.cn/problems/remove-duplicates-from-sorted-array/description/?envType=study-plan-v2&amp;envId=top-interview-150">åˆ é™¤æœ‰åºæ•°ç»„ä¸­çš„é‡å¤å…ƒç´ </a></p>
<p>è¿™é“é¢˜ç›®è·Ÿä¸Šé¢çš„é¢˜ç›®ä¸€æ ·ï¼Œç›¸å½“äºä¸Šé¢æ˜¯è¦è®°å½•ä¸ç­‰äºæŒ‡å®šå€¼ï¼Œä¹Ÿå°±æ˜¯é‡å¤å€¼ä¸º
0ã€‚è¿™é“é¢˜ç›®åˆ™æ˜¯å…è®¸é‡å¤å€¼ä¸º 1</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">removeDuplicates</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">    Set&lt;Integer&gt; record = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;&gt;();</span><br><span class="line">    <span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span>(!record.contains(nums[i])) &#123;</span><br><span class="line">            record.add(nums[i]);</span><br><span class="line">            nums[k++] = nums[i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> k;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="åˆ é™¤æœ‰åºæ•°ç»„ä¸­çš„é‡å¤é¡¹-â…±">1.4 <a
href="https://leetcode.cn/problems/remove-duplicates-from-sorted-array-ii/description/?envType=study-plan-v2&amp;envId=top-interview-150">åˆ é™¤æœ‰åºæ•°ç»„ä¸­çš„é‡å¤é¡¹
â…¡</a></h3>
<p>è¿™é“é¢˜ç›®ä¹Ÿæ˜¯è·Ÿä¸Šé¢é¢˜ç›®ä¸€æ ·çš„æ€è·¯ã€‚ä¸Šä¸€é“é¢˜ç›®æ˜¯å…è®¸é‡å¤å€¼ä¸º
1ï¼Œè¿™é“é¢˜ç›®æ˜¯å…è®¸é‡å¤å€¼ä¸º 2</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">removeDuplicates</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">    Map&lt;Integer, Integer&gt; record = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    <span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!record.containsKey(nums[i])) &#123;</span><br><span class="line">            record.put(nums[i], <span class="number">1</span>);</span><br><span class="line">            nums[k++] = nums[i];</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(record.get(nums[i]) == <span class="number">1</span>)&#123;</span><br><span class="line">            nums[k++] = nums[i];</span><br><span class="line">            record.put(nums[i], <span class="number">2</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> k;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="å¤šæ•°å…ƒç´ ">1.5 <a
href="https://leetcode.cn/problems/majority-element/description/?envType=study-plan-v2&amp;envId=top-interview-150">å¤šæ•°å…ƒç´ </a></h3>
<p>å¤šæ•°å…ƒç´ æ˜¯å‡ºç°æ¬¡æ•°è¶…è¿‡æ•°ç»„é•¿åº¦ä¸€åŠçš„æ•°ã€‚è¿™é“é¢˜ç›®å¯ä»¥ç”¨ç›¸äº’æŠµæ¶ˆçš„æ€è·¯æ¥ç†è§£ã€‚å› ä¸ºå®ƒå‡ºç°çš„æ¬¡æ•°å¤šäºæ€»ä½“ä¸€åŠï¼Œæ‰€ä»¥å®ƒä¸å…¶ä»–æ•°å‡ºç°æ¬¡æ•°ç›¸äº’æŠµæ¶ˆåï¼Œå°±ä¸€å®šè¿˜ä¼šå­˜åœ¨è¿™ä¸ªæ•°
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">majorityElement</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">cnt</span> <span class="operator">=</span> <span class="number">1</span>, num = nums[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (nums[i] == num) cnt++;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            cnt--;</span><br><span class="line">            <span class="keyword">if</span>(cnt == <span class="number">0</span>)&#123;</span><br><span class="line">                num = nums[i];   cnt = <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> num;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> ### 1.6 <a
href="https://leetcode.cn/problems/rotate-array/?envType=study-plan-v2&amp;envId=top-interview-150">è½®è½¬æ•°ç»„</a></p>
<p>è¿™é“é¢˜ç›®çš„ä¸»è¦æ€è·¯æ˜¯åˆ©ç”¨åˆ°æ•°ç»„åè½¬çš„åŸç†ã€‚å…¶å®åŸç†å¾ˆç®€å•ï¼Œè¦å°†æ•°ç»„ä¸­çš„å…ƒç´ æ•´ä½“å‘å³ç§»
k ä¸ªå•ä½ï¼Œåªéœ€è¦å°†æ•´ä¸ªæ•°ç»„ï¼Œæ•´ä½“åè½¬ï¼Œç„¶ååˆ†åˆ«åè½¬å‰ k ä½å’Œå k ä½
<strong>egï¼š</strong> <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">rotate</span><span class="params">(<span class="type">int</span>[] nums, <span class="type">int</span> k)</span> &#123;</span><br><span class="line">    k = k % nums.length;</span><br><span class="line">    reverArray(nums,<span class="number">0</span>,nums.length-<span class="number">1</span>);</span><br><span class="line">    reverArray(nums,k,nums.length-<span class="number">1</span>);</span><br><span class="line">    reverArray(nums,<span class="number">0</span>,k-<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">reverArray</span><span class="params">(<span class="type">int</span>[] nums, <span class="type">int</span> start, <span class="type">int</span> end)</span> &#123;</span><br><span class="line">    <span class="keyword">while</span> (start &lt; end) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">temp</span> <span class="operator">=</span> nums[start];</span><br><span class="line">        nums[start] = nums[end];</span><br><span class="line">        nums[end] = temp;</span><br><span class="line">        start++;  end--;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> ### 1.7 <a
href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock/description/?envType=study-plan-v2&amp;envId=top-interview-150">ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº</a>
è¿™é“é¢˜ç›®å› ä¸ºç»™äº†å…¨éƒ¨çš„å¤©æ•°æ•°æ®ï¼Œæ‰€ä»¥å…·æœ‰é¢„çŸ¥æ€§ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥ä»åå¼€å§‹éå†æ•°ç»„ï¼Œè®°å½•åé¢å“ªä¸€å¤©æ˜¯å‡ºä»·æœ€é«˜çš„
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxProfit</span><span class="params">(<span class="type">int</span>[] prices)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> prices.length, maxNum = prices[n-<span class="number">1</span>], res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> n-<span class="number">2</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">        res = Math.max(res, maxNum - prices[i]);</span><br><span class="line">        maxNum = Math.max(maxNum, prices[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> ### 1.8 <a
href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-ii/description/?envType=study-plan-v2&amp;envId=top-interview-150">ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº
â…¡</a>
å› ä¸ºå¯ä»¥å¤šæ¬¡è´­ä¹°ï¼Œå¤šæ¬¡å‡ºå”®ã€‚è¿™é“é¢˜ç›®è·Ÿå‰é¢çš„é¢˜ç›®å°±ä¸ä¸€æ ·äº†ã€‚æˆ‘ä»¬å¹¶ä¸éœ€è¦è€ƒè™‘ä»€ä¹ˆæ—¶å€™å‡ºå”®ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨æœ‰å·®ä»·ï¼Œèƒ½æŒ£é’±çš„æ—¶å€™å‡ºå”®å°±å¯ä»¥
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxProfit</span><span class="params">(<span class="type">int</span>[] prices)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; prices.length - <span class="number">1</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (prices[i] &lt; prices[i + <span class="number">1</span>]) res += prices[i + <span class="number">1</span>] - prices[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> ### 1.9 <a
href="https://leetcode.cn/problems/jump-game/?envType=study-plan-v2&amp;envId=top-interview-150">è·³è·ƒæ¸¸æˆ</a>
åˆçœ‹é¢˜ç›®åƒæ˜¯è¦éå†å¾ˆå¤šæ¬¡ï¼Œå…¶å®ä¸ç”¨ã€‚æˆ‘ä»¬åªéœ€è¦ç»´æŠ¤ä¸€ä¸ªè·ç¦»å˜é‡ã€‚è¡¨ç¤ºä»å½“å‰æ‰€åœ¨ä¸‹æ ‡èƒ½åˆ°è¾¾çš„æœ€è¿œè·ç¦»å³å¯ã€‚è‹¥å½“å‰ä¸‹æ ‡æ¯”æœ€è¿œè·ç¦»è¿˜è¦å¤§ï¼Œè¯´æ˜å‰é¢çš„ç‚¹ï¼Œæ²¡åŠæ³•åˆ°è¾¾å½“å‰ä¸‹æ ‡çš„ä½ç½®ï¼Œä¹Ÿå°±æ˜¯ä¸å¯èƒ½å®Œæˆè¿™ä¸ªè·³è·ƒä»»åŠ¡ï¼Œæˆ‘ä»¬ç›´æ¥è¿”å›
false å³å¯ <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">canJump</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (i &gt; k) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        k = Math.max(k, i + nums[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> ### 1.10 <a
href="https://leetcode.cn/problems/jump-game-ii/description/?envType=study-plan-v2&amp;envId=top-interview-150">è·³è·ƒæ¸¸æˆ
â…¡</a> è¿™ä¸€é“é¢˜ç›®çš„ä¸»è¦æ€è·¯å°±æ˜¯çœ‹å½“å‰æ‰€åœ¨ä½ç½®èƒ½åˆ°è¾¾å¤šè¿œçš„è·ç¦»ï¼Œend
æš‚å­˜ä¸‹æ¥ï¼Œç›¸å½“äºä»å½“å‰ä½ç½®è·³åˆ° end
åªéœ€è¦ä¸€æ­¥ï¼Œç„¶åé€æ­¥æ›´æ–°èƒ½åˆ°è¾¾çš„æœ€è¿œè·ç¦»ã€‚å½“å½“å‰ä½ç½®åˆ°è¾¾ end
æ—¶ï¼Œè¯´æ˜è¿™ä¸€æ­¥èƒ½åˆ°è¾¾çš„æœ€è¿œè·ç¦»å·²ç»æ›´æ–°å®Œäº†ï¼Œä¹Ÿå°±æ˜¯éœ€è¦å†è·³ä¸€æ¬¡äº†ï¼Œè¿™æ ·å°±èƒ½è®°å½•ä¸‹æ‰€éœ€è¦çš„æœ€å°‘è·³æ•°
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">jump</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> <span class="number">0</span>, k = <span class="number">0</span>, end = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; nums.length - <span class="number">1</span>; i++) &#123;</span><br><span class="line">        k = Math.max(k, i + nums[i]);</span><br><span class="line">        <span class="keyword">if</span> (i == end) &#123;</span><br><span class="line">            res++;   end = k;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="h-æŒ‡æ•°">1.11 <a
href="https://leetcode.cn/problems/h-index/?envType=study-plan-v2&amp;envId=top-interview-150">H
æŒ‡æ•°</a></h3>
<p>è¿™é“é¢˜ç›®å…¶å®ç”¨çš„æ˜¯ä¸€ä¸ªæ¡¶è®¡æ•°æ€è·¯ï¼Œä½†æ˜¯è¿™é‡Œæœ‰ä¸€ä¸ªéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå½“ä¸€ç¯‡æ–‡ç« çš„è¢«å¼•ç”¨æ¬¡æ•°è¶…è¿‡å®é™…æ•°ç»„é•¿åº¦æ—¶ï¼Œæˆ‘ä»¬åªéœ€è¦æŠŠå®ƒçœ‹æˆå¼•ç”¨æ¬¡æ•°æ˜¯æ•°ç»„é•¿åº¦å°±å¯ä»¥ï¼Œè¿™æ ·å¯ä»¥å‡å°‘å¾ˆå¤§çš„å†…å­˜ç©ºé—´ã€‚ç„¶åæ¡¶ä¸»è¦è®°å½•çš„æ˜¯å¼•ç”¨æ¬¡æ•°å¯¹åº”å‡ºç°çš„æ¬¡æ•°ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">hIndex</span><span class="params">(<span class="type">int</span>[] citations)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> citations.length;</span><br><span class="line">    <span class="type">int</span>[] cnt = <span class="keyword">new</span> <span class="title class_">int</span>[n + <span class="number">1</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> citation : citations) &#123;</span><br><span class="line">        <span class="keyword">if</span> (citation &gt; n) cnt[n]++;</span><br><span class="line">        <span class="keyword">else</span> cnt[citation]++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> <span class="variable">total</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> n; i &gt;= <span class="number">0</span>; --i) &#123;</span><br><span class="line">        total += cnt[i];</span><br><span class="line">        <span class="keyword">if</span>(total &gt;= i) <span class="keyword">return</span> i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="o1æ—¶é—´æ’å…¥åˆ é™¤å’Œè·å–éšæœºå…ƒç´ ">1.12 <a
href="https://leetcode.cn/problems/insert-delete-getrandom-o1/description/?envType=study-plan-v2&amp;envId=top-interview-150">O(1)æ—¶é—´æ’å…¥ã€åˆ é™¤å’Œè·å–éšæœºå…ƒç´ </a></h3>
<p>è¿™é“é¢˜ç›®ä¸»è¦ç”¨åˆ°ä¸€ä¸ª Hash æ˜ å°„ï¼Œé€šè¿‡å¯å˜æ•°æ•°ç»„è¿›è¡Œå®ç°ã€‚ä½†æ˜¯è¿™é‡Œç”¨åˆ°
HashMap é›†åˆï¼Œä¼šè®©äººæ„Ÿè§‰ä¸æ˜¯åœ¨ O(1)çš„æ—¶é—´å†…å®Œæˆçš„æ“ä½œã€‚å…¶å®æ˜¯ O(1)ï¼Œå› ä¸º
HashMap çš„æ’å…¥å’Œåˆ é™¤ï¼Œéƒ½æ˜¯å›´ç»•ä¸‹æ ‡è¿›è¡Œï¼Œè€Œ hash
è·å–ä¸‹æ ‡åªéœ€è¦ä¸€ä¸ªå‡½æ•°çš„æ˜ å°„æ“ä½œ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">RandomizedSet</span> &#123;</span><br><span class="line">    List&lt;Integer&gt; nums;</span><br><span class="line">    Map&lt;Integer, Integer&gt; map;</span><br><span class="line">    Random random;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">RandomizedSet</span><span class="params">()</span> &#123;</span><br><span class="line">        nums = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">        map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        random = <span class="keyword">new</span> <span class="title class_">Random</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">insert</span><span class="params">(<span class="type">int</span> val)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (map.containsKey(val)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        nums.add(val);</span><br><span class="line">        map.put(val, nums.size() - <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">remove</span><span class="params">(<span class="type">int</span> val)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(!map.containsKey(val)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        nums.set(map.get(val), nums.get(nums.size() - <span class="number">1</span>));</span><br><span class="line">        map.put(nums.get(nums.size() - <span class="number">1</span>), map.get(val));</span><br><span class="line">        nums.remove(nums.size() - <span class="number">1</span>);</span><br><span class="line">        map.remove(val);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getRandom</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> nums.get(random.nextInt(nums.size()));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="é™¤è‡ªèº«ä»¥å¤–æ•°ç»„çš„ä¹˜ç§¯">1.13 <a
href="https://leetcode.cn/problems/product-of-array-except-self/description/?envType=study-plan-v2&amp;envId=top-interview-150">é™¤è‡ªèº«ä»¥å¤–æ•°ç»„çš„ä¹˜ç§¯</a></h3>
<p>è¿™é“é¢˜ç›®æœ¬æ¥å¯ä»¥ç”¨å‰ç¼€ç§¯åšï¼Œä½†æ˜¯é¢˜ç›®è¦æ±‚ä¸èƒ½ä½¿ç”¨é™¤æ³•ï¼Œæ‰€ä»¥è¿™é“é¢˜ç›®éœ€è¦åœ¨å‰ç¼€ç§¯çš„åŸºç¡€ä¸Šç¨åŠ æ”¹å˜ä¸€ä¸‹ã€‚æˆ‘ä»¬åªéœ€è¦å®šä¹‰ä¸€ä¸ªä¸­é—´å˜é‡ï¼Œå…ˆå°†æœ€ç»ˆç­”æ¡ˆç½®ä¸ºè¿™ä¸ªä¸­é—´å˜é‡å†è¿›è¡Œå‰ç¼€ç§¯ï¼Œå®ç°åœ¨å½“å‰ä½ç½®èµ‹å€¼æ—¶ï¼Œæ˜¯å‰é¢å˜é‡çš„ä¹˜ç§¯ã€‚åŒæ—¶ç”±äºé¢˜ç›®è¦æ±‚ï¼Œæ˜¯é™¤å½“å‰ä½ç½®çš„å…¶ä»–æ‰€æœ‰å˜é‡çš„ä¹˜ç§¯ï¼Œæ‰€ä»¥éœ€è¦ä»å·¦å‘å³èµ°ä¸€éï¼Œç„¶åå†ä»å³å‘å·¦èµ°ä¸€é</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span>[] productExceptSelf(<span class="type">int</span>[] nums) &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> nums.length;</span><br><span class="line">    <span class="type">int</span>[] res = <span class="keyword">new</span> <span class="title class_">int</span>[n];</span><br><span class="line">    <span class="type">int</span> <span class="variable">left</span> <span class="operator">=</span> <span class="number">1</span>, right = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        res[i] = left;</span><br><span class="line">        left = left * nums[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> n-<span class="number">1</span>;i&gt;=<span class="number">0</span>;--i)&#123;</span><br><span class="line">        res[i] *= right;</span><br><span class="line">        right = right * nums[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="åŠ æ²¹ç«™">1.14 <a
href="https://leetcode.cn/problems/gas-station/description/?envType=study-plan-v2&amp;envId=top-interview-150">åŠ æ²¹ç«™</a></h3>
<p>è¿™é“é¢˜ç›®å…¶å®å¹¶ä¸éœ€è¦å»æ¯ä¸€ä¸ªç‚¹è¿›è¡Œæ¢ç´¢ï¼Œåªéœ€è¦è®¡ç®— gas å’Œ cost
çš„å·®å€¼çš„å‰ç¼€å’Œå°±èƒ½è§£å†³è¿™ä¸ªé—®é¢˜ã€‚<strong>å› ä¸ºåªè¦å·®å€¼
&gt;=0ï¼Œå°±ä¸€å®šèƒ½ç»•åœˆèµ°ã€‚</strong>æ‰€ä»¥æˆ‘ä»¬çš„è§£é¢˜çš„æœ€ç»ˆç›®æ ‡å˜æˆäº†ï¼Œæ¢ç´¢ä»å“ªä¸€ä¸ªç‚¹å¼€å§‹å‡ºå‘ã€‚æ¢ç´¢ä»å“ªä¸ªç‚¹å¼€å§‹å‡ºå‘ä¹Ÿæ¯”è¾ƒç®€å•ï¼Œæˆ‘ä»¬çœ‹å‰ç¼€å’Œåœ¨å“ªé‡Œ
&lt;0
äº†ï¼Œè¯´æ˜åœ¨å®ƒå‰é¢çš„ç‚¹å‡ºå‘æ˜¯èµ°ä¸åˆ°å½“å‰çš„ç‚¹çš„ï¼Œæ‰€ä»¥å‡ºå‘ç‚¹è‚¯å®šéœ€è¦ä»è¿™ä¸ªç‚¹çš„ä¸‹ä¸€ä¸ªç‚¹å¼€å§‹ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">canCompleteCircuit</span><span class="params">(<span class="type">int</span>[] gas, <span class="type">int</span>[] cost)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> gas.length, run = <span class="number">0</span>, sum = <span class="number">0</span>, start = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        run += gas[i] - cost[i];</span><br><span class="line">        sum += gas[i] - cost[i];</span><br><span class="line">        <span class="keyword">if</span> (run &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            run = <span class="number">0</span>;</span><br><span class="line">            start = i + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> sum &gt;= <span class="number">0</span> ? start : -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="åˆ†å‘ç³–æœ">1.15 <a
href="https://leetcode.cn/problems/candy/description/?envType=study-plan-v2&amp;envId=top-interview-150">åˆ†å‘ç³–æœ</a></h3>
<p>ä¸¤è€…å…¼é¡¾å¾ˆå®¹æ˜“é¡¾æ­¤å¤±å½¼ã€‚å¦‚æœæƒ³ç”¨ä¸€æ¬¡éå†å°±è§£å†³é—®é¢˜ï¼Œå°±å¿…é¡»æ—¶åˆ»æ³¨æ„å½“å‰æ•°å·¦å³ä¸¤è¾¹çš„æ•°ï¼Œå¹¶ä¸”å¦‚æœä»å·¦åˆ°å³éå†ï¼Œæ²¡å‘é¢„æµ‹å³è¾¹è¿˜æœªéå†çš„æ•°å­—æ˜¯å¦è¿˜ä¼šå—åˆ°å¥–åŠ±ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦åˆ†å¼€è€ƒè™‘ï¼Œå…ˆèµ°ä¸€éä»å·¦åˆ°å³ï¼Œè€ƒè™‘å·¦è¾¹æ•°å­—å¯¹å³è¾¹æ•°å­—çš„å½±å“ï¼Œç„¶åå†èµ°ä¸€éä»å³åˆ°å·¦ï¼Œè€ƒè™‘å³è¾¹æ•°å­—å¯¹å·¦è¾¹æ•°å­—çš„å½±å“ã€‚ç„¶åéœ€è¦æ»¡è¶³å·¦è¾¹èµ°å¾—é€šï¼Œå³è¾¹ä¹Ÿå¾—èµ°å¾—é€šï¼Œæ€ä¹ˆåŠå‘¢ï¼Œå„ä¸ªä½ç½®ä¸Šçš„æ•°å–ä»å·¦åˆ°å³ï¼Œä»å³åˆ°å·¦çš„æœ€å¤§å€¼ï¼Œå°±èƒ½å®ç°ä¸¤è¾¹éƒ½æ»¡è¶³ã€‚</p>
<table>
<tr>
<td>
[1 0 2]<br/>[1 1 1] <br/>[1 1 2]<br/>[2 1 1]<br/>[2 1 2] 2+1+2 = 5<br/>
</td>
</tr>
</table>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">candy</span><span class="params">(<span class="type">int</span>[] ratings)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> ratings.length;</span><br><span class="line">    <span class="type">int</span>[] num1 = <span class="keyword">new</span> <span class="title class_">int</span>[n];</span><br><span class="line">    <span class="type">int</span>[] num2 = <span class="keyword">new</span> <span class="title class_">int</span>[n];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        num1[i] = num2[i] = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span> (ratings[i] &gt; ratings[i - <span class="number">1</span>]) &#123;</span><br><span class="line">            num1[i] = num1[i - <span class="number">1</span>] + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> n - <span class="number">2</span>; i &gt;= <span class="number">0</span>; --i) &#123;</span><br><span class="line">        <span class="keyword">if</span> (ratings[i] &gt; ratings[i + <span class="number">1</span>]) &#123;</span><br><span class="line">            num2[i] = num2[i + <span class="number">1</span>] + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        res += Math._max_(num1[i], num2[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æ¥é›¨æ°´">1.16 <a
href="https://leetcode.cn/problems/trapping-rain-water/description/">æ¥é›¨æ°´</a></h3>
<p>è¿™é“é¢˜ç›®çš„æ±‚è§£æ€è·¯ä¸»è¦æ˜¯ï¼Œéå†æ•°ç»„ï¼Œæˆ‘ä»¬éœ€è¦å½“å‰éå†ä½ç½®ï¼Œå·¦è¾¹å’Œå³è¾¹æœ€é«˜çš„æ•°å€¼ï¼Œç„¶åå¯¹äºè¿™ä¸¤ä¸ªæ•°å€¼ï¼Œå»å®ƒä»¬å½“ä¸­æ›´å°çš„é‚£ä¸ªæ•°å€¼ï¼ˆæœ¨æ¡¶æ•ˆåº”ï¼‰ï¼Œå–å‡ºæ¥ä¹‹åéœ€è¦å‡å»å½“å‰ä½ç½®çš„é«˜åº¦ï¼Œç®—å‡ºå·®å€¼ã€‚æŒ‰ç…§è¿™ç§æ€è·¯ï¼Œæˆ‘ä»¬éœ€è¦å¤šå®šä¹‰ä¸¤ä¸ªæ•°ç»„ï¼Œåˆ†åˆ«è®°å½•å½“å‰ä½ç½®å·¦è¾¹çš„æœ€å¤§é«˜åº¦
leftMax[n]ï¼Œå’Œå½“å‰ä½ç½®å³è¾¹æœ€å¤§çš„é«˜åº¦
rightMax[n]ï¼Œè¿™æ ·åœ¨éå†åˆ°å½“å‰ä½ç½®æ—¶ï¼Œå½“å‰ä½ç½®çš„è“„æ°´å€¼ä¸º
min{rightMax[i],leftMax[i]} -
heigh[i]ã€‚ç„¶åæˆ‘ä»¬ä¼šå‘ç°è¿™ç§æ€è·¯å…¶å®æœ‰ä¸€ç§æ›´ç®€æ´çš„åšæ³•ï¼Œæˆ‘ä»¬ä¸éœ€è¦å¤šå®šä¹‰ä¸¤ä¸ªé¢å¤–çš„æ•°ç»„ï¼Œåªéœ€è¦å®šä¹‰ä¸¤ä¸ªå˜é‡å³å¯ï¼Œåˆ†åˆ«è®°å½•
0...i å·¦è¾¹çš„æœ€å¤§é«˜åº¦ leftMaxï¼Œå’Œ i+1 ... n-1 çš„æœ€å¤§é«˜åº¦ rightMaxï¼Œè¿™æ ·å½“
leftMax &lt; rightMax æ—¶ï¼Œæˆ‘ä»¬æ›´æ–°å·¦è¾¹ï¼›å½“ leftMax &gt; rightMax
æ—¶ï¼Œæˆ‘ä»¬æ›´æ–°å³è¾¹ï¼›å½“ leftMax = rightMax
æ—¶ï¼Œæˆ‘ä»¬ä¸¤è¾¹éƒ½æ›´æ–°ã€‚å› ä¸ºæ¯æ¬¡è®¡ç®—è“„æ°´å€¼æ—¶ï¼Œæˆ‘ä»¬éƒ½æ˜¯æ‹¿ leftMax å’Œ rightMax
æ›´å°çš„é‚£ä¸ªå€¼å»æ›´æ–°ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">trap</span><span class="params">(<span class="type">int</span>[] height)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> height.length;</span><br><span class="line">    <span class="type">int</span> <span class="variable">left</span> <span class="operator">=</span> <span class="number">0</span>, right = n - <span class="number">1</span>, res = <span class="number">0</span>, leftMax = <span class="number">0</span>, rightMax = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(left &lt;= right) &#123;</span><br><span class="line">        leftMax = Math.max(leftMax, height[left]);</span><br><span class="line">        rightMax = Math.max(rightMax, height[right]);</span><br><span class="line">        <span class="keyword">if</span>(leftMax &lt; rightMax) &#123;</span><br><span class="line">            res += leftMax - height[left++];</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(rightMax &lt; leftMax)&#123;</span><br><span class="line">            res += rightMax - height[right--];</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="comment">// ä¸¤è¾¹éƒ½æ›´æ–°</span></span><br><span class="line">            res += leftMax - height[left++];</span><br><span class="line">            <span class="keyword">if</span>(left &lt;= right) &#123;</span><br><span class="line">                res += rightMax - height[right--];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ç½—é©¬æ•°å­—è½¬æ•´æ•°">1.17 <a
href="https://leetcode.cn/problems/roman-to-integer/submissions/521990974/?envType=study-plan-v2&amp;envId=top-interview-150">ç½—é©¬æ•°å­—è½¬æ•´æ•°</a></h3>
<p>æ¯”è¾ƒç®€å•çš„æ¨¡æ‹Ÿé¢˜ç›®...</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">romanToInt</span><span class="params">(String s)</span> &#123;</span><br><span class="line">    Map&lt;Character, Integer&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    map.put(<span class="string">&#x27;I&#x27;</span>, <span class="number">1</span>);</span><br><span class="line">    map.put(<span class="string">&#x27;V&#x27;</span>, <span class="number">5</span>);</span><br><span class="line">    map.put(<span class="string">&#x27;X&#x27;</span>, <span class="number">10</span>);</span><br><span class="line">    map.put(<span class="string">&#x27;L&#x27;</span>, <span class="number">50</span>);</span><br><span class="line">    map.put(<span class="string">&#x27;C&#x27;</span>, <span class="number">100</span>);</span><br><span class="line">    map.put(<span class="string">&#x27;D&#x27;</span>, <span class="number">500</span>);</span><br><span class="line">    map.put(<span class="string">&#x27;M&#x27;</span>, <span class="number">1000</span>);</span><br><span class="line">    <span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> s.length();</span><br><span class="line">    <span class="type">char</span>[] array = s.toCharArray();</span><br><span class="line">    <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (i &lt; n) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">temp</span> <span class="operator">=</span> map.get(array[i]);</span><br><span class="line">        <span class="keyword">if</span> (i &lt; n - <span class="number">1</span> &amp;&amp; map.get(array[i]) &lt; map.get(array[i + <span class="number">1</span>])) &#123;</span><br><span class="line">            temp = map.get(array[i+<span class="number">1</span>]) - map.get(array[i]);</span><br><span class="line">            i++;</span><br><span class="line">        &#125;</span><br><span class="line">        res += temp;</span><br><span class="line">        i++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æ•´æ•°è½¬ç½—é©¬æ•°å­—">1.18 <a
href="https://leetcode.cn/problems/integer-to-roman/?envType=study-plan-v2&amp;envId=top-interview-150">æ•´æ•°è½¬ç½—é©¬æ•°å­—</a></h3>
<p>ç»å…¸æ‰“è¡¨é—®é¢˜</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span>[] values = &#123;<span class="number">1000</span>, <span class="number">900</span>, <span class="number">500</span>, <span class="number">400</span>, <span class="number">100</span>, <span class="number">90</span>, <span class="number">50</span>, <span class="number">40</span>, <span class="number">10</span>, <span class="number">9</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">1</span>&#125;;</span><br><span class="line">String[] symbols = &#123;<span class="string">&quot;M&quot;</span>, <span class="string">&quot;CM&quot;</span>, <span class="string">&quot;D&quot;</span>, <span class="string">&quot;CD&quot;</span>, <span class="string">&quot;C&quot;</span>, <span class="string">&quot;XC&quot;</span>, <span class="string">&quot;L&quot;</span>, <span class="string">&quot;XL&quot;</span>, <span class="string">&quot;X&quot;</span>, <span class="string">&quot;IX&quot;</span>, <span class="string">&quot;V&quot;</span>, <span class="string">&quot;IV&quot;</span>, <span class="string">&quot;I&quot;</span>&#125;;</span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">intToRoman</span><span class="params">(<span class="type">int</span> num)</span> &#123;</span><br><span class="line">    <span class="type">StringBuilder</span> <span class="variable">roman</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; values.length; i++) &#123;</span><br><span class="line">        <span class="keyword">while</span> (num &gt;= values[i]) &#123;</span><br><span class="line">            roman.append(symbols[i]);</span><br><span class="line">            num -= values[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(num == <span class="number">0</span>) <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> roman.toString();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æœ€åä¸€ä¸ªå•è¯çš„é•¿åº¦">1.19 <a
href="https://leetcode.cn/problems/length-of-last-word/description/?envType=study-plan-v2&amp;envId=top-interview-150">æœ€åä¸€ä¸ªå•è¯çš„é•¿åº¦</a></h3>
<p>æ¨¡æ‹Ÿé¢˜ï¼Œå®šä¹‰ä¸€ä¸ª
StringBuilderï¼Œåªéœ€è¦ä»æœ€åä¸€ä¸ªå­—ç¬¦å¼€å§‹éå†ï¼Œè‹¥ä¸æ˜¯ç©ºæ ¼ï¼Œå°±å¼€å§‹è®°å½•ä¸‹æ¥ï¼Œç›´åˆ°å†é‡åˆ°ç©ºæ ¼ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">lengthOfLastWord</span><span class="params">(String s)</span> &#123;</span><br><span class="line">    <span class="type">char</span>[] charArray = s.toCharArray();</span><br><span class="line">    <span class="type">StringBuilder</span> <span class="variable">res</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">    <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> charArray.length - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (i &gt;= <span class="number">0</span> &amp;&amp; charArray[i] == <span class="string">&#x27; &#x27;</span>) --i;</span><br><span class="line">    <span class="keyword">while</span> (i &gt;= <span class="number">0</span> &amp;&amp; charArray[i] != <span class="string">&#x27; &#x27;</span>) res.append(charArray[i--]);</span><br><span class="line">    <span class="keyword">return</span> res.length();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æœ€é•¿å…¬å…±å‰ç¼€">1.20 <a
href="https://leetcode.cn/problems/longest-common-prefix/description/?envType=study-plan-v2&amp;envId=top-interview-150">æœ€é•¿å…¬å…±å‰ç¼€</a></h3>
<p>æ¨¡æ‹Ÿé—®é¢˜ï¼Œåªéœ€è¦ç®—å‡ºå­—ç¬¦ä¸²æ•°ç»„ä¸­æœ€çŸ­çš„é‚£ä¸ªå­—ç¬¦ä¸²é•¿åº¦ï¼Œç„¶åéå†è¿™ä¸ªé•¿åº¦ï¼Œå–å‡ºç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²çš„å­—ç¬¦ï¼Œç„¶åä¸€ä¸€æ¯”å¯¹å…¶ä»–å­—ç¬¦ï¼Œå¦‚æœä¸€æ ·å°±è®°å½•ä¸‹æ¥ï¼Œå¦‚æœä¸ä¸€æ ·ï¼Œå°±ç›´æ¥é€€å‡º</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> String <span class="title function_">longestCommonPrefix</span><span class="params">(String[] strs)</span> &#123;</span><br><span class="line">    <span class="type">StringBuilder</span> <span class="variable">res</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">    <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> <span class="number">10000000</span>;</span><br><span class="line">    <span class="keyword">for</span> (String str : strs) len = Math.min(len, str.length());</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; len; ++i) &#123;</span><br><span class="line">        <span class="type">char</span> <span class="variable">ch</span> <span class="operator">=</span> strs[<span class="number">0</span>].charAt(i);</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">flag</span> <span class="operator">=</span> <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">1</span>; j &lt; strs.length; ++j) &#123;</span><br><span class="line">            <span class="keyword">if</span> (ch != strs[j].charAt(i)) &#123;</span><br><span class="line">                flag = <span class="literal">false</span>;  <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (flag) res.append(ch);</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res.toString();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="åè½¬å­—ç¬¦ä¸²ä¸­çš„å•è¯">1.21 <a
href="https://leetcode.cn/problems/reverse-words-in-a-string/description/?envType=study-plan-v2&amp;envId=top-interview-150">åè½¬å­—ç¬¦ä¸²ä¸­çš„å•è¯</a></h3>
<p>è¿™æ˜¯ä¸€é“ç®€å•çš„æ¨¡æ‹Ÿé¢˜ï¼Œæˆ‘ä»¬åªéœ€è¦éå†ä¸€æ¬¡ç»™å®šçš„å­—ç¬¦ä¸²ï¼Œå½“é‡åˆ°ä¸æ˜¯ç©ºæ ¼çš„å­—ç¬¦æ—¶ï¼ŒæŠŠå®ƒè®°å½•ä¸‹æ¥ï¼Œå½“å†é‡åˆ°ç©ºå­—ç¬¦ä¸²æ—¶ï¼Œæˆ‘ä»¬æŠŠè®°å½•ä¸‹æ¥çš„è¿™ä¸ªå­—ç¬¦ä¸²ç”¨åˆ—è¡¨è®°å½•ä¸‹æ¥ã€‚æœ€åå°†æ•´ä¸ªåˆ—è¡¨åè½¬ä¸€ä¸‹ï¼Œç”¨
Collections çš„ reverse åè½¬ä¸€ä¸‹åˆ—è¡¨ï¼Œå°±èƒ½å®ç°åè½¬å•è¯çš„æ•ˆæœã€‚ç„¶åå†ç”¨
String çš„ join å‡½æ•°è¿›è¡Œæ‹¼æ¥ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> String <span class="title function_">reverseWords</span><span class="params">(String s)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> s.length();</span><br><span class="line">    List&lt;String&gt; arr = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span>(s.charAt(i) != <span class="string">&#x27; &#x27;</span>)&#123;</span><br><span class="line">            <span class="type">StringBuilder</span> <span class="variable">tmp</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">            <span class="keyword">while</span> (i &lt; n &amp;&amp; s.charAt(i)!=<span class="string">&#x27; &#x27;</span> )&#123;</span><br><span class="line">                tmp.append(s.charAt(i));</span><br><span class="line">                i++;</span><br><span class="line">            &#125;</span><br><span class="line">            arr.add(tmp.toString());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    Collections._reverse_(arr);</span><br><span class="line">    <span class="keyword">return</span> String._join_(<span class="string">&quot; &quot;</span>, arr);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="z-å­—å½¢å˜æ¢">1.22 <a
href="https://leetcode.cn/problems/zigzag-conversion/description/?envType=study-plan-v2&amp;envId=top-interview-150">Z
å­—å½¢å˜æ¢</a></h3>
<p>è¿™é“é¢˜ç›®çœ‹ä¸Šå»å¾ˆå¤æ‚ï¼Œå…¶å®æˆ‘ä»¬åªéœ€è¦è®°å½•åŸå­—ç¬¦ä¸²æ¯ä¸€ä¸ªå­—ç¬¦åº”è¯¥æ”¾åœ¨å“ªä¸€è¡Œå°±å¯ä»¥å®Œæˆè¿™ä¸ªä»»åŠ¡ã€‚æ¯”å¦‚</p>
<p><img src="https://ych-blog.oss-cn-guangzhou.aliyuncs.com/1.png" />
å¾ˆæ˜æ˜¾ï¼Œä¸‹æ ‡çš„è§„å¾‹å°±æ˜¯å…ˆé€’å¢åˆ°æŒ‡å®š numRows - 1ï¼Œç„¶åå†å‡å°‘åˆ°
0ã€‚æˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ï¼Œåˆ†åˆ«è®°å½•æ¯ä¸€è¡Œéœ€è¦è®°å½•çš„å­—ç¬¦ï¼Œæœ€ç»ˆå°†è¿™äº›å­—ç¬¦ä¸²æ•°ç»„æ‹¼æ¥èµ·æ¥ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªè¾¹ç•Œé—®é¢˜éœ€è¦æ³¨æ„ä¸€ä¸‹ï¼Œå°±æ˜¯å½“
numRows=1 æ—¶ï¼Œå®é™…ä¸Šå°±æ˜¯è¾“å‡ºåŸæ¥çš„å­—ç¬¦ä¸²è€Œå·²ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> String <span class="title function_">convert</span><span class="params">(String s, <span class="type">int</span> numRows)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(numRows == <span class="number">1</span>) <span class="keyword">return</span> s;</span><br><span class="line">    <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> s.length(), idx = <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span>[] index = <span class="keyword">new</span> <span class="title class_">int</span>[n];</span><br><span class="line">    <span class="type">boolean</span> <span class="variable">flag</span> <span class="operator">=</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span> (flag) index[i] = idx++;</span><br><span class="line">        <span class="keyword">else</span> index[i] = idx--;</span><br><span class="line">        <span class="keyword">if</span> (idx == numRows) &#123;</span><br><span class="line">            idx -= <span class="number">2</span>;</span><br><span class="line">            flag = <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (idx == -<span class="number">1</span>) &#123;</span><br><span class="line">            flag = <span class="literal">true</span>;</span><br><span class="line">            idx += <span class="number">2</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    StringBuilder[] arr = <span class="keyword">new</span> <span class="title class_">StringBuilder</span>[numRows];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; numRows; ++i) arr[i] = <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        arr[index[i]].append(s.charAt(i));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">StringBuilder</span> <span class="variable">res</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; numRows; ++i) res.append(arr[i]);</span><br><span class="line">    <span class="keyword">return</span> res.toString();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æ‰¾å‡ºå­—ç¬¦ä¸²ä¸­ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹çš„ä¸‹æ ‡">1.23 <a
href="https://leetcode.cn/problems/find-the-index-of-the-first-occurrence-in-a-string/description/">æ‰¾å‡ºå­—ç¬¦ä¸²ä¸­ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹çš„ä¸‹æ ‡</a></h3>
<p>è¿™é“é¢˜ç›®æ˜¯ KMP çš„æ¨¡æ¿é¢˜ç›®ï¼ŒæŠ„æ¨¡æ¿å³å¯</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">strStr</span><span class="params">(String haystack, String needle)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">m</span> <span class="operator">=</span> haystack.length(), n = needle.length();</span><br><span class="line">    <span class="type">char</span>[] s = <span class="keyword">new</span> <span class="title class_">char</span>[m + <span class="number">1</span>];</span><br><span class="line">    <span class="type">char</span>[] p = <span class="keyword">new</span> <span class="title class_">char</span>[n + <span class="number">1</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; m; ++i) s[i + <span class="number">1</span>] = haystack.charAt(i);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; ++i) p[i + <span class="number">1</span>] = needle.charAt(i);</span><br><span class="line">    <span class="type">int</span>[] next = <span class="keyword">new</span> <span class="title class_">int</span>[n + <span class="number">10</span>];</span><br><span class="line">    <span class="comment">// æ±‚Nextæ•°ç»„</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">2</span>, j = <span class="number">0</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        <span class="keyword">while</span> (j &gt; <span class="number">0</span> &amp;&amp; p[i] != p[j + <span class="number">1</span>]) j = next[j];</span><br><span class="line">        <span class="keyword">if</span> (p[i] == p[j + <span class="number">1</span>]) ++j;</span><br><span class="line">        next[i] = j;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// KMP</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>, j = <span class="number">0</span>; i &lt;= m; ++i) &#123;</span><br><span class="line">        <span class="keyword">while</span> (j &gt; <span class="number">0</span> &amp;&amp; s[i] != p[j + <span class="number">1</span>]) j = next[j];</span><br><span class="line">        <span class="keyword">if</span> (s[i] == p[j + <span class="number">1</span>]) ++j;</span><br><span class="line">        <span class="keyword">if</span> (j == n) <span class="keyword">return</span> i - j;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><br></p>
<h2 id="åŒæŒ‡é’ˆ">2. åŒæŒ‡é’ˆ</h2>
<h3 id="éªŒè¯å›æ–‡ä¸²">2.1 <a
href="https://leetcode.cn/problems/valid-palindrome/description/?envType=study-plan-v2&amp;envId=top-interview-150">éªŒè¯å›æ–‡ä¸²</a></h3>
<p>å­—ç¬¦ä¸²å¤„ç†çš„é¢˜ç›®ï¼Œè¿™é‡Œå¯ä»¥ç›´æ¥ç”¨æ­£åˆ™è¡¨è¾¾å¼å®Œæˆã€‚æˆ‘ä»¬åªéœ€è¦å®šä¹‰éœ€è¦ä¿ç•™å­—ç¬¦çš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œç„¶åå°†ä¸éœ€è¦çš„å­—ç¬¦æ›¿æ¢æˆç©ºå­—ç¬¦ä¸²ï¼Œç„¶åå°†å­—ç¬¦ä¸²æ•´ä½“è½¬æˆå°å†™ï¼Œéå†ä¸€åŠå­—ç¬¦ä¸²ï¼Œçœ‹çœ‹å¦ä¸€åŠå¯¹åº”ä½ç½®æ˜¯å¦åŒ¹é…å³å¯</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isPalindrome</span><span class="params">(String s)</span> &#123;</span><br><span class="line">    s = s.replaceAll(<span class="string">&quot;[^A-Za-z0-9]&quot;</span>, <span class="string">&quot;&quot;</span>).toLowerCase();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; s.length() / <span class="number">2</span>; ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span> (s.charAt(i) != s.charAt(s.length() - <span class="number">1</span> - i)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="åˆ¤æ–­å­åºåˆ—">2.2 <a
href="https://leetcode.cn/problems/is-subsequence/?envType=study-plan-v2&amp;envId=top-interview-150">åˆ¤æ–­å­åºåˆ—</a></h3>
<p>è¿™ä¸ªé¢˜ç›®ç›´æ¥ç”¨åŒæŒ‡é’ˆå°±èƒ½å®Œæˆï¼Œä¸€å±‚ for
å¾ªç¯éå†ç»™å®šä¸²ï¼Œå†å®šä¹‰ç›®æ ‡ä¸²ä¸‹æ ‡ï¼Œè‹¥å­—ç¬¦ç›¸åŒï¼Œåˆ™ç›®æ ‡ä¸²ä¸‹æ ‡å¾€åç§»åŠ¨ï¼›è‹¥åˆ°è¾¾ç›®æ ‡ä¸²æœ€åä¸€ä½ï¼Œåˆ™ç›´æ¥è¾“å‡ºã€‚éœ€è¦åˆ¤æ–­çš„è¾¹ç•Œæ˜¯ï¼Œå½“ä¸¤ä¸ªå­—ç¬¦ä¸²å­˜åœ¨æ˜¯ç©ºå­—ç¬¦ä¸²çš„æƒ…å†µ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isSubsequence</span><span class="params">(String s, String t)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(s.length() == <span class="number">0</span>) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">if</span>(t.length() == <span class="number">0</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">idx</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; t.length(); ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span> (t.charAt(i) == s.charAt(idx)) idx++;</span><br><span class="line">        <span class="keyword">if</span> (idx == s.length()) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ä¸¤æ•°ä¹‹å’Œ-â…±---è¾“å…¥æœ‰åºæ•°ç»„">2.3 <a
href="https://leetcode.cn/problems/two-sum-ii-input-array-is-sorted/description/">ä¸¤æ•°ä¹‹å’Œ
â…¡ - è¾“å…¥æœ‰åºæ•°ç»„</a></h3>
<p>è¿™ä¸ªæ˜¯ç»å…¸çš„åŒæŒ‡é’ˆé—®é¢˜ï¼Œå› ä¸ºå®ƒæ˜¯æœ‰åºæ•°ç»„ï¼Œæ‰€ä»¥åªéœ€è¦å®šä¹‰å¤´å’Œå°¾æ•°ç»„ï¼Œç„¶åå¾€ä¸­é—´é å°±èƒ½å®Œæˆè¿™é“é¢˜ç›®ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span>[] twoSum(<span class="type">int</span>[] numbers, <span class="type">int</span> target) &#123;</span><br><span class="line">    <span class="type">int</span>[] res = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">2</span>];</span><br><span class="line">    <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>, j = numbers.length - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (i &lt; j) &#123;</span><br><span class="line">        <span class="keyword">if</span> (numbers[i] + numbers[j] == target) &#123;</span><br><span class="line">            res[<span class="number">0</span>] = i + <span class="number">1</span>;</span><br><span class="line">            res[<span class="number">1</span>] = j + <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (numbers[i] + numbers[j] &lt; target) ++i;</span><br><span class="line">        <span class="keyword">else</span> --j;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ç››æœ€å¤šæ°´çš„å®¹å™¨">2.4 <a
href="https://leetcode.cn/problems/container-with-most-water/?envType=study-plan-v2&amp;envId=top-interview-150">ç››æœ€å¤šæ°´çš„å®¹å™¨</a></h3>
<p>æœ¨æ¡¶æ•ˆåº”ï¼Œæˆ‘ä»¬æœ€ç»ˆèƒ½ç››æœ€å¤šæ°´çš„å®¹å™¨å–å†³äºä¸¤æ ¹æŸ±å­ä¸­æœ€çŸ­çš„é‚£ä¸€æ ¹ï¼Œå¹¶ä¸”å–å†³äºä¸¤æ ¹æŸ±å­ä¹‹é—´çš„è·ç¦»ã€‚ä½¿ç”¨åŒæŒ‡é’ˆï¼Œå®šä¹‰å‰åä¸¤æ ¹æŸ±å­çš„ä½ç½®ï¼Œç„¶åé€šè¿‡è´ªå¿ƒçš„æ–¹æ³•ï¼Œå–å‡ºæœ€å¤§å€¼</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxArea</span><span class="params">(<span class="type">int</span>[] height)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> -<span class="number">1</span>, i = <span class="number">0</span>, j = height.length - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (i &lt; j) &#123;</span><br><span class="line">        res = Math.max(Math.min(height[i], height[j]) * (j - i), res);</span><br><span class="line">        <span class="keyword">if</span> (height[i] &lt; height[j]) ++i;</span><br><span class="line">        <span class="keyword">else</span> --j;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ä¸‰æ•°ä¹‹å’Œ">2.5 <a
href="https://leetcode.cn/problems/3sum/?envType=study-plan-v2&amp;envId=top-interview-150">ä¸‰æ•°ä¹‹å’Œ</a></h3>
<p>è¿™é“é¢˜ç›®æˆ‘ä¸»è¦ç”¨åˆ°ä¸¤æ•°ä¹‹å’Œçš„æ€æƒ³ï¼Œä¸‰æ•°ä¹‹å’Œä¸º
0ï¼Œåªè¦æŠŠç¬¬ä¸‰ä¸ªæ•°ç¡®å®šäº†ï¼Œå®é™…é—®é¢˜å°±å˜æˆäº†ä¸¤æ•°ä¹‹å’Œé—®é¢˜ã€‚å› ä¸ºä¸¤æ•°ä¹‹å’Œç»™çš„æ˜¯æœ‰åºæ•°ç»„ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œéœ€è¦å…ˆè¿›è¡Œä¸€ä¸ªæ’åºæ“ä½œã€‚ç„¶åæšä¸¾ç¬¬ä¸€ä¸ªæ•°ï¼Œå†ç”¨ä¸¤æ•°ä¹‹å’Œçš„æ–¹æ³•æ±‚å‡ºç¬¬äºŒä¸‰ä¸ªæ•°å‡ºæ¥ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> List&lt;List&lt;Integer&gt;&gt; <span class="title function_">threeSum</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">    Arrays.sort(nums);</span><br><span class="line">    List&lt;List&lt;Integer&gt;&gt; res = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> <span class="number">0</span>; k &lt; nums.length - <span class="number">2</span>; ++k) &#123;</span><br><span class="line">        <span class="keyword">if</span> (k &gt; <span class="number">0</span> &amp;&amp; nums[k] == nums[k - <span class="number">1</span>]) <span class="keyword">continue</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">target</span> <span class="operator">=</span> <span class="number">0</span> - nums[k];</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> k + <span class="number">1</span>, j = nums.length - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span> (i &lt; j) &#123;</span><br><span class="line">            <span class="keyword">if</span> (nums[i] + nums[j] == target) &#123;</span><br><span class="line">                res.add(Arrays.asList(nums[k], nums[i], nums[j]));</span><br><span class="line">                <span class="keyword">while</span> (i &lt; j &amp;&amp; nums[i] == nums[i + <span class="number">1</span>]) ++i;</span><br><span class="line">                <span class="keyword">while</span> (i &lt; j &amp;&amp; nums[j] == nums[j - <span class="number">1</span>]) --j;</span><br><span class="line">                ++i;</span><br><span class="line">                --j;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (nums[i] + nums[j] &lt; target) ++i;</span><br><span class="line">            <span class="keyword">else</span> --j;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><br></p>
<h2 id="æ»‘åŠ¨çª—å£">3. æ»‘åŠ¨çª—å£</h2>
<h3 id="é•¿åº¦æœ€å°çš„å­æ•°ç»„">3.1 <a
href="https://leetcode.cn/problems/minimum-size-subarray-sum/description/?envType=study-plan-v2&amp;envId=top-interview-150">é•¿åº¦æœ€å°çš„å­æ•°ç»„</a></h3>
<p>è¿™é“é¢˜ç›®ç”¨åˆ°äº†å‰åæ»‘åŠ¨æŒ‡é’ˆå’Œå‰ç¼€å’Œçš„åŸç†ï¼Œè®¾å®šä¸€ä¸ªå‰åæŒ‡é’ˆå’Œä¸€ä¸ªè®°å½•å‰ç¼€å’Œçš„å˜é‡ã€‚å‰ç¼€å’Œçš„å˜é‡è®°å½•å‰åæŒ‡é’ˆä¹‹é—´çš„å‰ç¼€å’Œï¼Œå½“å‰ç¼€å’Œ
&gt;=target æ—¶ï¼Œæˆ‘ä»¬å°±è®°å½•è·ç¦»</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">minSubArrayLen</span><span class="params">(<span class="type">int</span> target, <span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> Integer.MAX_VALUE, l = <span class="number">0</span>, r = <span class="number">0</span>, sum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (r &lt; nums.length) &#123;</span><br><span class="line">        sum += nums[r++];</span><br><span class="line">        <span class="keyword">while</span> (sum &gt;= target) &#123;</span><br><span class="line">            res = Math.min(r - l, res);</span><br><span class="line">            sum -= nums[l++];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res == Integer.MAX_VALUE ? <span class="number">0</span> : res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²">3.2 <a
href="https://leetcode.cn/problems/longest-substring-without-repeating-characters/description/">æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²</a></h3>
<p>æœ‰ç‚¹åƒåŒæŒ‡é’ˆçš„é¢˜ç›®ï¼Œè®°å½•ä¸€å‰ä¸€åä¸¤ä¸ªæŒ‡é’ˆï¼Œå½“å‰é¢çš„æŒ‡é’ˆéå†åˆ°ä¸€ä¸ªå­—ç¬¦é‡å¤å‡ºç°ä¸¤æ¬¡æ—¶ï¼Œåé¢çš„æŒ‡é’ˆå¾€å‰ç§»åŠ¨ï¼ŒåŒæ—¶å‡å°‘åé¢æŒ‡é’ˆæ‰€æŒ‡å­—ç¬¦å‡ºç°çš„æ¬¡æ•°ï¼ŒçŸ¥é“å‰é¢æŒ‡é’ˆæ‰€æŒ‡çš„å­—ç¬¦é‡å¤å‡ºç°æ¬¡æ•°
&lt;2 åï¼Œå†ç§»åŠ¨å‰é¢çš„æŒ‡é’ˆã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">lengthOfLongestSubstring</span><span class="params">(String s)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(s.length() == <span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span>[] cnts = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">100000</span>];</span><br><span class="line">    Arrays.fill(cnts,<span class="number">0</span>);</span><br><span class="line">    <span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>, j = <span class="number">0</span>; i &lt; s.length(); ++i) &#123;</span><br><span class="line">        cnts[s.charAt(i)]++;</span><br><span class="line">        <span class="keyword">while</span> (cnts[s.charAt(i)] &gt;= <span class="number">2</span>) &#123;</span><br><span class="line">            cnts[s.charAt(j)]--;</span><br><span class="line">            ++j;</span><br><span class="line">        &#125;</span><br><span class="line">        res = Math.max(res,i-j+<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æœ€é•¿å›æ–‡å­ä¸²">3.3 <a
href="https://leetcode.cn/problems/longest-palindromic-substring/description/">æœ€é•¿å›æ–‡å­ä¸²</a></h3>
<p>ä¸¤ç§è§£é¢˜æ€è·¯ï¼Œä¸€ç§æ˜¯åˆ©ç”¨åŠ¨æ€è§„åˆ’ï¼Œå¦å¤–ä¸€ç§æ˜¯åˆ©ç”¨åŒæŒ‡é’ˆã€‚æˆ‘ä»¬ä¸€ä¸€è®²è§£</p>
<p>â€”â€”åŠ¨æ€è§„åˆ’ï¼ˆäº”éƒ¨æ›²ï¼‰</p>
<p><img
src="https://ych-blog.oss-cn-guangzhou.aliyuncs.com/db927238-7243-42da-b265-cf3c5e695c92.png" />
<img
src="https://ych-blog.oss-cn-guangzhou.aliyuncs.com/82efdcc2-127a-476b-ba29-579c97b65486.png" /></p>
<p>å®ç°ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> String <span class="title function_">longestPalindrome</span><span class="params">(String s)</span> &#123;</span><br><span class="line">    <span class="type">boolean</span>[][] dp = <span class="keyword">new</span> <span class="title class_">boolean</span>[s.length() + <span class="number">10</span>][s.length() + <span class="number">10</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; dp.length; ++i) <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; dp[<span class="number">0</span>].length; ++j) dp[i][j] = <span class="literal">false</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">    <span class="type">String</span> <span class="variable">res</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> s.length() - <span class="number">1</span>; i &gt;= <span class="number">0</span>; --i) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> i; j &lt; s.length(); ++j) &#123;</span><br><span class="line">            <span class="keyword">if</span> (s.charAt(j) == s.charAt(i) &amp;&amp; (j - i &lt;= <span class="number">1</span> || dp[i + <span class="number">1</span>][j - <span class="number">1</span>])) dp[i][j] = <span class="literal">true</span>;</span><br><span class="line">            <span class="keyword">if</span> (dp[i][j] &amp;&amp; len &lt; j - i + <span class="number">1</span>) &#123;</span><br><span class="line">                len = j - i + <span class="number">1</span>;</span><br><span class="line">                res = s.substring(i, j + <span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>â€”â€”åŒæŒ‡é’ˆ</p>
<p>ä»ä¸€ä¸ªå­—ç¬¦æˆ–è€…ä¸¤ä¸ªå­—ç¬¦å¼€å§‹ï¼Œåˆ†åˆ«å‘å·¦å³ä¸¤è¾¹æ‰©æ•£ï¼Œç›´åˆ°ä¸å†æ˜¯å›æ–‡å­—ç¬¦ä¸²ä¸ºæ­¢ï¼Œå®ç°ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">left</span> <span class="operator">=</span> <span class="number">0</span>, right = <span class="number">0</span>, len = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">longestPalindrome</span><span class="params">(String s)</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; s.length(); ++i) &#123;</span><br><span class="line">        extend(s, i, i);</span><br><span class="line">        extend(s, i, i + <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> s.substring(left, right + <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">extend</span><span class="params">(String str, <span class="type">int</span> l, <span class="type">int</span> r)</span> &#123;</span><br><span class="line">    <span class="keyword">while</span> (l &gt;= <span class="number">0</span> &amp;&amp; r &lt; str.length() &amp;&amp; str.charAt(l) == str.charAt(r)) &#123;</span><br><span class="line">        <span class="keyword">if</span> (len &lt; r - l + <span class="number">1</span>) &#123;</span><br><span class="line">            len = r - l + <span class="number">1</span>;</span><br><span class="line">            left = l;</span><br><span class="line">            right = r;</span><br><span class="line">        &#125;</span><br><span class="line">        --l;</span><br><span class="line">        ++r;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="å›æ–‡å­ä¸²">3.4 <a
href="https://leetcode.cn/problems/palindromic-substrings/description/">å›æ–‡å­ä¸²</a></h3>
<p>åŒæŒ‡é’ˆç›´æ¥æŠŠé¢˜ç›®ç§’äº†ï¼Œä»ä¸€ä¸ªå­—ç¬¦æˆ–è€…ä¸¤ä¸ªå­—ç¬¦å¼€å§‹ï¼Œåˆ†åˆ«å‘å·¦å³ä¸¤è¾¹æ‰©æ•£ï¼Œç›´åˆ°ä¸å†æ˜¯å›æ–‡å­—ç¬¦ä¸²ä¸ºæ­¢ã€‚æ‰©æ•£ä¹‹åå¦‚æœæ˜¯å›æ–‡ï¼Œç»“æœæ•°å°±
+1</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">countSubstrings</span><span class="params">(String s)</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; s.length(); ++i) &#123;</span><br><span class="line">        extendStr(s, i, i);</span><br><span class="line">        extendStr(s, i, i + <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">extendStr</span><span class="params">(String str, <span class="type">int</span> l, <span class="type">int</span> r)</span> &#123;</span><br><span class="line">    <span class="keyword">while</span> (l&gt;=<span class="number">0</span> &amp;&amp; r&lt;str.length() &amp;&amp; str.charAt(l) == str.charAt(r))&#123;</span><br><span class="line">        res++;</span><br><span class="line">        --l;  ++r;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æ‰¾åˆ°å­—ç¬¦ä¸²ä¸­æ‰€æœ‰å­—æ¯å¼‚ä½è¯">3.5 <a
href="https://leetcode.cn/problems/find-all-anagrams-in-a-string/">æ‰¾åˆ°å­—ç¬¦ä¸²ä¸­æ‰€æœ‰å­—æ¯å¼‚ä½è¯</a></h3>
<p>æ»‘åŠ¨çª—å£é¢˜ç›®ï¼Œåœ¨åŸå­—ç¬¦ä¸² s ä¸Šè¿›è¡Œæ»‘åŠ¨ï¼Œæ»‘åŠ¨çª—å£çš„å¤§å°æ˜¯ç»™å®šå­—ç¬¦ä¸² p
çš„é•¿åº¦ï¼Œç„¶åè®¾å®šä¸€ä¸ªæ•°ç»„ï¼Œè®°å½•æ»‘åŠ¨çª—å£ä¸­å­—ç¬¦å‡ºç°çš„ä¸ªæ•°ï¼Œå†è®¾å®šä¸€ä¸ªå˜é‡å€¼è®°å½•æ»‘åŠ¨çª—å£å†…çš„å­—æ¯å’Œç»™å®šå­—ç¬¦ä¸²
p æ˜¯å¦æœ‰å·®åˆ«ï¼Œå¦‚æœæ²¡æœ‰å·®åˆ«ï¼Œåˆ™å°†å¯¹åº”çš„ä¸‹æ ‡è®°å½•ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> List&lt;Integer&gt; <span class="title function_">findAnagrams</span><span class="params">(String s, String p)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">sLen</span> <span class="operator">=</span> s.length(), pLen = p.length(), differ = <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span>[] cnts = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">30000</span>];</span><br><span class="line">    Arrays.fill(cnts, <span class="number">0</span>);</span><br><span class="line">    List&lt;Integer&gt; res = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">if</span> (pLen &gt; sLen) <span class="keyword">return</span> res;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; pLen; ++i) &#123;</span><br><span class="line">        cnts[s.charAt(i) - <span class="string">&#x27;a&#x27;</span>]++;</span><br><span class="line">        cnts[p.charAt(i) - <span class="string">&#x27;a&#x27;</span>]--;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">26</span>; ++i) <span class="keyword">if</span> (cnts[i] != <span class="number">0</span>) differ++;</span><br><span class="line">    <span class="keyword">if</span> (differ == <span class="number">0</span>) res.add(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; sLen - pLen; ++i) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">ch</span> <span class="operator">=</span> s.charAt(i) - <span class="string">&#x27;a&#x27;</span>;</span><br><span class="line">        <span class="keyword">if</span> (cnts[ch] == <span class="number">1</span>) &#123;</span><br><span class="line">            --differ;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (cnts[ch] == <span class="number">0</span>) &#123;</span><br><span class="line">            ++differ;</span><br><span class="line">        &#125;</span><br><span class="line">        --cnts[ch];</span><br><span class="line">        ch = s.charAt(i + pLen) - <span class="string">&#x27;a&#x27;</span>;</span><br><span class="line">        <span class="keyword">if</span> (cnts[ch] == -<span class="number">1</span>) &#123;</span><br><span class="line">            --differ;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (cnts[ch] == <span class="number">0</span>) &#123;</span><br><span class="line">            ++differ;</span><br><span class="line">        &#125;</span><br><span class="line">        ++cnts[ch];</span><br><span class="line">        <span class="keyword">if</span> (differ == <span class="number">0</span>) res.add(i + <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ä¸²è”æ‰€æœ‰å•è¯çš„å­ä¸²">3.6 <a
href="https://leetcode.cn/problems/substring-with-concatenation-of-all-words/description/?envType=study-plan-v2&amp;envId=top-interview-150">ä¸²è”æ‰€æœ‰å•è¯çš„å­ä¸²</a></h3>
<p>è¿™é“é¢˜ç›®è·Ÿä¸Šé¢é‚£é“é¢˜ç›®å¾ˆåƒï¼Œä½†åˆä¸å¤ªä¸€æ ·ã€‚ä¸Šé¢é‚£é“é¢˜ç›®æ˜¯å­—æ¯ï¼Œè¿™é¢˜ç›®æ˜¯å•è¯ã€‚å®˜æ–¹çš„é¢˜è§£å±å®æ²¡çœ‹æ‡‚ï¼Œæ”¾ä¸€ç‰ˆæœ€åä¸€ä¸ªæ ·ä¾‹ä¼šè¶…æ—¶çš„ç‰ˆæœ¬çš„ï¼Œåç»­å†ä¼˜åŒ–ä¸€ä¸‹</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> List&lt;Integer&gt; <span class="title function_">findSubstring</span><span class="params">(String s, String[] words)</span> &#123;</span><br><span class="line">    List&lt;Integer&gt; res = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    Map&lt;String, Integer&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    <span class="type">int</span> <span class="variable">sLen</span> <span class="operator">=</span> s.length(), listLen = words.length, wordLen = words[<span class="number">0</span>].length(), totalLen = wordLen * listLen;</span><br><span class="line">    <span class="keyword">for</span> (String word : words) map.put(word, map.getOrDefault(word, <span class="number">0</span>) + <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; sLen - totalLen + <span class="number">1</span>; ++i) &#123;</span><br><span class="line">        Map&lt;String, Integer&gt; tmpMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        <span class="type">String</span> <span class="variable">tmp</span> <span class="operator">=</span> s.substring(i, i + totalLen);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> <span class="number">0</span>; k &lt; totalLen; k += wordLen) &#123;</span><br><span class="line">            tmpMap.put(tmp.substring(k, k + wordLen), tmpMap.getOrDefault(tmp.substring(k, k + wordLen), <span class="number">0</span>) + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (tmpMap.equals(map)) &#123;</span><br><span class="line">            res.add(i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><br></p>
<h2 id="çŸ©é˜µ">4. çŸ©é˜µ</h2>
<h3 id="æœ‰æ•ˆæ•°ç‹¬">4.1 <a
href="https://leetcode.cn/problems/valid-sudoku/description/?envType=study-plan-v2&amp;envId=top-interview-150">æœ‰æ•ˆæ•°ç‹¬</a></h3>
<p>è¿™é“é¢˜ç›®æœ‰ç‚¹åƒå…«çš‡åï¼Œä¸å…«çš‡åçš„åŒºåˆ«æ˜¯ï¼Œç°åœ¨æ˜¯å±€é™äºä¸€ä¸ª 9<em>9
çš„çŸ©é˜µä¸­ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ª 3</em>3<em>9 çš„çŸ©é˜µï¼ŒæŠŠåŸæ¥ 9</em>9
çš„çŸ©é˜µåˆ†å‰²æˆè¿™æ ·å­ï¼Œå…¶ä¸­æ¯ä¸ª 9 ä»£è¡¨è®°å½•ä¸€ä¸ª 3<em>3
çŸ©é˜µä¸­çš„æ•°å‡ºç°çš„æ¬¡æ•°ã€‚ç°åœ¨é—®é¢˜åœ¨äºï¼Œæˆ‘ä»¬ç°åœ¨æœ‰æ•°åœ¨ 9</em>9 çŸ©é˜µä¸­çš„åæ ‡
(i,j)ï¼Œ æ€ä¹ˆå®šä½åˆ°è‡ªå·±ç‹¬ç«‹ 3*3 çŸ©é˜µä¸­ï¼Ÿæˆ‘ä»¬ä¼šå‘ç°
(i/3,j/3)ï¼Œä¸‹é¢è¿™äº›åæ ‡ (0,0) (0,1) (0,2) (1,0) (1,1) (1,2) (2,0) (2,1)
(2,2) åˆ†åˆ«å¯¹åº”æˆ‘ä»¬ä¸‹é¢è¿™ 9 ä¸ªçŸ©é˜µçš„ä½ç½® <img
src="https://ych-blog.oss-cn-guangzhou.aliyuncs.com/20241214202532.png" />
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isValidSudoku</span><span class="params">(<span class="type">char</span>[][] board)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> board.length;</span><br><span class="line">    <span class="type">int</span>[][] cols = <span class="keyword">new</span> <span class="title class_">int</span>[n][n], rows = <span class="keyword">new</span> <span class="title class_">int</span>[n][n];</span><br><span class="line">    <span class="type">int</span>[][][] nine = <span class="keyword">new</span> <span class="title class_">int</span>[n][n][<span class="number">9</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; n; ++j) &#123;</span><br><span class="line">            <span class="keyword">if</span>(board[i][j] == <span class="string">&#x27;.&#x27;</span>) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="type">int</span> <span class="variable">idx</span> <span class="operator">=</span> board[i][j] - <span class="string">&#x27;0&#x27;</span> - <span class="number">1</span>;</span><br><span class="line">            cols[i][idx]++;</span><br><span class="line">            rows[j][idx]++;</span><br><span class="line">            nine[i / <span class="number">3</span>][j / <span class="number">3</span>][idx]++;</span><br><span class="line">            <span class="keyword">if</span> (cols[i][idx] &gt; <span class="number">1</span> || rows[j][idx] &gt; <span class="number">1</span> || nine[i / <span class="number">3</span>][j / <span class="number">3</span>][idx] &gt; <span class="number">1</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="èºæ—‹çŸ©é˜µ">4.2 <a
href="https://leetcode.cn/problems/spiral-matrix/description/?envType=study-plan-v2&amp;envId=top-interview-150">èºæ—‹çŸ©é˜µ</a></h3>
<p>è¿™ä¸ªå°±æ˜¯ä¸€ä¸ªæ¨¡æ‹Ÿé¢˜ï¼Œæˆ‘ä»¬æ ¹æ®é¢˜ç›®ï¼Œå…ˆå¾€å³ï¼Œå†å¾€ä¸‹ï¼Œå†å¾€å·¦ï¼Œå†å¾€ä¸Šã€‚éœ€è¦å…ˆå®šä¹‰æ–¹å‘å¯¼è‡´çš„åæ ‡å˜æ›´ï¼Œç„¶åå®šä¹‰èµ°åˆ°çš„åæ ‡ï¼Œæˆ‘ä»¬å…ˆå°†åæ ‡å¯¹åº”ä½ç½®ä¸Šçš„æ•°åŠ å…¥åˆ°ç»“æœä¸­ï¼Œç„¶åå†è¯•æ¢æ€§çš„å¾€ä¸‹èµ°ä¸€æ­¥ï¼Œçœ‹ä¼šä¸ä¼šè¶Šç•Œã€‚è¿™é‡Œæœ‰ä¸ªé—®é¢˜éœ€è¦æ³¨æ„ä¸€ä¸‹ï¼Œæˆ‘ä»¬èµ°è¿‡çš„ç‚¹ä¸èƒ½å†èµ°ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å®šä¹‰ä¸€ä¸ªè®¿é—®çš„
boolean
æ•°ç»„ï¼Œè¡¨ç¤ºä½ç½®æ˜¯å¦è¢«è®¿é—®ã€‚å½“æˆ‘ä»¬è¯•æ¢æ€§çš„å¾€ä¸‹èµ°ä¸€æ­¥å‘ç°èµ°ä¸ä¸‹å»çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±éœ€è¦å˜æ›´æ–¹å‘äº†ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> List&lt;Integer&gt; <span class="title function_">spiralOrder</span><span class="params">(<span class="type">int</span>[][] matrix)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> matrix.length, m = matrix[<span class="number">0</span>].length;</span><br><span class="line">    List&lt;Integer&gt; res = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">final</span> <span class="type">int</span>[][] direction = <span class="keyword">new</span> <span class="title class_">int</span>[][]&#123;&#123;<span class="number">0</span>, <span class="number">1</span>&#125;, &#123;<span class="number">1</span>, <span class="number">0</span>&#125;, &#123;<span class="number">0</span>, -<span class="number">1</span>&#125;, &#123;-<span class="number">1</span>, <span class="number">0</span>&#125;&#125;;</span><br><span class="line">    <span class="type">boolean</span>[][] vis = <span class="keyword">new</span> <span class="title class_">boolean</span>[n][m];</span><br><span class="line">    <span class="type">int</span> <span class="variable">dir</span> <span class="operator">=</span> <span class="number">0</span>, colIdx = <span class="number">0</span>, rowIdx = <span class="number">0</span>, newCol = <span class="number">0</span>, newRow = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n * m; ++i) &#123;</span><br><span class="line">        res.add(matrix[colIdx][rowIdx]);</span><br><span class="line">        vis[colIdx][rowIdx] = <span class="literal">true</span>;</span><br><span class="line">        newCol = colIdx + direction[dir][<span class="number">0</span>];</span><br><span class="line">        newRow = rowIdx + direction[dir][<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">if</span> (newCol &lt; <span class="number">0</span> || newRow &lt; <span class="number">0</span> || newCol &gt;= n || newRow &gt;= m || vis[newCol][newRow]) &#123;</span><br><span class="line">            dir = (dir + <span class="number">1</span>) % <span class="number">4</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        colIdx = colIdx + direction[dir][<span class="number">0</span>];</span><br><span class="line">        rowIdx = rowIdx + direction[dir][<span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æ—‹è½¬å›¾åƒ">4.3 <a
href="https://leetcode.cn/problems/rotate-image/?envType=study-plan-v2&amp;envId=top-interview-150">æ—‹è½¬å›¾åƒ</a></h3>
<p>è¿™ä¸ªé¢˜ç›®æ˜¯æ•°å­—ä½ç½®å˜æ¢çš„é¢˜ç›®ï¼Œæˆ‘ä»¬é€šè¿‡è§‚å¯Ÿå¯ä»¥å‘ç°ï¼Œæ—‹è½¬åçš„æ•°å­—ä½ç½®ï¼Œå…¶å®æ˜¯åŸæ¥çŸ©é˜µå…ˆè¿›è¡Œä¸Šä¸‹ç¿»è½¬ï¼Œç„¶åï¼Œå†å°†ä¸‹ä¸‰è§’çš„æ•°è·Ÿå…¶åæ ‡ç›¸åçš„æ•°è¿›è¡Œäº¤æ¢ã€‚æ¯”å¦‚
(i,j) æ¢åˆ° (j,i)</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">rotate</span><span class="params">(<span class="type">int</span>[][] matrix)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> matrix.length;</span><br><span class="line">    <span class="comment">// å…ˆä¸Šä¸‹åè½¬</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n / <span class="number">2</span>; ++i) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; n; ++j) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">tmp</span> <span class="operator">=</span> matrix[i][j];</span><br><span class="line">            matrix[i][j] = matrix[n - <span class="number">1</span> - i][j];</span><br><span class="line">            matrix[n - <span class="number">1</span> - i][j] = tmp;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// ç„¶åå†å°†ä¸‹ä¸‰è§’çš„æ•°ï¼Œä¸æ¨ªçºµåæ ‡ç›¸åçš„ä½ç½®çš„æ•°äº¤æ¢ä½ç½®</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; i; ++j) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">tmp</span> <span class="operator">=</span> matrix[i][j];</span><br><span class="line">            matrix[i][j] = matrix[j][i];</span><br><span class="line">            matrix[j][i] = tmp;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="çŸ©é˜µç½®é›¶">4.4 <a
href="https://leetcode.cn/problems/set-matrix-zeroes/?envType=study-plan-v2&amp;envId=top-interview-150">çŸ©é˜µç½®é›¶</a></h3>
<p>ç›´æ¥è®°å½•åŸçŸ©é˜µæ•°å€¼ä¸º 0
çš„ä½ç½®ï¼Œç”¨åˆ—è¡¨å­˜å‚¨å¯¹åº”çš„(i,j)ï¼Œç„¶åéå†è®°å½•çš„åˆ—è¡¨ï¼Œå°±èƒ½å®ç°é¢˜ç›®è¦æ±‚çš„æ•ˆæœ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setZeroes</span><span class="params">(<span class="type">int</span>[][] matrix)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> matrix.length, m = matrix[<span class="number">0</span>].length;</span><br><span class="line">    List&lt;List&lt;Integer&gt;&gt; coordinates = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; ++i)</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; m; ++j) <span class="keyword">if</span> (matrix[i][j] == <span class="number">0</span>) coordinates.add(Arrays.asList(i, j));</span><br><span class="line">    <span class="keyword">for</span> (List&lt;Integer&gt; coordinate : coordinates) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">row</span> <span class="operator">=</span> coordinate.get(<span class="number">0</span>), col = coordinate.get(<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; ++i) matrix[i][col] = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; m; ++j) matrix[row][j] = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ç”Ÿå‘½æ¸¸æˆ">4.5 <a
href="https://leetcode.cn/problems/game-of-life/?envType=study-plan-v2&amp;envId=top-interview-150">ç”Ÿå‘½æ¸¸æˆ</a></h3>
<p>æ¨¡æ‹Ÿé—®é¢˜ï¼Œæ–°å»ºä¸€ä¸ªæ–°åœ°å›¾ï¼Œç„¶åæ ¹æ®è§„åˆ™åœ¨è€åœ°å›¾éå†ï¼Œå¹¶å¯¹æ–°åœ°å›¾èµ‹å€¼ã€‚æœ€åæŠŠæ–°åœ°å›¾çš„æ•°å€¼å¤åˆ¶ç»™è€åœ°å›¾å³å¯</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">gameOfLife</span><span class="params">(<span class="type">int</span>[][] board)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> board.length, m = board[<span class="number">0</span>].length;</span><br><span class="line">    <span class="keyword">final</span> <span class="type">int</span>[][] direction = <span class="keyword">new</span> <span class="title class_">int</span>[][]&#123;&#123;<span class="number">0</span>, <span class="number">1</span>&#125;, &#123;<span class="number">1</span>, <span class="number">1</span>&#125;, &#123;<span class="number">1</span>, <span class="number">0</span>&#125;, &#123;<span class="number">1</span>, -<span class="number">1</span>&#125;, &#123;<span class="number">0</span>, -<span class="number">1</span>&#125;, &#123;-<span class="number">1</span>, -<span class="number">1</span>&#125;, &#123;-<span class="number">1</span>, <span class="number">0</span>&#125;, &#123;-<span class="number">1</span>, <span class="number">1</span>&#125;&#125;;</span><br><span class="line">    <span class="type">int</span>[][] newBoard = <span class="keyword">new</span> <span class="title class_">int</span>[n][m];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; m; ++j) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">cnt</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> <span class="number">0</span>; k &lt; direction.length; ++k) &#123;</span><br><span class="line">                <span class="type">int</span> <span class="variable">row</span> <span class="operator">=</span> i + direction[k][<span class="number">0</span>], col = j + direction[k][<span class="number">1</span>];</span><br><span class="line">                <span class="keyword">if</span> (row &lt; <span class="number">0</span> || row &gt;= n || col &lt; <span class="number">0</span> || col &gt;= m) <span class="keyword">continue</span>;</span><br><span class="line">                <span class="keyword">if</span>(board[row][col] == <span class="number">1</span>) cnt++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// ç¬¬ä¸€ç§æƒ…å†µ</span></span><br><span class="line">            <span class="keyword">if</span>(board[i][j] == <span class="number">1</span> &amp;&amp; cnt &lt; <span class="number">2</span>) newBoard[i][j] = <span class="number">0</span>;</span><br><span class="line">            <span class="comment">// ç¬¬äºŒç§æƒ…å†µ</span></span><br><span class="line">            <span class="keyword">if</span>(board[i][j] == <span class="number">1</span> &amp;&amp; (cnt == <span class="number">2</span> || cnt == <span class="number">3</span> )) newBoard[i][j] = <span class="number">1</span>;</span><br><span class="line">            <span class="comment">// ç¬¬ä¸‰ç§æƒ…å†µ</span></span><br><span class="line">            <span class="keyword">if</span>(board[i][j] == <span class="number">1</span> &amp;&amp; cnt &gt; <span class="number">3</span>) newBoard[i][j] = <span class="number">0</span>;</span><br><span class="line">            <span class="comment">// ç¬¬å››ç§æƒ…å†µ</span></span><br><span class="line">            <span class="keyword">if</span>(board[i][j] == <span class="number">0</span> &amp;&amp; cnt == <span class="number">3</span>) newBoard[i][j] = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i&lt; n;++i) <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j&lt;m;++j) board[i][j] = newBoard[i][j];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><br></p>
<h2 id="å“ˆå¸Œè¡¨">5. å“ˆå¸Œè¡¨</h2>
<h3 id="èµé‡‘ä¿¡">5.1 <a
href="https://leetcode.cn/problems/ransom-note/description/?envType=study-plan-v2&amp;envId=top-interview-150">èµé‡‘ä¿¡</a></h3>
<p>è¿™é“é¢˜ç›®åªéœ€è¦ç”¨æ¡¶çš„æ€è·¯ï¼Œè®°å½• <code>magazine</code>
æ¯ä¸ªå­—ç¬¦å‡ºç°çš„æ¬¡æ•°ï¼Œç„¶åå†éå† <code>ransomNote</code>
çœ‹å‡ºç°å­—ç¬¦æ¬¡æ•°æ˜¯å¦è¶…è¿‡ <code>magazine</code> å­—ç¬¦å‡ºç°çš„æ¬¡æ•°å³å¯</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">canConstruct</span><span class="params">(String ransomNote, String magazine)</span> &#123;</span><br><span class="line">    <span class="type">int</span>[] magazineCharCnt = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">26</span>];</span><br><span class="line">    <span class="keyword">for</span>(Character ch : magazine.toCharArray()) magazineCharCnt[ch - <span class="string">&#x27;a&#x27;</span>]++;</span><br><span class="line">    <span class="keyword">for</span>(Character ch: ransomNote.toCharArray()) &#123;</span><br><span class="line">        magazineCharCnt[ch - <span class="string">&#x27;a&#x27;</span>]--;</span><br><span class="line">        <span class="keyword">if</span>(magazineCharCnt[ch - <span class="string">&#x27;a&#x27;</span>] &lt; <span class="number">0</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="åŒæ„å­—ç¬¦ä¸²">5.2 <a
href="https://leetcode.cn/problems/isomorphic-strings/?envType=study-plan-v2&amp;envId=top-interview-150">åŒæ„å­—ç¬¦ä¸²</a></h3>
<p>å®šä¹‰ä¸¤ä¸ª Hash æ˜ å°„å°±èƒ½è§£å†³é—®é¢˜</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isIsomorphic</span><span class="params">(String s, String t)</span> &#123;</span><br><span class="line">    Map&lt;Character, Character&gt; lTor = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    Map&lt;Character,Character&gt; rTol = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>;i&lt;s.length();i++) &#123;</span><br><span class="line">        <span class="keyword">if</span>(lTor.get(s.charAt(i))!=<span class="literal">null</span> &amp;&amp; lTor.get(s.charAt(i)) != t.charAt(i)) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">if</span>(rTol.get(t.charAt(i))!= <span class="literal">null</span> &amp;&amp; rTol.get(t.charAt(i)) != s.charAt(i)) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        lTor.put(s.charAt(i), t.charAt(i));</span><br><span class="line">        rTol.put(t.charAt(i), s.charAt(i));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="å•è¯è§„å¾‹">5.3 <a
href="https://leetcode.cn/problems/word-pattern/?envType=study-plan-v2&amp;envId=top-interview-150">å•è¯è§„å¾‹</a></h3>
<p>ä¸ä¸Šä¸€é“é¢˜ç›®æ˜¯ä¸€æ ·çš„ï¼Œåªéœ€è¦å°†å­—ç¬¦ä¸²æŒ‰ç…§ç©ºæ ¼åˆ‡åˆ†æˆå•è¯ï¼Œå†å®šä¹‰ä¸¤ä¸ª
Hash
æ˜ å°„å°±èƒ½è§£å†³é—®é¢˜ã€‚ä¸è¿‡è¿™é‡Œéœ€è¦æ³¨æ„ä¸€ä¸‹ç»™å®šå•è¯çš„é•¿åº¦åº”è¯¥å’Œåˆ‡åˆ†å‡ºæ¥çš„å•è¯åˆ—è¡¨çš„é•¿åº¦ä¸€è‡´ï¼Œä¸ç„¶ä¼šå‡ºç°ä»¥ä¸‹è¿™ç§æƒ…å†µã€‚</p>
<p><img
src="https://ych-blog.oss-cn-guangzhou.aliyuncs.com/20241214202615.png" /></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">wordPattern</span><span class="params">(String pattern, String s)</span> &#123;</span><br><span class="line">    Map&lt;Character, String&gt; ltoR = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    Map&lt;String, Character&gt; rtoL = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    String[] strList = s.split(<span class="string">&quot; &quot;</span>);</span><br><span class="line">    <span class="keyword">if</span>(strList.length != pattern.length()) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; pattern.length(); ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span>(ltoR.get(pattern.charAt(i))!=<span class="literal">null</span> &amp;&amp; !ltoR.get(pattern.charAt(i)).equals(strList[i])) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">if</span>(rtoL.get(strList[i])!=<span class="literal">null</span> &amp;&amp; !rtoL.get(strList[i]).equals(pattern.charAt(i))) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        ltoR.put(pattern.charAt(i), strList[i]);</span><br><span class="line">        rtoL.put(strList[i], pattern.charAt(i));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æœ‰æ•ˆå­—æ¯çš„å¼‚ä½è¯">5.4 <a
href="https://leetcode.cn/problems/valid-anagram/description/?envType=study-plan-v2&amp;envId=top-interview-150">æœ‰æ•ˆå­—æ¯çš„å¼‚ä½è¯</a></h3>
<p>è¿™ä¸ªé¢˜ç›®æ›´ç®€å•ï¼Œè·Ÿ<a
href="https://leetcode.cn/problems/ransom-note/description/?envType=study-plan-v2&amp;envId=top-interview-150">èµé‡‘ä¿¡</a>æ˜¯ä¸€æ ·çš„ï¼Œåªéœ€è¦æŠŠç¬¬ä¸€ä¸ªå•è¯ä¸­æ¯ä¸ªå­—æ¯å‡ºç°çš„æ¬¡æ•°è®°å½•ä¸‹æ¥ï¼Œåœ¨ç¬¬äºŒä¸ªå•è¯éå†çš„æ—¶å€™å‡å»å¯¹åº”å­—æ¯çš„æ¬¡æ•°ï¼Œæœ€åå†éå†ä¸€ä¸‹è®°å½•æ•°ç»„ï¼Œçœ‹æ˜¯å¦å…¨ä¸º
0ï¼Œå³å¯åˆ¤æ–­</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isAnagram</span><span class="params">(String s, String t)</span> &#123;</span><br><span class="line">    <span class="type">int</span>[] cnt = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">26</span>];</span><br><span class="line">    <span class="keyword">for</span> (Character ch : t.toCharArray()) cnt[ch - <span class="string">&#x27;a&#x27;</span>]++;</span><br><span class="line">    <span class="keyword">for</span> (Character ch : s.toCharArray()) cnt[ch - <span class="string">&#x27;a&#x27;</span>]--;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">26</span>; ++i) <span class="keyword">if</span> (cnt[i] != <span class="number">0</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="å­—æ¯å¼‚ä½è¯åˆ†ç»„">5.5 <a
href="https://leetcode.cn/problems/group-anagrams/?envType=study-plan-v2&amp;envId=top-interview-150">å­—æ¯å¼‚ä½è¯åˆ†ç»„</a></h3>
<p>è¿™é“é¢˜ç›®æŒ‰ç…§ä»¥å¾€çš„åšæ³•ï¼Œéœ€è¦åˆ¤æ–­å„ä¸ªå­—ç¬¦ä¸²å‡ºç°çš„å­—æ¯æ¬¡æ•°æ˜¯å¦ä¸€è‡´ï¼Œæ‰èƒ½å½’ä¸ºä¸€ç±»ã€‚ä½†å®é™…ä¸Šæˆ‘ä»¬å¯ä»¥å°†å­—ç¬¦ä¸²ä¸­çš„å­—æ¯å…ˆè¿›è¡Œæ’åºï¼Œå°†ä¸é€šå­—æ¯æ’åºçš„å­—ç¬¦ä¸²å˜æˆç»Ÿä¸€ï¼Œç„¶åå†ç”¨
Hash è®°å½•å¯¹åº”çš„ç»„åˆ«ã€‚<strong><em>ä¸»è¦æ˜¯æ’åº</em></strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> List&lt;List&lt;String&gt;&gt; <span class="title function_">groupAnagrams</span><span class="params">(String[] strs)</span> &#123;</span><br><span class="line">    Map&lt;String, List&lt;String&gt;&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span>(String str : strs) &#123;</span><br><span class="line">        <span class="type">char</span>[] chars = str.toCharArray();</span><br><span class="line">        Arrays.sort(chars);     <span class="comment">// å¾ˆå…³é”®</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">sorted</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(chars);</span><br><span class="line">        List&lt;String&gt; list = map.getOrDefault(sorted, <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;());</span><br><span class="line">        list.add(str);</span><br><span class="line">        map.put(sorted, list);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(map.values());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ä¸¤æ•°ä¹‹å’Œ">5.6 <a
href="https://leetcode.cn/problems/two-sum/?envType=study-plan-v2&amp;envId=top-interview-150">ä¸¤æ•°ä¹‹å’Œ</a></h3>
<p>å¯ä»¥ä½¿ç”¨åŒæŒ‡é’ˆåšï¼Œä¹Ÿå¯ä»¥ç”¨ Hash
å®Œæˆã€‚åŒæŒ‡é’ˆçš„è¯ï¼Œéœ€è¦å…ˆå¯¹ç»™å®šçš„æ•°ç»„è¿›è¡Œæ’åºï¼Œç„¶åæŒ‡é’ˆä»æœ€å·¦è¾¹å’Œæœ€å³è¾¹å¼€å§‹ç§»åŠ¨ã€‚Hash
çš„è¯ä¼šæ¯”è¾ƒå¿«ï¼Œè®°å½•ç›®æ ‡å€¼ - å½“å‰å€¼ï¼Œæ˜ å°„å½“å‰å€¼å¯¹åº”çš„ä¸‹æ ‡ï¼Œç­‰é‡åˆ° ç›®æ ‡å€¼ -
å½“å‰å€¼æ—¶ï¼Œè¿”å›å¯¹åº” Hash æ˜ å°„å’Œå¯¹åº”çš„ä¸‹æ ‡å³å¯</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span>[] twoSum(<span class="type">int</span>[] nums, <span class="type">int</span> target) &#123;</span><br><span class="line">    Map&lt;Integer, Integer&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; nums.length; ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span> (map.containsKey(nums[i])) <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">int</span>[]&#123;map.get(nums[i]), i&#125;;</span><br><span class="line">        map.put(target - nums[i],i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">0</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="å¿«ä¹æ•°">5.7 <a
href="https://leetcode.cn/problems/happy-number/?envType=study-plan-v2&amp;envId=top-interview-150">å¿«ä¹æ•°</a></h3>
<p>æ‰“è¡¨ YYDS</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isHappy</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">    <span class="type">boolean</span> <span class="variable">isHappy</span> <span class="operator">=</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">tmp</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (n != <span class="number">1</span>) &#123;</span><br><span class="line">        tmp = n;</span><br><span class="line">        n = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (tmp &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            n += (tmp % <span class="number">10</span>) * (tmp % <span class="number">10</span>);</span><br><span class="line">            tmp /= <span class="number">10</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (n == <span class="number">4</span> || n == <span class="number">16</span> || n == <span class="number">37</span> || n == <span class="number">58</span> || n == <span class="number">89</span> || n == <span class="number">145</span> || n == <span class="number">42</span> || n == <span class="number">20</span>) &#123;</span><br><span class="line">            isHappy = <span class="literal">false</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> isHappy;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="å­˜åœ¨é‡å¤å…ƒç´ ">5.8 <a
href="https://leetcode.cn/problems/contains-duplicate/">å­˜åœ¨é‡å¤å…ƒç´ </a></h3>
<p>HashSet
å»é‡ï¼Œå¦‚æœä¸èƒ½æ’å…¥ï¼Œè¯´æ˜æœ‰é‡å¤ï¼Œé‡å¤ç›´æ¥è¿”å›å­˜åœ¨é‡å¤å…ƒç´ ï¼Œè¿”å› True</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">containsDuplicate</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">    HashSet&lt;Integer&gt; set = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; nums.length; ++i) <span class="keyword">if</span>(!set.add(nums[i])) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="å­˜åœ¨é‡å¤å…ƒç´ -â…±">5.9 <a
href="https://leetcode.cn/problems/contains-duplicate-ii/description/?envType=study-plan-v2&amp;envId=top-interview-150">å­˜åœ¨é‡å¤å…ƒç´ 
â…¡</a></h3>
<p>ç”¨ Hash
è®°å½•æ•°çš„ä¸‹æ ‡ï¼Œé‡åˆ°é‡å¤çš„å°±çœ‹ä¸ä¹‹å‰å­˜å…¥çš„ä¸‹æ ‡ç¬¦ä¸ç¬¦åˆè¦æ±‚ï¼Œä¸ç¬¦åˆå°±æ›´æ–°ä¸‹æ ‡</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">containsNearbyDuplicate</span><span class="params">(<span class="type">int</span>[] nums, <span class="type">int</span> k)</span> &#123;</span><br><span class="line">    Map&lt;Integer,Integer&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; nums.length; ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span> (map.containsKey(nums[i]) &amp;&amp; i - map.get(nums[i]) &lt;= k) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        map.put(nums[i], i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æœ€é•¿è¿ç»­åºåˆ—">5.10 <a
href="https://leetcode.cn/problems/longest-consecutive-sequence/?envType=study-plan-v2&amp;envId=top-interview-150">æœ€é•¿è¿ç»­åºåˆ—</a></h3>
<p>æ’åº + å“ˆå¸Œã€‚å¦‚æœæ¯”å½“å‰æ•°å­—å° 1 çš„æ•°å­—åœ¨ map
æ˜ å°„ä¸­å­˜åœ¨çš„è¯ï¼Œå½“å‰æ•°å­—çš„é•¿åº¦å°±æ˜¯æ¯”ä»–å°çš„æ•°å­—çš„é•¿åº¦ +1</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">longestConsecutive</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(nums == <span class="literal">null</span> || nums.length == <span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    Arrays.sort(nums);</span><br><span class="line">    Map&lt;Integer, Integer&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    <span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> num : nums) &#123;</span><br><span class="line">        <span class="keyword">if</span> (map.containsKey(num - <span class="number">1</span>)) &#123;</span><br><span class="line">            map.put(num, map.get(num - <span class="number">1</span>) + <span class="number">1</span>);</span><br><span class="line">            res = Math.max(res, map.get(num - <span class="number">1</span>) + <span class="number">1</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> map.put(num, <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><br></p>
<h2 id="åŒºé—´">6. åŒºé—´</h2>
<h3 id="æ±‡æ€»åŒºé—´">6.1 <a
href="https://leetcode.cn/problems/summary-ranges/?envType=study-plan-v2&amp;envId=top-interview-150">æ±‡æ€»åŒºé—´</a></h3>
<p>åŒæŒ‡é’ˆï¼Œè®°å½•ä¸€ä¸ªèƒ½åˆ°è¾¾æœ€å³è¾¹çš„æŒ‡é’ˆï¼Œå¾€å³èµ°åˆ°ä¸å†è¿ç»­ã€‚ç„¶ååˆ¤æ–­ä¸åŸæŒ‡é’ˆæ˜¯å¦ç›¸ç­‰ï¼Œç›¸ç­‰å°±åªæ–°å¢åŸæ¥çš„æ•°ï¼›ä¸ç›¸ç­‰å°±æ’å…¥ç®­å¤´</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> List&lt;String&gt; <span class="title function_">summaryRanges</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">    List&lt;String&gt; res = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">high</span> <span class="operator">=</span> i;</span><br><span class="line">        <span class="keyword">while</span> (high &lt; nums.length - <span class="number">1</span> &amp;&amp; nums[high] + <span class="number">1</span> == nums[high + <span class="number">1</span>]) high++;</span><br><span class="line">        <span class="keyword">if</span> (high == i) res.add(String.valueOf(nums[i]));</span><br><span class="line">        <span class="keyword">else</span> res.add(String.valueOf(nums[i]) + <span class="string">&quot;-&gt;&quot;</span> + String.valueOf(nums[high]));</span><br><span class="line">        i = high;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="åˆå¹¶åŒºé—´">6.2 <a
href="https://leetcode.cn/problems/merge-intervals/?envType=study-plan-v2&amp;envId=top-interview-150">åˆå¹¶åŒºé—´</a></h3>
<p>æ€è·¯è·Ÿä¸Šé¢çš„é¢˜ç›®ä¸€æ ·ï¼Œä¹Ÿæ˜¯éå†ç»™å®šçš„æ•°ç»„ï¼Œç„¶åè®¾å®šä¸€ä¸ªæœ€å³è¾¹èƒ½åˆ°è¾¾çš„æŒ‡é’ˆä¸‹æ ‡ï¼Œç„¶åç­‰è¿™ä¸ªæŒ‡é’ˆä¸èƒ½å†å¾€å³è¾¹èµ°æ—¶ï¼Œå°±æŠŠå¯¹åº”çš„åŒºé—´åŠ å…¥åˆ°æœ€ç»ˆçš„ç»“æœä¸­ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span>[][] merge(<span class="type">int</span>[][] intervals) &#123;</span><br><span class="line">    <span class="comment">// æ’åº</span></span><br><span class="line">    Arrays.sort(intervals, (a, b) -&gt; a[<span class="number">0</span>] != b[<span class="number">0</span>] ? a[<span class="number">0</span>] - b[<span class="number">0</span>] : a[<span class="number">1</span>] - b[<span class="number">1</span>]);</span><br><span class="line">    List&lt;<span class="type">int</span>[]&gt; res = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    <span class="type">int</span> <span class="variable">high</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; intervals.length; ) &#123;</span><br><span class="line">        high = intervals[i][<span class="number">1</span>];</span><br><span class="line">        <span class="type">int</span> <span class="variable">right</span> <span class="operator">=</span> i;</span><br><span class="line">        <span class="keyword">while</span> (right &lt; intervals.length &amp;&amp; intervals[right][<span class="number">0</span>] &lt;= high) &#123;</span><br><span class="line">            high = Math.max(high, intervals[right][<span class="number">1</span>]);</span><br><span class="line">            right++;</span><br><span class="line">        &#125;</span><br><span class="line">        res.add(<span class="keyword">new</span> <span class="title class_">int</span>[]&#123;intervals[i][<span class="number">0</span>], high&#125;);</span><br><span class="line">        i = right == i ? i + <span class="number">1</span> : right;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res.toArray(<span class="keyword">new</span> <span class="title class_">int</span>[res.size()][]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æ’å…¥åŒºé—´">6.3 <a
href="https://leetcode.cn/problems/insert-interval/?envType=study-plan-v2&amp;envId=top-interview-150">æ’å…¥åŒºé—´</a></h3>
<p>è¿™é“é¢˜ç›®æ˜¯ä¸Šé¢é‚£é“é¢˜ç›®çš„æ‰©å±•ï¼Œæ€è·¯å¾ˆç®€å•ï¼Œå…ˆæŠŠè¦æ’å…¥çš„åŒºé—´æ’å…¥åˆ°ç»™å®šçš„æ•°ç»„ä¸­ï¼Œç„¶åå†æ‰§è¡Œä¸€éä¸Šä¸€é“é¢˜ç›®çš„é‚£ä¸ªå‡½æ•°å°±å¯ä»¥äº†ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span>[][] insert(<span class="type">int</span>[][] intervals, <span class="type">int</span>[] newInterval) &#123;</span><br><span class="line">    <span class="comment">// ä½¿ç”¨ArrayListåˆ›å»ºä¸€ä¸ªå¯ä»¥ä¿®æ”¹å¤§å°çš„åˆ—è¡¨</span></span><br><span class="line">    List&lt;<span class="type">int</span>[]&gt; tmpList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(Arrays.asList(intervals));</span><br><span class="line">    tmpList.add(newInterval);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å°†åˆ—è¡¨è½¬æ¢å›æ•°ç»„ï¼Œå¹¶è¿›è¡Œæ’åº</span></span><br><span class="line">    intervals = tmpList.toArray(<span class="keyword">new</span> <span class="title class_">int</span>[tmpList.size()][]);</span><br><span class="line">    Arrays.sort(intervals, (a, b) -&gt; a[<span class="number">0</span>] != b[<span class="number">0</span>] ? a[<span class="number">0</span>] - b[<span class="number">0</span>] : a[<span class="number">1</span>] - b[<span class="number">1</span>]);</span><br><span class="line"></span><br><span class="line">    List&lt;<span class="type">int</span>[]&gt; res = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    <span class="type">int</span> <span class="variable">high</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; intervals.length; ) &#123;</span><br><span class="line">        high = intervals[i][<span class="number">1</span>];</span><br><span class="line">        <span class="type">int</span> <span class="variable">right</span> <span class="operator">=</span> i;</span><br><span class="line">        <span class="keyword">while</span> (right &lt; intervals.length &amp;&amp; intervals[right][<span class="number">0</span>] &lt;= high) &#123;</span><br><span class="line">            high = Math.max(high, intervals[right][<span class="number">1</span>]);</span><br><span class="line">            right++;</span><br><span class="line">        &#125;</span><br><span class="line">        res.add(<span class="keyword">new</span> <span class="title class_">int</span>[]&#123;intervals[i][<span class="number">0</span>], high&#125;);</span><br><span class="line">        i = right == i ? i + <span class="number">1</span> : right;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> res.toArray(<span class="keyword">new</span> <span class="title class_">int</span>[res.size()][]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ç”¨æœ€å°‘æ•°é‡çš„ç®­å¼•çˆ†æ°”çƒ">6.4 <a
href="https://leetcode.cn/problems/minimum-number-of-arrows-to-burst-balloons/description/?envType=study-plan-v2&amp;envId=top-interview-150">ç”¨æœ€å°‘æ•°é‡çš„ç®­å¼•çˆ†æ°”çƒ</a></h3>
<p>è¿™é“é¢˜ç›®ä¹Ÿæ˜¯è¾¹ç•Œåˆ¤æ–­å»¶ç»­é—®é¢˜ï¼Œä¸åŒç‚¹æ˜¯æˆ‘ä»¬è¦å°½é‡è®©åŒºé—´å³ç«¯ç‚¹å°½å¯èƒ½çš„åŒ…å«æ›´å¤šçš„åŒºé—´ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦æŒ‰ç…§åŒºé—´å³ç«¯ç‚¹è¿›è¡Œå‡åºæ’åºï¼Œç„¶åçœ‹å½“å‰åŒºé—´çš„å³ç«¯ç‚¹ï¼Œèƒ½åŒ…å«å¤šå°‘åŒºé—´çš„å·¦ç«¯ç‚¹ï¼Œè¢«åŒ…å«çš„åŒºé—´ç›´æ¥è·³è¿‡å³å¯ã€‚è¿™é‡Œä¼šå­˜åœ¨ä¸€ä¸ªæ•°çš„æé™é—®é¢˜ï¼Œå°±æ˜¯ä¸€ä¸ªæ•´æ•°å‡å»ä¸€ä¸ªè´Ÿæ•°ï¼Œä¼šçˆ†
Integer è¾¹ç•Œï¼Œæ‰€ä»¥åœ¨æ’åºçš„æ—¶å€™åº”è¯¥ä½¿ç”¨ Integer._compare æ¯”è¾ƒå‡½æ•°_</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">findMinArrowShots</span><span class="params">(<span class="type">int</span>[][] points)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> points.length;</span><br><span class="line">    Arrays.sort(points, (a, b) -&gt; a[<span class="number">1</span>] != b[<span class="number">1</span>] ? Integer.compare(a[<span class="number">1</span>], b[<span class="number">1</span>]) : Integer.compare(a[<span class="number">0</span>], b[<span class="number">0</span>]));</span><br><span class="line">    <span class="type">long</span> <span class="variable">high</span> <span class="operator">=</span> Long.MIN_VALUE;</span><br><span class="line">    <span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> <span class="number">0</span>, right = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        high = Math.max(high, points[i][<span class="number">1</span>]);</span><br><span class="line">        right = i;</span><br><span class="line">        <span class="keyword">while</span> (right &lt; n &amp;&amp; high &gt;= points[right][<span class="number">0</span>]) right++;</span><br><span class="line">        res++;</span><br><span class="line">        i = right - <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><br></p>
<h2 id="æ ˆ">7. æ ˆ</h2>
<h3 id="æœ‰æ•ˆæ‹¬å·">7.1 <a
href="https://leetcode.cn/problems/valid-parentheses/description/?envType=study-plan-v2&amp;envId=top-interview-150">æœ‰æ•ˆæ‹¬å·</a></h3>
<p>å­˜å…¥å½“å‰æ‹¬å·å¯¹åº”çš„åæ‹¬å·ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿå› ä¸ºå¦‚æœå¼å­æœ‰æ•ˆçš„è¯ï¼Œå½“å‰æ‹¬å·çš„åæ‹¬å·åœ¨å½“å‰ä½ç½®åé¢ä¸€å®šä¼šå‡ºç°ï¼Œå½“æˆ‘ä»¬æ¯”å¯¹ä¸åŒ¹é…æ—¶ï¼Œæˆ‘ä»¬ä¾¿å¯ä»¥å¾—å‡ºå½“å‰ä¸²å­˜åœ¨é—®é¢˜ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isValid</span><span class="params">(String s)</span> &#123;</span><br><span class="line">    Stack&lt;Character&gt; stack = <span class="keyword">new</span> <span class="title class_">Stack</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">char</span> ch : s.toCharArray()) &#123;</span><br><span class="line">        <span class="keyword">if</span> (ch == <span class="string">&#x27;(&#x27;</span>) stack.push(<span class="string">&#x27;)&#x27;</span>);</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (ch == <span class="string">&#x27;[&#x27;</span>) stack.push(<span class="string">&#x27;]&#x27;</span>);</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (ch == <span class="string">&#x27;&#123;&#x27;</span>) stack.push(<span class="string">&#x27;&#125;&#x27;</span>);</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (stack.isEmpty() || stack.lastElement() != ch) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">else</span> stack.pop();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> stack.isEmpty();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ç®€åŒ–è·¯å¾„">7.2 <a
href="https://leetcode.cn/problems/simplify-path/?envType=study-plan-v2&amp;envId=top-interview-150">ç®€åŒ–è·¯å¾„</a></h3>
<p>ç”¨æ ˆå­˜æ”¾è·¯å¾„åç§°ï¼Œä¸å­˜æ”¾â€œ/â€ï¼Œç„¶åå¯¹äº ..
çš„è·¯å¾„ï¼Œè¡¨ç¤ºçš„æ˜¯è¿”å›ä¸Šä¸€å±‚çš„è·¯å¾„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥æŠŠæ ˆé¡¶å…ƒç´ å¼¹å‡ºï¼Œç›¸å½“äºå›åˆ°äº†ä¸Šä¸€å±‚ã€‚æœ€åå†ç”¨â€œ/â€å°†æ ˆä¸­å…ƒç´ è¿›è¡Œæ‹¼æ¥å³å¯ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> String <span class="title function_">simplifyPath</span><span class="params">(String path)</span> &#123;</span><br><span class="line">    Stack&lt;String&gt; stack = <span class="keyword">new</span> <span class="title class_">Stack</span>&lt;&gt;();</span><br><span class="line">    String[] strList = path.split(<span class="string">&quot;/&quot;</span>);</span><br><span class="line">    <span class="keyword">for</span> (String str : strList) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="string">&quot;..&quot;</span>.equals(str) &amp;&amp; !stack.isEmpty()) stack.pop();</span><br><span class="line">        <span class="keyword">if</span>(!<span class="string">&quot;&quot;</span>.equals(str) &amp;&amp; !<span class="string">&quot;.&quot;</span>.equals(str) &amp;&amp; !<span class="string">&quot;..&quot;</span>.equals(str)) stack.push(str);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">StringBuilder</span> <span class="variable">res</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">    <span class="keyword">while</span> (!stack.isEmpty())&#123;</span><br><span class="line">        res.insert(<span class="number">0</span>,stack.pop());</span><br><span class="line">        res.insert(<span class="number">0</span>,<span class="string">&quot;/&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(res.isEmpty()) res.append(<span class="string">&quot;/&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> res.toString();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æœ€å°æ ˆ">7.3 <a
href="https://leetcode.cn/problems/min-stack/?envType=study-plan-v2&amp;envId=top-interview-150">æœ€å°æ ˆ</a></h3>
<p>å­˜ä¸€ä¸ªæ™®é€šæ ˆå’Œä¸€ä¸ªæœ€å°æ ˆï¼Œå½“ä¸€ä¸ªæ–°çš„æ•°æ¥çš„æ—¶å€™ï¼Œæ™®é€šæ ˆç›´æ¥å‹å…¥ï¼Œæœ€å°æ ˆåˆ™è·Ÿæ ˆé¡¶å…ƒç´ æ¯”è¾ƒä¸€ä¸‹ï¼Œå‹å…¥æ›´å°çš„é‚£ä¸ªã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MinStack</span> &#123;</span><br><span class="line">    Stack&lt;Integer&gt; xstack;</span><br><span class="line">    Stack&lt;Integer&gt; minStack;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MinStack</span><span class="params">()</span> &#123;</span><br><span class="line">        xstack = <span class="keyword">new</span> <span class="title class_">Stack</span>&lt;&gt;();</span><br><span class="line">        minStack = <span class="keyword">new</span> <span class="title class_">Stack</span>&lt;&gt;();</span><br><span class="line">        minStack.push(Integer.MAX_VALUE);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">push</span><span class="params">(<span class="type">int</span> val)</span> &#123;</span><br><span class="line">        xstack.push(val);</span><br><span class="line">        minStack.push(Math.min(val,minStack.lastElement()));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">pop</span><span class="params">()</span> &#123;</span><br><span class="line">        xstack.pop();</span><br><span class="line">        minStack.pop();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">top</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> xstack.lastElement();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getMin</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> minStack.lastElement();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="é€†æ³¢å…°è¡¨è¾¾å¼æ±‚å€¼">7.4 <a
href="https://leetcode.cn/problems/evaluate-reverse-polish-notation/?envType=study-plan-v2&amp;envId=top-interview-150">é€†æ³¢å…°è¡¨è¾¾å¼æ±‚å€¼</a></h3>
<p>è¿™ä¸ªå·²ç»å°†è¡¨è¾¾å¼è½¬æˆåç¼€è¡¨è¾¾å¼äº†ï¼Œæˆ‘ä»¬å¹¶ä¸éœ€è¦åˆ¤æ–­è¿ç®—ç¬¦çš„ä¼˜å…ˆçº§é—®é¢˜ã€‚æˆ‘ä»¬åªéœ€è¦å®šä¹‰ä¸€ä¸ªæ•°å­—æ ˆï¼Œé‡åˆ°æ•°å­—å…¥æ ˆï¼Œé‡åˆ°ç¬¦å·ï¼Œå–å‡ºæ ˆé¡¶çš„ä¸¤ä¸ªå…ƒç´ ï¼Œæ ¹æ®è¿ç®—ç¬¦å·è¿›è¡Œè®¡ç®—ï¼ŒæŠŠè®¡ç®—ç»“æœå‹å…¥æ ˆä¸­ï¼Œæœ€åæ ˆé¡¶ä¾¿ä¸ºæœ€ç»ˆè®¡ç®—ç»“æœï¼Œ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">evalRPN</span><span class="params">(String[] tokens)</span> &#123;</span><br><span class="line">    Stack&lt;Integer&gt; nums = <span class="keyword">new</span> <span class="title class_">Stack</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (String token : tokens) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!<span class="string">&quot;+&quot;</span>.equals(token) &amp;&amp; !<span class="string">&quot;-&quot;</span>.equals(token) &amp;&amp; !<span class="string">&quot;*&quot;</span>.equals(token) &amp;&amp; !<span class="string">&quot;/&quot;</span>.equals(token)) &#123;</span><br><span class="line">            nums.push(Integer.parseInt(token));</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">num1</span> <span class="operator">=</span> nums.pop(), num2 = nums.pop();</span><br><span class="line">            <span class="keyword">if</span> (<span class="string">&quot;+&quot;</span>.equals(token)) nums.push(num1 + num2);</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">&quot;-&quot;</span>.equals(token)) nums.push(num2 - num1);</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">&quot;*&quot;</span>.equals(token)) nums.push(num1 * num2);</span><br><span class="line">            <span class="keyword">else</span> nums.push(num2 / num1);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> nums.pop();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="åŸºæœ¬è®¡ç®—å™¨">7.5 <a
href="https://leetcode.cn/problems/basic-calculator/?envType=study-plan-v2&amp;envId=top-interview-150">åŸºæœ¬è®¡ç®—å™¨</a></h3>
<p>è¿™é“é¢˜ç›®å› ä¸ºåªæœ‰åŠ å‡è¿ç®—ï¼Œæ‰€ä»¥å¯ä»¥æŠŠå®ƒåŒæ„çœ‹æˆæ˜¯åŠ æ³•è¿ç®—ï¼Œå¯¹äºå‡æ³•è¿ç®—ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹æˆæ˜¯åŠ ä¸Šå‡å»çš„é‚£ä¸ªæ•°çš„ç›¸åæ•°ã€‚è¿™æ ·æˆ‘ä»¬åªéœ€è¦å®šä¹‰ä¸€ä¸ªå­˜å‚¨ç¬¦å·çš„æ ˆï¼Œé‡åˆ°(å‹æ ˆï¼Œé‡åˆ°)å¼¹æ ˆï¼Œé‡åˆ°åŠ å·ï¼Œç¬¦å·ä¸º
1ï¼Œé‡åˆ°å‡å·ï¼Œç¬¦å·ä¸º 0 ã€‚é‡åˆ°æ•°å­—ï¼ŒåŠ ä¸Šæ•°å­—ä¸ç¬¦å·çš„ä¹˜ç§¯ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">calculate</span><span class="params">(String s)</span> &#123;</span><br><span class="line">    Stack&lt;Integer&gt; stack = <span class="keyword">new</span> <span class="title class_">Stack</span>&lt;&gt;();</span><br><span class="line">    stack.push(<span class="number">1</span>);</span><br><span class="line">    <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>, n = s.length(), res = <span class="number">0</span>, sign = <span class="number">1</span>;   <span class="comment">// sign ä¸º 1 è¡¨ç¤ºæ˜¯æ­£æ•°</span></span><br><span class="line">    <span class="keyword">while</span> (i &lt; n) &#123;</span><br><span class="line">        <span class="type">char</span> <span class="variable">ch</span> <span class="operator">=</span> s.charAt(i);</span><br><span class="line">        <span class="keyword">if</span> (ch == <span class="string">&#x27; &#x27;</span>) &#123;</span><br><span class="line">            ++i;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (ch == <span class="string">&#x27;+&#x27;</span>) &#123;</span><br><span class="line">            sign = stack.peek();</span><br><span class="line">            ++i;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (ch == <span class="string">&#x27;-&#x27;</span>) &#123;</span><br><span class="line">            sign = -stack.peek();</span><br><span class="line">            ++i;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (ch == <span class="string">&#x27;(&#x27;</span>) &#123;</span><br><span class="line">            stack.push(sign);</span><br><span class="line">            ++i;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (ch == <span class="string">&#x27;)&#x27;</span>) &#123;</span><br><span class="line">            stack.pop();</span><br><span class="line">            ++i;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">tmp</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">while</span> (i &lt; n &amp;&amp; Character.isDigit(s.charAt(i))) &#123;</span><br><span class="line">                tmp = tmp * <span class="number">10</span> + s.charAt(i) - <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">                ++i;</span><br><span class="line">            &#125;</span><br><span class="line">            res += sign * tmp;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><br></p>
<h2 id="é“¾è¡¨">8. é“¾è¡¨</h2>
<h3 id="ç¯å½¢é“¾è¡¨">8.1 <a
href="https://leetcode.cn/problems/linked-list-cycle/description/?envType=problem-list-v2&amp;envId=2cktkvj&amp;page=1">ç¯å½¢é“¾è¡¨</a></h3>
<p>è¿™æ˜¯ä¸€é“ç»å…¸çš„é—®é¢˜ï¼Œæˆ‘ä»¬åªéœ€è¦å®šä¹‰ä¸€å¿«ä¸€æ…¢ä¸¤ä¸ªæŒ‡é’ˆï¼Œå¿«æŒ‡é’ˆæ¯æ¬¡èµ°ä¸¤æ­¥ï¼Œæ…¢æŒ‡é’ˆæ¯æ¬¡èµ°ä¸€æ­¥ã€‚å¦‚æœé“¾è¡¨ä¸­å­˜åœ¨ç¯ï¼Œé‚£ä¹ˆå¿«æŒ‡é’ˆä¸€å®šè·Ÿæ…¢æŒ‡é’ˆç›¸é‡ã€‚å¦‚æœé“¾è¡¨ä¸­ä¸å­˜åœ¨ç¯ï¼Œé‚£ä¹ˆå¿«æŒ‡é’ˆä¸€å®šä¼šä»¥æœ€å¿«çš„é€Ÿåº¦åˆ°è¾¾å°¾æŒ‡é’ˆï¼Œä¹Ÿå°±æ˜¯
nullã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * class ListNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     ListNode next;</span></span><br><span class="line"><span class="comment"> *     ListNode(int x) &#123;</span></span><br><span class="line"><span class="comment"> *         val = x;</span></span><br><span class="line"><span class="comment"> *         next = null;</span></span><br><span class="line"><span class="comment"> *     &#125;</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hasCycle</span><span class="params">(ListNode head)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(head == <span class="literal">null</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">low</span> <span class="operator">=</span> head, high = head;</span><br><span class="line">        <span class="keyword">while</span> (high != <span class="literal">null</span>) &#123;</span><br><span class="line">            low = low.next;</span><br><span class="line">            <span class="keyword">if</span>(high.next!=<span class="literal">null</span> &amp;&amp; high.next.next != <span class="literal">null</span>) &#123;</span><br><span class="line">                high = high.next.next;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(high == low) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ä¸¤æ•°ç›¸åŠ ">8.2 <a
href="https://leetcode.cn/problems/add-two-numbers/description/?envType=study-plan-v2&amp;envId=top-interview-150">ä¸¤æ•°ç›¸åŠ </a></h3>
<p>å…¶å®è·Ÿé«˜ç²¾åº¦è®¡ç®—æ˜¯åŒä¸€ä¸ªæ€è·¯ã€‚å°±æ˜¯æ¨¡æ‹Ÿæ•°å­—ç¬”ç®—ç›¸åŠ çš„è¿‡ç¨‹ï¼Œå®šä¹‰è¿›ä½å˜é‡ï¼Œå­˜å‚¨æœ€ç»ˆé“¾è¡¨å¤´æ–‡ä»¶ï¼Œåœ¨åŠ ä¸Šç±»ä¼¼äºå½’å¹¶æ’åºçš„åˆå¹¶ä¸¤ä¸ªæ•°ç»„çš„æ€è·¯ï¼Œåˆå¹¶ä¸¤ä¸ªé“¾è¡¨ã€‚æœ€åç”±
add æ˜¯å¦å¤§äº 0ï¼Œåœ¨å†³å®šæ˜¯å¦æ·»åŠ æ–°çš„ç»“ç‚¹</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> ListNode <span class="title function_">addTwoNumbers</span><span class="params">(ListNode l1, ListNode l2)</span> &#123;</span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">n1</span> <span class="operator">=</span> l1, n2 = l2, tmp = <span class="literal">null</span>, res = <span class="literal">null</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">add</span> <span class="operator">=</span> <span class="number">0</span> ,num = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (n1 != <span class="literal">null</span> &amp;&amp; n2 != <span class="literal">null</span>) &#123;</span><br><span class="line">        num = (n1.val + n2.val + add);</span><br><span class="line">        add = num / <span class="number">10</span>;</span><br><span class="line">        <span class="keyword">if</span> (tmp == <span class="literal">null</span>) &#123;</span><br><span class="line">            res = tmp = <span class="keyword">new</span> <span class="title class_">ListNode</span>(num % <span class="number">10</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            tmp.next = <span class="keyword">new</span> <span class="title class_">ListNode</span>(num % <span class="number">10</span>);</span><br><span class="line">            tmp = tmp.next;</span><br><span class="line">        &#125;</span><br><span class="line">        n1 = n1.next;</span><br><span class="line">        n2 = n2.next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (n1 != <span class="literal">null</span>) &#123;</span><br><span class="line">        num = n1.val + add;</span><br><span class="line">        add = num / <span class="number">10</span>;</span><br><span class="line">        tmp.next = <span class="keyword">new</span> <span class="title class_">ListNode</span>(num % <span class="number">10</span>);</span><br><span class="line">        tmp = tmp.next;</span><br><span class="line">        n1 = n1.next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (n2 != <span class="literal">null</span>) &#123;</span><br><span class="line">        num = n2.val + add;</span><br><span class="line">        add = num / <span class="number">10</span>;</span><br><span class="line">        tmp.next = <span class="keyword">new</span> <span class="title class_">ListNode</span>(num % <span class="number">10</span>);</span><br><span class="line">        tmp = tmp.next;</span><br><span class="line">        n2 = n2.next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(add &gt; <span class="number">0</span>) tmp.next = <span class="keyword">new</span> <span class="title class_">ListNode</span>(add);</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨">8.3 <a
href="https://leetcode.cn/problems/merge-two-sorted-lists/?envType=study-plan-v2&amp;envId=top-interview-150">åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨</a></h3>
<p>è·Ÿå½’å¹¶æ’åºåŒä¸€ä¸ªæ€è·¯ï¼Œåˆ†åˆ«è®°å½•ä¸¤ä¸ªé“¾è¡¨çš„ä¸¤ä¸ªæŒ‡é’ˆï¼Œå“ªä¸ªé“¾è¡¨çš„æŒ‡é’ˆæŒ‡å‘çš„å€¼å°ï¼Œå°±è®°å½•å“ªä¸ªå€¼ï¼Œå¹¶ç§»åŠ¨å¯¹åº”çš„æŒ‡é’ˆã€‚æœ€åï¼Œå½“ä¸¤ä¸ªé“¾è¡¨æœ‰ä¸€æ–¹éå†å®Œæˆï¼Œåˆ™åªéœ€å°†å¦ä¸€æ–¹å‰©ä½™çš„é“¾è¡¨åŠ å…¥åˆ°ç»“æœé“¾è¡¨ä¸­å³å¯ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> ListNode <span class="title function_">mergeTwoLists</span><span class="params">(ListNode list1, ListNode list2)</span> &#123;</span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">res</span> <span class="operator">=</span> <span class="literal">null</span>, tmp = <span class="keyword">new</span> <span class="title class_">ListNode</span>();</span><br><span class="line">    <span class="keyword">while</span> (Objects.nonNull(list1) &amp;&amp; Objects.nonNull(list2)) &#123;</span><br><span class="line">        <span class="keyword">if</span> (list1.val &lt; list2.val) &#123;</span><br><span class="line">            tmp.next = <span class="keyword">new</span> <span class="title class_">ListNode</span>(list1.val);</span><br><span class="line">            list1 = list1.next;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            tmp.next = <span class="keyword">new</span> <span class="title class_">ListNode</span>(list2.val);</span><br><span class="line">            list2 = list2.next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (Objects.isNull(res)) res = tmp.next;</span><br><span class="line">        tmp = tmp.next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (Objects.nonNull(list1)) tmp.next = list1;</span><br><span class="line">    <span class="keyword">if</span> (Objects.nonNull(list2)) tmp.next = list2;</span><br><span class="line">    <span class="keyword">return</span> Objects.isNull(res)? tmp.next : res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="éšæœºé“¾è¡¨çš„å¤åˆ¶">8.4 <a
href="https://leetcode.cn/problems/copy-list-with-random-pointer/?envType=study-plan-v2&amp;envId=top-interview-150">éšæœºé“¾è¡¨çš„å¤åˆ¶</a></h3>
<p>â€”â€” å›æº¯ + å“ˆå¸Œ</p>
<p>æœ¬é¢˜è¦æ±‚æˆ‘ä»¬å¯¹ä¸€ä¸ªç‰¹æ®Šçš„é“¾è¡¨è¿›è¡Œæ·±æ‹·è´ã€‚å¦‚æœæ˜¯æ™®é€šé“¾è¡¨ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥æŒ‰ç…§éå†çš„é¡ºåºåˆ›å»ºé“¾è¡¨èŠ‚ç‚¹ã€‚è€Œæœ¬é¢˜ä¸­å› ä¸ºéšæœºæŒ‡é’ˆçš„å­˜åœ¨ï¼Œå½“æˆ‘ä»¬æ‹·è´èŠ‚ç‚¹æ—¶ï¼Œã€Œå½“å‰èŠ‚ç‚¹çš„éšæœºæŒ‡é’ˆæŒ‡å‘çš„èŠ‚ç‚¹ã€å¯èƒ½è¿˜æ²¡åˆ›å»ºï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦å˜æ¢æ€è·¯ã€‚ä¸€ä¸ªå¯è¡Œæ–¹æ¡ˆæ˜¯ï¼Œæˆ‘ä»¬åˆ©ç”¨å›æº¯çš„æ–¹å¼ï¼Œè®©æ¯ä¸ªèŠ‚ç‚¹çš„æ‹·è´æ“ä½œç›¸äº’ç‹¬ç«‹ã€‚å¯¹äºå½“å‰èŠ‚ç‚¹ï¼Œæˆ‘ä»¬é¦–å…ˆè¦è¿›è¡Œæ‹·è´ï¼Œç„¶åæˆ‘ä»¬è¿›è¡Œã€Œå½“å‰èŠ‚ç‚¹çš„åç»§èŠ‚ç‚¹ã€å’Œã€Œå½“å‰èŠ‚ç‚¹çš„éšæœºæŒ‡é’ˆæŒ‡å‘çš„èŠ‚ç‚¹ã€æ‹·è´ï¼Œæ‹·è´å®Œæˆåå°†åˆ›å»ºçš„æ–°èŠ‚ç‚¹çš„æŒ‡é’ˆè¿”å›ï¼Œå³å¯å®Œæˆå½“å‰èŠ‚ç‚¹çš„ä¸¤æŒ‡é’ˆçš„èµ‹å€¼ã€‚</p>
<p>å…·ä½“åœ°ï¼Œæˆ‘ä»¬ç”¨å“ˆå¸Œè¡¨è®°å½•æ¯ä¸€ä¸ªèŠ‚ç‚¹å¯¹åº”æ–°èŠ‚ç‚¹çš„åˆ›å»ºæƒ…å†µã€‚éå†è¯¥é“¾è¡¨çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬æ£€æŸ¥ã€Œå½“å‰èŠ‚ç‚¹çš„åç»§èŠ‚ç‚¹ã€å’Œã€Œå½“å‰èŠ‚ç‚¹çš„éšæœºæŒ‡é’ˆæŒ‡å‘çš„èŠ‚ç‚¹ã€çš„åˆ›å»ºæƒ…å†µã€‚å¦‚æœè¿™ä¸¤ä¸ªèŠ‚ç‚¹ä¸­çš„ä»»ä½•ä¸€ä¸ªèŠ‚ç‚¹çš„æ–°èŠ‚ç‚¹æ²¡æœ‰è¢«åˆ›å»ºï¼Œæˆ‘ä»¬éƒ½ç«‹åˆ»é€’å½’åœ°è¿›è¡Œåˆ›å»ºã€‚å½“æˆ‘ä»¬æ‹·è´å®Œæˆï¼Œå›æº¯åˆ°å½“å‰å±‚æ—¶ï¼Œæˆ‘ä»¬å³å¯å®Œæˆå½“å‰èŠ‚ç‚¹çš„æŒ‡é’ˆèµ‹å€¼ã€‚æ³¨æ„ä¸€ä¸ªèŠ‚ç‚¹å¯èƒ½è¢«å¤šä¸ªå…¶ä»–èŠ‚ç‚¹æŒ‡å‘ï¼Œå› æ­¤æˆ‘ä»¬å¯èƒ½é€’å½’åœ°å¤šæ¬¡å°è¯•æ‹·è´æŸä¸ªèŠ‚ç‚¹ï¼Œä¸ºäº†é˜²æ­¢é‡å¤æ‹·è´ï¼Œæˆ‘ä»¬éœ€è¦é¦–å…ˆæ£€æŸ¥å½“å‰èŠ‚ç‚¹æ˜¯å¦è¢«æ‹·è´è¿‡ï¼Œå¦‚æœå·²ç»æ‹·è´è¿‡ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä»å“ˆå¸Œè¡¨ä¸­å–å‡ºæ‹·è´åçš„èŠ‚ç‚¹çš„æŒ‡é’ˆå¹¶è¿”å›å³å¯ã€‚</p>
<p>åœ¨å®é™…ä»£ç ä¸­ï¼Œæˆ‘ä»¬éœ€è¦ç‰¹åˆ«åˆ¤æ–­ç»™å®šèŠ‚ç‚¹ä¸ºç©ºèŠ‚ç‚¹çš„æƒ…å†µã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Map&lt;Node, Node&gt; cacheMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line"><span class="keyword">public</span> Node <span class="title function_">copyRandomList</span><span class="params">(Node head)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (Objects.isNull(head)) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (!cacheMap.containsKey(head)) &#123;</span><br><span class="line">        <span class="type">Node</span> <span class="variable">newHead</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Node</span>(head.val);</span><br><span class="line">        cacheMap.put(head, newHead);</span><br><span class="line">        newHead.next = copyRandomList(head.next);</span><br><span class="line">        newHead.random = copyRandomList(head.random);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> cacheMap.get(head);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="åè½¬é“¾è¡¨">8.5 <a
href="https://leetcode.cn/problems/reverse-linked-list/">åè½¬é“¾è¡¨</a></h3>
<p>â€”â€”æ¨¡æ‹Ÿ</p>
<p>æˆ‘ä»¬åªéœ€è¦å®šä¹‰ä¸€å‰ä¸€åä¸¤ä¸ªæŒ‡é’ˆï¼Œç„¶åä¿ç•™åä¸€ä¸ªæŒ‡é’ˆçš„ next
åœ°å€ã€newNodeã€‘ï¼Œå°†åä¸€ä¸ªæŒ‡é’ˆçš„ next
æŒ‡å‘å‰ä¸€ä¸ªæŒ‡é’ˆï¼Œå‰ä¸€ä¸ªæŒ‡é’ˆå†ç§»åŠ¨åˆ°åä¸€ä¸ªæŒ‡é’ˆçš„ä½ç½®ï¼Œåä¸€ä¸ªæŒ‡é’ˆç§»åŠ¨åˆ°
newNodeã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> ListNode <span class="title function_">reverseList</span><span class="params">(ListNode head)</span> &#123;</span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">pre</span> <span class="operator">=</span> <span class="literal">null</span>, cur = head;</span><br><span class="line">    <span class="keyword">while</span> (Objects.nonNull(cur))&#123;</span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">newNode</span> <span class="operator">=</span> cur.next;</span><br><span class="line">        cur.next = pre;</span><br><span class="line">        pre = cur;</span><br><span class="line">        cur = newNode;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> pre;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="åè½¬é“¾è¡¨-â…±">8.6 <a
href="https://leetcode.cn/problems/reverse-linked-list-ii/description/?envType=study-plan-v2&amp;envId=top-interview-150">åè½¬é“¾è¡¨
â…¡</a></h3>
<p>â€”â€”æ¨¡æ‹Ÿ</p>
<p>è¿™é“é¢˜ç›®æ€è·¯ä¸å¤æ‚ï¼Œå°±æ˜¯æ ¹æ®å‡½æ•°å‚æ•°æä¾›çš„ä½ç½®ï¼ŒæŠŠè¦åè½¬çš„é‚£éƒ¨åˆ†é“¾è¡¨åˆ‡å‡ºæ¥ï¼ŒåŒæ—¶è®°å½•è¦åè½¬çš„é‚£éƒ¨åˆ†é“¾è¡¨çš„å‰åèŠ‚ç‚¹ï¼ˆå› ä¸ºæŠŠåè½¬åçš„é“¾è¡¨æ”¾å›åŸé“¾è¡¨éœ€è¦è¿™ä¸¤ä¸ªèŠ‚ç‚¹ï¼‰</p>
<p>å…·ä½“å®ç°éœ€è¦æ³¨æ„å®šä¹‰è™šæ‹Ÿå¤´æŒ‡é’ˆï¼Œå› ä¸ºè¿™é“é¢˜ç›®çš„æ•°æ®ä¸­ï¼Œå¤´æŒ‡é’ˆå¾ˆæœ‰å¯èƒ½ä¹Ÿæ˜¯è¦è¢«åè½¬çš„èŠ‚ç‚¹ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> ListNode <span class="title function_">reverseBetween</span><span class="params">(ListNode head, <span class="type">int</span> left, <span class="type">int</span> right)</span> &#123;</span><br><span class="line">    <span class="comment">// å®šä¹‰è™šæ‹Ÿå¤´èŠ‚ç‚¹ï¼Œå› ä¸ºå¾ˆæœ‰å¯èƒ½åŸåˆ—è¡¨ä¸­çš„å¤´èŠ‚ç‚¹å°±æ˜¯ç¿»è½¬ä½ç½®</span></span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">dummyNode</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ListNode</span>(-<span class="number">1</span>);</span><br><span class="line">    dummyNode.next = head;</span><br><span class="line"></span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">pre</span> <span class="operator">=</span> dummyNode;</span><br><span class="line">    <span class="comment">// ä»è™šæ‹Ÿå¤´èŠ‚ç‚¹èµ°åˆ° left-1 çš„ä½ç½®</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; left - <span class="number">1</span>; ++i) &#123;</span><br><span class="line">        pre = pre.next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">rightNode</span> <span class="operator">=</span> pre;</span><br><span class="line">    <span class="comment">// ä» left-1 çš„ä½ç½®èµ°åˆ°rightçš„ä½ç½®</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; right - left + <span class="number">1</span>; ++i) &#123;</span><br><span class="line">        rightNode = rightNode.next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// åˆ‡å‡ºè¦åè½¬çš„èŠ‚ç‚¹</span></span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">leftNode</span> <span class="operator">=</span> pre.next;</span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">curr</span> <span class="operator">=</span> rightNode.next;</span><br><span class="line"></span><br><span class="line">    pre.next = <span class="literal">null</span>;</span><br><span class="line">    rightNode.next = <span class="literal">null</span>;</span><br><span class="line">    reverseLinkedList(leftNode);</span><br><span class="line"></span><br><span class="line">    leftNode.next = curr;</span><br><span class="line">    pre.next = rightNode;</span><br><span class="line">    <span class="keyword">return</span> dummyNode.next;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">reverseLinkedList</span><span class="params">(ListNode head)</span> &#123;</span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">pre</span> <span class="operator">=</span> <span class="literal">null</span>, cur = head;</span><br><span class="line">    <span class="keyword">while</span> (Objects.nonNull(cur)) &#123;</span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">next</span> <span class="operator">=</span> cur.next;</span><br><span class="line">        cur.next = pre;</span><br><span class="line">        pre = cur;</span><br><span class="line">        cur = next;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="k-ä¸ªä¸€ç»„åè½¬é“¾è¡¨">8.7 <a
href="https://leetcode.cn/problems/reverse-nodes-in-k-group/?envType=study-plan-v2&amp;envId=top-interview-150">K
ä¸ªä¸€ç»„åè½¬é“¾è¡¨</a></h3>
<p>è¿™é“é¢˜ç›®ç¬¬ä¸€æ¬¡çœ‹ä¸Šå»è·Ÿä¸Šé¢çš„é¢˜ç›®æ˜¯åŒä¸ªæ€è·¯ï¼ŒåŸºæœ¬å°±æ˜¯ä¸Šé¢é¢˜ç›®åŠ ä¸ª for
å¾ªç¯çš„å˜ä½“ã€‚æˆ‘ä»¬åœ¨è¿™é‡Œåªéœ€è¦çŸ¥é“é“¾è¡¨çš„é•¿åº¦ï¼Œç„¶åæ¯ k
ä¸ªå•ä½é•¿åº¦ï¼Œè°ƒç”¨ä¸Šä¸€é—®çš„å‡½æ•°åè½¬ä¸€ä¸‹ï¼Œç„¶åæŠŠåè½¬åçš„é“¾è¡¨é‡æ–°èµ‹å€¼ç»™
headã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> ListNode <span class="title function_">reverseKGroup</span><span class="params">(ListNode head, <span class="type">int</span> k)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">tmp</span> <span class="operator">=</span> head;</span><br><span class="line">    <span class="comment">// 1. è·å¾—é“¾è¡¨æ€»é•¿åº¦</span></span><br><span class="line">    <span class="keyword">while</span> (Objects.nonNull(tmp)) &#123;</span><br><span class="line">        tmp = tmp.next;</span><br><span class="line">        n++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; i += k) &#123;</span><br><span class="line">        <span class="keyword">if</span> (i + k &gt; n) <span class="keyword">break</span>;</span><br><span class="line">        head = reverseBetween(head, i+<span class="number">1</span>, i + k);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> head;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> ListNode <span class="title function_">reverseBetween</span><span class="params">(ListNode head, <span class="type">int</span> left, <span class="type">int</span> right)</span> &#123;</span><br><span class="line">    <span class="comment">// å®šä¹‰è™šæ‹Ÿå¤´èŠ‚ç‚¹ï¼Œå› ä¸ºå¾ˆæœ‰å¯èƒ½åŸåˆ—è¡¨ä¸­çš„å¤´èŠ‚ç‚¹å°±æ˜¯ç¿»è½¬ä½ç½®</span></span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">dummyNode</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ListNode</span>(-<span class="number">1</span>);</span><br><span class="line">    dummyNode.next = head;</span><br><span class="line"></span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">pre</span> <span class="operator">=</span> dummyNode;</span><br><span class="line">    <span class="comment">// ä»è™šæ‹Ÿå¤´èŠ‚ç‚¹èµ°åˆ° left-1 çš„ä½ç½®</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; left - <span class="number">1</span>; ++i) &#123;</span><br><span class="line">        pre = pre.next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">rightNode</span> <span class="operator">=</span> pre;</span><br><span class="line">    <span class="comment">// ä» left-1 çš„ä½ç½®èµ°åˆ°rightçš„ä½ç½®</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; right - left + <span class="number">1</span>; ++i) &#123;</span><br><span class="line">        rightNode = rightNode.next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// åˆ‡å‡ºè¦åè½¬çš„èŠ‚ç‚¹</span></span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">leftNode</span> <span class="operator">=</span> pre.next;</span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">curr</span> <span class="operator">=</span> rightNode.next;</span><br><span class="line"></span><br><span class="line">    pre.next = <span class="literal">null</span>;</span><br><span class="line">    rightNode.next = <span class="literal">null</span>;</span><br><span class="line">    reverseLinkedList(leftNode);</span><br><span class="line"></span><br><span class="line">    leftNode.next = curr;</span><br><span class="line">    pre.next = rightNode;</span><br><span class="line">    <span class="keyword">return</span> dummyNode.next;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">reverseLinkedList</span><span class="params">(ListNode head)</span> &#123;</span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">pre</span> <span class="operator">=</span> <span class="literal">null</span>, cur = head;</span><br><span class="line">    <span class="keyword">while</span> (Objects.nonNull(cur)) &#123;</span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">next</span> <span class="operator">=</span> cur.next;</span><br><span class="line">        cur.next = pre;</span><br><span class="line">        pre = cur;</span><br><span class="line">        cur = next;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="åˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬-n-ä¸ªç»“ç‚¹">8.8 <a
href="https://leetcode.cn/problems/remove-nth-node-from-end-of-list/description/?envType=study-plan-v2&amp;envId=top-interview-150">åˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬
N ä¸ªç»“ç‚¹</a></h3>
<p>â€”â€”æ¨¡æ‹Ÿ</p>
<p>å…ˆè®¡ç®—é“¾è¡¨æ€»å…±æœ‰å‡ ä¸ªç»“ç‚¹ï¼Œç„¶åéå†åˆ°é“¾è¡¨çš„å€’æ•°ç¬¬ N
ä¸ªç»“ç‚¹çš„å‰ä¸€ä¸ªç»“ç‚¹ï¼Œç„¶åå°†ç»“ç‚¹çš„ next èµ‹å€¼ä¸º next.next å°±å¯ä»¥ã€‚</p>
<p>å®ç°çš„æ—¶å€™éœ€è¦æ³¨æ„ä¸€ä¸‹å®šä¹‰è™šæ‹Ÿå¤´ç»“ç‚¹ï¼Œå› ä¸ºå¤´ç»“ç‚¹æœ‰å¯èƒ½å°±æ˜¯è¦è¢«åˆ é™¤çš„ç»“ç‚¹ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> ListNode <span class="title function_">removeNthFromEnd</span><span class="params">(ListNode head, <span class="type">int</span> n)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">tmp</span> <span class="operator">=</span> head;</span><br><span class="line">    <span class="keyword">while</span> (Objects.nonNull(tmp)) &#123;</span><br><span class="line">        tmp = tmp.next;</span><br><span class="line">        len++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">dummyNode</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ListNode</span>(-<span class="number">1</span>);</span><br><span class="line">    dummyNode.next = head;</span><br><span class="line">    tmp = dummyNode;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; len - n; ++i) &#123;</span><br><span class="line">        tmp = tmp.next;</span><br><span class="line">    &#125;</span><br><span class="line">    tmp.next = tmp.next.next;</span><br><span class="line">    <span class="keyword">return</span> dummyNode.next;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="åˆ é™¤æ’åºé“¾è¡¨ä¸­çš„é‡å¤å…ƒç´ ">8.9 <a
href="https://leetcode.cn/problems/remove-duplicates-from-sorted-list/">åˆ é™¤æ’åºé“¾è¡¨ä¸­çš„é‡å¤å…ƒç´ </a></h3>
<p>â€”â€”æ¨¡æ‹Ÿ</p>
<p>å®šä¹‰å‰åä¸¤ä¸ªæŒ‡é’ˆï¼Œè‹¥åæŒ‡é’ˆçš„ä¸‹ä¸€ä¸ªæŒ‡é’ˆçš„å€¼ç­‰äºå½“å‰æŒ‡é’ˆçš„å€¼ï¼Œåˆ™å°†å‰æŒ‡é’ˆçš„
next æŒ‡å‘åæŒ‡é’ˆçš„ nextã€‚</p>
<p>å®ç°çš„æ—¶å€™éœ€è¦å®šä¹‰ä¸€ä¸ªè™šæ‹Ÿå¤´ç»“ç‚¹ï¼Œå› ä¸ºå¯èƒ½è¦åˆ é™¤çš„ç»“ç‚¹å‡½æ•°ä¼ å…¥çš„
headã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> ListNode <span class="title function_">deleteDuplicates</span><span class="params">(ListNode head)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(Objects.isNull(head)) <span class="keyword">return</span> head;</span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">dummyNode</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ListNode</span>(-<span class="number">1</span>);</span><br><span class="line">    dummyNode.next = head;</span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">curr</span> <span class="operator">=</span> head, pre = dummyNode;</span><br><span class="line">    <span class="keyword">while</span> (Objects.nonNull(curr.next))&#123;</span><br><span class="line">        <span class="keyword">if</span>(curr.val == curr.next.val)&#123;</span><br><span class="line">            pre.next = curr.next;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            pre = pre.next;</span><br><span class="line">        &#125;</span><br><span class="line">        curr = curr.next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dummyNode.next;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="åˆ é™¤æ’åºé“¾è¡¨ä¸­çš„é‡å¤å…ƒç´ -â…±">8.10 <a
href="https://leetcode.cn/problems/remove-duplicates-from-sorted-list-ii/?envType=study-plan-v2&amp;envId=top-interview-150">åˆ é™¤æ’åºé“¾è¡¨ä¸­çš„é‡å¤å…ƒç´ 
â…¡</a></h3>
<p>è¿™é“é¢˜ç›®è·Ÿä¸Šä¸€é“é¢˜ç›®ä¸å¤ªä¸€æ ·ï¼Œè¿™é“é¢˜ç›®æ˜¯ä¸ä¿ç•™å¦‚æœå­˜åœ¨é‡å¤çš„æ•°å€¼ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦å…ˆè®©å½“å‰æŒ‡é’ˆ
cur å…ˆè·¨è¶Šæ‰€æœ‰é‡å¤å€¼çš„å€¼ï¼Œç„¶åå†æ›´æ–°å‰æŒ‡é’ˆ prev çš„ next
çš„å€¼ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœå­˜åœ¨é‡å¤çš„æƒ…å†µçš„è¯ï¼Œä¸è¦ç§»åŠ¨ prev
æŒ‡é’ˆçš„ä½ç½®ï¼Œå› ä¸ºé‡å¤åçš„æ•°å­—å¾ˆè‚¯å®šå†æ¬¡å‡ºç°é‡å¤çš„æƒ…å†µï¼Œæ‰€ä»¥æˆ‘ä»¬ç­‰çœŸçš„æ²¡æœ‰é‡å¤å†ç§»åŠ¨ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> ListNode <span class="title function_">deleteDuplicates</span><span class="params">(ListNode head)</span> &#123;</span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">dummyNode</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ListNode</span>(-<span class="number">1</span>);</span><br><span class="line">    dummyNode.next = head;</span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">prev</span> <span class="operator">=</span> dummyNode;</span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">cur</span> <span class="operator">=</span> head;</span><br><span class="line">    <span class="keyword">while</span> (Objects.nonNull(cur) &amp;&amp; Objects.nonNull(cur.next)) &#123;</span><br><span class="line">        <span class="keyword">if</span> (cur.val == cur.next.val) &#123;</span><br><span class="line">            <span class="keyword">while</span> (Objects.nonNull(cur.next) &amp;&amp; cur.val == cur.next.val) &#123;</span><br><span class="line">                cur = cur.next;</span><br><span class="line">            &#125;</span><br><span class="line">            prev.next = cur.next;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            prev = cur; </span><br><span class="line">        &#125;</span><br><span class="line">        cur = cur.next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dummyNode.next;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æ—‹è½¬é“¾è¡¨">8.11 <a
href="https://leetcode.cn/problems/rotate-list/?envType=study-plan-v2&amp;envId=top-interview-150">æ—‹è½¬é“¾è¡¨</a></h3>
<p>è¿™é“é¢˜ç›®è€ƒå¯Ÿçš„æ˜¯ä¸€ä¸ªé“¾è¡¨ç§»åŠ¨çš„é—®é¢˜ï¼Œé¦–å…ˆè¿›è¡Œé“¾è¡¨æ—‹è½¬çš„æœ¬è´¨æ˜¯ç»™é“¾è¡¨æ–°çš„èµ·å§‹ç‚¹ã€‚æˆ‘ä»¬å¯ä»¥å…ˆèµ°åˆ°é“¾è¡¨å°¾ï¼ŒåŒæ—¶è®°å½•ä¸‹é“¾è¡¨çš„é•¿åº¦ï¼Œå› ä¸ºæ—‹è½¬å¦‚æœæ˜¯é“¾è¡¨çš„å€æ•°çš„è¯ï¼Œå…¶å®å¯ä»¥ä¸ç”¨æ—‹è½¬ï¼Œæ‰€ä»¥æˆ‘ä»¬åº”è¯¥æ‹¿æ—‹è½¬æ¬¡æ•°
k å¯¹é“¾è¡¨é•¿åº¦ len å–ä½™ã€‚ç„¶åèµ°åˆ°é“¾è¡¨å°¾çš„æŒ‡é’ˆéœ€è¦å†å¾€å‰èµ° k = len - k%len
æ­¥ï¼Œç›´åˆ°ä¸‹ä¸€æ¬¡èµ·ç‚¹çš„å‰ä¸€ä¸ªæŒ‡é’ˆï¼Œæˆ‘ä»¬è®°å½•ä¸‹å½“å‰èµ·ç‚¹çš„ä¸‹ä¸€ä¸ªæŒ‡é’ˆï¼Œå°†å½“å‰èµ·ç‚¹çš„
next èµ‹å€¼ä¸º
nullï¼Œè¡¨ç¤ºé“¾è¡¨ç»“å°¾ï¼Œç„¶åå†å°†åˆšåˆšè®°å½•çš„å€¼è¿”å›å‡½æ•°ï¼Œå³å¯å®ç°æ•ˆæœã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> ListNode <span class="title function_">rotateRight</span><span class="params">(ListNode head, <span class="type">int</span> k)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (Objects.isNull(head) || Objects.isNull(head.next) || k == <span class="number">0</span>) <span class="keyword">return</span> head;</span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">tmp</span> <span class="operator">=</span> head;</span><br><span class="line">    <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (Objects.nonNull(tmp.next)) &#123;</span><br><span class="line">        tmp = tmp.next;</span><br><span class="line">        len++;</span><br><span class="line">    &#125;</span><br><span class="line">    tmp.next = head;</span><br><span class="line">    k = len - k % len;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; k; ++i) tmp = tmp.next;</span><br><span class="line">    head = tmp.next;</span><br><span class="line">    tmp.next = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">return</span> head;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="åˆ†éš”é“¾è¡¨">8.12 <a
href="https://leetcode.cn/problems/partition-list/?envType=study-plan-v2&amp;envId=top-interview-150">åˆ†éš”é“¾è¡¨</a></h3>
<p>æœ‰ç‚¹åˆ†æ²»æ€æƒ³ï¼Œä½†ä¹Ÿä¸æ˜¯åˆ†æ²»ï¼Œå°±æ˜¯ä¸€ä¸ªæ¨¡æ‹Ÿã€‚æ€è·¯æ˜¯è¿™æ ·çš„ï¼Œæ–°å¼€ä¸¤æ¡æ–°é“¾ï¼Œé‡‡ç”¨å°¾æ’çš„æ–¹å¼å¾€é“¾è¡¨ä¸­æ·»åŠ å…ƒç´ ã€‚å¯¹äºå°äºæŒ‡å®šå€¼çš„èŠ‚ç‚¹ï¼Œæˆ‘ä»¬æ·»åŠ åˆ°é“¾è¡¨ä¸€ï¼›å¯¹äºå¤§äºç­‰äºæŒ‡å®šå€¼ï¼Œæˆ‘ä»¬æ·»åŠ åˆ°é“¾è¡¨äºŒã€‚æˆ‘ä»¬éœ€è¦æ³¨æ„çš„æ˜¯è®°å½•ä¸¤æ¡é“¾è¡¨çš„èµ·å§‹ä½ç½®ï¼Œç­‰éå†ç»“æŸæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥è¿›è¡Œæ‹¼æ¥ã€‚æœ€ååœ¨è¿”å›æ—¶è¿˜éœ€è¦æ³¨æ„ï¼Œå¯èƒ½å…¨éƒ¨èŠ‚ç‚¹éƒ½åŠ åˆ°äº†é“¾è¡¨äºŒä¸­ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸èƒ½ç›´æ¥è¿”å›é“¾è¡¨ä¸€ï¼Œåªæœ‰å½“é“¾è¡¨ä¸€ä¸ä¸ºç©ºæ—¶ï¼Œæ‰è¿”å›é“¾è¡¨ä¸€ï¼Œå¦åˆ™åº”è¯¥è¿”å›é“¾è¡¨äºŒã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> ListNode <span class="title function_">partition</span><span class="params">(ListNode head, <span class="type">int</span> x)</span> &#123;</span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">l1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ListNode</span>(-<span class="number">1</span>), l2 = <span class="keyword">new</span> <span class="title class_">ListNode</span>(-<span class="number">1</span>), l1Head = <span class="literal">null</span>, l2Head = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">while</span> (Objects.nonNull(head)) &#123;</span><br><span class="line">        <span class="keyword">if</span> (head.val &lt; x) &#123;</span><br><span class="line">            l1.next = head;</span><br><span class="line">            <span class="keyword">if</span> (Objects.isNull(l1Head)) l1Head = l1.next;</span><br><span class="line">            l1 = l1.next;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            l2.next = head;</span><br><span class="line">            <span class="keyword">if</span> (Objects.isNull(l2Head)) l2Head = l2.next;</span><br><span class="line">            l2 = l2.next;</span><br><span class="line">        &#125;</span><br><span class="line">        head = head.next;</span><br><span class="line">    &#125;</span><br><span class="line">    l1.next = l2Head;</span><br><span class="line">    l2.next = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">return</span> Objects.isNull(l1Head)? l2Head : l1Head;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="lru-ç¼“å­˜">8.13 <a
href="https://leetcode.cn/problems/lru-cache/?envType=study-plan-v2&amp;envId=top-interview-150">LRU
ç¼“å­˜</a></h3>
<p>åŒå‘é“¾è¡¨ + Hash</p>
<p><img
src="https://ych-blog.oss-cn-guangzhou.aliyuncs.com/8200f0da-2159-41f1-9fe7-5eb367030884.png" /></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LRUCache</span> &#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">DLinkedNode</span> &#123;</span><br><span class="line">        <span class="type">int</span> key;</span><br><span class="line">        <span class="type">int</span> value;</span><br><span class="line">        DLinkedNode prev;</span><br><span class="line">        DLinkedNode next;</span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">DLinkedNode</span><span class="params">()</span> &#123;&#125;</span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">DLinkedNode</span><span class="params">(<span class="type">int</span> _key, <span class="type">int</span> _value)</span> &#123;key = _key; value = _value;&#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Map&lt;Integer, DLinkedNode&gt; cache = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;Integer, DLinkedNode&gt;();</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> size;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> capacity;</span><br><span class="line">    <span class="keyword">private</span> DLinkedNode head, tail;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">LRUCache</span><span class="params">(<span class="type">int</span> capacity)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.size = <span class="number">0</span>;</span><br><span class="line">        <span class="built_in">this</span>.capacity = capacity;</span><br><span class="line">        <span class="comment">// ä½¿ç”¨ä¼ªå¤´éƒ¨å’Œä¼ªå°¾éƒ¨èŠ‚ç‚¹</span></span><br><span class="line">        head = <span class="keyword">new</span> <span class="title class_">DLinkedNode</span>();</span><br><span class="line">        tail = <span class="keyword">new</span> <span class="title class_">DLinkedNode</span>();</span><br><span class="line">        head.next = tail;</span><br><span class="line">        tail.prev = head;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">get</span><span class="params">(<span class="type">int</span> key)</span> &#123;</span><br><span class="line">        <span class="type">DLinkedNode</span> <span class="variable">node</span> <span class="operator">=</span> cache.get(key);</span><br><span class="line">        <span class="keyword">if</span> (node == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// å¦‚æœ key å­˜åœ¨ï¼Œå…ˆé€šè¿‡å“ˆå¸Œè¡¨å®šä½ï¼Œå†ç§»åˆ°å¤´éƒ¨</span></span><br><span class="line">        moveToHead(node);</span><br><span class="line">        <span class="keyword">return</span> node.value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">put</span><span class="params">(<span class="type">int</span> key, <span class="type">int</span> value)</span> &#123;</span><br><span class="line">        <span class="type">DLinkedNode</span> <span class="variable">node</span> <span class="operator">=</span> cache.get(key);</span><br><span class="line">        <span class="keyword">if</span> (node == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="comment">// å¦‚æœ key ä¸å­˜åœ¨ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„èŠ‚ç‚¹</span></span><br><span class="line">            <span class="type">DLinkedNode</span> <span class="variable">newNode</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DLinkedNode</span>(key, value);</span><br><span class="line">            <span class="comment">// æ·»åŠ è¿›å“ˆå¸Œè¡¨</span></span><br><span class="line">            cache.put(key, newNode);</span><br><span class="line">            <span class="comment">// æ·»åŠ è‡³åŒå‘é“¾è¡¨çš„å¤´éƒ¨</span></span><br><span class="line">            addToHead(newNode);</span><br><span class="line">            ++size;</span><br><span class="line">            <span class="keyword">if</span> (size &gt; capacity) &#123;</span><br><span class="line">                <span class="comment">// å¦‚æœè¶…å‡ºå®¹é‡ï¼Œåˆ é™¤åŒå‘é“¾è¡¨çš„å°¾éƒ¨èŠ‚ç‚¹</span></span><br><span class="line">                <span class="type">DLinkedNode</span> <span class="variable">tail</span> <span class="operator">=</span> removeTail();</span><br><span class="line">                <span class="comment">// åˆ é™¤å“ˆå¸Œè¡¨ä¸­å¯¹åº”çš„é¡¹</span></span><br><span class="line">                cache.remove(tail.key);</span><br><span class="line">                --size;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// å¦‚æœ key å­˜åœ¨ï¼Œå…ˆé€šè¿‡å“ˆå¸Œè¡¨å®šä½ï¼Œå†ä¿®æ”¹ valueï¼Œå¹¶ç§»åˆ°å¤´éƒ¨</span></span><br><span class="line">            node.value = value;</span><br><span class="line">            moveToHead(node);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">addToHead</span><span class="params">(DLinkedNode node)</span> &#123;</span><br><span class="line">        node.prev = head;</span><br><span class="line">        node.next = head.next;</span><br><span class="line">        head.next.prev = node;</span><br><span class="line">        head.next = node;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">removeNode</span><span class="params">(DLinkedNode node)</span> &#123;</span><br><span class="line">        node.prev.next = node.next;</span><br><span class="line">        node.next.prev = node.prev;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">moveToHead</span><span class="params">(DLinkedNode node)</span> &#123;</span><br><span class="line">        removeNode(node);</span><br><span class="line">        addToHead(node);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> DLinkedNode <span class="title function_">removeTail</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">DLinkedNode</span> <span class="variable">res</span> <span class="operator">=</span> tail.prev;</span><br><span class="line">        removeNode(res);</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><br></p>
<h2 id="äºŒå‰æ ‘">9. äºŒå‰æ ‘</h2>
<h3 id="äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦">9.1 <a
href="https://leetcode.cn/problems/maximum-depth-of-binary-tree/?envType=study-plan-v2&amp;envId=top-interview-150">äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦</a></h3>
<p>é€’å½’ï¼ŒåœŸåˆ°æè‡´å°±æ˜¯æ½®ã€‚æ±‚æœ€å¤§æ·±åº¦ï¼Œå½“å‰èŠ‚ç‚¹ä¸å­˜åœ¨ï¼Œåˆ™ä¸ºé€’å½’å‡ºå£ï¼Œç›´æ¥è¿”å›
0ã€‚å½“å‰èŠ‚ç‚¹å­˜åœ¨ï¼Œåˆ™è¿”å›å½“å‰èŠ‚ç‚¹å·¦å³å­æ ‘ä¸­æ¯”è¾ƒæ·±çš„é‚£ä¸ªæ•°ï¼ŒåŒæ—¶ï¼Œè€ƒè™‘åˆ°å½“å‰èŠ‚ç‚¹ä¹Ÿä¸ºä¸€å±‚ï¼Œæ‰€ä»¥éœ€è¦åœ¨æ±‚å‡ºå·¦å³å­æ ‘æ¯”è¾ƒæ·±çš„é‚£ä¸ªæ•°å€¼åé¢
+ 1</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TreeNode</span> &#123;</span><br><span class="line">    <span class="type">int</span> val;</span><br><span class="line">    TreeNode left;</span><br><span class="line">    TreeNode right;</span><br><span class="line">    TreeNode() &#123;</span><br><span class="line">    &#125;</span><br><span class="line">    TreeNode(<span class="type">int</span> val) &#123;</span><br><span class="line">        <span class="built_in">this</span>.val = val;</span><br><span class="line">    &#125;</span><br><span class="line">    TreeNode(<span class="type">int</span> val, TreeNode left, TreeNode right) &#123;</span><br><span class="line">        <span class="built_in">this</span>.val = val;</span><br><span class="line">        <span class="built_in">this</span>.left = left;</span><br><span class="line">        <span class="built_in">this</span>.right = right;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxDepth</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (Objects._isNull_(root)) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">return</span> Math._max_(maxDepth(root.left), maxDepth(root.right)) + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ç›¸åŒçš„æ ‘">9.2 <a
href="https://leetcode.cn/problems/same-tree/?envType=study-plan-v2&amp;envId=top-interview-150">ç›¸åŒçš„æ ‘</a></h3>
<p>â€”â€”é€’å½’</p>
<p>æ¯”è¾ƒä¸¤æ£µæ ‘ï¼Œå¯ä»¥çœ‹ä½œæ˜¯æ¯”è¾ƒå½“å‰çš„ä¸¤ä¸ªèŠ‚ç‚¹çš„é€’å½’å®ç°ï¼Œæˆ‘ä»¬åªéœ€è¦æŠŠæ¯”è¾ƒå½“å‰ä¸¤ä¸ªèŠ‚ç‚¹çš„é€»è¾‘å¤„ç†é€šé¡ºï¼Œæ¯”è¾ƒä¸¤æ£µæ ‘å°±æ˜¯é€’å½’çš„æ´»ã€‚æˆ‘ä»¬å¯¹äºå½“å‰ä¸¤ä¸ªèŠ‚ç‚¹ï¼Œä¸¤ä¸ªèŠ‚ç‚¹éƒ½ä¸º
nullï¼Œåˆ™è¿”å› trueã€‚å¦‚æœåªæœ‰ä¸€æ–¹ä¸ºç©ºï¼Œåˆ™è¿”å›
falseï¼›å¦‚æœéƒ½ä¸ä¸ºç©ºï¼Œåˆ™æ¯”è¾ƒèŠ‚ç‚¹çš„å€¼ï¼Œå¦‚æœå€¼ä¸åŒï¼Œåˆ™è¿”å›
falseï¼›å€¼ç›¸åŒï¼Œåˆ™éœ€æ»¡è¶³ä»–ä»¬å„è‡ªçš„å·¦å³å­æ ‘éƒ½åº”è¯¥ç›¸åŒæ‰èƒ½è¿”å›
trueï¼Œæ­¤æ—¶å°±ç”¨ä¸Šäº†é€’å½’ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isSameTree</span><span class="params">(TreeNode p, TreeNode q)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (Objects.isNull(p) &amp;&amp; Objects.isNull(q)) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">if</span> (Objects.isNull(p)) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">if</span> (Objects.isNull(q)) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">if</span> (p.val == q.val) <span class="keyword">return</span> isSameTree(p.left, q.left) &amp;&amp; isSameTree(p.right, q.right);</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ç¿»è½¬äºŒå‰æ ‘">9.3 <a
href="https://leetcode.cn/problems/invert-binary-tree/?envType=study-plan-v2&amp;envId=top-interview-150">ç¿»è½¬äºŒå‰æ ‘</a></h3>
<p>â€”â€”åé€’å½’åŸç†</p>
<p>å…ˆç¿»è½¬å·¦å³å­æ ‘ï¼Œå†åè½¬å·¦å³èŠ‚ç‚¹</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> TreeNode <span class="title function_">invertTree</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (Objects.isNull(root)) <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    invertTree(root.left);</span><br><span class="line">    invertTree(root.right);</span><br><span class="line">    <span class="type">TreeNode</span> <span class="variable">temp</span> <span class="operator">=</span> root.left;</span><br><span class="line">    root.left = root.right;</span><br><span class="line">    root.right = temp;</span><br><span class="line">    <span class="keyword">return</span> root;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="å¯¹ç§°äºŒå‰æ ‘">9.4 <a
href="https://leetcode.cn/problems/symmetric-tree/?envType=study-plan-v2&amp;envId=top-interview-150">å¯¹ç§°äºŒå‰æ ‘</a></h3>
<p>â€”â€”é€’å½’</p>
<p>å•ä¸ªèŠ‚ç‚¹ä½œä¸ºå‡½æ•°å‚æ•°å¾ˆéš¾è§£å†³è¿™é“é¢˜ç›®ï¼Œæˆ‘ä»¬ç›´æ¥ä½¿ç”¨<strong>é‡è½½</strong>çš„æ–¹å¼ï¼Œå°†ä½¿ç”¨ä¼ å…¥ä¸¤ä¸ªå‚æ•°çš„å½¢å¼ï¼ŒæŒ‰ç…§ä¸Šé¢é¢˜ç›®çš„æ–¹æ³•ï¼Œè¿›è¡Œåˆ¤æ–­ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isSymmetric</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (Objects.isNull(root)) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">return</span> isSymmetric(root.left, root.right);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isSymmetric</span><span class="params">(TreeNode a, TreeNode b)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (Objects.isNull(a) &amp;&amp; Objects.isNull(b)) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">if</span> (Objects.isNull(a)) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">if</span> (Objects.isNull(b)) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">if</span> (a.val == b.val) <span class="keyword">return</span> isSymmetric(a.left, b.right) &amp;&amp; isSymmetric(a.right, b.left);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ä»å‰åºä¸ä¸­åºéå†åºåˆ—æ„é€ äºŒå‰æ ‘">9.5 <a
href="https://leetcode.cn/problems/construct-binary-tree-from-preorder-and-inorder-traversal/description/?envType=study-plan-v2&amp;envId=top-interview-150">ä»å‰åºä¸ä¸­åºéå†åºåˆ—æ„é€ äºŒå‰æ ‘</a></h3>
<p>ç”±å‰åºå’Œä¸­åºæ„é€ äºŒå‰æ ‘æœ‰ä¸ªç‰¹ç‚¹ï¼Œå°±æ˜¯å› ä¸ºå‰åºæ˜¯æœ€å¼€å§‹è®¿é—®æ ¹èŠ‚ç‚¹çš„ï¼Œæ‰€ä»¥å‰åºéå†æ•°ç»„çš„æ¯ä¸€ä¸ªå€¼éƒ½å¯ä»¥æŠŠä¸­åºéå†æ•°ç»„åˆ†å‰²æˆä¸¤éƒ¨åˆ†æ•°ç»„ï¼Œè¿™ä¸¤éƒ¨åˆ†æ•°ç»„åˆ†åˆ«ä¸ºä»¥å‰åºéå†æ•°ç»„ä¸­é‚£ä¸ªå€¼æ‰€å¯¹åº”çš„å·¦å³å­æ ‘çš„ä¸­åºéå†ï¼Œè¿™æ ·è®²æœ‰ç‚¹æŠ½è±¡ï¼Œæˆ‘ä»¬ç”»ä¸ªå›¾ä¼šæ¸…æ™°ç‚¹ã€‚
<img
src="https://ych-blog.oss-cn-guangzhou.aliyuncs.com/20241214202727.png" />
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="type">int</span> <span class="variable">idx</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"><span class="keyword">public</span> TreeNode <span class="title function_">buildTree</span><span class="params">(<span class="type">int</span>[] preorder, <span class="type">int</span>[] inorder)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (preorder.length == <span class="number">0</span>) <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="type">TreeNode</span> <span class="variable">root</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TreeNode</span>(preorder[idx++]);</span><br><span class="line">    <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (; i &lt; inorder.length; i++) <span class="keyword">if</span> (inorder[i] == root.val) <span class="keyword">break</span>;</span><br><span class="line">    root.left = buildTree(preorder, inorder, <span class="number">0</span>, i - <span class="number">1</span>);</span><br><span class="line">    root.right = buildTree(preorder, inorder, i + <span class="number">1</span>, inorder.length - <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">return</span> root;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">private</span> TreeNode <span class="title function_">buildTree</span><span class="params">(<span class="type">int</span>[] preorder, <span class="type">int</span>[] inorder, <span class="type">int</span> left, <span class="type">int</span> right)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (idx &gt;= preorder.length) <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">if</span>(left &gt; right) <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="type">TreeNode</span> <span class="variable">root</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TreeNode</span>(preorder[idx++]);</span><br><span class="line">    <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> left;</span><br><span class="line">    <span class="keyword">for</span> (; i &lt;= right; i++) <span class="keyword">if</span> (inorder[i] == root.val) <span class="keyword">break</span>;</span><br><span class="line">    root.left = buildTree(preorder, inorder, left, i - <span class="number">1</span>);</span><br><span class="line">    root.right = buildTree(preorder, inorder, i + <span class="number">1</span>, right);</span><br><span class="line">    <span class="keyword">return</span> root;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="ä»ä¸­åºä¸ååºéå†åºåˆ—æ„é€ äºŒå‰æ ‘">9.6 <a
href="https://leetcode.cn/problems/construct-binary-tree-from-inorder-and-postorder-traversal/?envType=study-plan-v2&amp;envId=top-interview-150">ä»ä¸­åºä¸ååºéå†åºåˆ—æ„é€ äºŒå‰æ ‘</a></h3>
<p>ç”±ååºå’Œä¸­åºæ„é€ äºŒå‰æ ‘æœ‰ä¸ªç‰¹ç‚¹ï¼Œå°±æ˜¯å› ä¸ºååºä»å³å¾€å·¦ç¬¬ä¸€ä¸ªæ˜¯æœ€å¼€å§‹è®¿é—®æ ¹èŠ‚ç‚¹çš„ï¼Œæ‰€ä»¥ååºéå†æ•°ç»„ä»å³å¾€å·¦çš„æ¯ä¸€ä¸ªå€¼éƒ½å¯ä»¥æŠŠä¸­åºéå†æ•°ç»„åˆ†å‰²æˆä¸¤éƒ¨åˆ†æ•°ç»„ï¼Œè¿™ä¸¤éƒ¨åˆ†æ•°ç»„åˆ†åˆ«ä¸ºä»¥å‰åºéå†æ•°ç»„ä¸­é‚£ä¸ªå€¼æ‰€å¯¹åº”çš„å·¦å³å­æ ‘çš„ä¸­åºéå†ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç”±ååºéå†è¿›è¡Œæ„é€ çš„æ•°ç»„ï¼Œæˆ‘ä»¬éœ€è¦å…ˆæ„é€ å³å­æ ‘ï¼Œå†æ„é€ å·¦å­æ ‘ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">idx</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">public</span> TreeNode <span class="title function_">buildTree</span><span class="params">(<span class="type">int</span>[] inorder, <span class="type">int</span>[] postorder)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (postorder.length == <span class="number">0</span>) <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        idx = postorder.length - <span class="number">1</span>;</span><br><span class="line">        <span class="type">TreeNode</span> <span class="variable">root</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TreeNode</span>(postorder[idx--]);</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (; i &lt; inorder.length; i++) <span class="keyword">if</span> (inorder[i] == root.val) <span class="keyword">break</span>;</span><br><span class="line">        root.right = buildTree(postorder, inorder, i + <span class="number">1</span>, inorder.length - <span class="number">1</span>);</span><br><span class="line">        root.left = buildTree(postorder, inorder, <span class="number">0</span>, i - <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">return</span> root;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> TreeNode <span class="title function_">buildTree</span><span class="params">(<span class="type">int</span>[] postorder, <span class="type">int</span>[] inorder, <span class="type">int</span> left, <span class="type">int</span> right)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (idx &lt; <span class="number">0</span> || left &gt; right) <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">TreeNode</span> <span class="variable">root</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TreeNode</span>(postorder[idx--]);</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> left;</span><br><span class="line">        <span class="keyword">for</span> (; i &lt;= right; i++) <span class="keyword">if</span> (inorder[i] == root.val) <span class="keyword">break</span>;</span><br><span class="line">        root.right = buildTree(postorder, inorder, i + <span class="number">1</span>, right);</span><br><span class="line">        root.left = buildTree(postorder, inorder, left, i - <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">return</span> root;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="å¡«å……æ¯ä¸ªèŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªå³ä¾§èŠ‚ç‚¹æŒ‡é’ˆ-â…±">9.7 <a
href="https://leetcode.cn/problems/populating-next-right-pointers-in-each-node-ii/?envType=study-plan-v2&amp;envId=top-interview-150">å¡«å……æ¯ä¸ªèŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªå³ä¾§èŠ‚ç‚¹æŒ‡é’ˆ
â…¡</a></h3>
<p>â€”â€”å±‚åºéå†</p>
<p>è€ƒå¯Ÿçš„æ˜¯äºŒå‰æ ‘çš„å±‚åºéå†ã€‚è¦ä½¿å¾—æ¯ä¸€è¡Œçš„äºŒå‰æ ‘èŠ‚ç‚¹çš„ next
æŒ‡é’ˆéƒ½æŒ‡å‘å®ƒçš„å³è¾¹ï¼Œæˆ‘ä»¬éœ€è¦å¯¹æ¯ä¸€å±‚å•ç‹¬åšå¤„ç†ã€‚æˆ‘ä»¬é€šè¿‡é˜Ÿåˆ— +
æ•°ç»„æ¥å®Œæˆã€‚å…·ä½“å®ç°æ˜¯å…ˆå°†æ ¹èŠ‚ç‚¹åŠ å…¥åˆ°é˜Ÿåˆ—ä¸­ï¼Œç„¶åæˆ‘ä»¬ä»¥é˜Ÿåˆ—æ˜¯å¦ä¸ºç©ºè¿›è¡Œå¾ªç¯ï¼Œæ¯ä¸€æ¬¡å¾ªç¯éƒ½éå†é˜Ÿåˆ—ä¸­æ‰€æœ‰å…ƒç´ ï¼Œå› ä¸ºé˜Ÿåˆ—æ¯ä¸€æ¬¡å¾ªç¯å¼¹å‡ºçš„æ˜¯å½“å‰å±‚çš„èŠ‚ç‚¹ï¼Œæ¯ä¸€æ¬¡æ’å…¥çš„æ˜¯æˆ‘ä»¬ä¸‹ä¸€å±‚çš„èŠ‚ç‚¹ã€‚å¯¹äºå½“å‰å±‚çš„èŠ‚ç‚¹ï¼Œæˆ‘ä»¬éœ€è¦ç”¨ä¸€ä¸ªæ•°ç»„å°†è¿™äº›ç‚¹è®°å½•ä¸‹æ¥ï¼Œç­‰æˆ‘ä»¬æŠŠè¿™ä¸€å±‚çš„èŠ‚ç‚¹
next
æŒ‡é’ˆè¿æ¥å®Œæˆï¼Œå³éå†å®Œè¿™ä¸€å±‚çš„èŠ‚ç‚¹åï¼Œæˆ‘ä»¬å†å°†è¿™ä¸€å±‚çš„å­©å­èŠ‚ç‚¹åŠ å…¥åˆ°é˜Ÿåˆ—ä¸­ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> Node <span class="title function_">connect</span><span class="params">(Node root)</span> &#123;</span><br><span class="line">    LinkedList&lt;Node&gt; queue = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">if</span> (Objects.isNull(root)) <span class="keyword">return</span> root;</span><br><span class="line">    queue.add(root);</span><br><span class="line">    <span class="keyword">while</span> (!queue.isEmpty()) &#123;</span><br><span class="line">        LinkedList&lt;Node&gt; temp = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">        <span class="type">Node</span> <span class="variable">cur</span> <span class="operator">=</span> queue.poll();</span><br><span class="line">        temp.add(cur);</span><br><span class="line">        <span class="keyword">while</span> (!queue.isEmpty()) &#123;</span><br><span class="line">            cur.next = queue.poll();</span><br><span class="line">            temp.add(cur.next);</span><br><span class="line">            cur = cur.next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (Node node : temp) <span class="keyword">if</span>(Objects.nonNull(node))&#123;</span><br><span class="line">            <span class="keyword">if</span>(Objects.nonNull(node.left))&#123;</span><br><span class="line">                queue.add(node.left);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(Objects.nonNull(node.right))&#123;</span><br><span class="line">                queue.add(node.right);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> root;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="äºŒå‰æ ‘å±•å¼€ä¸ºé“¾è¡¨">9.8 <a
href="https://leetcode.cn/problems/flatten-binary-tree-to-linked-list/description/?envType=study-plan-v2&amp;envId=top-interview-150">äºŒå‰æ ‘å±•å¼€ä¸ºé“¾è¡¨</a></h3>
<p>ç¬¬ä¸€æ¬¡çœ‹åˆ°è¿™é“é¢˜ç›®æƒ³ç”¨å‰åºéå†åšï¼Œä½†æ˜¯å‰åºéå†çš„ç©ºé—´å¤æ‚åº¦æ¯”è¾ƒé«˜ï¼Œå°±æƒ³ç€èƒ½ä¸èƒ½è¾¹ç¿»éå†è¾¹ç¿»è½¬ã€‚ç”¨é€’å½’å®åœ¨æƒ³ä¸å‡ºæ¥ï¼Œçœ‹äº†ä¸€ä¸‹åˆ«äººé¢˜è§£ä½¿ç”¨çš„éå†ã€‚å¤§æ¦‚æ€è·¯æˆ‘ç”»ä¸ªå›¾è®²ä¸€ä¸‹ã€‚æ€è·¯ä¸»è¦æ˜¯ä¸‹é¢è¿™æ ·
<img
src="https://ych-blog.oss-cn-guangzhou.aliyuncs.com/20241214202752.png" />
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">flatten</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">    <span class="keyword">while</span> (Objects.nonNull(root)) &#123;</span><br><span class="line">        <span class="keyword">if</span>(Objects.isNull(root.left))&#123;</span><br><span class="line">            root = root.right;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="type">TreeNode</span> <span class="variable">pre</span> <span class="operator">=</span> root.left;</span><br><span class="line">            <span class="keyword">while</span> (Objects.nonNull(pre.right)) pre = pre.right;</span><br><span class="line">            pre.right = root.right;</span><br><span class="line">            root.right = root.left;</span><br><span class="line">            root.left = <span class="literal">null</span>;</span><br><span class="line">            <span class="comment">// è€ƒè™‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">            root = root.right;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="è·¯å¾„æ€»å’Œ">9.9 <a
href="https://leetcode.cn/problems/path-sum/?envType=study-plan-v2&amp;envId=top-interview-150">è·¯å¾„æ€»å’Œ</a></h3>
<p>â€”â€”é€’å½’</p>
<p>å¦‚æœå½“å‰èŠ‚ç‚¹ä¸ºç©ºï¼Œåˆ™æ— è®º targetSum ç­‰ä¸ç­‰äº 0ï¼Œéƒ½è¿”å›
falseã€‚å¦‚æœå½“å‰èŠ‚ç‚¹å·¦å³å­æ ‘éƒ½ä¸ºç©ºï¼Œåˆ™è¯´æ˜å½“å‰èŠ‚ç‚¹ä¸ºå¶å­èŠ‚ç‚¹ï¼Œåˆ™ç›´æ¥è¿”å›å½“å‰èŠ‚ç‚¹å€¼æ˜¯å¦ç­‰äº
targetã€‚è‹¥å½“å‰èŠ‚ç‚¹å€¼ä¸æ»¡è¶³ï¼Œåˆ™çœ‹çœ‹å½“å‰èŠ‚ç‚¹çš„å·¦å³å­æ ‘æ˜¯å¦æ»¡è¶³ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hasPathSum</span><span class="params">(TreeNode root, <span class="type">int</span> targetSum)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(Objects.isNull(root)) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">if</span>(Objects.isNull(root.left) &amp;&amp; Objects.isNull(root.right) ) <span class="keyword">return</span> root.val == targetSum;</span><br><span class="line">    <span class="keyword">return</span> hasPathSum(root.left, targetSum - root.val) || hasPathSum(root.right, targetSum - root.val);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æ±‚æ ¹èŠ‚ç‚¹åˆ°å¶èŠ‚ç‚¹æ•°å­—ä¹‹å’Œ">9.10 <a
href="https://leetcode.cn/problems/sum-root-to-leaf-numbers/description/?envType=study-plan-v2&amp;envId=top-interview-150">æ±‚æ ¹èŠ‚ç‚¹åˆ°å¶èŠ‚ç‚¹æ•°å­—ä¹‹å’Œ</a></h3>
<p>â€”â€”é€’å½’</p>
<p>å…ˆè®°å½•ä¸€ä¸ªä¸´æ—¶å˜é‡ tmp = ä¸Šä¸€ä¸ªèŠ‚ç‚¹çš„å€¼ num * 10 + å½“å‰èŠ‚ç‚¹çš„å€¼
valï¼Œå¦‚æœå½“å‰èŠ‚ç‚¹ä¸ºå¶å­èŠ‚ç‚¹ï¼Œåˆ™ç›´æ¥è¿”å›ä¸´æ—¶å˜é‡
tmpï¼Œå³å·²ç»åˆ°å¶å­ï¼Œä¸ç”¨å†æ‹¼æ¥æ•°å­—äº†ã€‚è‹¥ä¸æ˜¯å¶å­èŠ‚ç‚¹ï¼Œåˆ™å½“å‰èŠ‚ç‚¹çš„å·¦å³å­æ ‘é€’å½’ç»“æœç›¸åŠ ï¼Œå¯ä½œä¸ºæœ€ç»ˆçš„ç­”æ¡ˆã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">sumNumbers</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> getResult(root, <span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">private</span> <span class="type">int</span> <span class="title function_">getResult</span><span class="params">(TreeNode root, <span class="type">int</span> num)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (Objects.isNull(root)) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">temp</span> <span class="operator">=</span> num * <span class="number">10</span> + root.val;</span><br><span class="line">    <span class="keyword">if</span>(Objects.isNull(root.left) &amp;&amp; Objects.isNull(root.right)) <span class="keyword">return</span> temp;</span><br><span class="line">    <span class="keyword">return</span> getResult(root.left, temp) + getResult(root.right, temp);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="äºŒå‰æ ‘çš„ç›´å¾„">9.11 <a
href="https://leetcode.cn/problems/diameter-of-binary-tree/description/">äºŒå‰æ ‘çš„ç›´å¾„</a></h3>
<p>æ ¹æ®é¢˜ç›®ç¤ºä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥çŸ¥é“ä¸€æ¡è·¯å¾„çš„é•¿åº¦ç­‰äºè¯¥è·¯å¾„ä¸Šçš„èŠ‚ç‚¹æ•° -
1ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„é—®é¢˜è½¬æ¢æˆäº†æ±‚è·¯å¾„ç»è¿‡çš„èŠ‚ç‚¹æ•°æœ€å¤§å€¼ - 1ã€‚</p>
<p>è€Œè·¯å¾„ç»è¿‡çš„èŠ‚ç‚¹æ•°æœ€å¤§å€¼æ€ä¹ˆæ±‚å‘¢ï¼Ÿé€’å½’çš„ä¸»è¦æ€è·¯æ˜¯è¿™æ ·çš„</p>
<figure class="highlight latex"><table><tr><td class="code"><pre><span class="line">å½“å‰èŠ‚ç‚¹æ‰€åœ¨çš„è·¯å¾„ç»è¿‡çš„èŠ‚ç‚¹æ•°çš„æœ€å¤§å€¼ = å½“å‰èŠ‚ç‚¹å·¦å­©å­çš„æœ€å¤§æ·±åº¦ + å½“å‰èŠ‚ç‚¹å³å­©å­çš„æœ€å¤§æ·±åº¦ + 1</span><br><span class="line">å½“å‰èŠ‚ç‚¹çš„æœ€å¤§æ·±åº¦ = max(å½“å‰èŠ‚ç‚¹å·¦å­©å­çš„æœ€å¤§æ·±åº¦, å½“å‰èŠ‚ç‚¹å³å­©å­çš„æœ€å¤§æ·±åº¦)</span><br></pre></td></tr></table></figure>
<p>å®ç°ä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">maxNum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">diameterOfBinaryTree</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">    maxNum = <span class="number">1</span>;</span><br><span class="line">    depth(root);</span><br><span class="line">    <span class="keyword">return</span> maxNum - <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">private</span> <span class="type">int</span> <span class="title function_">depth</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (Objects.isNull(root)) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">L</span> <span class="operator">=</span> depth(root.left);</span><br><span class="line">    <span class="type">int</span> <span class="variable">R</span> <span class="operator">=</span> depth(root.right);</span><br><span class="line">    maxNum = Math.max(maxNum, L + R + <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">return</span> Math.max(L, R) + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="äºŒå‰æ ‘ä¸­çš„æœ€å¤§è·¯å¾„å’Œ">9.12 <a
href="https://leetcode.cn/problems/binary-tree-maximum-path-sum/?envType=study-plan-v2&amp;envId=top-interview-150">äºŒå‰æ ‘ä¸­çš„æœ€å¤§è·¯å¾„å’Œ</a></h3>
<p>è¿™é“é¢˜ç›®è·Ÿ <a
href="https://leetcode.cn/problems/diameter-of-binary-tree/description/">äºŒå‰æ ‘çš„ç›´å¾„</a>
è¿™é“é¢˜ç›®å¾ˆåƒï¼Œä½†æ˜¯ <a
href="https://leetcode.cn/problems/diameter-of-binary-tree/description/">äºŒå‰æ ‘çš„ç›´å¾„</a>
è¿™é“é¢˜ç›®æ˜¯è¦ç®—èŠ‚ç‚¹çš„ä¸ªæ•°çš„æœ€å¤§å€¼ï¼Œè€Œè¿™é“é¢˜ç›®æ˜¯ç®—èŠ‚ç‚¹çš„å€¼çš„æ€»å’Œæœ€å¤§ã€‚æ‰€ä»¥åœ¨ä»£ç å®ç°ä¸Šè¿˜æ˜¯æœ‰ä¸€ç‚¹åŒºåˆ«ã€‚
<a
href="https://leetcode.cn/problems/diameter-of-binary-tree/description/">äºŒå‰æ ‘çš„ç›´å¾„</a>
çš„å½“å‰èŠ‚ç‚¹çš„æœ€å¤§å€¼æ˜¯å·¦å³å­æ ‘çš„æœ€å¤§æ·±åº¦ä¹‹å’Œ +
1ã€‚è¿™é“é¢˜ç›®å½“å‰èŠ‚ç‚¹çš„æœ€å¤§å€¼ï¼Œåˆ™éœ€è¦è€ƒè™‘å·¦å³å­æ ‘çš„æœ€å¤§å€¼æ˜¯ä¸æ˜¯ä¸ºè´Ÿæ•°ï¼Œè´Ÿæ•°çš„è¯å…¶å®ä¼šé˜»ç¢å½“å‰èŠ‚ç‚¹æ±‚æœ€å¤§å€¼ï¼Œæˆ‘ä»¬ä¸åº”è¯¥è€ƒè™‘åœ¨å†…ã€‚æ‰€ä»¥è¿™é“é¢˜ç›®ç›¸æ¯”äº
<a
href="https://leetcode.cn/problems/diameter-of-binary-tree/description/">äºŒå‰æ ‘çš„ç›´å¾„</a>
ï¼Œæˆ‘ä»¬éœ€è¦åˆ¤æ–­å½“å‰èŠ‚ç‚¹çš„å·¦å³å­æ ‘çš„æœ€å¤§å€¼æ˜¯å¦å¤§äº 0
ï¼Œåªæœ‰å·¦å³å­æ ‘çš„æœ€å¤§å€¼ &gt;0 æ—¶ï¼Œæˆ‘ä»¬æ‰æŠŠå®ƒä»¬åŠ å…¥åˆ°å½“å‰èŠ‚ç‚¹çš„è·¯å¾„ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxPathSum</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">    res = Integer.MIN_VALUE;</span><br><span class="line">    depthPathSum(root);</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">private</span> <span class="type">int</span> <span class="title function_">depthPathSum</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (Objects.isNull(root)) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">L</span> <span class="operator">=</span> Math.max(depthPathSum(root.left), <span class="number">0</span>);</span><br><span class="line">    <span class="type">int</span> <span class="variable">R</span> <span class="operator">=</span> Math.max(depthPathSum(root.right), <span class="number">0</span>);</span><br><span class="line">    res = Math.max(res, root.val + L + R);</span><br><span class="line">    <span class="keyword">return</span> Math.max(L, R) + root.val;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="äºŒå‰æ ‘çš„ä¸­åºéå†">9.13 <a
href="https://leetcode.cn/problems/binary-tree-inorder-traversal/">äºŒå‰æ ‘çš„ä¸­åºéå†</a></h3>
<p>æŒ‰ç…§ä¸­åºéå†çš„è§„åˆ™ï¼Œå…ˆéå†å·¦å­æ ‘ï¼Œå†éå†å½“å‰èŠ‚ç‚¹ï¼Œå†éå†å³å­æ ‘ã€‚ç”±äºéœ€è¦è®°å½•èŠ‚ç‚¹ï¼Œæ‰€ä»¥éœ€è¦å®šä¹‰ä¸€ä¸ªåˆ—è¡¨å˜é‡ï¼ŒæŒ‰ç…§é¡ºåºè®°å½•å¯¹åº”çš„èŠ‚ç‚¹è¿”å›å³å¯</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> List&lt;Integer&gt; <span class="title function_">inorderTraversal</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">    List&lt;Integer&gt; res = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">if</span> (Objects.isNull(root)) <span class="keyword">return</span> res;</span><br><span class="line">    res.addAll(inorderTraversal(root.left));</span><br><span class="line">    res.add(root.val);</span><br><span class="line">    res.addAll(inorderTraversal(root.right));</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="äºŒå‰æœç´¢æ ‘è¿­ä»£">9.14 <a
href="https://leetcode.cn/problems/binary-search-tree-iterator/description/?envType=study-plan-v2&amp;envId=top-interview-150">äºŒå‰æœç´¢æ ‘è¿­ä»£</a></h3>
<p>â€”â€”é€’å½’</p>
<p>é¢˜ç›®è®²çš„æœ‰ç‚¹æŠ½è±¡ï¼Œä¸è¿‡æ ·ä¾‹æ¯”è¾ƒæ¸…æ™°ï¼Œç›´æ¥çœ‹æ ·ä¾‹å¯ä»¥çŸ¥é“å…¶å®å°±æ˜¯ä¸€ä¸ªä¸­åºéå†çš„ç»“æœè¾“å‡ºã€‚æˆ‘ä»¬æœ€ç®€å•çš„åšæ³•å°±æ˜¯æ‹¿ä¸€ä¸ªåˆ—è¡¨å­˜å…¥ä¸­åºéå†çš„ç»“æœï¼Œç„¶åæ‹¿ä¸€ä¸ªä¸‹æ ‡ï¼Œéšç€
next()å‡½æ•°çš„è°ƒç”¨ï¼Œå»è®¿é—®åˆ—è¡¨ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">BSTIterator</span> &#123;</span><br><span class="line">    List&lt;Integer&gt; record;</span><br><span class="line">    <span class="type">int</span> <span class="variable">idx</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">BSTIterator</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">        record = inorderTraversal(root);</span><br><span class="line">        idx = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">next</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> record.get(idx++);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hasNext</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> idx &lt; record.size();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> List&lt;Integer&gt; <span class="title function_">inorderTraversal</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">        List&lt;Integer&gt; res = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">if</span> (Objects._isNull_(root)) <span class="keyword">return</span> res;</span><br><span class="line">        res.addAll(Objects._requireNonNull_(inorderTraversal(root.left)));</span><br><span class="line">        res.add(root.val);</span><br><span class="line">        res.addAll(Objects._requireNonNull_(inorderTraversal(root.right)));</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>â€”â€”è¿­ä»£ å…¶å®è¿˜æœ‰è¿­ä»£çš„ç‰ˆæœ¬ï¼Œè¿­ä»£å°±æ˜¯ç”¨æ ˆå»å­˜å‚¨èŠ‚ç‚¹ï¼Œç„¶åéšç€ next
å‡½æ•°çš„è°ƒç”¨ï¼Œå®ç°ä¸€ä¸ªå°†å½“å‰èŠ‚ç‚¹ä¸å¯¹åº”çš„å·¦å­æ ‘å…¥æ ˆï¼Œå…¥æ ˆå®Œæˆåï¼Œå°†æ ˆé¡¶å…ƒç´ å¼¹å‡ºï¼Œå¹¶è¿”å›æ ˆé¡¶å…ƒç´ çš„å€¼ï¼ŒåŒæ—¶è¿”å›æ ˆé¡¶èŠ‚ç‚¹çš„å€¼ã€‚å¯¹äºæ˜¯å¦è¿˜æœ‰ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„åˆ¤å®šï¼Œéœ€è¦åŒæ—¶å­˜åœ¨æ ˆä¸ºç©ºä¸”
cur æŒ‡é’ˆæŒ‡å‘
nullï¼Œæ‰ä¼šå‡ºç°æ²¡æœ‰ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„æƒ…å†µ(ä¸‹å›¾æœ€æœ‰ä¸€ä¸ªå›¾)ã€‚è®²èµ·æ¥æ¯”è¾ƒæŠ½è±¡ï¼Œç”»ä¸ªå›¾è§£é‡Šä¸€ä¸‹
<img
src="https://ych-blog.oss-cn-guangzhou.aliyuncs.com/20241214202818.png" />
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">BSTIterator</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Deque&lt;TreeNode&gt; stack;</span><br><span class="line">    <span class="keyword">private</span> TreeNode cur;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">BSTIterator</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">        stack = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">        cur = root;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">next</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">while</span> (Objects.nonNull(cur))&#123;</span><br><span class="line">            stack.push(cur);</span><br><span class="line">            cur = cur.left;</span><br><span class="line">        &#125;</span><br><span class="line">        cur = stack.pop();</span><br><span class="line">        <span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> cur.val;</span><br><span class="line">        cur = cur.right;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hasNext</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> Objects.nonNull(cur) || !stack.isEmpty();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="å®Œå…¨äºŒå‰æ ‘çš„èŠ‚ç‚¹æ•°">9.15 <a
href="https://leetcode.cn/problems/count-complete-tree-nodes/description/?envType=study-plan-v2&amp;envId=top-interview-150">å®Œå…¨äºŒå‰æ ‘çš„èŠ‚ç‚¹æ•°</a></h3>
<p>â€”â€”é€’å½’</p>
<p>å…·ä½“çš„åšæ³•æ˜¯è¿”å›å·¦å³å­æ ‘çš„èŠ‚ç‚¹ä¸ªæ•°ï¼Œç”±äºå½“å‰èŠ‚ç‚¹ä¹Ÿç®—ä¸€ä¸ªèŠ‚ç‚¹ï¼Œæ‰€ä»¥è¿˜éœ€è¦
+ 1</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">countNodes</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(Objects.isNull(root)) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">return</span> countNodes(root.left) + countNodes(root.right) + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="äºŒå‰æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ">9.16 <a
href="https://leetcode.cn/problems/lowest-common-ancestor-of-a-binary-tree/?envType=study-plan-v2&amp;envId=top-interview-150">äºŒå‰æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ</a></h3>
<p>æœ€å¼€å§‹çœ‹åˆ°è¿™é“é¢˜ç›®ï¼Œæƒ³ç”¨å¹¶æŸ¥é›†æ¥åšï¼Œä¹Ÿå°±æ˜¯å¹¶æŸ¥é›†å‹ç¼©è·¯å¾„çš„æ–¹æ³•ï¼Œå°†æ‰€æœ‰èŠ‚ç‚¹æŒ‡å‘åŒä¸€ä¸ªçˆ¶èŠ‚ç‚¹ï¼Œä½†æ˜¯ä»”ç»†ä¸€æƒ³ï¼Œæœ€åå¯èƒ½éƒ½æŒ‡å‘äº†æ ¹èŠ‚ç‚¹ï¼Œä¸å¯è¡Œã€‚å†ä»”ç»†ä¸€æƒ³ï¼Œæ„Ÿè§‰å°±æ˜¯äºŒå‰æ ‘çš„<strong>ååºéå†</strong>ã€‚å·¦å­æ ‘éå†ä¸€ä¸‹ï¼Œçœ‹ä¸€ä¸‹å·¦å­æ ‘æœ‰æ²¡æœ‰èŠ‚ç‚¹ä¸
p æˆ–è€… q ä¸€æ ·çš„ï¼Œå†å³å­æ ‘éå†ä¸€ä¸‹ï¼Œçœ‹çœ‹å³å­æ ‘æœ‰æ²¡æœ‰èŠ‚ç‚¹ä¸ p æˆ– q
ä¸€æ ·çš„ï¼›</p>
<ul>
<li>å¦‚æœå³å­æ ‘ä¸ p æˆ– q èŠ‚ç‚¹ç›¸ç­‰çš„èŠ‚ç‚¹éƒ½ä¸å­˜åœ¨ï¼Œè¯´æ˜ä»€ä¹ˆï¼Ÿè¯´æ˜ pã€q
ä¸¤ä¸ªèŠ‚ç‚¹éƒ½åœ¨å·¦å­æ ‘ï¼Œç›´æ¥è¿”å›å·¦å­æ ‘é€’å½’ç»“æœã€‚</li>
<li>å¦‚æœå·¦å­æ ‘ä¸ p æˆ– q èŠ‚ç‚¹ç›¸ç­‰çš„èŠ‚ç‚¹éƒ½ä¸å­˜åœ¨ï¼Œè¯´æ˜ä»€ä¹ˆï¼Ÿè¯´æ˜ pã€q
ä¸¤ä¸ªèŠ‚ç‚¹éƒ½åœ¨å³å­æ ‘ï¼Œç›´æ¥è¿”å›å³å­æ ‘é€’å½’ç»“æœã€‚</li>
<li>é€’å½’å‡ºå£æ˜¯ä»€ä¹ˆï¼Œé€’å½’å‡ºå£å°±æ˜¯å½“å‰èŠ‚ç‚¹çš„å€¼ä¸º null æˆ–è€… = p æˆ–è€… =
qï¼Œç›´æ¥è¿”å›å½“å‰èŠ‚ç‚¹ã€‚</li>
<li>æœ€åå®åœ¨æ‰¾ä¸åˆ°ï¼Œç›´æ¥è¿”å›æ ¹èŠ‚ç‚¹ã€‚</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> TreeNode <span class="title function_">lowestCommonAncestor</span><span class="params">(TreeNode root, TreeNode p, TreeNode q)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (Objects.isNull(root) || root == p || root == q) <span class="keyword">return</span> root;</span><br><span class="line">    <span class="type">TreeNode</span> <span class="variable">left</span> <span class="operator">=</span> lowestCommonAncestor(root.left, p, q);</span><br><span class="line">    <span class="type">TreeNode</span> <span class="variable">right</span> <span class="operator">=</span> lowestCommonAncestor(root.right, p, q);</span><br><span class="line">    <span class="keyword">if</span>(Objects.isNull(right)) <span class="keyword">return</span> left;</span><br><span class="line">    <span class="keyword">if</span>(Objects.isNull(left)) <span class="keyword">return</span> right;</span><br><span class="line">    <span class="keyword">return</span> root;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><br></p>
<h2 id="äºŒå‰æ ‘å±‚æ¬¡éå†">10. äºŒå‰æ ‘å±‚æ¬¡éå†</h2>
<h3 id="äºŒå‰æ ‘çš„å³è§†å›¾">10.1 <a
href="https://leetcode.cn/problems/binary-tree-right-side-view/?envType=study-plan-v2&amp;envId=top-interview-150">äºŒå‰æ ‘çš„å³è§†å›¾</a></h3>
<p>â€”â€”å±‚åºéå†</p>
<p>å±‚åºéå†ï¼Œå–æ¯ä¸€å±‚çš„æœ€å³è¾¹çš„èŠ‚ç‚¹ï¼ŒåŠ å…¥åˆ°è¿”å›çš„æ•°ç»„ä¸­å³å¯ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> List&lt;Integer&gt; <span class="title function_">rightSideView</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">    List&lt;Integer&gt; res = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">if</span> (Objects.isNull(root)) <span class="keyword">return</span> res;</span><br><span class="line">    Queue&lt;TreeNode&gt; queue = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">    queue.add(root);</span><br><span class="line">    <span class="keyword">while</span> (!queue.isEmpty()) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> queue.size();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">            <span class="type">TreeNode</span> <span class="variable">node</span> <span class="operator">=</span> queue.poll();</span><br><span class="line">            <span class="keyword">if</span> (Objects.nonNull(node.left)) queue.add(node.left);</span><br><span class="line">            <span class="keyword">if</span> (Objects.nonNull(node.right)) queue.add(node.right);</span><br><span class="line">            <span class="keyword">if</span> (i == len - <span class="number">1</span>) res.add(node.val);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="äºŒå‰æ ‘çš„å±‚å¹³å‡å€¼">10.2 <a
href="https://leetcode.cn/problems/average-of-levels-in-binary-tree/?envType=study-plan-v2&amp;envId=top-interview-150">äºŒå‰æ ‘çš„å±‚å¹³å‡å€¼</a></h3>
<p>â€”â€”å±‚åºéå†</p>
<p>å¯¹äºæ¯ä¸€å±‚ï¼Œæ±‚å‡ºæ¯ä¸€å±‚çš„èŠ‚ç‚¹æ•°å’ŒèŠ‚ç‚¹å€¼çš„æ€»å’Œï¼Œç„¶åæ¯ä¸€å±‚è®°å½•ä¸‹è¿™ä¸€å±‚çš„å¹³å‡å€¼</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> List&lt;Double&gt; <span class="title function_">averageOfLevels</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">    List&lt;Double&gt; res = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    Queue&lt;TreeNode&gt; queue = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">    queue.add(root);</span><br><span class="line">    <span class="keyword">while</span> (!queue.isEmpty()) &#123;</span><br><span class="line">        <span class="type">long</span> <span class="variable">len</span> <span class="operator">=</span> queue.size(), sum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; len; ++i) &#123;</span><br><span class="line">            <span class="type">TreeNode</span> <span class="variable">cur</span> <span class="operator">=</span> queue.poll();</span><br><span class="line">            sum += cur.val;</span><br><span class="line">            <span class="keyword">if</span> (Objects.nonNull(cur.left)) queue.add(cur.left);</span><br><span class="line">            <span class="keyword">if</span> (Objects.nonNull(cur.right)) queue.add(cur.right);</span><br><span class="line">        &#125;</span><br><span class="line">        res.add(sum * <span class="number">1.0</span> / len);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="äºŒå‰æ ‘çš„å±‚åºéå†">10.3 <a
href="https://leetcode.cn/problems/binary-tree-level-order-traversal/?envType=study-plan-v2&amp;envId=top-interview-150">äºŒå‰æ ‘çš„å±‚åºéå†</a></h3>
<p>â€”â€”å±‚åºéå†æ¨¡æ¿é¢˜ï¼Œå†™æ¨¡æ¿ï¼Œæ¯ä¸€å±‚ç”¨ä¸€ä¸ªåˆ—è¡¨å­˜å‚¨å³å¯ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> List&lt;List&lt;Integer&gt;&gt; <span class="title function_">levelOrder</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">    List&lt;List&lt;Integer&gt;&gt; res = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">if</span> (Objects.isNull(root)) <span class="keyword">return</span> res;</span><br><span class="line">    Queue&lt;TreeNode&gt; queue = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">    queue.add(root);</span><br><span class="line">    <span class="keyword">while</span> (!queue.isEmpty()) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> queue.size();</span><br><span class="line">        List&lt;Integer&gt; level = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; len; ++i) &#123;</span><br><span class="line">            <span class="type">TreeNode</span> <span class="variable">node</span> <span class="operator">=</span> queue.poll();</span><br><span class="line">            level.add(node.val);</span><br><span class="line">            <span class="keyword">if</span> (Objects.nonNull(node.left)) queue.add(node.left);</span><br><span class="line">            <span class="keyword">if</span> (Objects.nonNull(node.right)) queue.add(node.right);</span><br><span class="line">        &#125;</span><br><span class="line">        res.add(level);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="äºŒå‰æ ‘çš„é”¯é½¿å½¢å±‚æ¬¡éå†">10.4 <a
href="https://leetcode.cn/problems/binary-tree-zigzag-level-order-traversal/?envType=study-plan-v2&amp;envId=top-interview-150">äºŒå‰æ ‘çš„é”¯é½¿å½¢å±‚æ¬¡éå†</a></h3>
<p>â€”â€”å±‚æ¬¡éå†</p>
<p>è·Ÿä¸Šä¸€é¢˜å‡ ä¹ä¸€æ ·çš„æ¨¡æ¿ï¼Œåªæ˜¯å¤šåŠ äº†ä¸€ä¸ªåˆ¤æ–­ã€‚å½“åœ¨éå†çš„å±‚æ•°ä¸ºå¥‡æ•°å±‚ï¼ˆæ ¹èŠ‚ç‚¹ç®—ç¬¬
0 å±‚ï¼‰æ—¶ï¼Œæˆ‘ä»¬éœ€è¦ç¿»è½¬å­˜å‚¨è¯¥å±‚æ•°çš„åˆ—è¡¨</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> List&lt;List&lt;Integer&gt;&gt; <span class="title function_">zigzagLevelOrder</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">    List&lt;List&lt;Integer&gt;&gt; res = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">if</span> (Objects.isNull(root)) <span class="keyword">return</span> res;</span><br><span class="line">    Queue&lt;TreeNode&gt; queue = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">    queue.add(root);</span><br><span class="line">    <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (!queue.isEmpty()) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> queue.size();</span><br><span class="line">        List&lt;Integer&gt; level = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; len; ++i) &#123;</span><br><span class="line">            <span class="type">TreeNode</span> <span class="variable">node</span> <span class="operator">=</span> queue.poll();</span><br><span class="line">            level.add(node.val);</span><br><span class="line">            <span class="keyword">if</span> (Objects.nonNull(node.left)) queue.add(node.left);</span><br><span class="line">            <span class="keyword">if</span> (Objects.nonNull(node.right)) queue.add(node.right);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (num % <span class="number">2</span> == <span class="number">1</span>) &#123;</span><br><span class="line">            Collections.reverse(level);</span><br><span class="line">        &#125;</span><br><span class="line">        res.add(level);</span><br><span class="line">        num++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><br></p>
<h2 id="äºŒå‰æœç´¢æ ‘">11. äºŒå‰æœç´¢æ ‘</h2>
<h3 id="äºŒå‰æœç´¢æ ‘çš„æœ€å°ç»å¯¹å·®">11.1 <a
href="https://leetcode.cn/problems/minimum-absolute-difference-in-bst/description/?envType=study-plan-v2&amp;envId=top-interview-150">äºŒå‰æœç´¢æ ‘çš„æœ€å°ç»å¯¹å·®</a></h3>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬å¦‚ä½•è·å–åˆ°ä¸€æ£µäºŒå‰æœç´¢æ ‘çš„æ‰€æœ‰èŠ‚ç‚¹æ•°å€¼ï¼Œå¹¶ä¸”æŒ‰ç…§å‡åºæ’åºï¼Ÿç­”æ¡ˆæ˜¯ä¸­åºéå†ã€‚å¯¹äºè¿™é“é¢˜ç›®ï¼Œä¸€æ£µäºŒå‰æ ‘ä¸­åºéå†å‡ºæ¥çš„ç»“æœï¼Œmin(arr[i]
- arr[i+1])
çš„ç»“æœå°±æ˜¯ç­”æ¡ˆã€‚æ€ä¹ˆå†™ä»£ç å‘¢ï¼Ÿå¾ˆæ˜æ˜¾è¿™ä¸ªå…¬å¼æ˜¯ä¸¤ä¸ªå€¼ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦é¢å¤–çš„ä¸€ä¸ªå˜é‡
pre
è®°å½•å‰ä¸€ä¸ªèŠ‚ç‚¹çš„å€¼ã€‚ç„¶åå‘¢ï¼ŸæŒ‰ç…§ä¸­åºéå†çš„é¡ºåºï¼Œå…ˆéå†å·¦å­æ ‘ï¼›ç„¶åå¤„ç†å½“å‰èŠ‚ç‚¹ï¼Œå–å½“å‰èŠ‚ç‚¹ä¸ä¸Šä¸€ä¸ªèŠ‚ç‚¹çš„å€¼çš„å·®å€¼ï¼›æœ€åéå†å³å­æ ‘ã€‚
å…¶å®æ¯ä¸€é“é¢˜ç›®è®²èµ·æ¥éƒ½æ˜¯æŠ½è±¡çš„ï¼Œæˆ‘ç”»ä¸ªå›¾è§£é‡Šä¸€ä¸‹å§ã€‚ <img
src="https://ych-blog.oss-cn-guangzhou.aliyuncs.com/20241214202900.png" />
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">pre</span> <span class="operator">=</span> -<span class="number">1</span>, res = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getMinimumDifference</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">    pre = -<span class="number">1</span>;</span><br><span class="line">    res = Integer.MAX_VALUE;</span><br><span class="line">    inorderPrint(root);</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">inorderPrint</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (Objects.isNull(root)) <span class="keyword">return</span>;</span><br><span class="line">    inorderPrint(root.left);</span><br><span class="line">    <span class="keyword">if</span> (pre == -<span class="number">1</span>) &#123;</span><br><span class="line">        pre = root.val;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        res = Math.min(res, root.val - pre); <span class="comment">// è¿™é‡Œåªéœ€è¦ç”¨å½“å‰æ•° - å‰ä¸€ä¸ªæ•°ï¼› å› ä¸ºä¸­åºéå†çš„ç»“æœå°±æ˜¯é€’å¢çš„ï¼Œæ‰€ä»¥ç›¸å‡ä¸€å®šæ˜¯æ­£æ•°</span></span><br><span class="line">        pre = root.val;</span><br><span class="line">    &#125;</span><br><span class="line">    inorderPrint(root.right);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="éªŒè¯äºŒå‰æœç´¢æ ‘">11.2 <a
href="https://leetcode.cn/problems/validate-binary-search-tree/description/?envType=study-plan-v2&amp;envId=top-interview-150https://leetcode.cn/problems/validate-binary-search-tree/description/?envType=study-plan-v2&amp;envId=top-interview-150">éªŒè¯äºŒå‰æœç´¢æ ‘</a></h3>
<p>è·Ÿä¸Šä¸€é“é¢˜ç›®ä¸€æ ·çš„æ¨¡æ¿ã€‚ä¸Šä¸€é“é¢˜ç›®æ˜¯è®°å½•å‰åä¸¤ä¸ªå€¼çš„å·®çš„æœ€å°å€¼ï¼Œè¿™é“é¢˜ç›®æ˜¯åˆ¤æ–­ä¸Šä¸€ä¸ªå€¼æ˜¯å¦å¤§äºç­‰äºå½“å‰å€¼ï¼Œå¦‚æœæ˜¯ï¼Œè¯´æ˜ä¸æ˜¯äºŒå‰æœç´¢æ ‘ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">long</span> <span class="variable">pre</span> <span class="operator">=</span> Long._MIN_VALUE_;</span><br><span class="line"><span class="type">boolean</span> <span class="variable">flag</span> <span class="operator">=</span> <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isValidBST</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (Objects._isNull_(root)) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    inorderPrint(root);</span><br><span class="line">    <span class="keyword">return</span> flag;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">inorderPrint</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (Objects._isNull_(root)) <span class="keyword">return</span>;</span><br><span class="line">    inorderPrint(root.left);</span><br><span class="line">    <span class="keyword">if</span> (!flag) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">if</span> (pre == Long._MIN_VALUE_) &#123;</span><br><span class="line">        pre = root.val;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (pre &gt;= root.val) flag = <span class="literal">false</span>;</span><br><span class="line">        pre = root.val;</span><br><span class="line">    &#125;</span><br><span class="line">    inorderPrint(root.right);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="äºŒå‰æœç´¢æ ‘ä¸­ç¬¬-k-å°çš„å…ƒç´ ">11.3 <a
href="https://leetcode.cn/problems/kth-smallest-element-in-a-bst/?envType=study-plan-v2&amp;envId=top-interview-150">äºŒå‰æœç´¢æ ‘ä¸­ç¬¬
k å°çš„å…ƒç´ </a></h3>
<p>â€”â€”ä¸­åºéå†</p>
<p>å…¶å®å°±æ˜¯å–äºŒå‰æœç´¢æ ‘ä¸­åºéå†çš„ç»“æœåˆ—è¡¨ä¸­çš„ç¬¬ k ä¸ªå°æ ‡çš„æ•°ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> <span class="number">0</span>, k = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">kthSmallest</span><span class="params">(TreeNode root, <span class="type">int</span> k)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.k = k;</span><br><span class="line">        inorderPrint(root);</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">inorderPrint</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (Objects.isNull(root)) <span class="keyword">return</span>;</span><br><span class="line">        inorderPrint(root.left);</span><br><span class="line">        <span class="keyword">if</span> (k == <span class="number">0</span>) <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">if</span> (--k == <span class="number">0</span>) res = root.val;</span><br><span class="line">        inorderPrint(root.right);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><br></p>
<h2 id="å›¾">12. å›¾</h2>
<h3 id="å²›å±¿çš„æœ€å¤§é¢ç§¯">12.1 <a
href="https://leetcode.cn/problems/max-area-of-island/">å²›å±¿çš„æœ€å¤§é¢ç§¯</a></h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxAreaOfIsland</span><span class="params">(<span class="type">int</span>[][] grid)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; grid.length; ++i) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; grid[<span class="number">0</span>].length; ++j) &#123;</span><br><span class="line">            <span class="keyword">if</span> (grid[i][j] == <span class="number">1</span>) res = Math.max(res, getAreaOfIsland(grid, i, j));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">private</span> <span class="type">int</span> <span class="title function_">getAreaOfIsland</span><span class="params">(<span class="type">int</span>[][] grid, <span class="type">int</span> r, <span class="type">int</span> c)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!isArea(grid, r, c)) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (grid[r][c] != <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    grid[r][c] = <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span> + getAreaOfIsland(grid, r + <span class="number">1</span>, c) + getAreaOfIsland(grid, r - <span class="number">1</span>, c) + getAreaOfIsland(grid, r, c - <span class="number">1</span>) + getAreaOfIsland(grid, r, c + <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">private</span> <span class="type">boolean</span> <span class="title function_">isArea</span><span class="params">(<span class="type">int</span>[][] grid, <span class="type">int</span> r, <span class="type">int</span> c)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> r &gt;= <span class="number">0</span> &amp;&amp; r &lt; grid.length &amp;&amp; c &gt;= <span class="number">0</span> &amp;&amp; c &lt; grid[<span class="number">0</span>].length;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="å²›å±¿æ•°é‡">12.2 <a
href="https://leetcode.cn/problems/number-of-islands/?envType=study-plan-v2&amp;envId=top-interview-150">å²›å±¿æ•°é‡</a></h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">numIslands</span><span class="params">(<span class="type">char</span>[][] grid)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">cnt</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; grid.length; ++i) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; grid[<span class="number">0</span>].length; ++j) &#123;</span><br><span class="line">            <span class="keyword">if</span> (grid[i][j] == <span class="string">&#x27;1&#x27;</span>) &#123;</span><br><span class="line">                traverseArea(grid, i, j);</span><br><span class="line">                cnt++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> cnt;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">traverseArea</span><span class="params">(<span class="type">char</span>[][] grid, <span class="type">int</span> r, <span class="type">int</span> c)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!isGrid(grid, r, c)) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">if</span>(grid[r][c] != <span class="string">&#x27;1&#x27;</span>) <span class="keyword">return</span>;</span><br><span class="line">    grid[r][c] = <span class="string">&#x27;2&#x27;</span>;</span><br><span class="line">    traverseArea(grid,r,c+<span class="number">1</span>);</span><br><span class="line">    traverseArea(grid,r,c-<span class="number">1</span>);</span><br><span class="line">    traverseArea(grid,r-<span class="number">1</span>,c);</span><br><span class="line">    traverseArea(grid,r+<span class="number">1</span>,c);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="type">boolean</span> <span class="title function_">isGrid</span><span class="params">(<span class="type">char</span>[][] grid, <span class="type">int</span> r, <span class="type">int</span> c)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> r &gt;= <span class="number">0</span> &amp;&amp; r &lt; grid.length &amp;&amp; c &gt;= <span class="number">0</span> &amp;&amp; c &lt; grid[<span class="number">0</span>].length;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="å²›å±¿çš„å‘¨é•¿">12.3 <a
href="https://leetcode.cn/problems/island-perimeter/description/">å²›å±¿çš„å‘¨é•¿</a></h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">islandPerimeter</span><span class="params">(<span class="type">int</span>[][] grid)</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; grid.length; ++i) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; grid[<span class="number">0</span>].length; ++j) &#123;</span><br><span class="line">            <span class="keyword">if</span> (grid[i][j] == <span class="number">1</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> traverseArea(grid, i, j);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">private</span> <span class="type">int</span> <span class="title function_">traverseArea</span><span class="params">(<span class="type">int</span>[][] grid, <span class="type">int</span> r, <span class="type">int</span> c)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!isGrid(grid, r, c)) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span> (grid[r][c] == <span class="number">0</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span> (grid[r][c] != <span class="number">1</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    grid[r][c] = <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">return</span> traverseArea(grid, r, c + <span class="number">1</span>) + traverseArea(grid, r, c - <span class="number">1</span>) + traverseArea(grid, r + <span class="number">1</span>, c) + traverseArea(grid, r - <span class="number">1</span>, c);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">private</span> <span class="type">boolean</span> <span class="title function_">isGrid</span><span class="params">(<span class="type">int</span>[][] grid, <span class="type">int</span> r, <span class="type">int</span> c)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> r &gt;= <span class="number">0</span> &amp;&amp; r &lt; grid.length &amp;&amp; c &gt;= <span class="number">0</span> &amp;&amp; c &lt; grid[<span class="number">0</span>].length;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æ‰€æœ‰å¯èƒ½çš„è·¯å¾„">12.4 <a
href="https://leetcode.cn/problems/all-paths-from-source-to-target/">æ‰€æœ‰å¯èƒ½çš„è·¯å¾„</a></h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">List&lt;List&lt;Integer&gt;&gt; res = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">Deque&lt;Integer&gt; stack = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line"><span class="type">boolean</span>[] vis;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> List&lt;List&lt;Integer&gt;&gt; <span class="title function_">allPathsSourceTarget</span><span class="params">(<span class="type">int</span>[][] graph)</span> &#123;</span><br><span class="line">    vis = <span class="keyword">new</span> <span class="title class_">boolean</span>[graph.length];</span><br><span class="line">    Arrays.fill(vis, <span class="literal">false</span>);</span><br><span class="line">    stack.offerLast(<span class="number">0</span>);</span><br><span class="line">    vis[<span class="number">0</span>] = <span class="literal">true</span>;</span><br><span class="line">    dfs(graph, <span class="number">0</span>, graph.length - <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">dfs</span><span class="params">(<span class="type">int</span>[][] graph, <span class="type">int</span> idx, <span class="type">int</span> n)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (idx == n) &#123;</span><br><span class="line">        res.add(<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(stack));</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> target : graph[idx]) &#123;</span><br><span class="line">        <span class="keyword">if</span> (vis[target]) <span class="keyword">continue</span>;</span><br><span class="line">        stack.offerLast(target);</span><br><span class="line">        vis[target] = <span class="literal">true</span>;</span><br><span class="line">        dfs(graph, target, n);</span><br><span class="line">        stack.removeLast();</span><br><span class="line">        vis[target] = <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="è¢«å›´ç»•çš„åŒºåŸŸ">12.5 <a
href="https://leetcode.cn/problems/surrounded-regions/description/?envType=study-plan-v2&amp;envId=top-interview-150">è¢«å›´ç»•çš„åŒºåŸŸ</a></h3>
<p>ä»è¾¹ç¼˜å¼€å§‹æœèµ·ï¼ŒæŠŠè¾¹ç¼˜çš„â€˜Oâ€™å…ˆæ‰“ä¸Šæ ‡è®°ï¼Œç„¶åå†éå†ä¸€ä¸‹æ•°ç»„ï¼Œæ²¡æœ‰æ‰“ä¸Šæ ‡è®°çš„â€˜Oâ€™åˆ™æ˜¯æˆ‘ä»¬éœ€è¦è¿›è¡Œæ›¿æ¢çš„</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">solve</span><span class="params">(<span class="type">char</span>[][] board)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (Objects.isNull(board) || board.length == <span class="number">0</span>) <span class="keyword">return</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> board.length, m = board[<span class="number">0</span>].length;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; m; ++j) &#123;</span><br><span class="line">                <span class="type">boolean</span> <span class="variable">edge</span> <span class="operator">=</span> i == <span class="number">0</span> || j == <span class="number">0</span> || i == n - <span class="number">1</span> || j == m - <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">if</span> (edge &amp;&amp; board[i][j] == <span class="string">&#x27;O&#x27;</span>) &#123;</span><br><span class="line">                    dfs(board, i, j);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; m; ++j) &#123;</span><br><span class="line">                <span class="keyword">if</span> (board[i][j] == <span class="string">&#x27;#&#x27;</span>) board[i][j] = <span class="string">&#x27;O&#x27;</span>;</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span> (board[i][j] == <span class="string">&#x27;O&#x27;</span>) board[i][j] = <span class="string">&#x27;X&#x27;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">dfs</span><span class="params">(<span class="type">char</span>[][] board, <span class="type">int</span> i, <span class="type">int</span> j)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (i &lt; <span class="number">0</span> || i &gt;= board.length || j &lt; <span class="number">0</span> || j &gt;= board[<span class="number">0</span>].length || board[i][j] != <span class="string">&#x27;O&#x27;</span>) <span class="keyword">return</span>;</span><br><span class="line">        board[i][j] = <span class="string">&#x27;#&#x27;</span>;</span><br><span class="line">        dfs(board, i, j + <span class="number">1</span>);</span><br><span class="line">        dfs(board, i, j - <span class="number">1</span>);</span><br><span class="line">        dfs(board, i - <span class="number">1</span>, j);</span><br><span class="line">        dfs(board, i + <span class="number">1</span>, j);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="å…‹éš†å›¾">12.6 <a
href="https://leetcode.cn/problems/clone-graph/description/?envType=study-plan-v2&amp;envId=top-interview-150">å…‹éš†å›¾</a></h3>
<p>â€”â€”DFS</p>
<p>è¿˜æ˜¯ç”¨ DFS è¿›è¡Œçˆ†æœã€‚é€’å½’ä¸¤ä¸ªè¦ç‚¹ï¼Œä¸€ä¸ªæ˜¯å‡ºå£ï¼Œä¸€ä¸ªæ˜¯é€’å½’è¯­å¥ã€‚</p>
<p>ï¼ˆ1ï¼‰å‡ºå£ï¼š</p>
<ul>
<li>ç¬¬ä¸€ä¸ªå‡ºå£ï¼šæ ¹æ®é¢˜ç›®æ‰€ç»™ç”¨ä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆå¿«æ‰¾åˆ°ä¸€ä¸ªé€’å½’å‡ºå£ï¼Œé‚£å°±æ˜¯å½“ä¼ å…¥çš„ç»“ç‚¹ä¸º
null æ—¶ï¼Œè¿”å› nullã€‚</li>
<li>ç¬¬äºŒä¸ªå‡ºå£ï¼šæˆ‘ä»¬ä¼šå‘ç°é¢˜ç›®æ‰€ç»™ç”¨ä¾‹ä¸­æ˜¯ä¸€ä¸ªæ— å‘å›¾ï¼Œä¼šæœ‰ç¯çš„å­˜åœ¨ï¼Œå¦‚æœè¿™ä¸ªä¸åŠ ä»¥é™åˆ¶å°±ä¼šæ— çº¿é€’å½’ä¸‹å»ï¼Œæ— é™åˆ›å»ºèŠ‚ç‚¹ã€‚é‚£æ€ä¹ˆåŠå‘¢ï¼Ÿå¯ä»¥ç”¨ä¸€ä¸ª
map å»æ¥æˆ‘ä»¬åˆ›å»ºå‡ºæ¥çš„èŠ‚ç‚¹ï¼ŒæŠŠèŠ‚ç‚¹å€¼ä½œä¸º keyï¼ŒèŠ‚ç‚¹æœ¬èº«ä½œä¸º
valueã€‚æ¯ä¸€æ¬¡åˆ›å»ºèŠ‚ç‚¹å‰ï¼Œéƒ½å…ˆçœ‹çœ‹ä¹‹å‰æ˜¯å¦å·²ç»åˆ›å»ºè¿‡è¯¥èŠ‚ç‚¹ï¼Œåˆ›å»ºè¿‡äº†å°±ä¸éœ€è¦å†åˆ›å»ºäº†ã€‚</li>
</ul>
<p>ï¼ˆ2ï¼‰é€’å½’è¯­å¥ã€‚æˆ‘ä»¬éœ€è¦æ˜ç¡®çš„æ˜¯ï¼Œå¯¹äºå½“å‰èŠ‚ç‚¹çš„é‚»å±…ï¼Œæˆ‘ä»¬åº”è¯¥åœ¨è¿›å…¥é€’å½’æ—¶åŠ å…¥è¿˜æ˜¯é€’å½’è¿”å›æ—¶åŠ å…¥ã€‚ç­”æ¡ˆå¾ˆæ˜æ˜¾ï¼Œéœ€è¦åœ¨é€’å½’è¿”å›æ—¶åŠ å…¥ã€‚ä¸ºä»€ä¹ˆå› ä¸ºå¯¹äºå½“å‰èŠ‚ç‚¹çš„é‚»å±…ï¼Œå®ƒä»¬ä¹Ÿæœ‰è‡ªå·±çš„é‚»å±…ï¼Œå…ˆå°†å½“å‰èŠ‚ç‚¹çš„é‚»å±…ç”¨é€’å½’çš„æ–¹å¼åˆ›å»ºï¼ŒæŠŠå®ƒä»¬çš„é‚»å±…ä¹Ÿå…‹éš†å¥½åï¼Œå†å°†å®ƒä»¬åŠ å…¥åˆ°å½“å‰èŠ‚ç‚¹çš„é‚»å±…ä½ç½®ã€‚è¿™ä¸ªé—®é¢˜æ¶‰åŠé€’å½’å‰æ‰§è¡Œå’Œé€’å½’åæ‰§è¡Œçš„é—®é¢˜ï¼Œè¯»è€…å¯ä»¥å‚è€ƒä¸€ä¸‹äºŒå‰æ ‘çš„å‰ä¸­ååºéå†ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Map&lt;Integer, Node&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line"><span class="keyword">public</span> Node <span class="title function_">cloneGraph</span><span class="params">(Node node)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (Objects.isNull(node)) <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">if</span> (map.containsKey(node.val)) <span class="keyword">return</span> map.get(node.val);</span><br><span class="line">    <span class="type">Node</span> <span class="variable">newNode</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Node</span>(node.val);</span><br><span class="line">    map.put(node.val, newNode);</span><br><span class="line">    <span class="keyword">for</span> (Node neighbor : node.neighbors) &#123;</span><br><span class="line">        newNode.neighbors.add(cloneGraph(neighbor));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> newNode;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="é™¤æ³•æ±‚å€¼">12.7 <a
href="https://leetcode.cn/problems/evaluate-division/description/?envType=study-plan-v2&amp;envId=top-interview-150">é™¤æ³•æ±‚å€¼</a></h3>
<p>ä¸¤ç§åšæ³•ï¼š1. DFSï¼› 2. å¹¶æŸ¥é›†</p>
<p>â€”â€”DFS</p>
<p>è¿™æ˜¯æˆ‘çœ‹åˆ°è¿™é“é¢˜ç›®ç¬¬ä¸€æ—¶é—´æƒ³åˆ°çš„åšæ³•ã€‚å¯¹äºè¿™é“é¢˜ç›®ï¼Œç¬¬ä¸€æ—¶é—´æƒ³åˆ°çš„æ˜¯å»ºå›¾ï¼Œç„¶åéå†ç»™å®šçš„
queriesï¼Œç”¨ DFS çˆ†æœå›¾ã€‚è¿™ç§åšæ³•æˆ‘ä»¬éœ€è¦æ˜ç¡®å‡ ä¸ªç‚¹ï¼š1.
å›¾ç»“æ„ç”¨ä»€ä¹ˆå­˜å‚¨ï¼Ÿ 2. æ€ä¹ˆå°†æ•°æ®å­˜å…¥å›¾ä¸­ 3. é€’å½’å‡ºå£æ˜¯ä»€ä¹ˆï¼Ÿ4.
é€’å½’æ‰§è¡Œé€»è¾‘æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬ä¸€ä¸€å›ç­”è¿™ä¸ªé—®é¢˜ã€‚</p>
<ol type="1">
<li>é¦–å…ˆæ˜¯å›¾ç»“æ„ç”¨ä»€ä¹ˆå­˜å‚¨ï¼Œå›ç­”æ˜¯ Map æˆ–è€…ç»“æ„ä½“ã€‚æˆ‘çš„ä»£ç ç”¨çš„æ˜¯
Mapã€‚</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Map&lt;String, Map&lt;String, Double&gt;&gt; graph = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br></pre></td></tr></table></figure>
<ol type="1">
<li>æ€ä¹ˆæŠŠæ•°æ®å­˜å…¥å›¾ã€‚</li>
</ol>
<p>æˆ‘ä»¬å…ˆå¯¹é¢˜ç›®æ‰€ç»™çš„å˜é‡å¯¹ä»¥ä¸‹å®šä¹‰ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¢«é™¤æ•° --&gt;   num1</span><br><span class="line">é™¤æ•°   --&gt;   num2</span><br></pre></td></tr></table></figure>
<p>å›ç­”æ˜¯ è¢«é™¤æ•° num1 ä½œä¸º keyï¼Œé™¤æ•° num2 å’Œå¯¹åº”ä¸¤ä¸ªæ•°çš„å•†æ„å»º map ä½œä¸º
valueã€‚ç„¶åéœ€è¦å†å­˜å…¥ä¸¤ä¸ªæ•°ä½ç½®ç›¸åçš„å…³ç³»ï¼Œä¹Ÿå°±æ˜¯ç¬¬äºŒä¸ªæ•° num2
ä½œä¸ºè¢«é™¤æ•°ï¼Œç¬¬ä¸€ä¸ªæ•° num1 ä½œä¸ºé™¤æ•°ï¼Œå¯¹åº”å€¼åˆ™ä¸º 1.0 /
valueã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">-----&gt; Map&lt;num1, Map&lt;num2, value&gt;</span><br><span class="line">num1</span><br><span class="line">|</span><br><span class="line">---&gt; (num2,value)</span><br><span class="line"></span><br><span class="line">-----&gt; Map&lt;num2, Map&lt;num1, value&gt;</span><br><span class="line">num2</span><br><span class="line">|</span><br><span class="line">---&gt; (num1,<span class="number">1.0</span> / value)</span><br></pre></td></tr></table></figure>
<ol type="1">
<li>é€’å½’å‡ºå£æ˜¯ä»€ä¹ˆï¼Ÿ</li>
</ol>
<p>ï¼ˆ1ï¼‰å½“å›¾ä¸­ä¸å­˜åœ¨æŸ¥è¯¢æ•°å¯¹çš„ä¸¤ä¸ªå€¼æ—¶ï¼Œéœ€è¦è¿”å› -1.0</p>
<p>ï¼ˆ2ï¼‰å½“å›¾ä¸­å­˜åœ¨æŸ¥è¯¢æ•°å¯¹ï¼Œå¹¶ä¸”æ•°å¯¹çš„ä¸¤ä¸ªå€¼ç›¸ç­‰æ—¶ï¼Œéœ€è¦è¿”å› 1.0ï¼›å› ä¸º
a/a = 1.0</p>
<p>ï¼ˆ3ï¼‰å½“å›¾ä¸­å­˜åœ¨æŸ¥è¯¢æ•°å¯¹ï¼Œå¹¶ä¸”ç¬¦åˆå›¾ç»“æ„ï¼Œä¹Ÿå°±æ˜¯ num1 ä¸‹çš„ map ä¸­å«æœ‰
num2ï¼Œåˆ™ç›´æ¥è¿”å›å¯¹åº”çš„æ•°å€¼</p>
<ol type="1">
<li>é€’å½’é€»è¾‘</li>
</ol>
<p>å…ˆæ‰¾å½“å‰ num1 ä¸‹çš„ map çš„ keyï¼Œå¦‚æœèƒ½æ‰¾åˆ°å¯¹åº” num2ï¼Œåˆ™ç›´æ¥è¿”å›å¯¹åº”çš„
valueï¼›è‹¥æ‰¾ä¸åˆ°ï¼Œåˆ™é€’å½’ num1 ä¸‹çš„ map çš„ keyï¼Œç„¶åå°†å½“å‰ num1 ä¸‹çš„ map
çš„ value ä¸ key çš„é€’å½’ç»“æœç›¸ä¹˜è¿”å›ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Map&lt;String, Map&lt;String, Double&gt;&gt; graph = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">double</span>[] calcEquation(List&lt;List&lt;String&gt;&gt; equations, <span class="type">double</span>[] values, List&lt;List&lt;String&gt;&gt; queries) &#123;</span><br><span class="line">    <span class="type">double</span>[] res = <span class="keyword">new</span> <span class="title class_">double</span>[queries.size()];</span><br><span class="line">    <span class="comment">// å»ºå›¾</span></span><br><span class="line">    createGraph(equations, values);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; queries.size(); i++) &#123;</span><br><span class="line">        List&lt;String&gt; query = queries.get(i);</span><br><span class="line">        <span class="type">String</span> <span class="variable">num1</span> <span class="operator">=</span> query.get(<span class="number">0</span>), num2 = query.get(<span class="number">1</span>);</span><br><span class="line">        res[i] = dfs(num1, num2, <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;&gt;());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">createGraph</span><span class="params">(List&lt;List&lt;String&gt;&gt; equations, <span class="type">double</span>[] values)</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; equations.size(); i++) &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">num1</span> <span class="operator">=</span> equations.get(i).get(<span class="number">0</span>), num2 = equations.get(i).get(<span class="number">1</span>);</span><br><span class="line">        graph.computeIfAbsent(num1, k -&gt; <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;()).put(num2, values[i]);</span><br><span class="line">        graph.computeIfAbsent(num2, k -&gt; <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;()).put(num1, <span class="number">1.0</span> / values[i]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="type">double</span> <span class="title function_">dfs</span><span class="params">(String num1, String num2, Set&lt;String&gt; path)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!graph.containsKey(num1) || !graph.containsKey(num2)) <span class="keyword">return</span> -<span class="number">1.0</span>;</span><br><span class="line">    <span class="keyword">if</span> (Objects.equals(num1, num2)) <span class="keyword">return</span> <span class="number">1.0</span>;</span><br><span class="line">    Map&lt;String, Double&gt; doubleMap = graph.get(num1);</span><br><span class="line">    <span class="keyword">if</span> (doubleMap.containsKey(num2)) <span class="keyword">return</span> doubleMap.get(num2);</span><br><span class="line">    path.add(num1);</span><br><span class="line">    <span class="keyword">for</span> (Map.Entry&lt;String, Double&gt; child : doubleMap.entrySet()) &#123;</span><br><span class="line">        <span class="keyword">if</span> (path.contains(child.getKey())) <span class="keyword">continue</span>;</span><br><span class="line">        <span class="type">double</span> <span class="variable">tmp</span> <span class="operator">=</span> child.getValue();</span><br><span class="line">        <span class="type">double</span> <span class="variable">childValue</span> <span class="operator">=</span> dfs(child.getKey(), num2, path);</span><br><span class="line">        <span class="keyword">if</span>(childValue != -<span class="number">1.0</span>) <span class="keyword">return</span> tmp * childValue;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> -<span class="number">1.0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a
href="https://leetcode.cn/problems/evaluate-division/solutions/548634/399-chu-fa-qiu-zhi-nan-du-zhong-deng-286-w45d/?envType=study-plan-v2&amp;envId=top-interview-150">â€”â€”å¹¶æŸ¥é›†</a></p>
<p>è¿™é‡Œè´´ä¸€ä¸‹å®˜æ–¹é¢˜è§£å§ï¼Œå†™çš„æŒºå¥½çš„ã€‚å®˜æ–¹é¢˜è§£é‡‡ç”¨è·¯å¾„å‹ç¼©ï¼Œä¼šæ¯” DFS
å¿«ä¸€äº›ã€‚</p>
<h3 id="è¯¾ç¨‹è¡¨">12.8 <a
href="https://leetcode.cn/problems/course-schedule/description/?envType=study-plan-v2&amp;envId=top-interview-150">è¯¾ç¨‹è¡¨</a></h3>
<p>å°±æ˜¯åˆ¤æ–­å›¾ä¸­æœ‰æ²¡æœ‰ç¯ã€‚</p>
<ol type="1">
<li>åƒä»€ä¹ˆï¼Ÿåƒæ‹“æ‰‘æ’åºã€‚</li>
<li>æ€ä¹ˆåšï¼Ÿè®°å½•èŠ‚ç‚¹å…¥åº¦ï¼Œç”¨é˜Ÿåˆ—å­˜å‚¨å…¥åº¦ä¸º 0 çš„èŠ‚ç‚¹ã€‚</li>
<li>å‡ºå£åœ¨å“ªï¼Ÿå¦‚æœå›¾ä¸­æ²¡æœ‰ç¯ï¼Œåˆ™å›¾ä¸­æ¯ä¸ªèŠ‚ç‚¹éƒ½ä¼šè¿›å…¥é˜Ÿåˆ—ä¸€æ¬¡ï¼›å¦‚æœå›¾ä¸­æœ‰ç¯ï¼Œåˆ™ç¯ä¸Šçš„èŠ‚ç‚¹æ˜¯ä¸ä¼šè¿›å…¥é˜Ÿåˆ—çš„ã€‚</li>
<li>åªæœ‰æ•°ç»„è®°å½•èŠ‚ç‚¹ä¹‹é—´çš„å…³ç³»æ€ä¹ˆåŠï¼Ÿå»ºå›¾ã€‚</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">canFinish</span><span class="params">(<span class="type">int</span> numCourses, <span class="type">int</span>[][] prerequisites)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (Objects.isNull(prerequisites) || prerequisites.length == <span class="number">0</span>) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    Map&lt;Integer, List&lt;Integer&gt;&gt; graph = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    Deque&lt;Integer&gt; queue = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">    <span class="type">int</span>[] inSpend = <span class="keyword">new</span> <span class="title class_">int</span>[numCourses];</span><br><span class="line">    Arrays.fill(inSpend, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span>[] prerequisite : prerequisites) &#123;</span><br><span class="line">        inSpend[prerequisite[<span class="number">0</span>]]++;</span><br><span class="line">        graph.computeIfAbsent(prerequisite[<span class="number">1</span>], k -&gt; <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;()).add(prerequisite[<span class="number">0</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; numCourses; ++i) <span class="keyword">if</span> (inSpend[i] == <span class="number">0</span>) queue.addLast(i);</span><br><span class="line">    <span class="keyword">if</span> (queue.isEmpty()) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">while</span> (!queue.isEmpty()) &#123;</span><br><span class="line">        <span class="type">Integer</span> <span class="variable">it</span> <span class="operator">=</span> queue.pop();</span><br><span class="line">        numCourses--;</span><br><span class="line">        <span class="keyword">if</span> (Objects.isNull(graph.get(it))) <span class="keyword">continue</span>;</span><br><span class="line">        <span class="keyword">for</span> (Integer target : graph.get(it)) &#123;</span><br><span class="line">            inSpend[target]--;</span><br><span class="line">            <span class="keyword">if</span> (inSpend[target] == <span class="number">0</span>) queue.addLast(target);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> numCourses == <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="è¯¾ç¨‹è¡¨-â…±">12.9 <a
href="https://leetcode.cn/problems/course-schedule-ii/description/?envType=study-plan-v2&amp;envId=top-interview-150">è¯¾ç¨‹è¡¨
â…¡</a></h3>
<p>ä¸Šä¸€é“é¢˜ç›®çš„å˜ä½“ï¼Œå­˜å…¥æ‹“æ‰‘å›¾åºåˆ—å°±å¯ä»¥ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span>[] findOrder(<span class="type">int</span> numCourses, <span class="type">int</span>[][] prerequisites) &#123;</span><br><span class="line">    <span class="type">int</span>[] res = <span class="keyword">new</span> <span class="title class_">int</span>[numCourses];</span><br><span class="line">    Map&lt;Integer, List&lt;Integer&gt;&gt; graph = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    Deque&lt;Integer&gt; queue = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">    <span class="type">int</span>[] inSpend = <span class="keyword">new</span> <span class="title class_">int</span>[numCourses];</span><br><span class="line">    Arrays.fill(inSpend, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span>[] prerequisite : prerequisites) &#123;</span><br><span class="line">        inSpend[prerequisite[<span class="number">0</span>]]++;</span><br><span class="line">        graph.computeIfAbsent(prerequisite[<span class="number">1</span>], k -&gt; <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;()).add(prerequisite[<span class="number">0</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; numCourses; ++i) <span class="keyword">if</span> (inSpend[i] == <span class="number">0</span>) queue.addLast(i);</span><br><span class="line">    <span class="type">int</span> <span class="variable">idx</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (!queue.isEmpty()) &#123;</span><br><span class="line">        <span class="type">Integer</span> <span class="variable">it</span> <span class="operator">=</span> queue.pop();</span><br><span class="line">        numCourses--;   res[idx++] = it;</span><br><span class="line">        <span class="keyword">if</span> (Objects.isNull(graph.get(it))) <span class="keyword">continue</span>;</span><br><span class="line">        <span class="keyword">for</span> (Integer target : graph.get(it)) &#123;</span><br><span class="line">            inSpend[target]--;</span><br><span class="line">            <span class="keyword">if</span> (inSpend[target] == <span class="number">0</span>) queue.addLast(target);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> numCourses == <span class="number">0</span>? res: <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">0</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><br></p>
<h2 id="å›¾çš„å¹¿åº¦ä¼˜å…ˆæœç´¢">13. å›¾çš„å¹¿åº¦ä¼˜å…ˆæœç´¢</h2>
<h3 id="è›‡æ¢¯æ£‹">13.1 <a
href="https://leetcode.cn/problems/snakes-and-ladders/description/?envType=study-plan-v2&amp;envId=top-interview-150">è›‡æ¢¯æ£‹</a></h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">snakesAndLadders</span><span class="params">(<span class="type">int</span>[][] board)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> board.length;</span><br><span class="line">    Queue&lt;<span class="type">int</span>[]&gt; queue = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">    <span class="type">boolean</span>[] vis = <span class="keyword">new</span> <span class="title class_">boolean</span>[n * n + <span class="number">1</span>];</span><br><span class="line">    queue.offer(<span class="keyword">new</span> <span class="title class_">int</span>[]&#123;<span class="number">1</span>, <span class="number">0</span>&#125;);</span><br><span class="line">    vis[<span class="number">0</span>] = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">while</span> (!queue.isEmpty()) &#123;</span><br><span class="line">        <span class="type">int</span>[] p = queue.poll();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= <span class="number">6</span>; ++i) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">nxt</span> <span class="operator">=</span> p[<span class="number">0</span>] + i;</span><br><span class="line">            <span class="keyword">if</span> (nxt &gt; n * n) <span class="keyword">break</span>;</span><br><span class="line">            <span class="type">int</span>[] rc = id2rc(nxt, n);</span><br><span class="line">            <span class="keyword">if</span> (board[rc[<span class="number">0</span>]][rc[<span class="number">1</span>]] &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                nxt = board[rc[<span class="number">0</span>]][rc[<span class="number">1</span>]];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (nxt == n * n) &#123;</span><br><span class="line">                <span class="keyword">return</span> p[<span class="number">1</span>] + <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (!vis[nxt]) &#123;</span><br><span class="line">                vis[nxt] = <span class="literal">true</span>;</span><br><span class="line">                queue.offer(<span class="keyword">new</span> <span class="title class_">int</span>[]&#123;nxt, p[<span class="number">1</span>] + <span class="number">1</span>&#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span>[] id2rc(<span class="type">int</span> id, <span class="type">int</span> n) &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">r</span> <span class="operator">=</span> (id - <span class="number">1</span>) / n, c = (id - <span class="number">1</span>) % n;</span><br><span class="line">    <span class="keyword">if</span> (r % <span class="number">2</span> == <span class="number">1</span>) &#123;</span><br><span class="line">        c = n - <span class="number">1</span> - c;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">int</span>[]&#123;n-<span class="number">1</span>-r, c&#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æœ€å°åŸºå› å˜åŒ–">13.2 <a
href="https://leetcode.cn/problems/word-ladder/description/?envType=study-plan-v2&amp;envId=top-interview-150">æœ€å°åŸºå› å˜åŒ–</a></h3>
<p>æœ‰ç‚¹åƒäºŒå‰æ ‘çš„å±‚åºéå†ã€‚å“¦ä¸ï¼ŒBFS
å°±æ˜¯å¤šå‰æ ‘çš„å±‚åºéå†ç‰ˆæœ¬ã€‚é‚£ä¹ˆæˆ‘ä»¬æ¢ç§æ€æƒ³ï¼ŒæŠŠè¿™é“é¢˜ç›®æƒ³è±¡æˆå¤šå‰æ ‘ï¼Œç„¶ååƒäºŒå‰æ ‘çš„å±‚åºéå†é‚£æ ·ï¼Œéå†è¿™é¢—å¤šå‰æ ‘å¯ä»¥å—ã€‚ç­”æ¡ˆæ˜¯å¯ä»¥ã€‚ç»§ç»­å¾€ä¸‹çœ‹ï¼Œæˆ‘ä»¬éœ€è¦è§£å†³ä»¥ä¸‹å‡ ä¸ªé—®é¢˜ã€‚
1. è¿™é¢—å¤šå‰æ ‘æ˜¯å‡ å‰ï¼Ÿ 2. é¢˜ç›®è¦æ±‚çš„ç»“æœæ˜¯éå†çš„ä»€ä¹ˆç»“æœï¼Ÿ 3.
å±‚åºéå†çš„é˜Ÿåˆ—åº”è¯¥å­˜ä»€ä¹ˆï¼Ÿ</p>
<ol type="1">
<li>è¿™é¢—å¤šå‰æ ‘æ˜¯å‡ å‰ï¼Ÿ å›ç­”æ˜¯ 8*3 = 24ã€‚ä¸ºä»€ä¹ˆï¼Ÿå› ä¸ºæ¯ä¸€ä¸ªåŸºå› åºåˆ—éƒ½æœ‰ 8
ä¸ªå­—æ¯ï¼Œåœ¨ä¸€æ¬¡å˜æ¢ä¸­ï¼Œæ¯ä¸€ä¸ªå­—æ¯éƒ½æœ‰ 3
ç§å…¶ä»–å˜åŒ–ï¼Œæ‰€ä»¥ï¼Œå¯¹äºæ¯ä¸€æ¬¡å˜åŒ–ï¼Œæˆ‘ä»¬éƒ½éœ€è¦è€ƒè™‘ 24 ç§å¯èƒ½ã€‚</li>
<li>è¦æ±‚çš„ç»“æœæ˜¯éå†çš„ä»€ä¹ˆç»“æœï¼Ÿ
å›ç­”æ˜¯æ ‘çš„æ·±åº¦ï¼Œæ ‘çš„æ¯ä¸€å±‚ä»£è¡¨æ¯ä¸€æ¬¡é€’è¿›çš„å˜æ¢ï¼Œæ‰€ä»¥ï¼Œå½“çœŸçš„é‡åˆ°æœ€ç»ˆåºåˆ—æ—¶ï¼Œæ ‘æœ‰å‡ å±‚ï¼Œå°±åº”è¯¥å¯¹åº”å‡ æ¬¡å˜æ¢ã€‚</li>
<li>å±‚åºéå†çš„é˜Ÿåˆ—åº”è¯¥å­˜ä»€ä¹ˆï¼Ÿ
å›ç­”æ˜¯ï¼Œå­˜åŸºå› åº“ä¸­çš„åŸºå› åºåˆ—ã€‚æ˜¾ç„¶ï¼Œå¯¹äºæˆ‘ä»¬ä¸Šè¿°çš„ 24
ç§å˜åŒ–ï¼ŒçœŸæ­£æœ‰æ•ˆçš„å˜åŒ–åªä¼šå‡ºç°åœ¨åŸºå› åº“ä¸­ï¼Œæ‰€ä»¥ï¼Œé˜Ÿåˆ—é‡Œé¢å­˜çš„ä¸€å®šæ˜¯åŸºå› åº“ä¸­çš„åºåˆ—ã€‚</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">minMutation</span><span class="params">(String startGene, String endGene, String[] bank)</span> &#123;</span><br><span class="line">    Set&lt;String&gt; vis = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;&gt;();</span><br><span class="line">    Set&lt;String&gt; cnt = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;&gt;(Arrays.asList(bank));</span><br><span class="line">    <span class="type">char</span>[] keys = &#123;<span class="string">&#x27;A&#x27;</span>, <span class="string">&#x27;C&#x27;</span>, <span class="string">&#x27;G&#x27;</span>, <span class="string">&#x27;T&#x27;</span>&#125;;</span><br><span class="line">    <span class="keyword">if</span> (startGene.equals(endGene)) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (!cnt.contains(endGene)) &#123;</span><br><span class="line">        <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    Queue&lt;String&gt; queue = <span class="keyword">new</span> <span class="title class_">ArrayDeque</span>&lt;&gt;();</span><br><span class="line">    queue.offer(startGene);</span><br><span class="line">    vis.add(startGene);</span><br><span class="line">    <span class="type">int</span> <span class="variable">step</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (!queue.isEmpty()) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> queue.size();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> <span class="number">0</span>; k &lt; len; ++k) &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">cur</span> <span class="operator">=</span> queue.poll();</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">8</span>; ++i) &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; <span class="number">4</span>; ++j) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (cur.charAt(i) != keys[j]) &#123;</span><br><span class="line">                        <span class="type">StringBuilder</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>(cur);</span><br><span class="line">                        sb.setCharAt(i, keys[j]);</span><br><span class="line">                        <span class="type">String</span> <span class="variable">target</span> <span class="operator">=</span> sb.toString();</span><br><span class="line">                        <span class="keyword">if</span> (cnt.contains(target) &amp;&amp; !vis.contains(target)) &#123;</span><br><span class="line">                            <span class="keyword">if</span> (endGene.equals(target)) &#123;</span><br><span class="line">                                <span class="keyword">return</span> step;</span><br><span class="line">                            &#125;</span><br><span class="line">                            queue.offer(target);</span><br><span class="line">                            vis.add(target);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        step++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="å•è¯æ¥é¾™">13.3 <a
href="https://leetcode.cn/problems/word-ladder/description/?envType=study-plan-v2&amp;envId=top-interview-150">å•è¯æ¥é¾™</a></h3>
<p>è·Ÿä¸Šä¸€é“é¢˜ç›®æ€è·¯ä¸€æ¨¡ä¸€æ ·ã€‚æŠŠå†™æ­»çš„é•¿åº¦æ¢æˆå¯å˜é•¿åº¦å°±è¡Œã€‚å¦å¤–ï¼Œé¢˜ç›®çš„æ¥é¾™ä¸­ï¼Œç¬¬ä¸€ä¸ªå•è¯å’Œæœ€åä¸€ä¸ªå•è¯ä¹Ÿç®—è¿›åºåˆ—é•¿åº¦é‡Œé¢ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ç»™ç­”æ¡ˆå†åŠ ä¸€</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">ladderLength</span><span class="params">(String beginWord, String endWord, List&lt;String&gt; wordList)</span> &#123;</span><br><span class="line">    <span class="type">char</span>[] keys = <span class="string">&quot;abcdefghijklmnopqrstuvwxyz&quot;</span>.toCharArray();</span><br><span class="line">    Set&lt;String&gt; cnt = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;&gt;(wordList);</span><br><span class="line">    Set&lt;String&gt; vis = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">if</span>(!cnt.contains(endWord)) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    Queue&lt;String&gt; queue = <span class="keyword">new</span> <span class="title class_">ArrayDeque</span>&lt;&gt;();</span><br><span class="line">    queue.offer(beginWord);</span><br><span class="line">    vis.add(beginWord);</span><br><span class="line">    <span class="type">int</span> <span class="variable">step</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (!queue.isEmpty()) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> queue.size();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> <span class="number">0</span>; k &lt; len; ++k) &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">cur</span> <span class="operator">=</span> queue.poll();</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; beginWord.length(); ++i) &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; keys.length; ++j) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (cur.charAt(i) != keys[j]) &#123;</span><br><span class="line">                        <span class="type">StringBuilder</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>(cur);</span><br><span class="line">                        sb.setCharAt(i, keys[j]);</span><br><span class="line">                        <span class="type">String</span> <span class="variable">nxt</span> <span class="operator">=</span> sb.toString();</span><br><span class="line">                        <span class="keyword">if</span> (cnt.contains(nxt) &amp;&amp; !vis.contains(nxt)) &#123;</span><br><span class="line">                            <span class="keyword">if</span> (endWord.equals(nxt)) &#123;</span><br><span class="line">                                <span class="keyword">return</span> step + <span class="number">1</span>;</span><br><span class="line">                            &#125;</span><br><span class="line">                            queue.offer(nxt);</span><br><span class="line">                            vis.add(nxt);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        step++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><br></p>
<h2 id="å­—å…¸æ ‘">14. å­—å…¸æ ‘</h2>
<h3 id="å®ç°-trieå‰ç¼€æ ‘">14.1 <a
href="https://leetcode.cn/problems/implement-trie-prefix-tree/description/?envType=study-plan-v2&amp;envId=top-interview-150">å®ç°
Trieï¼ˆå‰ç¼€æ ‘ï¼‰</a></h3>
<p>å‰ç¼€æ ‘ï¼Œä¹Ÿç§°å­—å…¸æ ‘ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Trie</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Node root;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Trie</span><span class="params">()</span> &#123;</span><br><span class="line">        root = <span class="keyword">new</span> <span class="title class_">Node</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insert</span><span class="params">(String word)</span> &#123;</span><br><span class="line">        <span class="type">Node</span> <span class="variable">cur</span> <span class="operator">=</span> root;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">char</span> c : word.toCharArray()) &#123;</span><br><span class="line">            <span class="keyword">if</span> (cur.subNodes.containsKey(c)) &#123;</span><br><span class="line">                cur = cur.subNodes.get(c);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                cur.subNodes.put(c, <span class="keyword">new</span> <span class="title class_">Node</span>());</span><br><span class="line">                cur = cur.subNodes.get(c);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        cur.isEnd = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">search</span><span class="params">(String word)</span> &#123;</span><br><span class="line">        <span class="type">Node</span> <span class="variable">cur</span> <span class="operator">=</span> root;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">char</span> c : word.toCharArray()) &#123;</span><br><span class="line">            <span class="keyword">if</span> (cur.subNodes.containsKey(c)) &#123;</span><br><span class="line">                cur = cur.subNodes.get(c);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> cur.isEnd;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">startsWith</span><span class="params">(String prefix)</span> &#123;</span><br><span class="line">        <span class="type">Node</span> <span class="variable">cur</span> <span class="operator">=</span> root;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">char</span> c : prefix.toCharArray()) &#123;</span><br><span class="line">            <span class="keyword">if</span> (cur.subNodes.containsKey(c)) &#123;</span><br><span class="line">                cur = cur.subNodes.get(c);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Node</span> &#123;</span><br><span class="line">        <span class="type">boolean</span> isEnd;</span><br><span class="line">        Map&lt;Character, Node&gt; subNodes = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æ·»åŠ ä¸æœç´¢å•è¯---æ•°æ®ç»“æ„è®¾è®¡">14.2 <a
href="https://leetcode.cn/problems/design-add-and-search-words-data-structure/description/?envType=study-plan-v2&amp;envId=top-interview-150">æ·»åŠ ä¸æœç´¢å•è¯
- æ•°æ®ç»“æ„è®¾è®¡</a></h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">WordDictionary</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Node root;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> maxLen;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">WordDictionary</span><span class="params">()</span> &#123;</span><br><span class="line">        root = <span class="keyword">new</span> <span class="title class_">Node</span>();</span><br><span class="line">        maxLen = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addWord</span><span class="params">(String word)</span> &#123;</span><br><span class="line">        <span class="type">Node</span> <span class="variable">node</span> <span class="operator">=</span> root;</span><br><span class="line">        maxLen = Math.max(maxLen, word.length());</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">char</span> c : word.toCharArray()) &#123;</span><br><span class="line">            <span class="keyword">if</span> (node.subNodes.containsKey(c)) &#123;</span><br><span class="line">                node = node.subNodes.get(c);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                node.subNodes.put(c, <span class="keyword">new</span> <span class="title class_">Node</span>());</span><br><span class="line">                node = node.subNodes.get(c);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        node.isEnd = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">search</span><span class="params">(String word)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (word.length() &gt; maxLen) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> search(word,<span class="number">0</span>, root);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> <span class="title function_">search</span><span class="params">(String word, <span class="type">int</span> index, Node node)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(index == word.length()) &#123;</span><br><span class="line">            <span class="keyword">return</span> node.isEnd;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">char</span> <span class="variable">c</span> <span class="operator">=</span> word.charAt(index);</span><br><span class="line">        <span class="keyword">if</span>(node.subNodes.containsKey(c)) &#123;</span><br><span class="line">            node = node.subNodes.get(c);</span><br><span class="line">            <span class="keyword">if</span>(search(word, index+<span class="number">1</span>, node)) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(c == <span class="string">&#x27;.&#x27;</span>)&#123;</span><br><span class="line">            <span class="keyword">for</span> (Map.Entry&lt;Character, Node&gt; characterNodeEntry : node.subNodes.entrySet()) &#123;</span><br><span class="line">                <span class="keyword">if</span>(search(word, index+<span class="number">1</span>, characterNodeEntry.getValue())) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Node</span> &#123;</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">isEnd</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">        Map&lt;Character, Node&gt; subNodes = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="å•è¯æœç´¢-â…±">14.3 <a
href="https://leetcode.cn/problems/word-search-ii/description/?envType=study-plan-v2&amp;envId=top-interview-150">å•è¯æœç´¢
â…¡</a></h3>
<p>ä¸€é¡¿æ“ä½œçŒ›å¦‚è™ï¼Œäº¤ä¸Šè¶…æ—¶äºŒç™¾äº”ã€‚ç ´é˜²äº†</p>
<p>â€”â€”
æœ€æœ‰ä¸€ä¸ªæ ·ä¾‹æ²¡è¿‡ç‰ˆæœ¬ã€‚è¿™ä¸ªç‰ˆæœ¬æ˜¯å…ˆé€ å‡ºå•è¯ï¼Œç„¶åå†é€šè¿‡å‰ç¼€æ ‘æŸ¥æ‰¾æ˜¯å¦åœ¨å‰ç¼€æ ‘ä¸­ã€‚å¾ˆæ…¢ã€‚ä¸‹é¢çš„ç‰ˆæœ¬çš„æ˜¯å‚è€ƒäº†å®˜æ–¹é¢˜è§£çš„ã€‚ç›´æ¥æŠŠå‰ç¼€æ ‘çš„æŸ¥æ‰¾è¿‡ç¨‹é¡ºç€åŸæ¥åœ°å›¾çš„
dfs è¿›è¡Œï¼Œå¾ˆå¿«ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Node</span> &#123;</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">isEnd</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">        Map&lt;Character, Node&gt; subNodes = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Trie</span> &#123;</span><br><span class="line">        Node root;</span><br><span class="line"></span><br><span class="line">        Trie() &#123;</span><br><span class="line">            root = <span class="keyword">new</span> <span class="title class_">Node</span>();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insert</span><span class="params">(String word)</span> &#123;</span><br><span class="line">            <span class="type">Node</span> <span class="variable">cur</span> <span class="operator">=</span> root;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">char</span> c : word.toCharArray()) &#123;</span><br><span class="line">                <span class="keyword">if</span> (cur.subNodes.containsKey(c)) &#123;</span><br><span class="line">                    cur = cur.subNodes.get(c);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    cur.subNodes.put(c, <span class="keyword">new</span> <span class="title class_">Node</span>());</span><br><span class="line">                    cur = cur.subNodes.get(c);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            cur.isEnd = <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">search</span><span class="params">(String word)</span> &#123;</span><br><span class="line">            <span class="type">Node</span> <span class="variable">cur</span> <span class="operator">=</span> root;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">char</span> c : word.toCharArray()) &#123;</span><br><span class="line">                <span class="keyword">if</span> (cur.subNodes.containsKey(c)) &#123;</span><br><span class="line">                    cur = cur.subNodes.get(c);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> cur.isEnd;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Set&lt;String&gt; res = <span class="keyword">new</span> <span class="title class_">TreeSet</span>&lt;&gt;();</span><br><span class="line">    <span class="type">StringBuilder</span> <span class="variable">path</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">    <span class="type">int</span>[][] directions = &#123;&#123;<span class="number">0</span>, <span class="number">1</span>&#125;, &#123;<span class="number">1</span>, <span class="number">0</span>&#125;, &#123;<span class="number">0</span>, -<span class="number">1</span>&#125;, &#123;-<span class="number">1</span>, <span class="number">0</span>&#125;&#125;;</span><br><span class="line">    <span class="type">int</span> <span class="variable">maxLen</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> List&lt;String&gt; <span class="title function_">findWords</span><span class="params">(<span class="type">char</span>[][] board, String[] words)</span> &#123;</span><br><span class="line">        <span class="type">Trie</span> <span class="variable">trie</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Trie</span>();</span><br><span class="line">        <span class="keyword">for</span> (String word : words) &#123;</span><br><span class="line">            maxLen = Math.max(maxLen, word.length());</span><br><span class="line">            trie.insert(word);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; board.length; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; board[<span class="number">0</span>].length; j++) &#123;</span><br><span class="line">                <span class="type">boolean</span>[][] visited = <span class="keyword">new</span> <span class="title class_">boolean</span>[board.length][board[<span class="number">0</span>].length];</span><br><span class="line">                path.append(board[i][j]);</span><br><span class="line">                visited[i][j] = <span class="literal">true</span>;</span><br><span class="line">                dfs(i, j, board, trie, visited);</span><br><span class="line">                path.deleteCharAt(path.length() - <span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(res);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">dfs</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> j,<span class="type">char</span>[][] board, Trie trie, <span class="type">boolean</span>[][] visited)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(path.length() &gt; maxLen) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (trie.search(path.toString())) &#123;</span><br><span class="line">            res.add(path.toString());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span>[] direction : directions) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">row</span> <span class="operator">=</span> i + direction[<span class="number">0</span>], col = j + direction[<span class="number">1</span>];</span><br><span class="line">            <span class="keyword">if</span> (isGrap(row, col, board) &amp;&amp; !visited[row][col]) &#123;</span><br><span class="line">                path.append(board[row][col]);</span><br><span class="line">                visited[row][col] = <span class="literal">true</span>;</span><br><span class="line">                dfs(row, col, board, trie, visited);</span><br><span class="line">                path.deleteCharAt(path.length() - <span class="number">1</span>);</span><br><span class="line">                visited[row][col] = <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> <span class="title function_">isGrap</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> j, <span class="type">char</span>[][] board)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> i &gt;= <span class="number">0</span> &amp;&amp; i &lt; board.length &amp;&amp; j &gt;= <span class="number">0</span> &amp;&amp; j &lt; board[<span class="number">0</span>].length;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>â€”â€”é¢˜è§£ç‰ˆ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Trie</span> &#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="type">boolean</span> isEnd;</span><br><span class="line">        <span class="keyword">private</span> Map&lt;Character, Trie&gt; subNodes;</span><br><span class="line">        <span class="keyword">private</span> String word;</span><br><span class="line"></span><br><span class="line">        Trie() &#123;</span><br><span class="line">            isEnd = <span class="literal">false</span>;</span><br><span class="line">            word = <span class="string">&quot;&quot;</span>;</span><br><span class="line">            subNodes = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insert</span><span class="params">(String word)</span> &#123;</span><br><span class="line">            <span class="type">Trie</span> <span class="variable">node</span> <span class="operator">=</span> <span class="built_in">this</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">char</span> c : word.toCharArray()) &#123;</span><br><span class="line">                <span class="keyword">if</span> (node.subNodes.containsKey(c)) &#123;</span><br><span class="line">                    node = node.subNodes.get(c);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    node.subNodes.put(c, <span class="keyword">new</span> <span class="title class_">Trie</span>());</span><br><span class="line">                    node = node.subNodes.get(c);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            node.isEnd = <span class="literal">true</span>;</span><br><span class="line">            node.word = word;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Set&lt;String&gt; res = <span class="keyword">new</span> <span class="title class_">TreeSet</span>&lt;&gt;();</span><br><span class="line">    <span class="type">int</span>[][] directions = &#123;&#123;<span class="number">0</span>, <span class="number">1</span>&#125;, &#123;<span class="number">1</span>, <span class="number">0</span>&#125;, &#123;<span class="number">0</span>, -<span class="number">1</span>&#125;, &#123;-<span class="number">1</span>, <span class="number">0</span>&#125;&#125;;</span><br><span class="line">    <span class="type">int</span> <span class="variable">maxLen</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> List&lt;String&gt; <span class="title function_">findWords</span><span class="params">(<span class="type">char</span>[][] board, String[] words)</span> &#123;</span><br><span class="line">        <span class="type">Trie</span> <span class="variable">trie</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Trie</span>();</span><br><span class="line">        <span class="keyword">for</span> (String word : words) &#123;</span><br><span class="line">            maxLen = Math.max(maxLen, word.length());</span><br><span class="line">            trie.insert(word);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; board.length; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; board[<span class="number">0</span>].length; j++) &#123;</span><br><span class="line">                dfs(i, j, board, trie);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(res);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">dfs</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> j, <span class="type">char</span>[][] board, Trie trie)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (!trie.subNodes.containsKey(board[i][j])) <span class="keyword">return</span>;</span><br><span class="line">        <span class="type">char</span> <span class="variable">c</span> <span class="operator">=</span> board[i][j];</span><br><span class="line">        trie = trie.subNodes.get(c);</span><br><span class="line">        <span class="keyword">if</span> (!<span class="string">&quot;&quot;</span>.equals(trie.word)) &#123;</span><br><span class="line">            res.add(trie.word);</span><br><span class="line">        &#125;</span><br><span class="line">        board[i][j] = <span class="string">&#x27;#&#x27;</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span>[] direction : directions) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> i + direction[<span class="number">0</span>], y = j + direction[<span class="number">1</span>];</span><br><span class="line">            <span class="keyword">if</span> (isGrap(x, y, board) &amp;&amp; board[x][y] != <span class="string">&#x27;#&#x27;</span>) &#123;</span><br><span class="line">                dfs(x, y, board, trie);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        board[i][j] = c;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> <span class="title function_">isGrap</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> j, <span class="type">char</span>[][] board)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> i &gt;= <span class="number">0</span> &amp;&amp; i &lt; board.length &amp;&amp; j &gt;= <span class="number">0</span> &amp;&amp; j &lt; board[<span class="number">0</span>].length;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><br></p>
<h2 id="å›æº¯">15. å›æº¯</h2>
<h3 id="ç”µè¯å·ç çš„å­—æ¯ç»„åˆ">15.1 <a
href="https://leetcode.cn/problems/letter-combinations-of-a-phone-number/description/?envType=study-plan-v2&amp;envId=top-interview-150">ç”µè¯å·ç çš„å­—æ¯ç»„åˆ</a></h3>
<p>â€”â€”DFS</p>
<p>å…ˆæ‰“è¡¨ï¼Œè®°å½•æ•°å­—å’Œå­—æ¯ç»„åˆçš„æ˜ å°„ï¼Œç„¶åå†éå†æ•°å­—åºåˆ— DFS</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Map&lt;Integer, String&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;()&#123;&#123;</span><br><span class="line">    put(<span class="number">2</span>, <span class="string">&quot;abc&quot;</span>);</span><br><span class="line">    put(<span class="number">3</span>, <span class="string">&quot;def&quot;</span>);</span><br><span class="line">    put(<span class="number">4</span>, <span class="string">&quot;ghi&quot;</span>);</span><br><span class="line">    put(<span class="number">5</span>, <span class="string">&quot;jkl&quot;</span>);</span><br><span class="line">    put(<span class="number">6</span>, <span class="string">&quot;mno&quot;</span>);</span><br><span class="line">    put(<span class="number">7</span>, <span class="string">&quot;pqrs&quot;</span>);</span><br><span class="line">    put(<span class="number">8</span>, <span class="string">&quot;tuv&quot;</span>);</span><br><span class="line">    put(<span class="number">9</span>, <span class="string">&quot;wxyz&quot;</span>);</span><br><span class="line">&#125;&#125;;</span><br><span class="line">List&lt;String&gt; res = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"><span class="type">StringBuilder</span> <span class="variable">path</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line"><span class="keyword">public</span> List&lt;String&gt; <span class="title function_">letterCombinations</span><span class="params">(String digits)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(Objects.isNull(digits) || digits.length() == <span class="number">0</span>) <span class="keyword">return</span> res;</span><br><span class="line">    dfs(<span class="number">0</span>, digits);</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">dfs</span><span class="params">(<span class="type">int</span> i, String digits)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (i == digits.length()) &#123;</span><br><span class="line">        res.add(path.toString());</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">String</span> <span class="variable">combines</span> <span class="operator">=</span> map.get(digits.charAt(i) - <span class="string">&#x27;0&#x27;</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">char</span> c : combines.toCharArray()) &#123;</span><br><span class="line">        path.append(c);</span><br><span class="line">        dfs(i + <span class="number">1</span>, digits);</span><br><span class="line">        path.deleteCharAt(path.length() - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ç»„åˆ">15.2 <a
href="https://leetcode.cn/problems/combinations/description/?envType=study-plan-v2&amp;envId=top-interview-150">ç»„åˆ</a></h3>
<p>â€”â€”DFS</p>
<p>DFS æ¨¡æ¿é¢˜ï¼Œä½†æ˜¯è¿™é“é¢˜ç›®éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¯¹äºè¿™ä¸ª
List&lt;List<Integer>&gt; å˜é‡ç±»å‹ï¼Œè¦å°† List<Integer>
åŠ è¿›è¿™ä¸ªå˜é‡æ—¶ï¼Œè¦ new ä¸€ä¸‹ï¼</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">List&lt;List&lt;Integer&gt;&gt; res = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">List&lt;Integer&gt; path = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"><span class="keyword">public</span> List&lt;List&lt;Integer&gt;&gt; <span class="title function_">combine</span><span class="params">(<span class="type">int</span> n, <span class="type">int</span> k)</span> &#123;</span><br><span class="line">    dfs(<span class="number">1</span>, n, k);</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">dfs</span><span class="params">(<span class="type">int</span> start, <span class="type">int</span> n, <span class="type">int</span> k)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (path.size() == k) &#123;</span><br><span class="line">        res.add(<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(path));</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> start; i &lt;= n; i++) &#123;</span><br><span class="line">        path.add(i);</span><br><span class="line">        dfs(i + <span class="number">1</span>, n, k);</span><br><span class="line">        path.remove(path.size() - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="å…¨æ’åˆ—">15.3 <a
href="https://leetcode.cn/problems/permutations/description/?envType=study-plan-v2&amp;envId=top-interview-150">å…¨æ’åˆ—</a></h3>
<p>ç»„åˆè·Ÿå…¨æ’åˆ—æ˜¯ä¸ä¸€æ ·çš„ã€‚æŒ‰æœ€æµ…æ˜¾çš„ç†è§£ï¼Œå¯ä»¥è®¤ä¸ºå…¨æ’åˆ—èƒ½å›å¤´ï¼Œä½†æ˜¯å¾—æ ‡è®°æ˜¯å¦å·²è®¿é—®ï¼›ç»„åˆä¸èƒ½å›å¤´ï¼Œåªèƒ½å¾€å‰èµ°ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">List&lt;List&lt;Integer&gt;&gt; res = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">List&lt;Integer&gt; path = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"><span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"><span class="type">boolean</span>[] vis;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> List&lt;List&lt;Integer&gt;&gt; <span class="title function_">permute</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">    n = nums.length;</span><br><span class="line">    vis = <span class="keyword">new</span> <span class="title class_">boolean</span>[n];</span><br><span class="line">    dfs(<span class="number">0</span>, nums);</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">dfs</span><span class="params">(<span class="type">int</span> start, <span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (start == n) &#123;</span><br><span class="line">        res.add(<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(path));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!vis[i]) &#123;</span><br><span class="line">            path.add(nums[i]);</span><br><span class="line">            vis[i] = <span class="literal">true</span>;</span><br><span class="line">            dfs(start + <span class="number">1</span>, nums);</span><br><span class="line">            path.remove(path.size() - <span class="number">1</span>);</span><br><span class="line">            vis[i] = <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ç»„åˆæ€»å’Œ">15.4 <a
href="https://leetcode.cn/problems/combination-sum/description/?envType=study-plan-v2&amp;envId=top-interview-150">ç»„åˆæ€»å’Œ</a></h3>
<p>èƒ½é‡å¤ï¼Œä½†æ˜¯ä¸èƒ½å›å¤´ï¼Œé‚£å°±æŠŠå½“å‰ä½ç½®ç»§ç»­ä¼ å…¥å³å¯ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">List&lt;List&lt;Integer&gt;&gt; res = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">List&lt;Integer&gt; path = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> List&lt;List&lt;Integer&gt;&gt; <span class="title function_">combinationSum</span><span class="params">(<span class="type">int</span>[] candidates, <span class="type">int</span> target)</span> &#123;</span><br><span class="line">    dfs(<span class="number">0</span>,<span class="number">0</span>, candidates, target);</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">dfs</span><span class="params">(<span class="type">int</span> start, <span class="type">int</span> num, <span class="type">int</span>[] candidates, <span class="type">int</span> target)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (num == target) &#123;</span><br><span class="line">        res.add(<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(path));</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (num &gt; target) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> start; i &lt; candidates.length; i++) &#123;</span><br><span class="line">        path.add(candidates[i]);</span><br><span class="line">        dfs(i, num + candidates[i], candidates, target);</span><br><span class="line">        path.remove(path.size() - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="n-çš‡å-â…±">15.5 <a
href="https://leetcode.cn/problems/n-queens-ii/description/?envType=study-plan-v2&amp;envId=top-interview-150">N
çš‡å â…¡</a></h3>
<p>â€”â€”DFS</p>
<p>æ€ä¹ˆç†è§£å‘¢ï¼ŸN çš‡åæ˜¯ä¸€ä¸ªåœ¨è¾¹é•¿ä¸º n çš„æ–¹é˜µä¸Šçš„é—®é¢˜ï¼Œæˆ‘ä»¬ç”¨ DFS
çš„æ—¶å€™ä¸€èˆ¬éƒ½æ˜¯æŠŠé¢˜ç›®çœ‹æˆæ˜¯æ ‘çš„è§£å†³æ–¹æ¡ˆæ¥è¿›è¡Œã€‚ã€ä»¥åæœ‰æ—¶é—´ä¸€å®šå¼€ä¸ª DFS
ä¸“é¢˜è®²è®²ã€‘ã€‚è½å®åˆ°è¿™é“é¢˜ç›®ï¼Œæˆ‘ä»¬éœ€è¦æ˜ç¡®å‡ ä¸ªç‚¹ï¼Œ1. æ ‘çš„æ·±åº¦æ˜¯ä»€ä¹ˆï¼Ÿ 2.
æ ‘çš„æ¯ä¸ªèŠ‚ç‚¹æœ‰å‡ ä¸ªå­©å­èŠ‚ç‚¹ 3. å‡ºå£æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<ol type="1">
<li>æ ‘çš„æ·±åº¦ï¼Ÿ</li>
</ol>
<p>nã€‚è¿™é“é¢˜ç›®æ ‘çš„æ·±åº¦æ˜¯çŸ©é˜µçš„è¡Œï¼Œæœ‰å‡ è¡Œå°±å¤šæ·±</p>
<ol type="1">
<li>æ ‘çš„æ¯ä¸ªèŠ‚ç‚¹æœ‰å‡ ä¸ªå­©å­èŠ‚ç‚¹ï¼Ÿ</li>
</ol>
<p>nã€‚ æœ‰å¤šå°‘åˆ—ï¼Œå°±æœ‰å‡ ä¸ªå­©å­èŠ‚ç‚¹ã€‚</p>
<ol type="1">
<li>å‡ºå£æ˜¯ä»€ä¹ˆï¼Ÿ</li>
</ol>
<p>åˆ°å¶å­èŠ‚ç‚¹</p>
<p>æœ€åæˆ‘ä»¬éœ€è¦æ€ä¹ˆæ»¡è¶³å½¼æ­¤ä¸æ”»å‡»ï¼Ÿ
å…¶å®å¯¹äºæ¯ä¸€ä¸ªä½ç½®çš„æ¨ªç«–æ’‡æºæ–¹å‘ï¼Œéƒ½å¯ä»¥è½¬æ¢æˆä¸€ä¸ªæ•°ç»„è¿›è¡Œæ ‡è®°æ˜¯å¦å¯è¡Œã€‚æ€ä¹ˆè¯´å‘¢ï¼Ÿ</p>
<ul>
<li>æ¨ªâ€”â€”ä¸ç”¨æ•°ç»„ï¼Œå› ä¸ºæˆ‘ä»¬ DFS
å°±æ˜¯ä¸€è¡Œä¸€è¡Œå»è¯•æ¢ï¼Œæ‰€ä»¥ä¸€å®šèƒ½ä¿è¯è¡Œä¸ä¼šå†²çªã€‚</li>
<li>ç«–â€”â€”col æ•°ç»„</li>
<li>æ’‡â€”â€”ueg æ•°ç»„ å½“å‰ä½ç½®[i,j]çš„æ’‡æ€ä¹ˆæ ‡è®° ueg[i+j]</li>
<li>æºâ€”â€”eg æ•°ç»„ å½“å‰ä½ç½®[i,j]çš„æ’‡æ€ä¹ˆæ ‡è®° eg[j-i+n]</li>
</ul>
<p>ä¸Šå›¾ <img
src="https://ych-blog.oss-cn-guangzhou.aliyuncs.com/20241214203004.png" /></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"><span class="type">int</span>[] col, eg, ueg;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">totalNQueens</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">    col = <span class="keyword">new</span> <span class="title class_">int</span>[n];</span><br><span class="line">    eg = <span class="keyword">new</span> <span class="title class_">int</span>[n + n];</span><br><span class="line">    ueg = <span class="keyword">new</span> <span class="title class_">int</span>[n + n];</span><br><span class="line">    dfs(<span class="number">0</span>, n);</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">dfs</span><span class="params">(<span class="type">int</span> u, <span class="type">int</span> n)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (u == n) &#123;</span><br><span class="line">        res++;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span> (col[i] == <span class="number">0</span> &amp;&amp; eg[i + u] == <span class="number">0</span> &amp;&amp; ueg[i - u + n] == <span class="number">0</span>) &#123;</span><br><span class="line">            col[i] = eg[i + u] = ueg[i - u + n] = <span class="number">1</span>;</span><br><span class="line">            dfs(u + <span class="number">1</span>, n);</span><br><span class="line">            col[i] = eg[i + u] = ueg[i - u + n] = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="å…«çš‡å">15.6 <a
href="https://leetcode.cn/problems/eight-queens-lcci/description/">å…«çš‡å</a></h3>
<p>ä¸ä¸Šé¢çš„é¢˜ç›®ä¸€æ¨¡ä¸€æ ·ï¼Œä¸è¿‡è¿™é“é¢˜éœ€è¦å…ˆåˆå§‹åŒ–ä¸€ä¸‹åœ°å›¾ï¼Œç„¶åè¾¹ DFS
è¾¹æ”¹åœ°å›¾ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span>[] col, eg, ueg;</span><br><span class="line"><span class="type">char</span>[][] board;</span><br><span class="line">List&lt;List&lt;String&gt;&gt; res = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line"><span class="keyword">public</span> List&lt;List&lt;String&gt;&gt; <span class="title function_">solveNQueens</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">    board = <span class="keyword">new</span> <span class="title class_">char</span>[n][n];</span><br><span class="line">    col = <span class="keyword">new</span> <span class="title class_">int</span>[n];</span><br><span class="line">    eg = <span class="keyword">new</span> <span class="title class_">int</span>[n + n];</span><br><span class="line">    ueg = <span class="keyword">new</span> <span class="title class_">int</span>[n + n];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; ++i) <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; n; ++j) board[i][j] = <span class="string">&#x27;.&#x27;</span>;</span><br><span class="line">    dfs(<span class="number">0</span>, n, board);</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">dfs</span><span class="params">(<span class="type">int</span> u, <span class="type">int</span> n, <span class="type">char</span>[][] board)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (u == n) &#123;</span><br><span class="line">        List&lt;String&gt; rowStr = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">            rowStr.add(String.valueOf(board[i]));</span><br><span class="line">        &#125;</span><br><span class="line">        res.add(rowStr);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span> (col[i] == <span class="number">0</span> &amp;&amp; eg[u + i] == <span class="number">0</span> &amp;&amp; ueg[i - u + n] == <span class="number">0</span> &amp;&amp; board[u][i] == <span class="string">&#x27;.&#x27;</span>) &#123;</span><br><span class="line">            col[i] = eg[i + u] = ueg[i - u + n] = <span class="number">1</span>;</span><br><span class="line">            board[u][i] = <span class="string">&#x27;Q&#x27;</span>;</span><br><span class="line">            dfs(u + <span class="number">1</span>, n, board);</span><br><span class="line">            board[u][i] = <span class="string">&#x27;.&#x27;</span>;</span><br><span class="line">            col[i] = eg[i + u] = ueg[i - u + n] = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="å•è¯æœç´¢">15.7 <a
href="https://leetcode.cn/problems/word-search/description/?envType=study-plan-v2&amp;envId=top-interview-150">å•è¯æœç´¢</a></h3>
<p>â€”â€”DFS</p>
<p>åªæœ‰è·Ÿå•è¯ä¸€æ ·å¼€å¤´çš„å­—æ¯æ‰å¼€å§‹çˆ†æœï¼Œåªè¦é•¿åº¦è¶…è¿‡ç›®æ ‡å•è¯å°±é€€å‡ºï¼Œä¸ç„¶å°±å­—æ¯å››å‘¨ç»§ç»­æœã€‚éœ€è¦æ ‡è®°æ˜¯å¦å·²ç»éå†è¿‡</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">final</span> <span class="type">int</span>[][] directions = <span class="keyword">new</span> <span class="title class_">int</span>[][]&#123;&#123;<span class="number">0</span>, <span class="number">1</span>&#125;, &#123;<span class="number">0</span>, -<span class="number">1</span>&#125;, &#123;<span class="number">1</span>, <span class="number">0</span>&#125;, &#123;-<span class="number">1</span>, <span class="number">0</span>&#125;&#125;;</span><br><span class="line"><span class="type">StringBuilder</span> <span class="variable">path</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">exist</span><span class="params">(<span class="type">char</span>[][] board, String word)</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; board.length; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; board[<span class="number">0</span>].length; ++j) &#123;</span><br><span class="line">            <span class="keyword">if</span> (board[i][j] == word.charAt(<span class="number">0</span>)) &#123;</span><br><span class="line">                path.append(board[i][j]);</span><br><span class="line">                <span class="type">char</span> <span class="variable">tmp</span> <span class="operator">=</span> board[i][j];</span><br><span class="line">                board[i][j] = <span class="string">&#x27;#&#x27;</span>;</span><br><span class="line">                <span class="keyword">if</span> (dfs(i, j, board, word)) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">                board[i][j] = tmp;</span><br><span class="line">                path.deleteCharAt(path.length() - <span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="type">boolean</span> <span class="title function_">dfs</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y, <span class="type">char</span>[][] board, String word)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (word.contentEquals(path)) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">if</span> (path.length() &gt; word.length()) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span>[] direction : directions) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">newX</span> <span class="operator">=</span> x + direction[<span class="number">0</span>], newY = y + direction[<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">if</span> (isGrap(newX, newY, board) &amp;&amp; board[newX][newY] != <span class="string">&#x27;#&#x27;</span>) &#123;</span><br><span class="line">            path.append(board[newX][newY]);</span><br><span class="line">            <span class="type">char</span> <span class="variable">tmp</span> <span class="operator">=</span> board[newX][newY];</span><br><span class="line">            board[newX][newY] = <span class="string">&#x27;#&#x27;</span>;</span><br><span class="line">            <span class="keyword">if</span> (dfs(newX, newY, board, word)) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            path.deleteCharAt(path.length() - <span class="number">1</span>);</span><br><span class="line">            board[newX][newY] = tmp;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="type">boolean</span> <span class="title function_">isGrap</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y, <span class="type">char</span>[][] board)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> x &gt;= <span class="number">0</span> &amp;&amp; x &lt; board.length &amp;&amp; y &gt;= <span class="number">0</span> &amp;&amp; y &lt; board[<span class="number">0</span>].length;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æ‹¬å·ç”Ÿæˆ">15.8 <a
href="https://leetcode.cn/problems/generate-parentheses/?envType=study-plan-v2&amp;envId=top-interview-150">æ‹¬å·ç”Ÿæˆ</a></h3>
<p>å¯¹äºæ¯ä¸€æ¬¡æ·»åŠ ï¼Œå·¦æ‹¬å·å‰©ä½™çš„ä¸ªæ•°ä¸€å®šè¦å¤§äºæˆ–ç­‰äºå³æ‹¬å·çš„ä¸ªæ•°ï¼Œè¿™æ ·å¯ä»¥ä¿è¯ä¸ä¼šå‡ºç°ç±»ä¼¼
<code>())</code>
è¿™ç§æƒ…å†µå­˜åœ¨ã€‚æˆ‘ä»¬åˆå§‹åŒ–å·¦å³æ‹¬å·ä¸ªæ•°ä¸ºæœ€å¤§ï¼Œæ¯æ¬¡åŠ ï¼Œéƒ½å‡æ‰å¯¹åº”çš„ä¸ªæ•°ï¼Œå½“å·¦å³æ‹¬å·å‰©ä½™ä¸ªæ•°éƒ½ä¸º
0 æ—¶ï¼ŒåŠ å…¥æœ€ç»ˆçš„ç»“æœã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">List&lt;String&gt; res = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line"><span class="keyword">public</span> List&lt;String&gt; <span class="title function_">generateParenthesis</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">    dfs(<span class="string">&quot;&quot;</span>, n, n);</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">void</span> <span class="title function_">dfs</span><span class="params">(String str, <span class="type">int</span> l, <span class="type">int</span> r)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (l &gt; r) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">if</span> (l == <span class="number">0</span> &amp;&amp; r == <span class="number">0</span>) res.add(str);</span><br><span class="line">    <span class="keyword">if</span> (l &gt; <span class="number">0</span>) dfs(str + <span class="string">&quot;(&quot;</span>, l - <span class="number">1</span>, r);</span><br><span class="line">    <span class="keyword">if</span> (r &gt; <span class="number">0</span>) dfs(str + <span class="string">&quot;)&quot;</span>, l, r - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><br></p>
<h2 id="åˆ†æ²»">16. åˆ†æ²»</h2>
<h3 id="å°†æœ‰åºæ•°ç»„è½¬æ¢ä¸ºäºŒå‰æœç´¢æ ‘">16.1 <a
href="https://leetcode.cn/problems/convert-sorted-array-to-binary-search-tree/description/?envType=study-plan-v2&amp;envId=top-interview-150">å°†æœ‰åºæ•°ç»„è½¬æ¢ä¸ºäºŒå‰æœç´¢æ ‘</a></h3>
<p>æœ‰åºæ•°ç»„å–å‡ºä¸­é—´å€¼ï¼Œå·¦è¾¹æ•°ç»„æ„å»ºå·¦å­æ ‘ï¼Œå³è¾¹æ•°ç»„æ„å»ºå³å­æ ‘ã€‚å‰åºéå†ç‰ˆå»ºæ ‘</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> TreeNode <span class="title function_">sortedArrayToBST</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> creatTree(nums, <span class="number">0</span>, nums.length - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">private</span> TreeNode <span class="title function_">creatTree</span><span class="params">(<span class="type">int</span>[] nums, <span class="type">int</span> l, <span class="type">int</span> r)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (l &gt; r) <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">mid</span> <span class="operator">=</span> l + (r - l) / <span class="number">2</span>;</span><br><span class="line">    <span class="type">TreeNode</span> <span class="variable">root</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TreeNode</span>(nums[mid]);</span><br><span class="line">    root.left = creatTree(nums, l, mid - <span class="number">1</span>);</span><br><span class="line">    root.right = creatTree(nums, mid + <span class="number">1</span>, r);</span><br><span class="line">    <span class="keyword">return</span> root;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æ’åºé“¾è¡¨">16.2 <a
href="https://leetcode.cn/problems/sort-list/description/?envType=study-plan-v2&amp;envId=top-interview-150">æ’åºé“¾è¡¨</a></h3>
<p>â€”â€”è¿­ä»£ç‰ˆå½’å¹¶æ’åº</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> ListNode <span class="title function_">sortList</span><span class="params">(ListNode head)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (head == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> head;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> <span class="variable">length</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">node</span> <span class="operator">=</span> head;</span><br><span class="line">        <span class="keyword">while</span> (node != <span class="literal">null</span>) &#123;</span><br><span class="line">            length++;</span><br><span class="line">            node = node.next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">dummyHead</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ListNode</span>(<span class="number">0</span>, head);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">subLength</span> <span class="operator">=</span> <span class="number">1</span>; subLength &lt; length; subLength &lt;&lt;= <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="type">ListNode</span> <span class="variable">prev</span> <span class="operator">=</span> dummyHead, curr = dummyHead.next;</span><br><span class="line">            <span class="keyword">while</span> (curr != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="type">ListNode</span> <span class="variable">head1</span> <span class="operator">=</span> curr;</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; subLength &amp;&amp; curr.next != <span class="literal">null</span>; i++) &#123;</span><br><span class="line">                    curr = curr.next;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="type">ListNode</span> <span class="variable">head2</span> <span class="operator">=</span> curr.next;</span><br><span class="line">                curr.next = <span class="literal">null</span>;</span><br><span class="line">                curr = head2;</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; subLength &amp;&amp; curr != <span class="literal">null</span> &amp;&amp; curr.next != <span class="literal">null</span>; i++) &#123;</span><br><span class="line">                    curr = curr.next;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="type">ListNode</span> <span class="variable">next</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">                <span class="keyword">if</span> (curr != <span class="literal">null</span>) &#123;</span><br><span class="line">                    next = curr.next;</span><br><span class="line">                    curr.next = <span class="literal">null</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="type">ListNode</span> <span class="variable">merged</span> <span class="operator">=</span> merge(head1, head2);</span><br><span class="line">                prev.next = merged;</span><br><span class="line">                <span class="keyword">while</span> (prev.next != <span class="literal">null</span>) &#123;</span><br><span class="line">                    prev = prev.next;</span><br><span class="line">                &#125;</span><br><span class="line">                curr = next;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> dummyHead.next;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> ListNode <span class="title function_">merge</span><span class="params">(ListNode head1, ListNode head2)</span> &#123;</span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">dummyHead</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ListNode</span>(<span class="number">0</span>);</span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">temp</span> <span class="operator">=</span> dummyHead, temp1 = head1, temp2 = head2;</span><br><span class="line">        <span class="keyword">while</span> (temp1 != <span class="literal">null</span> &amp;&amp; temp2 != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (temp1.val &lt;= temp2.val) &#123;</span><br><span class="line">                temp.next = temp1;</span><br><span class="line">                temp1 = temp1.next;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                temp.next = temp2;</span><br><span class="line">                temp2 = temp2.next;</span><br><span class="line">            &#125;</span><br><span class="line">            temp = temp.next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (temp1 != <span class="literal">null</span>) &#123;</span><br><span class="line">            temp.next = temp1;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (temp2 != <span class="literal">null</span>) &#123;</span><br><span class="line">            temp.next = temp2;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> dummyHead.next;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="å»ºç«‹å››å‰æ ‘">16.3 <a
href="https://leetcode.cn/problems/construct-quad-tree/description/?envType=study-plan-v2&amp;envId=top-interview-150">å»ºç«‹å››å‰æ ‘</a></h3>
<p>å…ˆå»ºæ ‘æ ¹ï¼Œç„¶åç”¨é€’å½’å¡«æ ‘çš„å››ä¸ªå­©å­ï¼Œæ¯æ¬¡é€’å½’ï¼Œéƒ½æŠŠçŸ©é˜µç”¨ä¸‹æ ‡åˆ†å‰²æˆå¯¹åº”çš„å­çŸ©é˜µã€‚é‚£é€’å½’å‡ºå£æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿæ˜¯å½“å·¦ä¸Šè§’å’Œå³ä¸‹è§’é‡åˆæ—¶ï¼Œä¹Ÿå°±æ˜¯å½“å‰çŸ©é˜µåªæœ‰ä¸€ä¸ªæ•°æ—¶ï¼Œæˆ–è€…å½“çŸ©é˜µä¸­çš„æ ‘ä¸€æ ·æ—¶ï¼Œæˆ‘ä»¬éœ€è¦å»ºç«‹æ ‘çš„å¶å­èŠ‚ç‚¹è¿”å›ã€‚åˆ†å‰²çŸ©é˜µçš„ä¸‹æ ‡å¡«å†™å¯ä»¥å‚è€ƒä¸‹é¢çš„å›¾
<img
src="https://ych-blog.oss-cn-guangzhou.aliyuncs.com/20241214203044.png" />
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> Node <span class="title function_">construct</span><span class="params">(<span class="type">int</span>[][] grid)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> grid.length, m = grid[<span class="number">0</span>].length;</span><br><span class="line">        <span class="keyword">return</span> createTree(grid,<span class="number">0</span>,<span class="number">0</span>,n-<span class="number">1</span>,m-<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> Node <span class="title function_">createTree</span><span class="params">(<span class="type">int</span>[][] grid, <span class="type">int</span> x1, <span class="type">int</span> y1, <span class="type">int</span> x2, <span class="type">int</span> y2)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (x1 == x2 &amp;&amp; y1 == y2 || isSameNumber(grid,x1,y1,x2,y2)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Node</span>(grid[x1][y1] == <span class="number">1</span>, <span class="literal">true</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">Node</span> <span class="variable">root</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Node</span>(<span class="literal">true</span>, <span class="literal">false</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">midX</span> <span class="operator">=</span> x1 + x2 &gt;&gt; <span class="number">1</span>, midY = y1 + y2 &gt;&gt; <span class="number">1</span>;</span><br><span class="line">        root.topLeft = createTree(grid, x1, y1, midX, midY);</span><br><span class="line">        root.topRight = createTree(grid, x1, midY + <span class="number">1</span>, midX, y2);</span><br><span class="line">        root.bottomLeft = createTree(grid, midX + <span class="number">1</span>, y1, x2, midY);</span><br><span class="line">        root.bottomRight = createTree(grid, midX + <span class="number">1</span>, midY + <span class="number">1</span>, x2, y2);</span><br><span class="line">        <span class="keyword">return</span> root;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> <span class="title function_">isSameNumber</span><span class="params">(<span class="type">int</span>[][] grid, <span class="type">int</span> x1, <span class="type">int</span> y1, <span class="type">int</span> x2, <span class="type">int</span> y2)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> grid[x1][y1];</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> x1; i &lt;= x2; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> y1; j &lt;= y2; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span>(grid[i][j] != num) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> ### 16.4 <a
href="https://leetcode.cn/problems/merge-k-sorted-lists/description/?envType=study-plan-v2&amp;envId=top-interview-150">åˆå¹¶
K ä¸ªå‡åºé“¾è¡¨</a></p>
<p>â€”â€”æš´åŠ›ç‰ˆæœ¬</p>
<p>å®è·µè¯æ˜ï¼Œæš´åŠ›çœŸçš„èƒ½è¿‡è¿™é“é¢˜ç›®ã€‚åªéœ€è¦æ¯ä¸€æ¬¡éƒ½éå†ä¸€éé“¾è¡¨æ•°ç»„ï¼ŒæŠŠæœ€å°çš„é‚£ä¸€ä¸ªå€¼å–å‡ºæ¥ï¼Œæ’å…¥åˆ°ç»“æœé“¾è¡¨ä¸­å³å¯ã€‚è¿™ä¹Ÿæ˜¯æˆ‘è‡ªå·±ç¬¬ä¸€æ—¶é—´æƒ³åˆ°å’Œå†™å‡ºæ¥çš„ç»“æœã€‚
è¿˜æ˜¯çœ‹çœ‹ä¸‹é¢ç”¨ç±»ä¼¼äºå½’å¹¶æ’åºçš„åˆ†æ²»ç‰ˆæœ¬å§ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> ListNode <span class="title function_">mergeKLists</span><span class="params">(ListNode[] lists)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (Objects.isNull(lists) || lists.length == <span class="number">0</span>) <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">dummy</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ListNode</span>(<span class="number">0</span>);</span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">cur</span> <span class="operator">=</span> dummy;</span><br><span class="line">    <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">idx</span> <span class="operator">=</span> <span class="number">0</span>, maxNum = Integer.MAX_VALUE;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; lists.length; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (Objects.nonNull(lists[i]) &amp;&amp; lists[i].val &lt; maxNum) &#123;</span><br><span class="line">                idx = i;</span><br><span class="line">                maxNum = lists[i].val;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (maxNum == Integer.MAX_VALUE) <span class="keyword">break</span>;</span><br><span class="line">        cur.next = lists[idx];</span><br><span class="line">        lists[idx] = lists[idx].next;</span><br><span class="line">        cur = cur.next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dummy.next;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>â€”â€” åˆ†æ²»ç‰ˆæœ¬</p>
<p>å¯¹äºåˆ†æ²»ï¼Œç»™ up çš„é¢˜æ„Ÿéƒ½è·Ÿ æ ‘çš„éå†æˆ–è€…å½’å¹¶æ’åºçš„æ€è·¯åŸºæœ¬ä¸€è‡´ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> ListNode <span class="title function_">mergeKLists</span><span class="params">(ListNode[] lists)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> merge(lists, <span class="number">0</span>, lists.length - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> ListNode <span class="title function_">merge</span><span class="params">(ListNode[] lists, <span class="type">int</span> l, <span class="type">int</span> r)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (l == r) <span class="keyword">return</span> lists[l];</span><br><span class="line">    <span class="keyword">if</span> (l &gt; r) <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">mid</span> <span class="operator">=</span> (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> mergeTwoLists(merge(lists, l, mid), merge(lists, mid + <span class="number">1</span>, r));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> ListNode <span class="title function_">mergeTwoLists</span><span class="params">(ListNode l1, ListNode l2)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (Objects._isNull_(l1) || Objects._isNull_(l2)) &#123;</span><br><span class="line">        <span class="keyword">return</span> Objects._isNull_(l1) ? l2 : l1;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">dummy</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ListNode</span>(<span class="number">0</span>);</span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">cur</span> <span class="operator">=</span> dummy, l1Head = l1, l2Head = l2;</span><br><span class="line">    <span class="keyword">while</span> (Objects._nonNull_(l1Head) &amp;&amp; Objects._nonNull_(l2Head)) &#123;</span><br><span class="line">        <span class="keyword">if</span> (l1Head.val &lt; l2Head.val) &#123;</span><br><span class="line">            cur.next = l1Head;</span><br><span class="line">            l1Head = l1Head.next;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            cur.next = l2Head;</span><br><span class="line">            l2Head = l2Head.next;</span><br><span class="line">        &#125;</span><br><span class="line">        cur = cur.next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (Objects._nonNull_(l1Head)) &#123;</span><br><span class="line">        cur.next = l1Head;</span><br><span class="line">        cur = cur.next;</span><br><span class="line">        l1Head = l1Head.next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (Objects._nonNull_(l2Head)) &#123;</span><br><span class="line">        cur.next = l2Head;</span><br><span class="line">        cur = cur.next;</span><br><span class="line">        l2Head = l2Head.next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dummy.next;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><br></p>
<h2 id="kadaneç®—æ³•">17. Kadaneç®—æ³•</h2>
<h3 id="æœ€å¤§å­æ•°ç»„å’Œ">17.1 <a
href="https://leetcode.cn/problems/maximum-subarray/description/?envType=study-plan-v2&amp;envId=top-interview-150">æœ€å¤§å­æ•°ç»„å’Œ</a></h3>
<p>å®šä¹‰ä¸€ä¸ªå˜é‡ maxNum
è®°å½•å½“å‰ä½ç½®ä¹‹å‰çš„å­æ•°ç»„å’Œï¼Œç„¶åæ¯”è¾ƒè¦ä¸è¦ä»å½“å‰ä½ç½®å¼€å§‹æ–°çš„å­æ•°ç»„ï¼Œè¿˜æ˜¯ç»§ç»­æŠŠå½“å‰ä½ç½®çº³å…¥åˆ°å­æ•°ç»„ä¸­ï¼Œæ¯”è¾ƒçš„æ–¹å¼å°±æ˜¯ï¼Œ
Math.max(nums[i], nums[i] + maxNum) ã€‚ ä¹Ÿå°±æ˜¯å½“å‰ä½ç½®ä¹‹å‰çš„å­æ•°ç»„å’Œ +
å½“å‰ä½ç½®çš„æ•°å€¼ï¼Œä¼šä¸ä¼šæ¯”å½“å‰ä½ç½®çš„æ•°å¤§ã€‚ä¼šçš„è¯å°±å°†å½“å‰ä½ç½®çº³å…¥å­æ•°ç»„ï¼Œä¸ä¼šçš„è¯ï¼Œå°±ä»å½“å‰ä½ç½®å¼€å§‹ã€‚æ¯æ¬¡æ›´æ–°éƒ½è¦è®°å½•å­æ•°ç»„å’Œçš„æœ€å¤§å€¼ï¼Œæ‰€ä»¥æœ€ç»ˆæ±‚å‡ºæ¥çš„ç»“æœå°±æ˜¯æœ€å¤§å­æ•°ç»„å’Œã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxSubArray</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">maxNum</span> <span class="operator">=</span> nums[<span class="number">0</span>], res = nums[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; nums.length; ++i) &#123;</span><br><span class="line">        maxNum = Math.max(nums[i], maxNum + nums[i]);</span><br><span class="line">        res = Math.max(res, maxNum);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ç¯å½¢å­æ•°ç»„çš„æœ€å¤§å’Œ">17.2 <a
href="https://leetcode.cn/problems/maximum-sum-circular-subarray/description/?envType=study-plan-v2&amp;envId=top-interview-150">ç¯å½¢å­æ•°ç»„çš„æœ€å¤§å’Œ</a></h3>
<p>é¢˜è§£å‚è€ƒï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxSubarraySumCircular</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">minS</span> <span class="operator">=</span> Integer.MAX_VALUE, maxS = Integer.MIN_VALUE;</span><br><span class="line">    <span class="type">int</span> <span class="variable">minF</span> <span class="operator">=</span> <span class="number">0</span>, maxF = <span class="number">0</span>, sum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> num : nums) &#123;</span><br><span class="line">        sum += num;</span><br><span class="line">        minF = Math.min(minF,<span class="number">0</span>) + num;</span><br><span class="line">        maxF = Math.max(maxF,<span class="number">0</span>) + num;</span><br><span class="line">        minS = Math.min(minS, minF);</span><br><span class="line">        maxS = Math.max(maxS, maxF);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> minS == sum? maxS : Math.max(maxS, sum - minS);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><br></p>
<h2 id="äºŒåˆ†æŸ¥æ‰¾">18. äºŒåˆ†æŸ¥æ‰¾</h2>
<h3 id="æœç´¢æ’å…¥ä½ç½®">18.1 <a
href="https://leetcode.cn/problems/search-insert-position/?envType=study-plan-v2&amp;envId=top-interview-150">æœç´¢æ’å…¥ä½ç½®</a></h3>
<p>äºŒåˆ†æŸ¥æ‰¾ç»å…¸é¢˜ç›®</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">searchInsert</span><span class="params">(<span class="type">int</span>[] nums, <span class="type">int</span> target)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">l</span> <span class="operator">=</span> <span class="number">0</span>, r = nums.length - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (l &lt; r) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">mid</span> <span class="operator">=</span> l + r &gt;&gt; <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span> (nums[mid] &gt;= target) r = mid;</span><br><span class="line">        <span class="keyword">else</span> l = mid + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> nums[l] &gt;= target ? l : l + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æœç´¢äºŒç»´çŸ©é˜µ">18.2 <a
href="https://leetcode.cn/problems/search-a-2d-matrix/description/?envType=study-plan-v2&amp;envId=top-interview-150">æœç´¢äºŒç»´çŸ©é˜µ</a></h3>
<p>é¦–å…ˆæŠŠäºŒç»´çŸ©é˜µæ‹‰æˆä¸€ç»´çŸ©é˜µæ¥çœ‹å¾…ï¼Œç„¶åæŠŠå¯¹åº”ä¸€ç»´çš„çŸ©é˜µä¸‹æ ‡è½¬æ¢æˆäºŒç»´çŸ©é˜µå¯¹åº”çš„ä¸‹æ ‡å³å¯ã€‚ç”»ä¸ªå›¾è®²ä¸€ä¸‹æ€ä¹ˆè½¬æ¢.
<img
src="https://ych-blog.oss-cn-guangzhou.aliyuncs.com/20241214203141.png" />
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">searchMatrix</span><span class="params">(<span class="type">int</span>[][] matrix, <span class="type">int</span> target)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> matrix.length, m = matrix[<span class="number">0</span>].length;</span><br><span class="line">    <span class="type">int</span> <span class="variable">l</span> <span class="operator">=</span> <span class="number">0</span>, r = m * n - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (l &lt;= r) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">mid</span> <span class="operator">=</span> l + r &gt;&gt; <span class="number">1</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">tmp</span> <span class="operator">=</span> matrix[mid / m][mid % m];</span><br><span class="line">        <span class="keyword">if</span> (tmp == target) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (tmp &lt; target) l = mid + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">else</span> r = mid - <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="å¯»æ‰¾å³°å€¼">18.3 <a
href="https://leetcode.cn/problems/find-peak-element/description/?envType=study-plan-v2&amp;envId=top-interview-150">å¯»æ‰¾å³°å€¼</a></h3>
<p>ç”±äºé¢˜ç›®è¯´äº†ï¼Œå¯ä»¥å‡è®¾
<code>nums[-1] = nums[n] = -âˆ</code>ï¼Œé‚£ä¹ˆåœ¨æ•°ç»„ä¸­ï¼Œåªè¦æœ‰ä¸€ä¸ªæ•°æ¯”å®ƒç›¸é‚»çš„å…ƒç´ å¤§ï¼Œé‚£å°±é¡ºç€å¤§çš„å…ƒç´ çš„æ–¹å‘ç»§ç»­å¾€ä¸‹æ‰¾ï¼Œå°±ä¸€å®šèƒ½æ‰¾åˆ°å³°å€¼ã€‚å› ä¸ºæç«¯æƒ…å†µè¾¹ç¼˜æ•°å­—å°±æ˜¯å³°å€¼ã€‚</p>
<ul>
<li>æ ¹æ®ä¸Šè¿°ç»“è®ºï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾æ‰¾åˆ°å³°å€¼ã€‚</li>
<li>æŸ¥æ‰¾æ—¶ï¼Œå·¦æŒ‡é’ˆ lï¼Œå³æŒ‡é’ˆ rï¼Œä»¥å…¶ä¿æŒå·¦å³é¡ºåºä¸ºå¾ªç¯æ¡ä»¶</li>
<li>æ ¹æ®å·¦å³æŒ‡é’ˆè®¡ç®—ä¸­é—´ä½ç½® mï¼Œå¹¶æ¯”è¾ƒ m ä¸ m+1 çš„å€¼ï¼Œå¦‚æœ m
è¾ƒå¤§ï¼Œåˆ™å·¦ä¾§å­˜åœ¨å³°å€¼ï¼Œr = mï¼Œå¦‚æœ m + 1 è¾ƒå¤§ï¼Œåˆ™å³ä¾§å­˜åœ¨å³°å€¼ï¼Œl = m +
1</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">findPeakElement</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">l</span> <span class="operator">=</span> <span class="number">0</span>, r = nums.length - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (l &lt; r) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">mid</span> <span class="operator">=</span> l + r &gt;&gt; <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span> (nums[mid] &gt; nums[mid + <span class="number">1</span>]) r = mid;</span><br><span class="line">        <span class="keyword">else</span> l = mid + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> l;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æœç´¢æ—‹è½¬æ’åºæ•°ç»„">18.4 <a
href="https://leetcode.cn/problems/search-in-rotated-sorted-array/description/?envType=study-plan-v2&amp;envId=top-interview-150">æœç´¢æ—‹è½¬æ’åºæ•°ç»„</a></h3>
<p>è™½ç„¶æ•°ç»„æ—‹è½¬äº†ï¼Œä½†è¿˜æ˜¯ä¼šæœ‰æœ‰åºçš„éƒ¨åˆ†ã€‚æ•°ç»„ä¸­ç‚¹ä¸€å®šä¼šæŠŠæ•°ç»„åˆ†å‰²æˆä¸¤éƒ¨åˆ†ï¼Œä¸€éƒ¨åˆ†ä¸€å®šæ˜¯æœ‰åºçš„ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨æœ‰åºçš„éƒ¨åˆ†ç»§ç»­ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾ï¼Œé‚£å°±ä¸€å®šèƒ½æ‰¾åˆ°ç›®æ ‡å€¼ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">search</span><span class="params">(<span class="type">int</span>[] nums, <span class="type">int</span> target)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">l</span> <span class="operator">=</span> <span class="number">0</span>, r = nums.length - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (l &lt;= r) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">mid</span> <span class="operator">=</span> l + r &gt;&gt; <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span> (nums[mid] == target) <span class="keyword">return</span> mid;</span><br><span class="line">        <span class="keyword">if</span> (nums[l] &lt;= nums[mid]) &#123;</span><br><span class="line">            <span class="keyword">if</span> (nums[l] &lt;= target &amp;&amp; target &lt; nums[mid]) &#123;</span><br><span class="line">                r = mid - <span class="number">1</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                l = mid + <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (nums[mid] &lt; target &amp;&amp; target &lt;= nums[r]) &#123;</span><br><span class="line">                l = mid + <span class="number">1</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                r = mid - <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½®">18.5 <a
href="https://leetcode.cn/problems/find-first-and-last-position-of-element-in-sorted-array/description/?envType=study-plan-v2&amp;envId=top-interview-150">åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½®</a></h3>
<p>å…¶å®è¿™é“é¢˜ç›®å°±æ˜¯ acwing çš„äºŒåˆ†æŸ¥æ‰¾çš„æ¨¡æ¿é¢˜ç›®ï¼Œä½†æ˜¯ up
å½“æ—¶çœ‹å®Œè§†é¢‘è¿˜æ˜¯ä¸æ‡‚ï¼ŒçŸ¥é“çœ‹äº†è¿™ç¯‡<a
href="https://leetcode.cn/problems/find-first-and-last-position-of-element-in-sorted-array/solutions/504484/zai-pai-xu-shu-zu-zhong-cha-zhao-yuan-su-de-di-3-4/?envType=study-plan-v2&amp;envId=top-interview-150">é¢˜è§£</a>ï¼Œç¡®å®ä¸éœ€è¦å»åˆ¤æ–­å“ªä¸ªåœ°æ–¹å¾—ç­‰äºï¼Œå“ªä¸ªåœ°æ–¹åˆå¾—
+
1ã€‚æˆ‘ä»¬åªéœ€è¦å½“æ‰¾åˆ°ç›®æ ‡å€¼çš„æ—¶å€™ï¼Œå¦‚æœè¦æ‰¾ç¬¬ä¸€ä¸ªå‡ºç°çš„ä½ç½®ï¼Œæˆ‘ä»¬å°±ç»§ç»­å¾€å·¦è¾¹æ‰¾ï¼›å¦‚æœè¦æ‰¾æœ€åä¸€ä¸ªå‡ºç°çš„ä½ç½®ï¼Œæˆ‘ä»¬å°±ç»§ç»­å¾€å³æ‰¾å°±å¯ä»¥äº†ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span>[] searchRange(<span class="type">int</span>[] nums, <span class="type">int</span> target) &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> nums.length;</span><br><span class="line">    <span class="type">int</span>[] res = <span class="keyword">new</span> <span class="title class_">int</span>[]&#123;-<span class="number">1</span>, -<span class="number">1</span>&#125;;</span><br><span class="line">    res[<span class="number">0</span>] = binarySearch(nums,target,<span class="literal">true</span>);</span><br><span class="line">    res[<span class="number">1</span>] = binarySearch(nums,target,<span class="literal">false</span>);</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> <span class="title function_">binarySearch</span><span class="params">(<span class="type">int</span>[] nums, <span class="type">int</span> target, <span class="type">boolean</span> isFirst)</span>&#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">l</span> <span class="operator">=</span> <span class="number">0</span>, r = nums.length - <span class="number">1</span>, tmp = -<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (l &lt;= r) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">mid</span> <span class="operator">=</span> l + r &gt;&gt; <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span> (nums[mid] == target) &#123;</span><br><span class="line">            tmp = mid;</span><br><span class="line">            <span class="keyword">if</span>(!isFirst) l = mid + <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">else</span> r = mid - <span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (nums[mid] &gt; target) &#123;</span><br><span class="line">            r = mid - <span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            l = mid + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> tmp;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="å¯»æ‰¾æ—‹è½¬æ’åºæ•°ç»„ä¸­çš„æœ€å°å€¼">18.6 <a
href="https://leetcode.cn/problems/find-minimum-in-rotated-sorted-array/?envType=study-plan-v2&amp;envId=top-interview-150">å¯»æ‰¾æ—‹è½¬æ’åºæ•°ç»„ä¸­çš„æœ€å°å€¼</a></h3>
<p>è¿™é“é¢˜ç›®å®˜æ–¹è®²è§£è®²çš„å¾ˆå¥½ï¼Œå¯ä»¥çœ‹æ‡‚ï¼Œè¿™é‡Œå°±ç›´æ¥è´´<a
href="https://leetcode.cn/problems/find-minimum-in-rotated-sorted-array/solutions/698479/xun-zhao-xuan-zhuan-pai-xu-shu-zu-zhong-5irwp/?envType=study-plan-v2&amp;envId=top-interview-150">å®˜æ–¹è®²è§£</a>äº†ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">findMin</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">l</span> <span class="operator">=</span> <span class="number">0</span>, r = nums.length - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (l &lt; r) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">mid</span> <span class="operator">=</span> l + r &gt;&gt; <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(nums[mid] &lt; nums[r]) r = mid;</span><br><span class="line">        <span class="keyword">else</span> l = mid + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> nums[l];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="å¯»æ‰¾ä¸¤ä¸ªæ­£åºæ•°ç»„çš„ä¸­ä½æ•°">18.7 <a
href="https://leetcode.cn/problems/median-of-two-sorted-arrays/description/?envType=study-plan-v2&amp;envId=top-interview-150">å¯»æ‰¾ä¸¤ä¸ªæ­£åºæ•°ç»„çš„ä¸­ä½æ•°</a></h3>
<p>â€”â€”æš´åŠ›è§£æ³•
å…¶å®å°±æ˜¯å°†ä¸¤ä¸ªæ•°ç»„åˆå¹¶æˆä¸€ä¸ªæ•°ç»„ï¼Œç„¶åï¼Œæ±‚å‡ºæ–°æ•°ç»„çš„ä¸­ä½æ•°ã€‚ä½†æ˜¯æ²¡æƒ³åˆ°è¶…è¿‡
100%</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">double</span> <span class="title function_">findMedianSortedArrays</span><span class="params">(<span class="type">int</span>[] nums1, <span class="type">int</span>[] nums2)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">n1</span> <span class="operator">=</span> nums1.length, n2 = nums2.length, i = <span class="number">0</span>, j = <span class="number">0</span>, k = <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> n1 + n2;</span><br><span class="line">    <span class="type">int</span>[] arr = <span class="keyword">new</span> <span class="title class_">int</span>[n];</span><br><span class="line">    <span class="keyword">while</span> (i &lt; n1 &amp;&amp; j &lt; n2) &#123;</span><br><span class="line">        <span class="keyword">if</span> (nums1[i] &lt; nums2[j]) arr[k++] = nums1[i++];</span><br><span class="line">        <span class="keyword">else</span> arr[k++] = nums2[j++];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (i &lt; n1) arr[k++] = nums1[i++];</span><br><span class="line">    <span class="keyword">while</span> (j &lt; n2) arr[k++] = nums2[j++];</span><br><span class="line">    <span class="keyword">if</span> (n % <span class="number">2</span> == <span class="number">0</span>) <span class="keyword">return</span> (arr[n / <span class="number">2</span>] + arr[n / <span class="number">2</span> - <span class="number">1</span>]) / <span class="number">2.0</span>;</span><br><span class="line">    <span class="keyword">return</span> arr[n / <span class="number">2</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>â€”â€”äºŒåˆ†è§£æ³•</p>
<p>å¯»æ±‚ç¬¬ k å°æ•°çš„é—®é¢˜ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">double</span> <span class="title function_">findMedianSortedArrays</span><span class="params">(<span class="type">int</span>[] nums1, <span class="type">int</span>[] nums2)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> nums1.length, m = nums2.length;</span><br><span class="line">    <span class="type">int</span> <span class="variable">left</span> <span class="operator">=</span> (n + m + <span class="number">1</span>) / <span class="number">2</span>, right = (n + m + <span class="number">2</span>) / <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">return</span> (getKth(nums1, <span class="number">0</span>, n - <span class="number">1</span>, nums2, <span class="number">0</span>, m - <span class="number">1</span>, left) + getKth(nums1, <span class="number">0</span>, n - <span class="number">1</span>, nums2, <span class="number">0</span>, m - <span class="number">1</span>, right)) * <span class="number">0.5</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="type">int</span> <span class="title function_">getKth</span><span class="params">(<span class="type">int</span>[] nums1, <span class="type">int</span> start1, <span class="type">int</span> end1, <span class="type">int</span>[] nums2, <span class="type">int</span> start2, <span class="type">int</span> end2, <span class="type">int</span> k)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">len1</span> <span class="operator">=</span> end1 - start1 + <span class="number">1</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">len2</span> <span class="operator">=</span> end2 - start2 + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span> (len1 &gt; len2) <span class="keyword">return</span> getKth(nums2, start2, end2, nums1, start1, end1, k);</span><br><span class="line">    <span class="keyword">if</span> (len1 == <span class="number">0</span>) <span class="keyword">return</span> nums2[start2 + k - <span class="number">1</span>];</span><br><span class="line">    <span class="keyword">if</span> (k == <span class="number">1</span>) <span class="keyword">return</span> Math.min(nums1[start1], nums2[start2]);</span><br><span class="line">    <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> start1 + Math.min(len1, k / <span class="number">2</span>) - <span class="number">1</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> start2 + Math.min(len2, k / <span class="number">2</span>) - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span> (nums1[i] &gt; nums2[j]) &#123;</span><br><span class="line">        <span class="keyword">return</span> getKth(nums1, start1, end1, nums2, j + <span class="number">1</span>, end2, k - (j - start2 + <span class="number">1</span>));</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> getKth(nums1, i + <span class="number">1</span>, end1, nums2, start2, end2, k - (i - start1 + <span class="number">1</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><br></p>
<h2 id="å †">19. å †</h2>
<h3 id="æ•°ç»„ä¸­çš„ç¬¬-k-ä¸ªæœ€å¤§å…ƒç´ ">19.1 <a
href="https://leetcode.cn/problems/kth-largest-element-in-an-array/description/?envType=study-plan-v2&amp;envId=top-interview-150">æ•°ç»„ä¸­çš„ç¬¬
K ä¸ªæœ€å¤§å…ƒç´ </a></h3>
<p><strong>â€”â€”æ’åº</strong></p>
<p>ä¸ç¬¦åˆé¢˜æ„è¦æ±‚ï¼Œè¿™é‡Œä¸è´´ä»£ç äº†</p>
<p><strong>â€”â€”å¿«é€Ÿæ’åº</strong></p>
<p>å›å¿†ä¸€ä¸‹ä¸‹é¢å¿«é€Ÿæ’åºçš„ä»£ç ï¼Œå…¶å®å¿«é€Ÿæ’åºå®ç°çš„æ˜¯ä»€ä¹ˆï¼Œæ˜¯å°†ä¸€ä¸ªæ•°ç»„åˆ†æˆä¸¤ä¸ªéƒ¨åˆ†ï¼Œå‰åŠéƒ¨åˆ†å°äºæŸä¸ªæ•°
baseï¼ŒååŠéƒ¨åˆ†å¤§äºæŸä¸ªæ•° baseã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">quickSort</span><span class="params">(<span class="type">int</span>[] nums, <span class="type">int</span> l, <span class="type">int</span> r)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (l &gt;= r) <span class="keyword">return</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> l - <span class="number">1</span>, j = r + <span class="number">1</span>, base = nums[i + j &gt;&gt; <span class="number">1</span>];</span><br><span class="line">    <span class="keyword">while</span> (i &lt; j) &#123;</span><br><span class="line">        <span class="keyword">do</span> ++i; <span class="keyword">while</span> (nums[i] &lt; base);</span><br><span class="line">        <span class="keyword">do</span> --j; <span class="keyword">while</span> (nums[j] &gt; base);</span><br><span class="line">        <span class="keyword">if</span> (i &lt; j) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">tmp</span> <span class="operator">=</span> nums[i];</span><br><span class="line">            nums[i] = nums[j];</span><br><span class="line">            nums[j] = tmp;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// ä»è¿™é‡Œå…¥æ‰‹</span></span><br><span class="line">    _quickSort_(nums, l, j);</span><br><span class="line">    _quickSort_(nums, j + <span class="number">1</span>, r);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬ç°åœ¨è¦æ‰¾åˆ°ç¬¬ K
å¤§çš„æ•°ï¼Œæ€ä¹ˆåˆ©ç”¨å¿«é€Ÿæ’åºæ¥æ‰¾å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥ä»ä¸Šé¢ä»£ç æ ‡è®°çš„ä½ç½®å…¥æ‰‹ã€‚å½“ä»£ç è¿è¡Œåˆ°æ­¤å¤„æ˜¯ï¼Œæ­¤æ—¶çš„æ•°ç»„å‰åŠéƒ¨åˆ†å…¨æ˜¯å°äº
base çš„æ•°ï¼ŒååŠéƒ¨åˆ†å…¨æ˜¯å¤§äº base çš„æ•°ï¼Œæˆ‘ä»¬è¦æ‰¾ç¬¬ k
å¤§ï¼Œåªéœ€è¦çœ‹çœ‹å‰åŠéƒ¨åˆ†æœ‰æ²¡æœ‰ k
ä¸ªæ•°ï¼Œæœ‰çš„è¯ï¼Œåœ¨å‰åŠéƒ¨åˆ†æ‰¾ï¼›æ²¡æœ‰åˆ™åˆ°ååŠéƒ¨åˆ†æ‰¾ã€‚çœ‹çœ‹å®ç°ä»£ç ~</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">findKthLargest</span><span class="params">(<span class="type">int</span>[] nums, <span class="type">int</span> k)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> nums.length;</span><br><span class="line">    <span class="keyword">return</span> quickSort(nums, <span class="number">0</span>, n - <span class="number">1</span>, n - k);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">private</span> <span class="type">int</span> <span class="title function_">quickSort</span><span class="params">(<span class="type">int</span>[] nums, <span class="type">int</span> l, <span class="type">int</span> r, <span class="type">int</span> k)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (l == r) <span class="keyword">return</span> nums[l];</span><br><span class="line">    <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> l - <span class="number">1</span>, j = r + <span class="number">1</span>, base = nums[l + r &gt;&gt; <span class="number">1</span>];</span><br><span class="line">    <span class="keyword">while</span> (i &lt; j) &#123;</span><br><span class="line">        <span class="keyword">do</span> ++i; <span class="keyword">while</span> (nums[i] &lt; base);</span><br><span class="line">        <span class="keyword">do</span> --j; <span class="keyword">while</span> (nums[j] &gt; base);</span><br><span class="line">        <span class="keyword">if</span> (i &lt; j) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">tmp</span> <span class="operator">=</span> nums[i];</span><br><span class="line">            nums[i] = nums[j];</span><br><span class="line">            nums[j] = tmp;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (k &lt;= j) <span class="keyword">return</span> quickSort(nums, l, j, k);</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">return</span> quickSort(nums, j + <span class="number">1</span>, r, k);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>â€”â€”å †æ’åº</strong></p>
<p>æ‰€è°“çš„å †æ’åºï¼Œå°±æ˜¯ç”¨åˆ°ä¸€äº›åœ¨æ ‘çŠ¶æ•°ç»„ä¸Šè¿›è¡Œçš„æ“ä½œï¼Œå»ºç«‹å¤§æ ¹å †ï¼Œç„¶åä¸æ–­åˆ é™¤é¡¶éƒ¨èŠ‚ç‚¹ã€‚è¿˜æ˜¯å¾—ç”»ä¸ªå›¾æ‰æ¯”è¾ƒæ˜äº†
<img
src="https://ych-blog.oss-cn-guangzhou.aliyuncs.com/20241217214625.png" />
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">findKthLargest</span><span class="params">(<span class="type">int</span>[] nums, <span class="type">int</span> k)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> nums.length;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> len / <span class="number">2</span> - <span class="number">1</span>; i &gt;= <span class="number">0</span>; --i) &#123;</span><br><span class="line">        down(nums, len, i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (k-- &gt; <span class="number">1</span>) &#123;</span><br><span class="line">        swap(nums, <span class="number">0</span>, len - <span class="number">1</span>);</span><br><span class="line">        down(nums, --len, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> nums[<span class="number">0</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">down</span><span class="params">(<span class="type">int</span>[] nums, <span class="type">int</span> len,  <span class="type">int</span> u)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">t</span> <span class="operator">=</span> u;</span><br><span class="line">    <span class="keyword">if</span> (u * <span class="number">2</span> + <span class="number">1</span> &lt; len &amp;&amp; nums[u * <span class="number">2</span> + <span class="number">1</span>] &gt; nums[t]) t = u * <span class="number">2</span> + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span> (u * <span class="number">2</span> + <span class="number">2</span> &lt; len &amp;&amp; nums[u * <span class="number">2</span> + <span class="number">2</span>] &gt; nums[t]) t = u * <span class="number">2</span> + <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">if</span> (t != u) &#123;</span><br><span class="line">        swap(nums, t, u);</span><br><span class="line">        down(nums, len ,t);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">swap</span><span class="params">(<span class="type">int</span>[] nums, <span class="type">int</span> a, <span class="type">int</span> b)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">tmp</span> <span class="operator">=</span> nums[a];</span><br><span class="line">    nums[a] = nums[b];</span><br><span class="line">    nums[b] = tmp;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="ipo">19.2 <a
href="https://leetcode.cn/problems/ipo/description/?envType=study-plan-v2&amp;envId=top-interview-150">IPO</a></h3>
<p>â€”â€”è´ªå¿ƒç®—æ³•
æœ€å¼€å§‹çœ‹åˆ°è¿™ä¸ªé¢˜ç›®æ„Ÿè§‰åƒèƒŒåŒ…ï¼Œä½†æ˜¯ç”±äºæˆæœ¬æ˜¯éšç€æ”¶ç›Šçš„ä¸æ–­å¢åŠ æ”¹å˜ã€‚æ‰€ä»¥åº”è¯¥ç”¨è´ªå¿ƒçš„æ€è·¯ã€‚å…·ä½“æ˜¯å…ˆå°†æ‰€æœ‰æŠ•èµ„æŒ‰ç…§æŠ•èµ„æˆæœ¬è¿›è¡Œå‡åºæ’åºï¼Œç„¶åæ ¹æ®ç°æœ‰èµ„é‡‘å†³å®šæ˜¯å¦æŠ•èµ„å¯¹åº”çš„é¡¹ç›®ï¼Œå°†é¡¹ç›®çš„æ”¶ç›ŠæŒ‰ç…§é™åºæ’åºå­˜å…¥å †ä¸­ï¼Œæ¯ä¸€æ¬¡å–å‡ºåœ¨å½“å‰æŠ•èµ„èµ„é‡‘æ‰€èƒ½æ”¯æŒçš„é¡¹ç›®ä¸­æ”¶ç›Šæœ€å¤§çš„é‚£ä¸€ä¸ªã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">findMaximizedCapital</span><span class="params">(<span class="type">int</span> k, <span class="type">int</span> w, <span class="type">int</span>[] profits, <span class="type">int</span>[] capital)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> profits.length;</span><br><span class="line">    <span class="type">int</span>[][] arr = <span class="keyword">new</span> <span class="title class_">int</span>[n][<span class="number">2</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        arr[i][<span class="number">0</span>] = capital[i];</span><br><span class="line">        arr[i][<span class="number">1</span>] = profits[i];</span><br><span class="line">    &#125;</span><br><span class="line">    Arrays._sort_(arr, (a, b) -&gt; a[<span class="number">0</span>] - b[<span class="number">0</span>]);</span><br><span class="line">    <span class="type">int</span> <span class="variable">cur</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    PriorityQueue&lt;Integer&gt; heap = <span class="keyword">new</span> <span class="title class_">PriorityQueue</span>&lt;&gt;((a, b) -&gt; b - a);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; k; ++i) &#123;</span><br><span class="line">        <span class="keyword">while</span> (cur &lt; n &amp;&amp; w &gt;= arr[cur][<span class="number">0</span>]) &#123;</span><br><span class="line">            heap.add(arr[cur][<span class="number">1</span>]);</span><br><span class="line">            cur++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (!heap.isEmpty()) &#123;</span><br><span class="line">            w += heap.poll();</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> w;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æŸ¥æ‰¾å’Œæœ€å°çš„-k-å¯¹æ•°å­—">19.3 <a
href="https://leetcode.cn/problems/find-k-pairs-with-smallest-sums/description/?envType=study-plan-v2&amp;envId=top-interview-150">æŸ¥æ‰¾å’Œæœ€å°çš„
K å¯¹æ•°å­—</a></h3>
<p>ä½¿ç”¨æœ€å°å †å­˜å‚¨ä¸¤ä¸ªæ•°ç»„çš„ä¸‹æ ‡ï¼Œä½¿å¾—å¯¹åº”ä¸‹æ ‡å€¼çš„å’ŒæŒ‰ç…§å‡åºæ’åºã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> List&lt;List&lt;Integer&gt;&gt; <span class="title function_">kSmallestPairs</span><span class="params">(<span class="type">int</span>[] nums1, <span class="type">int</span>[] nums2, <span class="type">int</span> k)</span> &#123;</span><br><span class="line">    PriorityQueue&lt;<span class="type">int</span>[]&gt; heap = <span class="keyword">new</span> <span class="title class_">PriorityQueue</span>&lt;&gt;((a, b) -&gt; nums1[a[<span class="number">0</span>]] + nums2[a[<span class="number">1</span>]] - nums1[b[<span class="number">0</span>]] - nums2[b[<span class="number">1</span>]]);</span><br><span class="line">    <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> nums1.length, m = nums2.length;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; Math.min(n, k); ++i) &#123;</span><br><span class="line">        heap.offer(<span class="keyword">new</span> <span class="title class_">int</span>[]&#123;i, <span class="number">0</span>&#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    List&lt;List&lt;Integer&gt;&gt; res = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">while</span> (k-- &gt; <span class="number">0</span> &amp;&amp; !heap.isEmpty()) &#123;</span><br><span class="line">        <span class="type">int</span>[] idPairs = heap.poll();</span><br><span class="line">        res.add(Arrays.asList(nums1[idPairs[<span class="number">0</span>]], nums2[idPairs[<span class="number">1</span>]]));</span><br><span class="line">        <span class="keyword">if</span>(idPairs[<span class="number">1</span>] + <span class="number">1</span> &lt; m)&#123;</span><br><span class="line">            heap.offer(<span class="keyword">new</span> <span class="title class_">int</span>[]&#123;idPairs[<span class="number">0</span>], idPairs[<span class="number">1</span>] + <span class="number">1</span>&#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æ•°æ®æµçš„ä¸­ä½æ•°">19.4 æ•°æ®æµçš„ä¸­ä½æ•°</h3>
<h2 id="ä½è¿ç®—">20. ä½è¿ç®—</h2>
<h3 id="äºŒè¿›åˆ¶æ±‚å’Œ">20.1 <a
href="https://leetcode.cn/problems/add-binary/description/?envType=study-plan-v2&amp;envId=top-interview-150">äºŒè¿›åˆ¶æ±‚å’Œ</a></h3>
<p>å…¶å®å°±æ˜¯é«˜ç²¾åº¦çš„æ¨¡æ‹Ÿé¢˜ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> String <span class="title function_">addBinary</span><span class="params">(String a, String b)</span> &#123;</span><br><span class="line">    <span class="type">StringBuilder</span> <span class="variable">res</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">    <span class="type">int</span> <span class="variable">aLen</span> <span class="operator">=</span> a.length(), bLen = b.length(), carry = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> aLen - <span class="number">1</span>, j = bLen - <span class="number">1</span>; i &gt;= <span class="number">0</span> || j &gt;= <span class="number">0</span>; --i, --j) &#123;</span><br><span class="line">        carry += i &gt;= <span class="number">0</span> ? a.charAt(i) - <span class="string">&#x27;0&#x27;</span> : <span class="number">0</span>;</span><br><span class="line">        carry += j &gt;= <span class="number">0</span> ? b.charAt(j) - <span class="string">&#x27;0&#x27;</span> : <span class="number">0</span>;</span><br><span class="line">        res.append(carry % <span class="number">2</span>);</span><br><span class="line">        carry /= <span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    res.append(carry &gt; <span class="number">0</span> ? carry : <span class="string">&quot;&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> res.reverse().toString();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="é¢ å€’äºŒè¿›åˆ¶æ•°">20.2 <a
href="https://leetcode.cn/problems/reverse-bits/description/?envType=study-plan-v2&amp;envId=top-interview-150">é¢ å€’äºŒè¿›åˆ¶æ•°</a></h3>
<p>å°† n è§†ä½œä¸€ä¸ªé•¿ä¸º 32 çš„äºŒè¿›åˆ¶ä¸²ï¼Œä»ä½ä½å¾€é«˜ä½æšä¸¾ n
çš„æ¯ä¸€ä½ï¼Œå°†å…¶å€’åºæ·»åŠ åˆ°ç¿»è½¬ç»“æœ res ä¸­ã€‚</p>
<p>ä»£ç å®ç°ä¸­ï¼Œæ¯æšä¸¾ä¸€ä½å°±å°† n å³ç§»ä¸€ä½ï¼Œè¿™æ ·å½“å‰ n
çš„æœ€ä½ä½å°±æ˜¯æˆ‘ä»¬è¦æšä¸¾çš„æ¯”ç‰¹ä½ã€‚å½“ n ä¸º 0 æ—¶å³å¯ç»“æŸå¾ªç¯ã€‚</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨æŸäº›è¯­è¨€ï¼ˆå¦‚ Javaï¼‰ä¸­ï¼Œæ²¡æœ‰æ— ç¬¦å·æ•´æ•°ç±»å‹ï¼Œå› æ­¤å¯¹ n
çš„å³ç§»æ“ä½œåº”ä½¿ç”¨é€»è¾‘å³ç§»ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">reverseBits</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">32</span> &amp;&amp; n != <span class="number">0</span>; ++i) &#123;</span><br><span class="line">        res |= (n &amp; <span class="number">1</span>) &lt;&lt; (<span class="number">31</span> - i);</span><br><span class="line">        n &gt;&gt;&gt;= <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ä½-1-çš„ä¸ªæ•°">20.3 <a
href="https://leetcode.cn/problems/number-of-1-bits/description/?envType=study-plan-v2&amp;envId=top-interview-150">ä½
1 çš„ä¸ªæ•°</a></h3>
<p>æ¯æ¬¡å°†æ•°å³ç§»ä¸€ä½ï¼Œç„¶åè·Ÿ 1 åš &amp; è¿ç®—ï¼Œå¦‚æœå­˜åœ¨ 1ï¼Œåˆ™è®¡å…¥æ¬¡æ•°</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">hammingWeight</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">cnt</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (n &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> ((n &amp; <span class="number">1</span>) == <span class="number">1</span>) cnt++;</span><br><span class="line">        n &gt;&gt;= <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> cnt;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="åªå‡ºç°ä¸€æ¬¡çš„æ•°å­—">20.4 <a
href="https://leetcode.cn/problems/single-number/submissions/587464649/?envType=study-plan-v2&amp;envId=top-interview-150">åªå‡ºç°ä¸€æ¬¡çš„æ•°å­—</a></h3>
<p>â€”â€”å¼‚æˆ–è¿ç®—ã€‚ <img
src="https://ych-blog.oss-cn-guangzhou.aliyuncs.com/20241217214718.png" /></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">singleNumber</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> num : nums) &#123;</span><br><span class="line">        res ^= num;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="åªå‡ºç°ä¸€æ¬¡çš„æ•°å­—-â…±">20.5 <a
href="https://leetcode.cn/problems/single-number-ii/description/?envType=study-plan-v2&amp;envId=top-interview-150">åªå‡ºç°ä¸€æ¬¡çš„æ•°å­—
â…¡</a></h3>
<p>æ¨¡æ‹Ÿä¸€ä¸‹ä»£ç é€»è¾‘ <img
src="https://ych-blog.oss-cn-guangzhou.aliyuncs.com/20241217214740.png" />
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">singleNumber</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">0</span>, b = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> num : nums) &#123;</span><br><span class="line">        a = (a ^ num) &amp; ~b;</span><br><span class="line">        b = (b ^ num) &amp; ~a;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> a;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="æ•°å­—èŒƒå›´æŒ‰ä½ä¸">20.6 <a
href="https://leetcode.cn/problems/bitwise-and-of-numbers-range/description/?envType=study-plan-v2&amp;envId=top-interview-150">æ•°å­—èŒƒå›´æŒ‰ä½ä¸</a></h3>
<p>ç”»ä¸ªå›¾å°±æ˜ç™½äº†ï¼Œå…¶å®å¾ˆç®€å•ã€‚æƒ³ä¸€ä¸‹ï¼Œä¸ºä»€ä¹ˆä¼šé™¤äº†å…¬å…±å‰ç¼€ä¹‹å¤–ï¼Œå…¶ä»–éƒ¨åˆ†ç›¸ä¸éƒ½ä¸º
0ã€‚æ— è®ºå¤šå°‘ä¸ªæ•°ç›¸ä¸ï¼Œåªè¦å…¶ä¸­æœ‰ä¸€ä¸ªæ•°ä¸º 0ï¼Œæ˜¯ä¸æ˜¯æ‰€æœ‰æ•°å­—ç›¸ä¸éƒ½ä¼šä¸º
0ã€‚é‚£å¯¹äºç»™å®šèŒƒå›´çš„å·¦å³ä¸¤ä¸ªæ•°ï¼Œé™¤äº†å…¬å…±å‰ç¼€éƒ¨åˆ†ï¼ŒååŠéƒ¨åˆ†æ˜¯ä¸æ˜¯ç”¨æ¥åŒºåˆ†å®ƒä»¬ä¹‹é—´çš„ä¸åŒï¼Œå¹¶ä¸”å®ƒä»¬ä¹‹å‰å­˜åœ¨çš„æ˜¯è¿ç»­çš„ä¸åŒï¼Œè¯´æ˜ä»€ä¹ˆï¼Œè¯´æ˜ä¸æ˜¯å…¬å…±å‰ç¼€çš„éƒ¨åˆ†ï¼Œä¸€å®šæ¯ä¸€ä¸ªä½ç½®ä¸Šé¢éƒ½å­˜åœ¨ä¸€ä¸ª
0ï¼Œæ‰€ä»¥ç›¸ä¸ä¸€å®šä¸º 0 . <img
src="https://ych-blog.oss-cn-guangzhou.aliyuncs.com/20241217214801.png" />
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">rangeBitwiseAnd</span><span class="params">(<span class="type">int</span> left, <span class="type">int</span> right)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">offset</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (left != right) &#123;</span><br><span class="line">        left &gt;&gt;= <span class="number">1</span>;</span><br><span class="line">        right &gt;&gt;= <span class="number">1</span>;</span><br><span class="line">        offset++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> left &lt;&lt; offset;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="æ•°å­¦">21. æ•°å­¦</h2>
<h3 id="å›æ–‡æ•°">21.1 <a
href="https://leetcode.cn/problems/palindrome-number/description/?envType=study-plan-v2&amp;envId=top-interview-150">å›æ–‡æ•°</a></h3>
<p>ç®€å•é¢˜ï¼Œç®€å•åšã€‚æ¯æ¬¡å–å‡ºç»™å®šæ•°å­—çš„æœ€åä¸€ä½ï¼Œä½œä¸ºæ–°çš„æ•°æ–°å¢çš„ä¸€ä½ï¼Œæœ€ååˆ¤æ–­æ–°æ„é€ çš„æ•°å’ŒåŸæ¥çš„æ•°ä¸€ä¸ä¸€æ ·å°±å¯ä»¥ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isPalindrome</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(x &lt; <span class="number">0</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> <span class="number">0</span>, tmp = x;</span><br><span class="line">    <span class="keyword">while</span> (tmp &gt; <span class="number">0</span>)&#123;</span><br><span class="line">        num = num * <span class="number">10</span> + tmp % <span class="number">10</span>;</span><br><span class="line">        tmp /= <span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> num == x;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="åŠ ä¸€">21.2 <a
href="https://leetcode.cn/problems/plus-one/description/?envType=study-plan-v2&amp;envId=top-interview-150">åŠ ä¸€</a></h3>
<p>â€”â€”é«˜ç²¾åº¦åŠ æ³•æ¨¡æ‹Ÿé¢˜</p>
<p>ä¸æƒ³å›å¿†ï¼Œä¿ç ”é¢è¯•é‚£ä¼šåšäº†åŠä¸ªå¤šå°æ—¶ï¼ŒåŸºç¡€æ˜¯å¤ªå·®äº†ã€‚ç°åœ¨ 3
åˆ†é’Ÿå°±åšå‡ºæ¥äº†ã€‚ä¸æƒ³å›å¿†ä¿ç ”çš„æ—¥å­~</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span>[] plusOne(<span class="type">int</span>[] digits) &#123;</span><br><span class="line">    List&lt;Integer&gt; res = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    <span class="type">int</span> <span class="variable">carry</span> <span class="operator">=</span> <span class="number">1</span>, n = digits.length;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> n - <span class="number">1</span>; i &gt;= <span class="number">0</span>; --i) &#123;</span><br><span class="line">        carry += digits[i];</span><br><span class="line">        res.add(carry % <span class="number">10</span>);</span><br><span class="line">        carry /= <span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (carry &gt; <span class="number">0</span>) res.add(carry);</span><br><span class="line">    <span class="type">int</span>[] ans = <span class="keyword">new</span> <span class="title class_">int</span>[res.size()];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> res.size() - <span class="number">1</span>; i &gt;= <span class="number">0</span>; --i) ans[res.size() - i - <span class="number">1</span>] = res.get(i);</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="é˜¶ä¹˜åçš„é›¶">21.3 <a
href="https://leetcode.cn/problems/factorial-trailing-zeroes/description/?envType=study-plan-v2&amp;envId=top-interview-150">é˜¶ä¹˜åçš„é›¶</a></h3>
<p>å› ä¸º 2x5 = 10ï¼Œæ‰€ä»¥ï¼Œè¦æœ‰ 0ï¼Œå› å­ä¸­å°±å¿…é¡»è¦æœ‰ 2 å’Œ 5ã€‚å¹¶ä¸”å› å­ä¸­çš„ 2
ä¸€å®šä¼šæ¯” 5 å¤šã€‚æœŸé—´éœ€è¦å¾ˆå¤šæ•°å­¦è¯æ˜ï¼Œè¿™é‡Œæœ‰å…´è¶£çš„è¯çœ‹<a
href="https://leetcode.cn/problems/factorial-trailing-zeroes/solutions/1360892/jie-cheng-hou-de-ling-by-leetcode-soluti-1egk/?envType=study-plan-v2&amp;envId=top-interview-150">é¢˜è§£</a>å§ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">trailingZeroes</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (n &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        n /= <span class="number">5</span>;</span><br><span class="line">        res += n;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="x-çš„å¹³æ–¹æ ¹">21.4 <a
href="https://leetcode.cn/problems/sqrtx/?envType=study-plan-v2&amp;envId=top-interview-150">x
çš„å¹³æ–¹æ ¹</a></h3>
<p>â€”â€”äºŒåˆ†æŸ¥æ‰¾</p>
<p>è¦æ‰¾åˆ°ä¸€ä¸ªæ•´æ•°çš„å¹³æ–¹æ ¹ï¼Œé‚£ä¹ˆé€€å‡ºäºŒåˆ†æŸ¥æ‰¾çš„æ¡ä»¶åˆ™å¯ä»¥å®šä¸ºå·¦å³è¾¹ç•Œç›¸å·®ä¸èƒ½å¤§äº
1ï¼Œè¿™æ ·å°±èƒ½æŠŠå·¦å³è¾¹ç•Œå‹ç¼©åˆ°å¹³æ–¹æ ¹çš„ä½ç½®ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">mySqrt</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (x == <span class="number">0</span> || x == <span class="number">1</span>) <span class="keyword">return</span> x;</span><br><span class="line">    <span class="type">int</span> <span class="variable">l</span> <span class="operator">=</span> <span class="number">0</span>, r = x;</span><br><span class="line">    <span class="keyword">while</span> (r - l &gt; <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">mid</span> <span class="operator">=</span> l + r &gt;&gt; <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span> (x / mid == mid) <span class="keyword">return</span> mid;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (x / mid &lt; mid) r = mid;</span><br><span class="line">        <span class="keyword">else</span> l = mid;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> l;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="powxn">21.5 <a
href="https://leetcode.cn/problems/powx-n/description/?envType=study-plan-v2&amp;envId=top-interview-150">Pow(x,n)</a></h3>
<p>â€”â€”å¿«é€Ÿå¹‚</p>
<p>å¿«é€Ÿå¹‚çš„æ¨¡æ¿é¢˜ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå½“ n&lt;0 æ—¶ï¼Œåº”è¯¥ç”¨é™¤æ³•ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">double</span> <span class="title function_">myPow</span><span class="params">(<span class="type">double</span> x, <span class="type">int</span> n)</span> &#123;</span><br><span class="line">    <span class="type">long</span> <span class="variable">t</span> <span class="operator">=</span> (<span class="type">long</span>) n;</span><br><span class="line">    <span class="type">double</span> <span class="variable">res</span> <span class="operator">=</span> <span class="number">1.0</span>;</span><br><span class="line">    <span class="type">boolean</span> <span class="variable">flag</span> <span class="operator">=</span> t &gt; <span class="number">0</span>;</span><br><span class="line">    t = t &gt; <span class="number">0</span> ? t : -t;</span><br><span class="line">    <span class="keyword">while</span> (t &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> ((t &amp; <span class="number">1</span>) == <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (flag) res *= x;</span><br><span class="line">            <span class="keyword">else</span> res /= x;</span><br><span class="line">        &#125;</span><br><span class="line">        x *= x;</span><br><span class="line">        t &gt;&gt;= <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ç›´çº¿ä¸Šæœ€å¤šçš„ç‚¹æ•°">21.6 <a
href="https://leetcode.cn/problems/max-points-on-a-line/description/?envType=study-plan-v2&amp;envId=top-interview-150">ç›´çº¿ä¸Šæœ€å¤šçš„ç‚¹æ•°</a></h3>
<p>ä½¿ç”¨ Map
è®°å½•ç›´çº¿æ–œç‡ï¼Œä½†æ˜¯ç›´çº¿æ–œç‡ç®—å‡ºæ¥æ˜¯æµ®ç‚¹æ•°ï¼Œæ‰€ä»¥æŠŠç›´çº¿æ–œç‡çš„åˆ†å­å’Œåˆ†æ¯ä½¿ç”¨ä¸‹åˆ’çº¿æ‹¼æ¥æˆå­—ç¬¦ä¸²ï¼Œç„¶åä½œä¸ºé”®è¿›è¡Œå­˜å‚¨ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxPoints</span><span class="params">(<span class="type">int</span>[][] points)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> points.length, res = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        Map&lt;String, Integer&gt; record = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        <span class="type">int</span> <span class="variable">max</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> i + <span class="number">1</span>; j &lt; n; ++j) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">x1</span> <span class="operator">=</span> points[i][<span class="number">0</span>], y1 = points[i][<span class="number">1</span>], x2 = points[j][<span class="number">0</span>], y2 = points[j][<span class="number">1</span>];</span><br><span class="line">            <span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> x1 - x2, b = y1 - y2;</span><br><span class="line">            <span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> gcd(a, b);</span><br><span class="line">            <span class="type">String</span> <span class="variable">key</span> <span class="operator">=</span> (a / k) + <span class="string">&quot;_&quot;</span> + (b / k);</span><br><span class="line">            record.put(key, record.getOrDefault(key, <span class="number">0</span>) + <span class="number">1</span>);</span><br><span class="line">            max = Math.max(max, record.get(key));</span><br><span class="line">        &#125;</span><br><span class="line">        res = Math.max(res, max + <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="type">int</span> <span class="title function_">gcd</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (b == <span class="number">0</span>) <span class="keyword">return</span> a;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">return</span> gcd(b, a % b);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="åŠ¨æ€è§„åˆ’">22.åŠ¨æ€è§„åˆ’</h2>
<p>åŠ¨æ€è§„åˆ’äº”éƒ¨æ›²</p>
<ol type="1">
<li>ç¡®å®š dp æ•°ç»„ (dp table) ä»¥åŠä¸‹æ ‡çš„å«ä¹‰</li>
<li>ç¡®å®šé€’æ¨å…¬å¼</li>
<li>dp æ•°ç»„å¦‚ä½•åˆå§‹åŒ–</li>
<li>ç¡®å®šéå†é¡ºåº</li>
<li>ä¸¾ä¾‹æ¨å¯¼ dp æ•°ç»„</li>
</ol>
<h3 id="çˆ¬æ¥¼æ¢¯">22.1 <a
href="https://leetcode.cn/problems/climbing-stairs/description/?envType=study-plan-v2&amp;envId=top-interview-150">çˆ¬æ¥¼æ¢¯</a></h3>
<p>æ–æ³¢é‚£å¥‘æ•°æ¨¡æ¿é¢˜ç›®ã€‚ a[i] = a[i-1] + a[i-2]</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">climbStairs</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (n &lt;= <span class="number">2</span>) <span class="keyword">return</span> n;</span><br><span class="line">    <span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">1</span>, b = <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">3</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">tmp</span> <span class="operator">=</span> b;</span><br><span class="line">        b = a + b;</span><br><span class="line">        a = tmp;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æ‰“å®¶åŠ«èˆ">22.2 <a
href="https://leetcode.cn/problems/house-robber/description/?envType=study-plan-v2&amp;envId=top-interview-150">æ‰“å®¶åŠ«èˆ</a></h3>
<ol type="1">
<li>ç¡®å®š dp æ•°ç»„ (dp table) ä»¥åŠä¸‹æ ‡çš„å«ä¹‰ <br> dp
æ•°ç»„è¡¨ç¤ºèƒ½å·çªƒåˆ°å½“å‰æˆ¿å±‹çš„æœ€é«˜é‡‘é¢ã€‚å…¶ä¸­ dp[i]çš„ä¸‹æ ‡ i è¡¨ç¤ºçš„æ˜¯ç¬¬ i+1
é—´æˆ¿å±‹</li>
<li>ç¡®å®šé€’æ¨å…¬å¼ <br> æ€ä¹ˆæ¨å¯¼é€’æ¨å…¬å¼å‘¢ï¼Ÿ å¯¹äºå½“å‰ä½ç½® i
æ¥è®²ï¼Œè¦ä¹ˆå°±æ˜¯å‰ä¸€ä¸ªç›¸é‚»ä½ç½® i-1 å–å¾—çš„æ”¶ç›Šé«˜ï¼Œæˆ‘ä»¬æ­¤æ—¶å°±éœ€è¦ä»¥ i-1
ä½œä¸ºèµ·ç‚¹ï¼›è¦ä¹ˆå°±æ˜¯å†å‰é¢çš„ä¸€ä¸ªä½ç½® i - 2 å–å¾—çš„æ”¶ç›Š +
å½“å‰æˆ¿å±‹èƒ½å–å¾—çš„æ”¶ç›Š
çš„æ€»å’Œæ”¶ç›Šé«˜ã€‚æ‰€ä»¥å¯¹äºå½“å‰ä½ç½®ï¼Œæˆ‘ä»¬çš„é€’æ¨å…¬å¼å°±æ˜¯</li>
</ol>
<p><span class="math display">\[
\begin{equation}
max=\left\{
\begin{aligned}
nums[i] + dp[i-2] \\
dp[i-1]
\end{aligned}
\right.
\end{equation}
\]</span></p>
<ol type="1">
<li>dp æ•°ç»„å¦‚ä½•åˆå§‹åŒ– <br>
æ ¹æ®é€’æ¨å…¬å¼æˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼Œæˆ‘ä»¬éœ€è¦åˆå§‹åŒ–çš„å€¼åªæœ‰ä¸¤ä¸ªï¼Œdp[0],
dp[1]ï¼Œdp[0]æ˜¯ä»€ä¹ˆï¼Œæ˜¯æ‰“åŠ«ç¬¬ä¸€é—´æˆ¿å±‹å–å¾—çš„æ”¶ç›Šï¼Œæ²¡å¾—é€‰ï¼Œåªæœ‰ç¬¬ä¸€å®¶èƒ½é€‰ã€‚dp[1]æ˜¯ä»€ä¹ˆï¼Œdp[1]æ˜¯æ‰“åŠ«å®Œç¬¬ä¸€å’Œç¬¬äºŒé—´æˆ¿å±‹åï¼Œæ‰€å–å¾—çš„æœ€å¤§æ”¶ç›Šï¼Œé‚£æ˜¯ä»€ä¹ˆï¼Œè‚¯å®šæ˜¯ç¬¬ä¸€é—´å’Œç¬¬äºŒé—´æˆ¿å±‹å–å¾—æ›´å¤§æ”¶ç›Šé‚£ä¸ªï¼Œæ‰€ä»¥æˆ‘ä»¬çš„åˆå§‹åŒ–å°±å‡ºæ¥äº†
dp[0] = nums[0]; dp[1] = Math.max(nums[0],nums[1]);</li>
<li>ç¡®å®šéå†é¡ºåº <br></li>
</ol>
<p>ä¸€ç»´æ•°ç»„ï¼ŒåŸºæœ¬éƒ½æ˜¯ä»å°åˆ°å¤§ï¼Œåªæœ‰è®¾è®¡èƒŒåŒ…é—®é¢˜ï¼Œä¸¤ä¸ªæ¡ä»¶æ‰éœ€è¦è€ƒè™‘éå†é¡ºåº</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">rob</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> nums.length;</span><br><span class="line">    <span class="keyword">if</span> (n == <span class="number">1</span>) <span class="keyword">return</span> nums[<span class="number">0</span>];</span><br><span class="line">    <span class="type">int</span>[] dp = <span class="keyword">new</span> <span class="title class_">int</span>[n];</span><br><span class="line">    dp[<span class="number">0</span>] = nums[<span class="number">0</span>];</span><br><span class="line">    dp[<span class="number">1</span>] = Math._max_(nums[<span class="number">0</span>], nums[<span class="number">1</span>]);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">2</span>; i &lt; nums.length; ++i) &#123;</span><br><span class="line">        dp[i] = Math._max_(dp[i - <span class="number">2</span>] + nums[i], dp[i - <span class="number">1</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[n - <span class="number">1</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="å•è¯æ‹†åˆ†">22.3 <a
href="https://leetcode.cn/problems/word-break?envType=study-plan-v2&amp;envId=top-interview-150">å•è¯æ‹†åˆ†</a></h3>
<p>â€”â€”åŠ¨æ€è§„åˆ’</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">wordBreak</span><span class="params">(String s, List&lt;String&gt; wordDict)</span> &#123;</span><br><span class="line">        Set&lt;String&gt; wordSet = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;&gt;(wordDict);</span><br><span class="line">        <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> s.length();</span><br><span class="line">        <span class="type">boolean</span>[] dp = <span class="keyword">new</span> <span class="title class_">boolean</span>[n + <span class="number">1</span>];</span><br><span class="line">        dp[<span class="number">0</span>] = <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= s.length(); ++i) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; i; ++j) &#123;</span><br><span class="line">                <span class="keyword">if</span> (dp[j] &amp;&amp; wordSet.contains(s.substring(j, i))) &#123;</span><br><span class="line">                    dp[i] = <span class="literal">true</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> dp[n];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>â€”â€”å‰ç¼€æ ‘</p>
<p>è¢«æ ·ä¾‹æ•´ç ´é˜²äº†ï¼Œå‰ç¼€æ ‘å‹æ ¹è¿‡ä¸äº†ï¼Œè¿™é‡Œå†™ä¸€ä¸ªæ²¡æœ‰å®Œå…¨é€šè¿‡çš„ç‰ˆæœ¬ï¼Œé¢˜è§£ç«Ÿç„¶å«å»å†™å‰ç¼€æ ‘ã€‚çœ‹æ¥è¿˜æ˜¯æˆ‘å­¦ä¸å¤Ÿã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Trie</span>&#123;</span><br><span class="line">        <span class="keyword">private</span> Node root;</span><br><span class="line">        Trie()&#123;</span><br><span class="line">            root = <span class="keyword">new</span> <span class="title class_">Node</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insertWord</span><span class="params">(String word)</span>&#123;</span><br><span class="line">            <span class="type">Node</span> <span class="variable">cur</span> <span class="operator">=</span> root;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">char</span> ch : word.toCharArray()) &#123;</span><br><span class="line">                <span class="keyword">if</span>(cur.subNodes.containsKey(ch))&#123;</span><br><span class="line">                    cur = cur.subNodes.get(ch);</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    cur.subNodes.put(ch,<span class="keyword">new</span> <span class="title class_">Node</span>());</span><br><span class="line">                    cur = cur.subNodes.get(ch);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            cur.isEnd = <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">class</span> <span class="title class_">Node</span>&#123;</span><br><span class="line">            <span class="type">boolean</span> isEnd;</span><br><span class="line">            Map&lt;Character,Node&gt; subNodes = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">wordBreak</span><span class="params">(String s, List&lt;String&gt; wordDict)</span> &#123;</span><br><span class="line">        Set&lt;String&gt; wordSet = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;&gt;(wordDict);</span><br><span class="line">        <span class="type">Trie</span> <span class="variable">root</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Trie</span>();</span><br><span class="line">        <span class="keyword">for</span> (String word : wordSet) &#123;</span><br><span class="line">            root.insertWord(word);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> <span class="variable">idx</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        Trie.<span class="type">Node</span> <span class="variable">tmp</span> <span class="operator">=</span> root.root;</span><br><span class="line">        <span class="keyword">while</span> (idx &lt; s.length())&#123;</span><br><span class="line">            <span class="keyword">if</span>(tmp.subNodes.containsKey(s.charAt(idx)))&#123;</span><br><span class="line">                tmp = tmp.subNodes.get(s.charAt(idx));</span><br><span class="line">                ++idx;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="keyword">if</span>(tmp.isEnd) tmp = root.root;</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> tmp.isEnd;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="é›¶é’±å…‘æ¢">22.4 <a
href="https://leetcode.cn/problems/coin-change/?envType=study-plan-v2&amp;envId=top-interview-150">é›¶é’±å…‘æ¢</a></h3>
<ol type="1">
<li>ç¡®å®š dp æ•°ç»„ (dp table) ä»¥åŠä¸‹æ ‡çš„å«ä¹‰<br> dp[i]è¡¨ç¤ºçš„æ˜¯ï¼šå½“æ€»é‡‘é¢ä¸º
i æ—¶ï¼Œæ‰€éœ€çš„æœ€å°‘çš„ç¡¬å¸æ•°ã€‚</li>
<li>ç¡®å®šé€’æ¨å…¬å¼<br> dp[i] = Math._min_(dp[i], dp[i - coins[j]] + 1)
å¯¹äºæ€»é‡‘é¢ä¸º i çš„æƒ…å†µï¼Œæˆ‘ä»¬éœ€è¦è€ƒè™‘ç¬¬ j ä¸ªç¡¬å¸åˆ°åº•å–ä¸å–ã€‚å–çš„è¯ï¼Œåº”è¯¥ç”±
i-coins[j] çš„æœ€å°‘ç¡¬å¸æ•° + 1 æ¥èµ‹å€¼ï¼›ä¸å–çš„è¯ï¼Œå°±åªèƒ½èµ‹å›åŸæ¥çš„å€¼ã€‚</li>
<li>dp æ•°ç»„å¦‚ä½•åˆå§‹åŒ–<br> dp[0] = 0 å½“æ€»é‡‘é¢ä¸º 0
æ—¶ï¼Œæˆ‘ä»¬éœ€è¦çš„ç¡¬å¸æ•°ä¹Ÿä¸º 0 .</li>
<li>ç¡®å®šéå†é¡ºåº<br>
å…¶å®ï¼Œè¿™é“é¢˜ç›®å¾ˆåƒå¤šé‡èƒŒåŒ…ï¼Œä½†åˆå­˜åœ¨å¾ˆå¤šä¸åŒã€‚é¦–å…ˆä¸€ä¸ªæ˜¯è¿™é“é¢˜ç›®æƒ³è¦æ±‚è§£çš„æ˜¯è®¡æ•°é—®é¢˜ï¼Œå¹¶ä¸æ˜¯æœ€å¤§åŒ–ä»·å€¼é—®é¢˜ï¼›å…¶æ¬¡æ˜¯è¿™é“é¢˜ç›®çš„éå†é¡ºåºè·Ÿå¤šé‡èƒŒåŒ…çš„éå†é¡ºåºä¸å¤ªä¸€æ ·ï¼Œå¤šé‡èƒŒåŒ…æ˜¯å…ˆéå†ç‰©å“ï¼Œå†éå†èƒŒåŒ…ã€‚è¿™é“é¢˜ç›®æ˜¯å…ˆéå†çš„èƒŒåŒ…ï¼Œå†éå†ç‰©å“ã€‚å› ä¸ºå¯¹äºæ¯ä¸€ä¸ªæ€»é‡‘é¢ï¼Œæˆ‘ä»¬éƒ½éœ€è¦è€ƒè™‘æ‰€æœ‰çš„ç¡¬å¸æ‰€ç»„æˆçš„æ­é…ã€‚å¹¶ä¼˜åŒ–å™¨</li>
<li>ä¸¾ä¾‹æ¨å¯¼ dp æ•°ç»„<br></li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">coinChange</span><span class="params">(<span class="type">int</span>[] coins, <span class="type">int</span> amount)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">max</span> <span class="operator">=</span> amount + <span class="number">1</span>;</span><br><span class="line">    <span class="type">int</span>[] dp = <span class="keyword">new</span> <span class="title class_">int</span>[max];</span><br><span class="line">    Arrays._fill_(dp, max);</span><br><span class="line">    dp[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= amount; ++i) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; coins.length; ++j) &#123;</span><br><span class="line">            <span class="keyword">if</span> (i &gt;= coins[j]) &#123;</span><br><span class="line">                dp[i] = Math._min_(dp[i], dp[i - coins[j]] + <span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[amount] &gt; amount ? -<span class="number">1</span> : dp[amount];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æœ€é•¿é€’å¢å­åºåˆ—">22.5 <a
href="https://leetcode.cn/problems/longest-increasing-subsequence/description/?envType=study-plan-v2&amp;envId=top-interview-150">æœ€é•¿é€’å¢å­åºåˆ—</a></h3>
<p>â€”â€”åŠ¨æ€è§„åˆ’ + äºŒåˆ†æŸ¥æ‰¾</p>
<p>è¿˜æ˜¯ç”»ä¸ªå›¾æ¨¡æ‹Ÿä¸€ä¸‹ä»£ç çš„æ•´ä¸ªæµç¨‹æ›´å¥½ç†è§£ä¸€ç‚¹ã€‚å¦‚ä¸‹å›¾ï¼ŒäºŒåˆ†æŸ¥æ‰¾æ’å…¥çš„ç›®çš„æ˜¯ä»€ä¹ˆï¼Ÿå…¶å®ç›®çš„å°±æ˜¯ä¸ºäº†è®©æˆ‘ä»¬çš„
dp
æ•°ç»„æ›´å¥½æ’å…¥åé¢çš„æ•°ã€‚äºŒåˆ†æŸ¥æ‰¾ä¸ºæ–°åˆ°æ¥çš„æ•°åœ¨æ–°æ•°ç»„ä¸­æ‰¾åˆ°ä¸€ä¸ªæœ€åˆé€‚çš„æ’å…¥ä½ç½®ï¼Œä½¿å¾—æ–°æ•°ç»„ä¸­çš„æ•°ä¿æŒé€’å¢å¹¶å°½é‡å°ã€‚
<img
src="https://ych-blog.oss-cn-guangzhou.aliyuncs.com/20241221111852.png" />
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">lengthOfLIS</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> <span class="number">1</span>, n = nums.length;</span><br><span class="line">    <span class="keyword">if</span> (n == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span>[] dp = <span class="keyword">new</span> <span class="title class_">int</span>[n + <span class="number">1</span>];</span><br><span class="line">    dp[len] = nums[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span> (nums[i] &gt; dp[len]) dp[++len] = nums[i];</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">l</span> <span class="operator">=</span> <span class="number">1</span>, r = len, pos = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">while</span> (l &lt;= r) &#123;</span><br><span class="line">                <span class="type">int</span> <span class="variable">mid</span> <span class="operator">=</span> l + r &gt;&gt; <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">if</span> (dp[mid] &lt; nums[i]) &#123;</span><br><span class="line">                    pos = mid;</span><br><span class="line">                    l = mid + <span class="number">1</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    r = mid - <span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            dp[pos + <span class="number">1</span>] = nums[i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> len;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="å¤šç»´åŠ¨æ€è§„åˆ’">23. å¤šç»´åŠ¨æ€è§„åˆ’</h2>
<h3 id="ä¸‰è§’å½¢æœ€å°è·¯å¾„å’Œ">23.1 <a
href="https://leetcode.cn/problems/triangle/?envType=study-plan-v2&amp;envId=top-interview-150">ä¸‰è§’å½¢æœ€å°è·¯å¾„å’Œ</a></h3>
<p><img
src="https://ych-blog.oss-cn-guangzhou.aliyuncs.com/20241221111914.png" />
ä»æœ€ä¸‹é¢å¾€ä¸Šé¢èµ°ï¼Œç¬¬ i å±‚ ç¬¬ j ä¸ªæ•°çš„æœ€ç»ˆç»“æœæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p>
<p><span class="math display">\[
dp[i][j] = min(dp[i+1][j],dp[i+1][j+1]) + triangle[i][j];
\]</span></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">minimumTotal</span><span class="params">(List&lt;List&lt;Integer&gt;&gt; triangle)</span> &#123;</span><br><span class="line">    <span class="comment">// ç”±åº•éƒ¨åˆ°é¡¶éƒ¨</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> triangle.size();</span><br><span class="line">    <span class="type">int</span>[] dp = <span class="keyword">new</span> <span class="title class_">int</span>[n];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; ++i) dp[i] = triangle.get(n - <span class="number">1</span>).get(i);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> n - <span class="number">2</span>; i &gt;= <span class="number">0</span>; --i)</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt;= i; ++j)</span><br><span class="line">            dp[j] = Math._min_(dp[j], dp[j + <span class="number">1</span>]) + triangle.get(i).get(j);</span><br><span class="line">    <span class="keyword">return</span> dp[<span class="number">0</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æœ€å°è·¯å¾„å’Œ">23.2 <a
href="https://leetcode.cn/problems/minimum-path-sum/?envType=study-plan-v2&amp;envId=top-interview-150">æœ€å°è·¯å¾„å’Œ</a></h3>
<p>å…ˆå¤„ç†è¾¹ç•Œæ ¼å­ï¼ˆä¸‹å›¾æ ‡ç»¿è‰²çš„æ ¼å­ï¼‰ï¼Œå¯¹äºéè¾¹ç•Œçš„æ ¼å­ï¼Œå¯ä»¥ç”±å·¦è¾¹å’Œä¸Šè¾¹æ¨å¯¼å¾—åˆ°ã€‚è¾¹ç¼˜åªèƒ½ä»å·¦è¾¹æˆ–è€…ä¸Šé¢æ¥ï¼Œæ‰€ä»¥æ²¡å¾—ä¼˜åŒ–ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯¹æœ€ä¸Šé¢çš„è¾¹å’Œæœ€å·¦é¢çš„è¾¹ï¼Œæˆ‘ä»¬ä½¿ç”¨å‰ç¼€å’Œç®—å‡ºåˆ°æ¯ä¸€ä¸ªæ ¼å­éœ€è¦çš„è·¯å¾„ã€‚å¯¹äºä¸æ˜¯æœ€å·¦è¾¹å’Œæœ€ä¸Šè¾¹çš„æ ¼å­ï¼Œæˆ‘ä»¬çš„é€’æ¨å…¬å¼ä¸ºï¼š</p>
<p><span class="math display">\[
dp[i][j] = Math.min(dp[i-1][j], dp[i][j-1])
\]</span> å…¶ä¸­ dp[i-1][j] è¡¨ç¤ºä»ä¸Šé¢æ¥ï¼Œdp[i][j-1]è¡¨ç¤ºä»å·¦è¾¹æ¥ <img
src="https://ych-blog.oss-cn-guangzhou.aliyuncs.com/20241221111936.png" />
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">minPathSum</span><span class="params">(<span class="type">int</span>[][] grid)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> grid.length, m = grid[<span class="number">0</span>].length;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; n; ++i) grid[i][<span class="number">0</span>] += grid[i - <span class="number">1</span>][<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">1</span>; j &lt; m; ++j) grid[<span class="number">0</span>][j] += grid[<span class="number">0</span>][j - <span class="number">1</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">1</span>; j &lt; m; ++j) &#123;</span><br><span class="line">            grid[i][j] = Math.min(grid[i - <span class="number">1</span>][j], grid[i][j - <span class="number">1</span>]) + grid[i][j];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> grid[n - <span class="number">1</span>][m - <span class="number">1</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="ä¸åŒè·¯å¾„-â…±">23.3 <a
href="https://leetcode.cn/problems/unique-paths-ii/description/?envType=study-plan-v2&amp;envId=top-interview-150">ä¸åŒè·¯å¾„
â…¡</a></h3>
<p>å…¶å®è·Ÿä¸Šä¸€é“é¢˜ç›®æ€è·¯å·®ä¸å¤šï¼Œéƒ½æ˜¯å…ˆå¤„ç†è¾¹ç•Œæ ¼å­ã€‚ä½†è¿˜æ˜¯å­˜åœ¨å·®åˆ«ï¼Œæœ¬é¢˜æˆ‘ä»¬æ˜¯è®¡ç®—åˆ°è¾¾æ ¼å­çš„è·¯çº¿æœ‰å‡ æ¡ï¼Œä¸æ˜¯æ±‚æœ€å°å€¼ï¼Œè€Œæ˜¯æ±‚å’Œã€‚å¦å¤–åœ¨å¤„ç†æ ¼å­æ—¶ï¼Œå¯¹äºè¾¹ç•Œçš„æ ¼å­ï¼Œéƒ½åªæœ‰ä»å·¦è¾¹æ¥æˆ–è€…ä»ä¸Šè¾¹æ¥ä¸€ç§è·¯çº¿ï¼Œæ‰€ä»¥æˆ‘ä»¬åˆå§‹åŒ–ä¸º
1ï¼Œä½†æ˜¯ï¼Œé‡åˆ°éšœç¢ç‰©åï¼Œåé¢çš„æ ¼å­éƒ½æ²¡æ³•åˆ°è¾¾ï¼Œæ‰€ä»¥ä¸º 0
ã€‚å¯¹äºéè¾¹ç•Œçš„æ ¼å­ï¼Œä¹ŸåŒæ ·éœ€è¦å¯¹å­˜åœ¨éšœç¢ç‰©è¿›è¡Œå¤„ç†ï¼Œå­˜åœ¨éšœç¢ç‰©ä¸æ›´æ–°ï¼Œä¸å­˜åœ¨éšœç¢ç‰©æ‰æ›´æ–°</p>
<p>é€’æ¨å…¬å¼</p>
<p><span class="math display">\[
dp[i][j] = dp[i-1][j] + dp[i][j-1]
\]</span></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">uniquePathsWithObstacles</span><span class="params">(<span class="type">int</span>[][] obstacleGrid)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> obstacleGrid.length, m = obstacleGrid[<span class="number">0</span>].length;</span><br><span class="line">    <span class="type">int</span>[][] dp = <span class="keyword">new</span> <span class="title class_">int</span>[n][m];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span> (obstacleGrid[i][<span class="number">0</span>] == <span class="number">1</span>) <span class="keyword">break</span>;</span><br><span class="line">        dp[i][<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; m; ++j) &#123;</span><br><span class="line">        <span class="keyword">if</span> (obstacleGrid[<span class="number">0</span>][j] == <span class="number">1</span>) <span class="keyword">break</span>;</span><br><span class="line">        dp[<span class="number">0</span>][j] = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">1</span>; j &lt; m; ++j) &#123;</span><br><span class="line">            <span class="keyword">if</span> (obstacleGrid[i][j] != <span class="number">1</span>) dp[i][j] = dp[i - <span class="number">1</span>][j] + dp[i][j - <span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[n - <span class="number">1</span>][m - <span class="number">1</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="äº¤é”™å­—ç¬¦ä¸²">23.4 <a
href="https://leetcode.cn/problems/interleaving-string/description/?envType=study-plan-v2&amp;envId=top-interview-150">äº¤é”™å­—ç¬¦ä¸²</a></h3>
<p>â€”â€”åŠ¨æ€è§„åˆ’</p>
<p>å…¶å®é¢˜ç›®è¯´äº†ä¸€å †äº¤é”™ç»„æˆçš„æ¦‚å¿µï¼ŒçœŸçš„éœ€è¦è€ƒè™‘æ˜¯å¦æ˜¯äº¤é”™ç»„åˆå—ï¼Ÿå…¶å®ä¸ç”¨ï¼Œè®¾æƒ³ä¸€ä¸‹ï¼Œå½“
s3 å·²ç»æœ‰å­—ç¬¦è·Ÿ s1 çš„å­—ç¬¦åŒ¹é…äº†ï¼Œä¸‹ä¸€ä¸ªå­—ç¬¦æ— è®ºæ˜¯ s1 çš„è¿˜æ˜¯ s2
çš„ï¼Œéƒ½èƒ½ä¿è¯äº¤é”™ç»„æˆã€‚æœ€æç«¯çš„æƒ…å†µä¾¿æ˜¯å‰åŠéƒ¨åˆ†ç”± s1 ç»„æˆï¼ŒååŠéƒ¨åˆ†ç”± s2
ç»„æˆï¼Œä½†è¿™ä¹Ÿæ˜¯äº¤é”™ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥å¤§èƒ†çš„ä»¥å­—ç¬¦ä¸²åŒ¹é…çš„æƒ³æ³•æ¥åšã€‚ä½†æ˜¯è¿™é‡Œä¼šå­˜åœ¨ä¸€ä¸ªç–‘é—®ï¼Œä¸ºä»€ä¹ˆä¸èƒ½ç”¨åŒæŒ‡é’ˆå‘¢ï¼Ÿå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå½“éå†åˆ°
s3 è¿™ä¸ªä½ç½®æ—¶ï¼Œæˆ‘ä»¬ä¼šå‘ç°æ­¤æ—¶ç”¨æ¥éå† s1 å’Œ s2 çš„æŒ‡é’ˆéƒ½æ»¡è¶³ä¸ s3
åŒ¹é…çš„è¦æ±‚ï¼Œæ‰€ä»¥æ­¤æ—¶å¦‚æœèµ° s1ï¼Œå°šä¸”èƒ½é€šè¿‡æ ·ä¾‹ï¼Œä¸€æ—¦æ ·ä¾‹éœ€è¦å…ˆèµ°
s2ï¼Œé‚£å°±è¿‡ä¸äº†äº†ã€‚ <img
src="https://ych-blog.oss-cn-guangzhou.aliyuncs.com/20241221111959.png" />
å†æ¥è®²ä¸€ä¸‹åŠ¨æ€è§„åˆ’çš„æ€è·¯å§ã€‚</p>
<p><img
src="https://ych-blog.oss-cn-guangzhou.aliyuncs.com/20241221112028.png" /></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isInterleave</span><span class="params">(String s1, String s2, String s3)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> s1.length(), m = s2.length(), t = s3.length();</span><br><span class="line">    <span class="keyword">if</span> (n + m != t) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="type">boolean</span>[][] dp = <span class="keyword">new</span> <span class="title class_">boolean</span>[n + <span class="number">1</span>][m + <span class="number">1</span>];</span><br><span class="line">    dp[<span class="number">0</span>][<span class="number">0</span>] = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt;= m; ++j) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">q</span> <span class="operator">=</span> i + j - <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span> (i &gt; <span class="number">0</span>) dp[i][j] = dp[i][j] || (s1.charAt(i - <span class="number">1</span>) == s3.charAt(q) &amp;&amp; dp[i - <span class="number">1</span>][j]);</span><br><span class="line">            <span class="keyword">if</span> (j &gt; <span class="number">0</span>) dp[i][j] = dp[i][j] || (s2.charAt(j-<span class="number">1</span>) == s3.charAt(q) &amp;&amp; dp[i][j - <span class="number">1</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[n][m];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ç¼–è¾‘è·ç¦»">23.5 <a
href="https://leetcode.cn/problems/edit-distance/?envType=study-plan-v2&amp;envId=top-interview-150">ç¼–è¾‘è·ç¦»</a></h3>
<p>å‡è®¾æˆ‘ä»¬æœ‰ä¸¤ä¸ªå­—ç¬¦ä¸² word1 å’Œ word2ï¼Œæˆ‘ä»¬çš„ç›®æ ‡æ˜¯å°† word1 è½¬æ¢æˆ
word2ã€‚è®¾ dp[i][j] è¡¨ç¤ºçš„æ˜¯å°† word1 çš„å‰ i ä¸ªå­—ç¬¦è½¬æ¢æˆ word2 çš„å‰ j
ä¸ªå­—ç¬¦æ‰€éœ€çš„æœ€å°ç¼–è¾‘æ“ä½œæ•°ã€‚</p>
<p>æƒ…å†µ 1: å­—ç¬¦ç›¸ç­‰ å¦‚æœ word1 çš„ç¬¬ i ä¸ªå­—ç¬¦ï¼ˆå³ word1[i-1]ï¼‰ç­‰äº word2
çš„ç¬¬ j ä¸ªå­—ç¬¦ï¼ˆå³
word2[j-1]ï¼‰ï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ªå­—ç¬¦ä¹‹é—´ä¸éœ€è¦ä»»ä½•ç¼–è¾‘æ“ä½œï¼Œå› æ­¤ dp[i][j] =
dp[i-1][j-1]ã€‚</p>
<p>æƒ…å†µ 2: å­—ç¬¦ä¸ç­‰ å¦‚æœ word1[i-1] !=
word2[j-1]ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦è€ƒè™‘ä¸‰ç§ç¼–è¾‘æ“ä½œï¼š</p>
<p>æœ€ç»ˆï¼Œdp[i][j]
åº”è¯¥å–è¿™ä¸‰ç§æƒ…å†µä¸­çš„æœ€å°å€¼ï¼Œå› ä¸ºæˆ‘ä»¬è¦æ‰¾çš„æ˜¯æœ€å°‘ç¼–è¾‘æ“ä½œæ¬¡æ•°ã€‚æ‰€ä»¥å¯ä»¥å¾—åˆ°æœ€ç»ˆçš„é€’æ¨ç»“æœ</p>
<p><span class="math display">\[
\begin{equation}
dp[i][j]=\left\{
\begin{aligned}
&amp;dp[i-1]&amp; word1[i-1] == word2[j-1] \\
&amp;min(dp[i-1][j],dp[i][j-1],dp[i-1][j-1])+1&amp; word1[i-1] !=
word2[j-1]
\end{aligned}
\right.
\end{equation}
\]</span></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">minDistance</span><span class="params">(String word1, String word2)</span> &#123;</span><br><span class="line">    word1 = <span class="string">&quot;0&quot;</span> + word1;</span><br><span class="line">    word2 = <span class="string">&quot;0&quot;</span> + word2;</span><br><span class="line">    <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> word1.length(), m = word2.length();</span><br><span class="line">    <span class="type">int</span>[][] dp = <span class="keyword">new</span> <span class="title class_">int</span>[n + <span class="number">10</span>][m + <span class="number">10</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt;= n; ++i) dp[i][<span class="number">0</span>] = i;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt;= m; ++j) dp[<span class="number">0</span>][j] = j;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">1</span>; j &lt; m; ++j) &#123;</span><br><span class="line">            <span class="keyword">if</span> (word1.charAt(i) == word2.charAt(j)) dp[i][j] = dp[i-<span class="number">1</span>][j-<span class="number">1</span>];</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                dp[i][j] = Math.min(dp[i - <span class="number">1</span>][j], dp[i][j - <span class="number">1</span>]) + <span class="number">1</span>;</span><br><span class="line">                dp[i][j] = Math.min(dp[i][j], dp[i - <span class="number">1</span>][j - <span class="number">1</span>] + <span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[n - <span class="number">1</span>][m - <span class="number">1</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº-â…±">23.6 <a
href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-ii/description/">ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº
â…¡</a></h3>
<p>â€”â€”æŠ•æœºå–å·§</p>
<p>é¢˜ç›®è¯´æ²¡æœ‰é™åˆ¶ä¸€å¤©é‡Œåªèƒ½ä¹°æˆ–è€…åªèƒ½å–ï¼Œå¹¶ä¸”ä¹Ÿæ²¡æœ‰é™åˆ¶ä¹°å–çš„æ¬¡æ•°ï¼Œæˆ‘ä»¬åªéœ€è¦çœ‹æœ‰æ¶¨å¹…å°±è¿›è¡Œä¹°å–æ“ä½œï¼Œå°±èƒ½è·å¾—æœ€å¤§æ”¶ç›Šã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxProfit</span><span class="params">(<span class="type">int</span>[] prices)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> prices.length;</span><br><span class="line">    <span class="keyword">if</span> (n == <span class="number">1</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">1</span>; j &lt; n; ++j) &#123;</span><br><span class="line">        <span class="keyword">if</span> (prices[j] &gt; prices[j - <span class="number">1</span>]) res += prices[j] - prices[j - <span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>â€”â€”åŠ¨æ€è§„åˆ’</p>
<ol type="1">
<li>å®šä¹‰çŠ¶æ€</li>
</ol>
<p>dp[i][0] è¡¨ç¤ºç¬¬ i å¤©äº¤æ˜“å®Œåæ‰‹é‡Œæ²¡æœ‰è‚¡ç¥¨çš„æœ€å¤§åˆ©æ¶¦ï¼Œdp[i][1] è¡¨ç¤ºç¬¬ i
å¤©äº¤æ˜“å®Œåæ‰‹é‡ŒæŒæœ‰ä¸€æ”¯è‚¡ç¥¨çš„æœ€å¤§åˆ©æ¶¦ï¼ˆi ä» 0 å¼€å§‹ï¼‰ã€‚</p>
<ol start="2" type="1">
<li><p>è€ƒè™‘æƒ…å†µ</p>
<ol type="1">
<li>æƒ…å†µä¸€ è€ƒè™‘ dp[i][0]
çš„è½¬ç§»æ–¹ç¨‹ï¼Œå¦‚æœè¿™ä¸€å¤©äº¤æ˜“å®Œåæ‰‹é‡Œæ²¡æœ‰è‚¡ç¥¨ï¼Œé‚£ä¹ˆå¯èƒ½çš„è½¬ç§»çŠ¶æ€ä¸ºå‰ä¸€å¤©å·²ç»æ²¡æœ‰è‚¡ç¥¨ï¼Œå³
dp[iâˆ’1][0]ï¼Œæˆ–è€…å‰ä¸€å¤©ç»“æŸçš„æ—¶å€™æ‰‹é‡ŒæŒæœ‰ä¸€æ”¯è‚¡ç¥¨ï¼Œå³
dp[iâˆ’1][1]ï¼Œè¿™æ—¶å€™æˆ‘ä»¬è¦å°†å…¶å–å‡ºï¼Œå¹¶è·å¾— prices[i]
çš„æ”¶ç›Šã€‚å› æ­¤ä¸ºäº†æ”¶ç›Šæœ€å¤§åŒ–ï¼Œæˆ‘ä»¬åˆ—å‡ºå¦‚ä¸‹çš„è½¬ç§»æ–¹ç¨‹ï¼š</li>
<li>å†æ¥è€ƒè™‘
dp[i][1]ï¼ŒæŒ‰ç…§åŒæ ·çš„æ–¹å¼è€ƒè™‘è½¬ç§»çŠ¶æ€ï¼Œé‚£ä¹ˆå¯èƒ½çš„è½¬ç§»çŠ¶æ€ä¸ºå‰ä¸€å¤©å·²ç»æŒæœ‰ä¸€æ”¯è‚¡ç¥¨ï¼Œå³
dp[iâˆ’1][1]ï¼Œæˆ–è€…å‰ä¸€å¤©ç»“æŸæ—¶è¿˜æ²¡æœ‰è‚¡ç¥¨ï¼Œå³
dp[iâˆ’1][0]ï¼Œè¿™æ—¶å€™æˆ‘ä»¬è¦å°†å…¶ä¹°å…¥ï¼Œå¹¶å‡å°‘ prices[i]
çš„æ”¶ç›Šã€‚å¯ä»¥åˆ—å‡ºå¦‚ä¸‹çš„è½¬ç§»æ–¹ç¨‹ï¼š</li>
</ol>
<p><span class="math display">\[
p[i][1]=max(dp[iâˆ’1][1],dp[iâˆ’1][0]âˆ’prices[i])
\]</span></p></li>
<li><p>å¯¹äºåˆå§‹çŠ¶æ€</p></li>
</ol>
<p>æ ¹æ®çŠ¶æ€å®šä¹‰æˆ‘ä»¬å¯ä»¥çŸ¥é“ç¬¬ 0 å¤©äº¤æ˜“ç»“æŸçš„æ—¶å€™
dp[0][0]=0ï¼Œdp[0][1]=âˆ’prices[0]ã€‚</p>
<p>å› æ­¤ï¼Œæˆ‘ä»¬åªè¦ä»å‰å¾€åä¾æ¬¡è®¡ç®—çŠ¶æ€å³å¯ã€‚ç”±äºå…¨éƒ¨äº¤æ˜“ç»“æŸåï¼ŒæŒæœ‰è‚¡ç¥¨çš„æ”¶ç›Šä¸€å®šä½äºä¸æŒæœ‰è‚¡ç¥¨çš„æ”¶ç›Šï¼Œå› æ­¤è¿™æ—¶å€™
dp[nâˆ’1][0] çš„æ”¶ç›Šå¿…ç„¶æ˜¯å¤§äº dp[nâˆ’1][1] çš„ï¼Œæœ€åçš„ç­”æ¡ˆå³ä¸º
dp[nâˆ’1][0]ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxProfit</span><span class="params">(<span class="type">int</span>[] prices)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> prices.length;</span><br><span class="line">    <span class="type">int</span>[][] dp = <span class="keyword">new</span> <span class="title class_">int</span>[n][<span class="number">2</span>];</span><br><span class="line">    dp[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">    dp[<span class="number">0</span>][<span class="number">1</span>] = -prices[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        dp[i][<span class="number">0</span>] = Math.max(dp[i - <span class="number">1</span>][<span class="number">0</span>], dp[i - <span class="number">1</span>][<span class="number">1</span>] + prices[i]);</span><br><span class="line">        dp[i][<span class="number">1</span>] = Math.max(dp[i - <span class="number">1</span>][<span class="number">1</span>], dp[i - <span class="number">1</span>][<span class="number">0</span>] - prices[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[n-<span class="number">1</span>][<span class="number">0</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº-â…²">23.7 <a
href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-iii/description/?envType=study-plan-v2&amp;envId=top-interview-150">ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº
â…¢</a></h3>
<p>â€”â€”åŠ¨æ€è§„åˆ’</p>
<ol type="1">
<li><p>å®šä¹‰çŠ¶æ€</p>
<ol type="1">
<li>j=0 è¡¨ç¤ºç¬¬ i å¤©ç»“æŸæ—¶ï¼ŒæœªæŒæœ‰ä»»ä½•è‚¡ç¥¨ï¼Œä¸”è´­ä¹°æ¬¡æ•°ä¸º
2ã€‚å¯å¾—åˆ°çŠ¶æ€æ–¹ç¨‹ï¼š</li>
</ol>
<p><span class="math display">\[
dp[i][0]=dp[i-1][0];
\]</span></p>
<ol start="2" type="1">
<li>j=1 è¡¨ç¤ºç¬¬ i å¤©ç»“æŸæ—¶ï¼ŒæŒæœ‰è‚¡ç¥¨ï¼Œä¸”è´­ä¹°æ¬¡æ•°ä¸º
1ã€‚å¯å¾—åˆ°çŠ¶æ€æ–¹ç¨‹ï¼š</li>
</ol>
<p><span class="math display">\[
p[i][1]=max(dp[i-1][1],dp[i-1][0]-prices[i-1])
\]</span></p>
<p>ï¼ˆprices[i-1]è¡¨ç¤ºç¬¬ i å¤©çš„ä»·æ ¼ï¼Œä¸‹åŒï¼‰</p>
<ol start="3" type="1">
<li>j=2 è¡¨ç¤ºç¬¬ i å¤©ç»“æŸæ—¶ï¼ŒæŒæœ‰è‚¡ç¥¨ï¼Œä¸”è´­ä¹°æ¬¡æ•°ä¸º
2ã€‚å¯å¾—åˆ°çŠ¶æ€æ–¹ç¨‹ï¼š</li>
</ol>
<p><span class="math display">\[
p[i][2]=max(dp[i-1][2],dp[i-1][3]-prices[i-1])
\]</span></p>
<ol start="4" type="1">
<li>j=3 è¡¨ç¤ºç¬¬ i å¤©ç»“æŸæ—¶ï¼ŒæœªæŒæœ‰è‚¡ç¥¨ï¼Œä¸”è´­ä¹°æ¬¡æ•°ä¸º 1ã€‚
å¯å¾—åˆ°çŠ¶æ€æ–¹ç¨‹ï¼š</li>
</ol>
<p><span class="math display">\[
dp[i][3]=max(dp[i-1][3],dp[i-1][1]+prices[i-1])
\]</span></p>
<ol start="5" type="1">
<li>j=4 è¡¨ç¤ºç¬¬ i å¤©ç»“æŸæ—¶ï¼ŒæœªæŒæœ‰è‚¡ç¥¨ï¼Œä¸”è´­ä¹°æ¬¡æ•°ä¸º 1
ã€‚å¯å¾—åˆ°çŠ¶æ€æ–¹ç¨‹ï¼š</li>
</ol>
<p><span class="math display">\[
dp[i][4]=max(dp[i-1][4],dp[i-1][2]+prices[i-1])
\]</span></p></li>
<li><p>å¯¹äºåˆå§‹çŠ¶æ€</p></li>
</ol>
<p>ç”±äºç¬¬ 1 å¤©å–å‡ºè‚¡ç¥¨çš„æƒ…å†µéƒ½æ˜¯å½“å¤©ä¹°å½“å¤©å–ï¼Œå› æ­¤ 0ã€3ã€4 çŠ¶æ€éƒ½ä¸º
0ï¼Œè®¨è®º 1ã€2 çŠ¶æ€</p>
<p>ç¬¬ä¸€å¤©ç¬¬ä¸€æ¬¡ä¹°å…¥ï¼š</p>
<p><span class="math display">\[
dp[1][1]=-prices[0];
\]</span> ç¬¬ä¸€å¤©ç¬¬äºŒæ¬¡ä¹°å…¥ï¼ˆç¬¬ä¸€æ¬¡å½“å¤©ä¹°å½“å¤©å–ï¼‰ï¼š</p>
<p><span class="math display">\[
dp[1][2]=-prices[0];
\]</span> â€‹ 3. è¿”å›å€¼</p>
<p>è€ƒè™‘åˆ°å¦‚æœæœ€åä¸€å¤©ä¹°å…¥å¹¶ä¸ä¼šä½¿æœ€å¤§å€¼çš„ç»“æœå‘ç”Ÿå˜åŒ–ï¼Œå› æ­¤ï¼Œç­”æ¡ˆåªä¼šåœ¨
3ã€4 çŠ¶æ€äº§ç”Ÿ</p>
<p><span class="math display">\[
maxï¼ˆdp[n][3],dp[n][4]ï¼‰;
\]</span></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxProfit</span><span class="params">(<span class="type">int</span>[] prices)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> prices.length;</span><br><span class="line">    <span class="type">int</span>[][] dp = <span class="keyword">new</span> <span class="title class_">int</span>[n + <span class="number">1</span>][<span class="number">5</span>];</span><br><span class="line">    dp[<span class="number">1</span>][<span class="number">1</span>] = -prices[<span class="number">0</span>];</span><br><span class="line">    dp[<span class="number">1</span>][<span class="number">2</span>] = -prices[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">2</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        dp[i][<span class="number">0</span>] = dp[i - <span class="number">1</span>][<span class="number">0</span>];</span><br><span class="line">        dp[i][<span class="number">1</span>] = Math.max(dp[i - <span class="number">1</span>][<span class="number">1</span>], dp[i - <span class="number">1</span>][<span class="number">0</span>] - prices[i - <span class="number">1</span>]);</span><br><span class="line">        dp[i][<span class="number">2</span>] = Math.max(dp[i - <span class="number">1</span>][<span class="number">2</span>], dp[i - <span class="number">1</span>][<span class="number">3</span>] - prices[i - <span class="number">1</span>]);</span><br><span class="line">        dp[i][<span class="number">3</span>] = Math.max(dp[i - <span class="number">1</span>][<span class="number">3</span>], dp[i - <span class="number">1</span>][<span class="number">1</span>] + prices[i - <span class="number">1</span>]);</span><br><span class="line">        dp[i][<span class="number">4</span>] = Math.max(dp[i - <span class="number">1</span>][<span class="number">4</span>], dp[i - <span class="number">1</span>][<span class="number">2</span>] + prices[i - <span class="number">1</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> Math.max(dp[n][<span class="number">4</span>], dp[n][<span class="number">3</span>]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº-â…³">23.8 <a
href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-iv/description/?envType=study-plan-v2&amp;envId=top-interview-150">ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº
â…£</a></h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxProfit</span><span class="params">(<span class="type">int</span> k, <span class="type">int</span>[] prices)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> prices.length;</span><br><span class="line">    <span class="type">int</span>[][][] dp = <span class="keyword">new</span> <span class="title class_">int</span>[n + <span class="number">1</span>][k + <span class="number">2</span>][<span class="number">2</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span>[][] matrix : dp) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span>[] row : matrix) &#123;</span><br><span class="line">            Arrays.fill(row, Integer.MIN_VALUE / <span class="number">2</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= k + <span class="number">1</span>; ++i) dp[<span class="number">0</span>][i][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">1</span>; j &lt;= k + <span class="number">1</span>; ++j) &#123;</span><br><span class="line">            dp[i + <span class="number">1</span>][j][<span class="number">0</span>] = Math.max(dp[i][j][<span class="number">0</span>], dp[i][j][<span class="number">1</span>] + prices[i]);</span><br><span class="line">            dp[i + <span class="number">1</span>][j][<span class="number">1</span>] = Math.max(dp[i][j][<span class="number">1</span>], dp[i][j - <span class="number">1</span>][<span class="number">0</span>] - prices[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[n][k + <span class="number">1</span>][<span class="number">0</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ç»Ÿè®¡å…¨ä¸º-1-çš„æ­£æ–¹å½¢å­çŸ©é˜µ">23.9 <a
href="https://leetcode.cn/problems/count-square-submatrices-with-all-ones/description/">ç»Ÿè®¡å…¨ä¸º
1 çš„æ­£æ–¹å½¢å­çŸ©é˜µ</a></h3>
<p>è´´ä¸€ä¸‹å®˜æ–¹é¢˜è§£å§ï¼Œå†™çš„å¾ˆæ¸…æ™°ã€‚ä¸è¿‡æˆ‘å†è§£é‡Šä¸€ä¸‹ä¸ºä»€ä¹ˆé€’æ¨å…¬å¼å¯ä»¥æ˜¯ä¸‹é¢è¿™ä¸ª</p>
<p><span class="math display">\[
\begin{equation}
dp[i][j]=\left\{
\begin{aligned}
min(dp[i-1][j],dp[i][j-1],dp[i-1][j-1] &amp;  &amp; matrxi[i][j]==1 \\
0 &amp;  &amp; matrix[i][j] == 0 \\
\end{aligned}
\right.
\end{equation}
\]</span></p>
<p>æˆ‘ä»¬ç”»ä¸ªå›¾è®²ä¸€ä¸‹å§ <img
src="https://ych-blog.oss-cn-guangzhou.aliyuncs.com/20241221112105.png" />
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">countSquares</span><span class="params">(<span class="type">int</span>[][] matrix)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (Objects.isNull(matrix) || matrix.length == <span class="number">0</span> || matrix[<span class="number">0</span>].length == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> matrix.length, m = matrix[<span class="number">0</span>].length;</span><br><span class="line">    <span class="type">int</span>[][] dp = <span class="keyword">new</span> <span class="title class_">int</span>[n][m];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; m; ++j) &#123;</span><br><span class="line">            <span class="keyword">if</span> (i == <span class="number">0</span> || j == <span class="number">0</span> || matrix[i][j] == <span class="number">0</span>) dp[i][j] = matrix[i][j];</span><br><span class="line">            <span class="keyword">else</span> dp[i][j] = Math.min(Math.min(dp[i - <span class="number">1</span>][j], dp[i][j - <span class="number">1</span>]), dp[i - <span class="number">1</span>][j - <span class="number">1</span>]) + <span class="number">1</span>;</span><br><span class="line">            res += dp[i][j];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="æœ€å¤§æ­£æ–¹å½¢">23.10 <a
href="https://leetcode.cn/problems/maximal-square/description/?envType=study-plan-v2&amp;envId=top-interview-150">æœ€å¤§æ­£æ–¹å½¢</a></h3>
<p>è¿™ä¸ªé¢˜ç›®çš„è§£æ³•åŸºæœ¬è·Ÿä¸Šé¢çš„é¢˜ç›®æ€è·¯ä¸€è‡´ã€‚ <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maximalSquare</span><span class="params">(<span class="type">char</span>[][] matrix)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (Objects.isNull(matrix) || matrix.length == <span class="number">0</span> || matrix[<span class="number">0</span>].length == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> matrix.length, m = matrix[<span class="number">0</span>].length;</span><br><span class="line">    <span class="type">int</span>[][] dp = <span class="keyword">new</span> <span class="title class_">int</span>[n][m];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        dp[i][<span class="number">0</span>] = matrix[i][<span class="number">0</span>] == <span class="string">&#x27;1&#x27;</span> ? <span class="number">1</span> : <span class="number">0</span>;</span><br><span class="line">        res = Math.max(dp[i][<span class="number">0</span>], res);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; m; ++j) &#123;</span><br><span class="line">        dp[<span class="number">0</span>][j] = matrix[<span class="number">0</span>][j] == <span class="string">&#x27;1&#x27;</span> ? <span class="number">1</span> : <span class="number">0</span>;</span><br><span class="line">        res = Math.max(dp[<span class="number">0</span>][j], res);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">1</span>; j &lt; m; ++j) &#123;</span><br><span class="line">            <span class="keyword">if</span> (matrix[i][j] == <span class="string">&#x27;1&#x27;</span>) &#123;</span><br><span class="line">                dp[i][j] = Math.min(Math.min(dp[i - <span class="number">1</span>][j], dp[i][j - <span class="number">1</span>]), dp[i - <span class="number">1</span>][j - <span class="number">1</span>]) + <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            res = Math.max(res, dp[i][j]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res * res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
]]></content>
      <categories>
        <category>ç®—æ³•</category>
      </categories>
      <tags>
        <tag>åŠ›æ‰£</tag>
        <tag>é¢è¯•ç»å…¸150é¢˜</tag>
      </tags>
  </entry>
  <entry>
    <title>å•ä¸€èŒè´£åŸåˆ™</title>
    <url>/2025/03/13/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%8D%95%E4%B8%80%E8%81%8C%E8%B4%A3%E5%8E%9F%E5%88%99/</url>
    <content><![CDATA[
]]></content>
      <categories>
        <category>è®¾è®¡æ¨¡å¼</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>è®¾è®¡æ¨¡å¼</tag>
        <tag>å•ä¸€èŒè´£åŸåˆ™</tag>
      </tags>
  </entry>
  <entry>
    <title>å·¥å‚æ¨¡å¼</title>
    <url>/2025/03/13/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/</url>
    <content><![CDATA[<blockquote>
<p>ğŸš© å­¦å¦‚é€†æ°´è¡ŒèˆŸï¼Œä¸è¿›åˆ™é€€ã€‚ â€”â€” ã€Šå¢å¹¿è´¤æ–‡ã€‹</p>
</blockquote>
<h1 id="å·¥å‚æ¨¡å¼">å·¥å‚æ¨¡å¼</h1>
<h2 id="å¼•è¨€">1ã€å¼•è¨€</h2>
<p>â€ƒâ€ƒåœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­ï¼Œåˆ›å»ºå¯¹è±¡å®ä¾‹æœ€å¸¸ç”¨çš„æ–¹å¼å°±æ˜¯é€šè¿‡ new
æ“ä½œç¬¦æ„é€ ä¸€ä¸ªå¯¹è±¡å®ä¾‹ï¼Œä½†åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œnew
æ“ä½œç¬¦ç›´æ¥ç”Ÿæˆå¯¹è±¡ä¼šå­˜åœ¨ä¸€äº›é—®é¢˜ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œå¯¹è±¡çš„åˆ›å»ºéœ€è¦ä¸€ç³»åˆ—çš„æ­¥éª¤ï¼šå¯èƒ½éœ€è¦è®¡ç®—æˆ–å–å¾—å¯¹è±¡çš„åˆå§‹ä½ç½®ã€é€‰æ‹©ç”Ÿæˆå“ªä¸ªå­å¯¹è±¡å®ä¾‹ã€æˆ–åœ¨ç”Ÿæˆä¹‹å‰å¿…é¡»å…ˆç”Ÿæˆä¸€äº›è¾…åŠ©å¯¹è±¡ã€‚
åœ¨è¿™äº›æƒ…å†µï¼Œæ–°å¯¹è±¡çš„å»ºç«‹å°±æ˜¯ä¸€ä¸ª
â€œè¿‡ç¨‹â€ï¼Œè€Œä¸ä»…ä»…æ˜¯ä¸€ä¸ªæ“ä½œï¼Œå°±åƒä¸€éƒ¨å¤§æœºå™¨ä¸­çš„ä¸€ä¸ªé½¿è½®ä¼ åŠ¨ã€‚</p>
<p>â€ƒâ€ƒé’ˆå¯¹ä¸Šé¢è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬å¦‚ä½•è½»æ¾æ–¹ä¾¿åœ°æ„é€ å¯¹è±¡å®ä¾‹ï¼Œè€Œä¸å¿…å…³å¿ƒæ„é€ å¯¹è±¡ç¤ºä¾‹çš„ç»†èŠ‚å’Œå¤æ‚è¿‡ç¨‹ï¼Ÿè§£å†³æ–¹æ¡ˆå°±æ˜¯ä½¿ç”¨ä¸€ä¸ª<strong>å·¥å‚ç±»æ¥åˆ›å»ºå¯¹è±¡</strong>ã€‚</p>
<h2 id="ä»€ä¹ˆæ˜¯å·¥å‚æ¨¡å¼">2ã€ä»€ä¹ˆæ˜¯å·¥å‚æ¨¡å¼</h2>
<p>â€ƒâ€ƒå·¥å‚æ¨¡å¼çš„ä¸»è¦ç›®çš„æ˜¯å°†åˆ›å»ºå¯¹è±¡çš„å…·ä½“è¿‡ç¨‹å±è”½éš”ç¦»èµ·æ¥ï¼Œä»è€Œè¾¾åˆ°æ›´é«˜çš„çµæ´»æ€§ã€‚å·¥å‚æ¨¡å¼å¯ä»¥åˆ†ä¸ºä¸‰ç±»ï¼š</p>
<ul>
<li><strong>ç®€å•å·¥å‚æ¨¡å¼ï¼ˆSimple
Factoryï¼‰ï¼š</strong>åªæœ‰å”¯ä¸€å·¥å‚ï¼ˆç®€å•å·¥å‚ï¼‰ï¼Œä¸€ä¸ªäº§å“æ¥å£/æŠ½è±¡ç±»ï¼Œæ ¹æ®ç®€å•å·¥å‚ä¸­çš„é™æ€æ–¹æ³•æ¥åˆ›å»ºå…·ä½“äº§å“å¯¹è±¡ã€‚é€‚ç”¨äºäº§å“è¾ƒå°‘ï¼Œå‡ ä¹ä¸æ‰©å±•çš„æƒ…æ™¯</li>
<li><strong>å·¥å‚æ–¹æ³•æ¨¡å¼ï¼ˆFactory
Methodï¼‰ï¼š</strong>æœ‰å¤šä¸ªå·¥å‚ï¼ˆæŠ½è±¡å·¥å‚+å¤šä¸ªå…·ä½“å·¥å‚ï¼‰ï¼Œä¸€ä¸ªäº§å“æ¥å£/æŠ½è±¡ç±»ï¼Œæ ¹æ®ç»§æ‰¿æŠ½è±¡å·¥å‚ä¸­çš„æ–¹æ³•æ¥å¤šæ€åˆ›å»ºå…·ä½“äº§å“å¯¹è±¡ã€‚é€‚ç”¨äºä¸€ä¸ªç±»å‹çš„å¤šä¸ªäº§å“</li>
<li><strong>æŠ½è±¡å·¥å‚æ¨¡å¼ï¼ˆAbstract
Factoryï¼‰ï¼š</strong>æœ‰å¤šä¸ªå·¥å‚ï¼ˆæŠ½è±¡å·¥å‚+å¤šä¸ªå…·ä½“å·¥å‚ï¼‰ï¼Œå¤šä¸ªäº§å“æ¥å£/æŠ½è±¡ç±»ï¼Œå¯¹äº§å“å­ç±»è¿›è¡Œåˆ†ç»„ï¼Œæ ¹æ®ç»§æ‰¿æŠ½è±¡å·¥å‚ä¸­çš„æ–¹æ³•å¤šæ€åˆ›å»ºåŒç»„çš„ä¸åŒå…·ä½“äº§å“å¯¹è±¡ã€‚é€‚ç”¨äºå¤šä¸ªç±»å‹çš„å¤šä¸ªäº§å“</li>
</ul>
<p>ä¸¾ä¸ªç”Ÿäº§ç”µè„‘çš„æ —å­ä»‹ç»ä¸€ä¸‹è¿™å‡ ä¸ªå·¥å‚æ¨¡å¼ï¼š</p>
<p>ï¼ˆ1ï¼‰åœ¨æ²¡æœ‰å·¥å‚çš„æ—¶ä»£ï¼Œå¦‚æœå®¢æˆ·éœ€è¦ä¸€æ¬¾MBPç”µè„‘ï¼Œé‚£ä¹ˆå°±éœ€è¦å®¢æˆ·å»åˆ›å»ºä¸€æ¬¾MBPç”µè„‘ï¼Œç„¶åæ‹¿æ¥ç”¨ã€‚</p>
<p>ï¼ˆ2ï¼‰ç®€å•å·¥å‚æ¨¡å¼ï¼šåæ¥å‡ºç°äº†å·¥å‚ï¼Œç”¨æˆ·ä¸å†éœ€è¦å»åˆ›å»ºMBPç”µè„‘ï¼Œç”±å·¥å‚è¿›è¡Œåˆ›å»ºï¼Œæƒ³è¦ä»€ä¹ˆMBPç”µè„‘ï¼Œç›´æ¥é€šè¿‡å·¥å‚åˆ›å»ºå°±å¯ä»¥äº†ã€‚æ¯”å¦‚æƒ³è¦M3ç³»åˆ—çš„MBPç”µè„‘ï¼Œå·¥å‚å°±åˆ›å»ºè¿™ä¸ªç³»åˆ—çš„ç”µè„‘ã€‚</p>
<p>ï¼ˆ3ï¼‰å·¥å‚æ–¹æ³•æ¨¡å¼ï¼šä¸ºäº†æ»¡è¶³å®¢æˆ·ï¼ŒMBPç³»åˆ—è¶Šæ¥è¶Šå¤šï¼Œå¦‚M3ã€M4ç­‰ç­‰ç³»åˆ—ï¼Œä¸€ä¸ªå·¥å‚æ— æ³•åˆ›å»ºæ‰€æœ‰çš„MBPç³»åˆ—ï¼Œäºæ˜¯åˆå•ç‹¬åˆ†å‡ºæ¥å¤šä¸ªå…·ä½“çš„å·¥å‚ï¼Œæ¯ä¸ªå…·ä½“å·¥å‚åˆ›å»ºä¸€ç§ç³»åˆ—ï¼Œå³å…·ä½“å·¥å‚ç±»åªèƒ½åˆ›å»ºä¸€ä¸ªå…·ä½“äº§å“ã€‚ä½†æ˜¯MBPç”µè„‘å·¥å‚è¿˜æ˜¯ä¸ªæŠ½è±¡ï¼Œä½ éœ€è¦æŒ‡å®šæŸä¸ªå…·ä½“çš„å·¥å‚æ‰èƒ½ç”Ÿäº§ç”µè„‘å‡ºæ¥ã€‚</p>
<p>ï¼ˆ4ï¼‰æŠ½è±¡å·¥å‚æ¨¡å¼ï¼šéšç€å®¢æˆ·è¦æ±‚è¶Šæ¥è¶Šé«˜ï¼ŒMBPç”µè„‘è½¦å¿…é¡»é…ç½®é¼ æ ‡ï¼Œäºæ˜¯è¿™ä¸ªå·¥å‚å¼€å§‹ç”Ÿäº§MBPç”µè„‘å’Œéœ€è¦çš„é¼ æ ‡ã€‚æœ€ç»ˆæ˜¯å®¢æˆ·åªè¦å¯¹å®é©¬çš„é”€å”®å‘˜è¯´ï¼šæˆ‘è¦M3çš„å¸¦æœ‰é¼ æ ‡çš„MBPç”µè„‘ï¼Œé”€å”®å‘˜å°±ç›´æ¥ç»™ä»–M3çš„å¸¦æœ‰é¼ æ ‡çš„MBPç”µè„‘äº†ã€‚è€Œä¸ç”¨è‡ªå·±å»åˆ›å»ºM3çš„å¸¦æœ‰é¼ æ ‡çš„MBPç”µè„‘ã€‚</p>
<h2 id="æ— å·¥å‚æ¨¡å¼å®ç°">3ã€æ— å·¥å‚æ¨¡å¼å®ç°</h2>
<p>â€ƒâ€ƒå¦‚æœæ²¡æœ‰å·¥å‚æ¨¡å¼ï¼Œé‚£ä¹ˆç”¨æˆ·è¦è·å¾—MBPç”µè„‘å°±å¾—è‡ªå·±å»åˆ›å»ºï¼Œæƒ³è¦ä»€ä¹ˆå‹å·ï¼Œå°±å¾—æ‰¾åˆ°å¯¹åº”çš„å‹å·å»newã€‚ä»¥ä¸‹æ˜¯å¯¹åº”ç±»å›¾ä»¥åŠå®ç°ã€‚</p>
<p><img src="https://ych-blog.oss-cn-guangzhou.aliyuncs.com/20250312203232.png" style="zoom: 33%;" /></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Customer</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Customer</span> <span class="variable">customer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Customer</span>();</span><br><span class="line">        customer.createMBPM3();</span><br><span class="line">        customer.createMBPM4();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> MBPM3 <span class="title function_">createMBPM3</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">MBPM3</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> MBPM4 <span class="title function_">createMBPM4</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">MBPM4</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MBPM3</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MBPM3</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ç”Ÿäº§---&gt; MBPM3ç”µè„‘&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MBPM4</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MBPM4</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ç”Ÿäº§MBPM4ç”µè„‘&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="ç®€å•å·¥å‚æ¨¡å¼">4ã€ç®€å•å·¥å‚æ¨¡å¼</h2>
<p>â€ƒâ€ƒç®€å•å·¥å‚æ¨¡å¼æœ‰å«åšé™æ€å·¥å‚æ–¹æ³•æ¨¡å¼ï¼ˆstatic Factory Method
patternï¼‰ï¼Œå®ƒæ—¶é€šè¿‡ä½¿ç”¨é™æ€æ–¹æ³•æ¥å—ä¸åŒçš„å‚æ•°æ¥è¿”å›ä¸åŒçš„å®ä¾‹å¯¹è±¡ã€‚ç®€å•å·¥å‚æ¨¡å¼çš„æ ¸å¿ƒæ˜¯å®šä¹‰ä¸€ä¸ªåˆ›å»ºå¯¹è±¡çš„æ¥å£ï¼Œå°†å¯¹è±¡çš„åˆ›å»ºå’Œæœ¬èº«çš„ä¸šåŠ¡é€»è¾‘åˆ†ç¦»ï¼Œé™ä½ç³»ç»Ÿçš„è€¦åˆåº¦ï¼Œä½¿å¾—ä»¥åéœ€è¦æ”¹å˜æ—¶ï¼Œåªéœ€è¦ä¿®æ”¹å·¥å‚ç±»å³å¯ã€‚</p>
<h3 id="ç®€å•å·¥å‚å®ç°åŸç†åŠumlå›¾">ï¼ˆ1ï¼‰ç®€å•å·¥å‚å®ç°åŸç†åŠUMLå›¾</h3>
<p>â€ƒâ€ƒå…¶å®å®ç°çš„ä¸»è¦åŸç†è¿˜æ˜¯åˆ©ç”¨åˆ°äº†å¤šæ€çš„æ¦‚å¿µï¼Œå¯ä»¥ç”¨çˆ¶ç±»å»æ¥å­ç±»çš„å¯¹è±¡ï¼Œè¿™å°±éå¸¸æ–¹ä¾¿æˆ‘ä»¬å°†åˆ›å»ºå¯¹è±¡çš„æ–¹æ³•è¿›è¡ŒæŠ½è±¡ï¼Œæˆ‘ä»¬åªéœ€è¦å®šä¹‰ä¸€ä¸ªå…¬å…±çš„MBPçˆ¶ç±»ï¼Œç”¨ä¸åŒå‹å·çš„å­ç±»å»ç»§æ‰¿å®ƒã€‚å¯¹äºåˆ›å»ºå­ç±»å¯¹è±¡çš„è¿‡ç¨‹äº¤ç»™å·¥å‚å®Œæˆï¼Œæœ€åç”¨çˆ¶ç±»å»æ¥åˆ›å»ºå‡ºæ¥çš„å­ç±»å¯¹è±¡å³å¯ã€‚</p>
<p><img src="https://ych-blog.oss-cn-guangzhou.aliyuncs.com/20250312205351.png" style="zoom:50%;" /></p>
<h3 id="å®ç°ä»£ç ">ï¼ˆ2ï¼‰å®ç°ä»£ç </h3>
<p>äº§å“ç±»ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MBP</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MBP</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MBPM3</span> <span class="keyword">extends</span> <span class="title class_">MBP</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MBPM3</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ç”Ÿäº§M-----&gt;MBP3&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MBPM4</span> <span class="keyword">extends</span> <span class="title class_">MBP</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MBPM4</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ç”Ÿäº§M-----&gt;MBP4&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å·¥å‚ç±»ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Factory</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> MBP <span class="title function_">createMBP</span><span class="params">(String type)</span>&#123;</span><br><span class="line">        <span class="keyword">switch</span> (type)&#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;M3&quot;</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">MBPM3</span>();</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;M4&quot;</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">MBPM4</span>();</span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// é™æ€å·¥å‚</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">public</span> MBP <span class="title function_">createMBPStatic</span><span class="params">(String type)</span>&#123;</span><br><span class="line">        <span class="keyword">switch</span> (type)&#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;M3&quot;</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">MBPM3</span>();</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;M4&quot;</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">MBPM4</span>();</span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç”¨æˆ·ç±»ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Customer</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Factory</span> <span class="variable">factory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Factory</span>();</span><br><span class="line">        <span class="type">MBP</span> <span class="variable">m3</span> <span class="operator">=</span> factory.createMBP(<span class="string">&quot;M3&quot;</span>);</span><br><span class="line">        <span class="type">MBP</span> <span class="variable">m4</span> <span class="operator">=</span> factory.createMBP(<span class="string">&quot;M4&quot;</span>);</span><br><span class="line">		<span class="comment">// é™æ€å·¥å‚</span></span><br><span class="line">        <span class="type">MBP</span> <span class="variable">m31</span> <span class="operator">=</span> Factory.createMBPStatic(<span class="string">&quot;M3&quot;</span>);</span><br><span class="line">        <span class="type">MBP</span> <span class="variable">m41</span> <span class="operator">=</span> Factory.createMBPStatic(<span class="string">&quot;M4&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ä¼˜ç¼ºç‚¹">ï¼ˆ3ï¼‰ä¼˜ç¼ºç‚¹</h3>
<ul>
<li>ä¼˜ç‚¹ï¼šç®€å•å·¥å‚å¯ä»¥ä½¿å®¢æˆ·ç«¯å…é™¤ç›´æ¥åˆ›å»ºå¯¹è±¡çš„èŒè´£ï¼Œèƒ½å¤Ÿæ ¹æ®éœ€è¦åˆ›å»ºå‡ºå¯¹åº”çš„äº§å“ã€‚å®ç°å®¢æˆ·ç«¯å¯äº§å“ç±»çš„ä»£ç åˆ†ç¦»ã€‚æ­¤å¤–ï¼Œå¯ä»¥é€šè¿‡é…ç½®æ–‡ä»¶æ¥å®ç°ä¸ä¿®æ”¹å®¢æˆ·ç«¯ä»£ç çš„æƒ…å†µä¸‹æ·»åŠ æ–°çš„å…·ä½“äº§å“ç±»</li>
<li>ç¼ºç‚¹ï¼š<strong>è¿èƒŒäº†å¼€é—­åŸåˆ™</strong>ï¼Œå¦‚æœéœ€è¦æ–°å¢å…¶ä»–äº§å“ç±»ï¼Œå°±å¿…é¡»åœ¨å·¥å‚ç±»ä¸­æ–°å¢ç±»ä¼¼<code>if-else</code>çš„æ¡ä»¶åˆ¤æ–­ï¼ˆä¸Šé¢çš„æ¼”ç¤ºä»£ç ç”¨äº†<code>switch</code>ï¼‰ï¼Œè™½ç„¶å¯ä»¥ç”¨é…ç½®æ–‡ä»¶æ¥æ”¹è¿›ï¼Œä½†æ˜¯æ•´ä½“ä¸Šè€Œè¨€ï¼Œç³»ç»Ÿæ‰©å±•ç›¸å¯¹äºå…¶ä»–å·¥å‚æ¨¡å¼è¦å›°éš¾å¾ˆå¤šã€‚
<ul>
<li>å…³äºå¦‚ä½•ä½¿ç”¨é…ç½®æ–‡ä»¶æ”¹è¿›ç®€å•å·¥å‚ï¼Œåœ¨è¿™é‡Œæè¿°ä¸€ä¸‹ï¼šå…¶å®å°±æ˜¯å°†åˆ›å»ºå·¥å‚çš„æ¡ä»¶ï¼Œä¸Šè¿°ä»£ç ä¸­çš„<code>String type</code>ï¼Œæ”¹æˆæ˜¯æ ¹æ®ç±»è·¯å¾„æ¥åˆ›å»ºå¯¹è±¡ã€‚å†è¯¦ç»†ç‚¹å°±æ˜¯ï¼Œå°†ç±»è·¯å¾„å†™åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œç„¶åå·¥å‚åœ¨åˆ›å»ºå¯¹è±¡çš„æ—¶å€™ï¼Œæ ¹æ®è·å–åˆ°çš„ç±»è·¯å¾„ï¼Œç”¨åå°„åˆ›å»ºå‡ºå¯¹è±¡ã€‚è¿™æ ·ï¼Œå³ä½¿æœ‰äº†æ–°çš„äº§å“ï¼Œæˆ‘ä»¬ä¹Ÿåªéœ€è¦åœ¨æ–°å»ºäº§å“ç±»å¹¶ç»§æ‰¿äº§å“çˆ¶ç±»ï¼Œç„¶ååœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ æ–°å»ºäº§å“ç±»çš„ç±»è·¯å¾„ã€‚</li>
</ul></li>
</ul>
<h3 id="ç®€å•å·¥å‚å’Œé™æ€å·¥å‚">ï¼ˆ4ï¼‰ç®€å•å·¥å‚å’Œé™æ€å·¥å‚</h3>
<p>å¯ä»¥çœ‹åˆ°ä¸Šé¢ç”¨æˆ·ç±»ä¸­ä½¿ç”¨äº†ä¸¤ç§æ–¹æ³•åˆ›å»ºå®ä¾‹å¯¹è±¡ï¼Œä¸€ç§æ˜¯ç±»æ–¹æ³•ï¼Œä¸€ç§æ˜¯ç±»çš„é™æ€æ–¹æ³•ã€‚é‚£ä½¿ç”¨ç±»çš„é™æ€æ–¹æ³•æœ‰ä»€ä¹ˆå¥½å¤„å‘¢ï¼Ÿ</p>
<ul>
<li>ä½¿ç”¨é™æ€æ–¹æ³•å¯ä»¥ä¸éœ€è¦ä½¿ç”¨<code>new</code>çš„æ–¹æ³•åˆ›å»ºå¯¹è±¡ï¼Œæ–¹ä¾¿è°ƒç”¨</li>
<li>æ§åˆ¶å®ä¾‹çš„åˆ›å»ºï¼Œå¦‚ç¼“å­˜å®ä¾‹ï¼Œå»¶è¿Ÿåˆå§‹åŒ–</li>
<li>å‡å°‘å®¢æˆ·ç«¯å¯¹å…·ä½“ç±»çš„ä¾èµ–</li>
</ul>
<h3 id="ç®€å•å·¥å‚åœ¨å®é™…ä¸­çš„åº”ç”¨">ï¼ˆ5ï¼‰ç®€å•å·¥å‚åœ¨å®é™…ä¸­çš„åº”ç”¨</h3>
<p>ã€1ã€‘å¦‚<code>DataFormat</code>ä¸­è¿™ä¸ªæ–¹æ³•å°±ä½¿ç”¨äº†ç®€å•å·¥å‚</p>
<p><img src="https://ych-blog.oss-cn-guangzhou.aliyuncs.com/20250312212636.png" style="zoom: 67%;" /></p>
<p>ã€2ã€‘å¯¹äºæ•°æ®åº“è¿æ¥æ± ï¼Œå¦‚ä¸šåŠ¡éœ€è¦è¿æ¥æ•°æ®åº“æ—¶ï¼Œéœ€è¦æ”¯æŒä¸åŒçš„æ•°æ®åº“ï¼Œå¦‚<code>dbcp</code>ã€<code>c3p0</code>ã€<code>druid</code>ç­‰ç­‰ï¼Œè¿™ä¸ªæ—¶å€™æ•°æ®åº“è¿æ¥æ–¹å¼æœ‰é™ï¼Œè€Œä¸”æ¯”è¾ƒå›ºå®šä¸å®¹æ˜“æ›´æ”¹ï¼Œæ‰€ä»¥å¯ä»¥å°è¯•é‡‡ç”¨ç®€å•å·¥å‚æ¨¡å¼æ¥è¿›è¡Œç®¡ç†æ•°æ®åº“è¿æ¥å¯¹è±¡ã€‚</p>
<p>ã€3ã€‘åœ¨<code>spring</code>æºç ä¸­ä»¥Factoryä¸ºåç¼€çš„æ–¹æ³•æˆ–è€…ç±»éƒ½ç”¨åˆ°å·¥å‚æ¨¡å¼</p>
<h2 id="å·¥å‚æ–¹æ³•æ¨¡å¼">5ã€ å·¥å‚æ–¹æ³•æ¨¡å¼</h2>
<p>â€ƒâ€ƒå·¥å‚æ–¹æ³•æ¨¡å¼å°†å·¥å‚æŠ½è±¡åŒ–ï¼Œå¹¶å®šä¹‰ä¸€ä¸ªåˆ›å»ºå¯¹è±¡çš„æ¥å£ã€‚æ¯å¢åŠ æ–°äº§å“ï¼Œåªéœ€å¢åŠ è¯¥äº§å“ä»¥åŠå¯¹åº”çš„å…·ä½“å®ç°å·¥å‚ç±»ï¼Œç”±å…·ä½“å·¥å‚ç±»å†³å®šè¦å®ä¾‹åŒ–çš„äº§å“æ˜¯å“ªä¸ªï¼Ÿå°†å¯¹è±¡çš„åˆ›å»ºä¸å®ä¾‹åŒ–å»¶è¿Ÿåˆ°å­ç±»ï¼Œè¿™æ ·å·¥å‚çš„è®¾è®¡å°±ç¬¦åˆâ€å¼€é—­åŸåˆ™â€œäº†ï¼Œæ‰©å±•æ—¶ä¸å¿…å»ä¿®æ”¹åŸæ¥çš„ä»£ç ã€‚</p>
<h3
id="å·¥å‚æ–¹æ³•æ¨¡å¼å®ç°åŸç†åŠumlå›¾">ï¼ˆ1ï¼‰å·¥å‚æ–¹æ³•æ¨¡å¼å®ç°åŸç†åŠUMLå›¾</h3>
<p>å…¶å®ä¹Ÿå¾ˆå¥½ç†è§£ï¼Œå°±æ˜¯åœ¨ç®€å•å·¥å‚æ¨¡å¼ä¸­ï¼Œä¼šå­˜åœ¨åˆ¤æ–­è¯­å¥çš„æƒ…å†µï¼Œç›¸å½“äºåœ¨å·¥å‚ç±»ä¸­ï¼Œä¸€ä¸ªç”Ÿäº§ç±»çš„æ–¹æ³•</p>
<h2 id="æŠ½è±¡å·¥å‚æ¨¡å¼">6ã€ æŠ½è±¡å·¥å‚æ¨¡å¼</h2>
<h2 id="æ€»ç»“">7ã€æ€»ç»“</h2>
<p>â€ƒâ€ƒæ— è®ºæ˜¯ç®€å•å·¥å‚æ¨¡å¼ï¼Œå·¥å‚æ–¹æ³•æ¨¡å¼ï¼Œè¿˜æ˜¯æŠ½è±¡å·¥å‚æ¨¡å¼ï¼Œä»–ä»¬éƒ½å±äºå·¥å‚æ¨¡å¼ï¼Œåœ¨å½¢å¼å’Œç‰¹ç‚¹ä¸Šä¹Ÿæ˜¯æä¸ºç›¸ä¼¼çš„ï¼Œä»–ä»¬çš„æœ€ç»ˆç›®çš„éƒ½æ˜¯ä¸ºäº†è§£è€¦ã€‚åœ¨ä½¿ç”¨æ—¶ï¼Œæˆ‘ä»¬ä¸å¿…å»åœ¨æ„è¿™ä¸ªæ¨¡å¼åˆ°åº•å·¥å‚æ–¹æ³•æ¨¡å¼è¿˜æ˜¯æŠ½è±¡å·¥å‚æ¨¡å¼ï¼Œå› ä¸ºä»–ä»¬ä¹‹é—´çš„æ¼”å˜å¸¸å¸¸æ˜¯ä»¤äººç¢ç£¨ä¸é€çš„ã€‚ç»å¸¸ä½ ä¼šå‘ç°ï¼Œæ˜æ˜ä½¿ç”¨çš„å·¥å‚æ–¹æ³•æ¨¡å¼ï¼Œå½“æ–°éœ€æ±‚æ¥ä¸´ï¼Œç¨åŠ ä¿®æ”¹ï¼ŒåŠ å…¥äº†ä¸€ä¸ªæ–°æ–¹æ³•åï¼Œç”±äºç±»ä¸­çš„äº§å“æ„æˆäº†ä¸åŒç­‰çº§ç»“æ„ä¸­çš„äº§å“æ—ï¼Œå®ƒå°±å˜æˆæŠ½è±¡å·¥å‚æ¨¡å¼äº†ï¼›è€Œå¯¹äºæŠ½è±¡å·¥å‚æ¨¡å¼ï¼Œå½“å‡å°‘ä¸€ä¸ªæ–¹æ³•ä½¿çš„æä¾›çš„äº§å“ä¸å†æ„æˆäº§å“æ—ä¹‹åï¼Œå®ƒå°±æ¼”å˜æˆäº†å·¥å‚æ–¹æ³•æ¨¡å¼ã€‚</p>
<p>â€ƒâ€ƒæ‰€ä»¥ï¼Œåœ¨ä½¿ç”¨å·¥å‚æ¨¡å¼æ—¶ï¼Œåªéœ€è¦å…³å¿ƒé™ä½è€¦åˆåº¦çš„ç›®çš„æ˜¯å¦è¾¾åˆ°å³å¯ã€‚</p>
]]></content>
      <categories>
        <category>è®¾è®¡æ¨¡å¼</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>è®¾è®¡æ¨¡å¼</tag>
      </tags>
  </entry>
  <entry>
    <title>è®¾è®¡æ¨¡å¼</title>
    <url>/2025/03/12/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/</url>
    <content><![CDATA[<blockquote>
<p>ğŸš© å­¦å¦‚é€†æ°´è¡ŒèˆŸï¼Œä¸è¿›åˆ™é€€ã€‚ â€”â€” ã€Šå¢å¹¿è´¤æ–‡ã€‹</p>
</blockquote>
<h1 id="ä¸€è®¾è®¡æ¨¡å¼æ€»è¿°">ä¸€ã€è®¾è®¡æ¨¡å¼æ€»è¿°</h1>
<h2 id="ä»€ä¹ˆæ˜¯è®¾è®¡æ¨¡å¼">1ã€ä»€ä¹ˆæ˜¯è®¾è®¡æ¨¡å¼</h2>
<p>â€ƒâ€ƒ
è®¾è®¡æ¨¡å¼æ˜¯ä¸€å¥—ç»è¿‡åå¤ä½¿ç”¨çš„ä»£ç è®¾è®¡ç»éªŒï¼Œç›®çš„æ˜¯ä¸ºäº†é‡ç”¨ä»£ç ã€è®©ä»£ç æ›´å®¹æ˜“è¢«ä»–äººç†è§£ã€ä¿è¯ä»£ç å¯é æ€§ã€‚</p>
<p>â€ƒâ€ƒé¡¹ç›®ä¸­åˆç†çš„è¿ç”¨è®¾è®¡æ¨¡å¼å¯ä»¥å®Œç¾çš„è§£å†³å¾ˆå¤šé—®é¢˜ï¼Œæ¯ç§æ¨¡å¼åœ¨ç°å®ä¸­éƒ½æœ‰ç›¸å¯¹åº”çš„åŸç†ä¸ä¹‹å¯¹åº”ï¼Œæ¯ç§æ¨¡å¼æè¿°äº†ä¸€ä¸ªåœ¨æˆ‘ä»¬å‘¨å›´ä¸æ–­é‡å¤å‘ç”Ÿçš„é—®é¢˜ï¼Œä»¥åŠè¯¥é—®é¢˜çš„æ ¸å¿ƒè§£å†³æ–¹æ¡ˆã€‚</p>
<p>â€ƒâ€ƒæ€»ä½“è€Œè¨€ï¼Œè®¾è®¡æ¨¡å¼åˆ†ä¸ºä¸‰å¤§ç±»ï¼š</p>
<p><img src="https://ych-blog.oss-cn-guangzhou.aliyuncs.com/20250312144024.png" style="zoom:60%;" /></p>
<h2 id="è®¾è®¡æ¨¡å¼çš„å…­å¤§åŸåˆ™">2ã€è®¾è®¡æ¨¡å¼çš„å…­å¤§åŸåˆ™</h2>
<p>è®¾è®¡æ¨¡å¼ä¸»è¦æœ‰å…­å¤§è®¾è®¡åŸåˆ™ï¼Œåˆ†åˆ«æ˜¯ï¼šå•ä¸€èŒè´£åŸåˆ™ã€å¼€é—­åŸåˆ™ã€é‡Œæ°æ›¿æ¢åŸåˆ™ã€ä¾èµ–å€’ç½®åŸåˆ™ã€æ¥å£éš”ç¦»åŸåˆ™ã€è¿ªç±³ç‰¹åŸåˆ™ã€‚<br><img src="https://ych-blog.oss-cn-guangzhou.aliyuncs.com/20250312193040.png" style="zoom:67%;" /></p>
<h3
id="å•ä¸€èŒè´£åŸåˆ™single-responsibility-principle">ï¼ˆ1ï¼‰å•ä¸€èŒè´£åŸåˆ™ï¼ˆSingle
Responsibility Principleï¼‰</h3>
<ol type="1">
<li>å®šä¹‰ï¼šä¸€ä¸ªæ¥å£æˆ–è€…ç±»åªæœ‰ä¸€ä¸ªåŸå› å¼•èµ·å˜åŒ–ã€‚</li>
<li>å®šä¹‰è§£é‡Šï¼šå³ä¸€ä¸ªæ¥å£æˆ–è€…ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªèŒè´£ï¼Œè´Ÿè´£ä¸€ä»¶äº‹æƒ…ã€‚ï¼ˆæ­¤åŸåˆ™åŒæ ·é€‚ç”¨äºæ–¹æ³•ï¼‰</li>
<li>å¥½å¤„ï¼šâ‘  å¤æ‚æ€§é™ä½ â‘¡ å¯è¯»æ€§æé«˜ â‘¢å¯ç»´æŠ¤æ€§æé«˜ â‘£å˜æ›´é£é™©é™ä½</li>
</ol>
<h3 id="å¼€é—­åŸåˆ™-open-close-principle">ï¼ˆ2ï¼‰å¼€é—­åŸåˆ™ <strong>(Open Close
Principle)</strong></h3>
<ol type="1">
<li>å®šä¹‰ï¼šè½¯ä»¶å®ä½“å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­ã€‚</li>
<li>å®šä¹‰è§£é‡Šï¼šä¹Ÿå°±æ˜¯åº”è¯¥é€šè¿‡æ‰©å±•æ¥å®ç°ä¸šåŠ¡éœ€æ±‚å’Œå˜åŒ–ï¼Œè€Œä¸æ˜¯é€šè¿‡ä¿®æ”¹å·²æœ‰çš„ä»£ç æ¥å®ç°å˜åŒ–ã€‚</li>
<li>å¥½å¤„ï¼šâ‘  å¼ºç³»ç»Ÿçš„ç¨³å®šæ€§å’Œå¯æ‰©å±•æ€§ â‘¡å‡å°‘å¯¹ç°æœ‰ä»£ç çš„å½±å“</li>
</ol>
<h3 id="é‡Œæ°æ›¿æ¢åŸåˆ™-liskov-substitution-principle">ï¼ˆ3ï¼‰é‡Œæ°æ›¿æ¢åŸåˆ™
<strong>(Liskov Substitution Principle)</strong></h3>
<ol type="1">
<li>å®šä¹‰ï¼šä»»ä½•åŸºç±»å¯ä»¥å‡ºç°çš„åœ°æ–¹ï¼Œå­ç±»ä¸€å®šå¯ä»¥å‡ºç°ã€‚</li>
<li>å®šä¹‰è§£é‡Šï¼š
<ul>
<li>å­ç±»å¿…é¡»å®Œå…¨å®ç°å¼—é›·çš„æ–¹æ³•</li>
<li>å­ç±»å¯ä»¥æœ‰è‡ªå·±çš„ä¸ªæ€§</li>
<li>è¦†ç›–æˆ–è€…å®ç°çˆ¶ç±»æ–¹æ³•æ—¶ï¼Œè¾“å…¥å‚æ•°å¯ä»¥è¢«æ”¾å¤§</li>
<li>è¦†ç›–æˆ–è€…å®ç°çˆ¶ç±»æ–¹æ³•æ—¶ï¼Œè¾“å‡ºç»“æœå¯ä»¥è¢«ç¼©å°</li>
</ul></li>
<li>å¥½å¤„ï¼šâ‘  æå‡ä»£ç çš„å¯é æ€§å’Œå¤ç”¨æ€§ â‘¡å‡å°‘ç»§æ‰¿å¸¦æ¥çš„é—®é¢˜</li>
</ol>
<h3 id="ä¾èµ–å€’ç½®åŸåˆ™-dependence-inversion-principle">ï¼ˆ4ï¼‰ä¾èµ–å€’ç½®åŸåˆ™
<strong>(Dependence Inversion Principle)</strong></h3>
<ol type="1">
<li>å®šä¹‰ï¼šé«˜å±‚æ¨¡å—ä¸åº”ä¾èµ–ä½å±‚æ¨¡å—ï¼Œä¸¤è€…éƒ½åº”ä¾èµ–æŠ½è±¡ï¼›æŠ½è±¡ä¸åº”ä¾èµ–ç»†èŠ‚ï¼Œç»†èŠ‚åº”ä¾èµ–æŠ½è±¡ã€‚</li>
<li>å®šä¹‰è§£é‡Šï¼šç®€å•ç‚¹æ¥è¯´ï¼Œå°±æ˜¯é¢å‘æ¥å£ç¼–ç¨‹ã€‚æ¨¡å—é—´çš„ä¾èµ–é€šè¿‡æŠ½è±¡å‘ç”Ÿï¼Œå®ç°ç±»ä¹‹é—´ä¸å‘ç”Ÿç›´æ¥çš„ä¾èµ–å…³ç³»ï¼Œå…¶ä¾èµ–å…³ç³»æ—¶é€šè¿‡æ¥å£æˆ–è€…æŠ½è±¡ç±»äº§ç”Ÿã€‚</li>
<li>å¥½å¤„ï¼šâ‘  é™ä½æ¨¡å—é—´çš„è€¦åˆ â‘¡æå‡ç³»ç»Ÿçš„å¯æ‰©å±•æ€§å’Œå¯ç»´æŠ¤æ€§</li>
</ol>
<h3 id="æ¥å£éš”ç¦»åŸåˆ™-interface-segregation-principle">ï¼ˆ5ï¼‰æ¥å£éš”ç¦»åŸåˆ™
<strong>(Interface Segregation Principle)</strong></h3>
<ol type="1">
<li>å®šä¹‰ï¼šå»ºç«‹å•ä¸€æ¥å£ï¼Œä¸è¦å»ºç«‹åºå¤§è‡ƒè‚¿çš„æ¥å£ï¼Œå°½é‡ç»†åŒ–æ¥å£ï¼Œæ¥å£ä¸­çš„æ–¹æ³•å°½é‡å°‘ã€‚</li>
<li>å®šä¹‰è§£é‡Šï¼šåº”è¯¥ä¸ºå„ä¸ªç±»å»ºç«‹ä¸“ç”¨çš„æ¥å£ï¼Œè€Œä¸è¦è¯•å›¾å»å»ºç«‹ä¸€ä¸ªå¾ˆåºå¤§çš„æ¥å£ä¾›æ‰€æœ‰ä¾èµ–å®ƒçš„ç±»å»è°ƒç”¨ã€‚</li>
<li>å¥½å¤„ï¼šâ‘  æé«˜ç³»ç»Ÿçš„çµæ´»æ€§å’Œå¯ç»´æŠ¤æ€§ â‘¡ å‡å°‘æ¥å£é—´çš„è€¦åˆã€‚</li>
</ol>
<h3 id="è¿ªç±³ç‰¹åŸåˆ™-demeter-principle">ï¼ˆ6ï¼‰è¿ªç±³ç‰¹åŸåˆ™ <strong>(Demeter
Principle)</strong></h3>
<ol type="1">
<li>å®šä¹‰ï¼š<strong>åªä¸ç›´æ¥çš„æœ‹å‹é€šä¿¡ã€‚</strong>ä¸€ä¸ªç±»åº”è¯¥å¯¹å…¶ä»–ç±»ä¿æŒæœ€å°‘çš„äº†è§£</li>
<li>å®šä¹‰è§£é‡Šï¼šä¹Ÿå°±æ˜¯è¯´ä¸€ä¸ªç±»å¯¹è‡ªå·±ä¾èµ–çš„ç±»çŸ¥é“çš„è¶Šå°‘è¶Šå¥½ã€‚å³å¯¹äºè¢«ä¾èµ–çš„ç±»ï¼Œæ— è®ºé€»è¾‘å¤šå¤æ‚ï¼Œéƒ½å°½é‡åœ°è®²é€»è¾‘å°è£…åœ¨ç±»çš„å†…éƒ¨ï¼Œå¯¹å¤–é™¤äº†æä¾›çš„publicæ–¹æ³•ï¼Œä¸å¯¹å¤–æ³„éœ²ä»»ä½•ä¿¡æ¯ã€‚</li>
<li>å¥½å¤„ï¼šâ‘  æé«˜æ¨¡å—çš„ç‹¬ç«‹æ€§ â‘¡ å‡å°‘ä¾èµ– â‘¢
å¢å¼ºç³»ç»Ÿçš„å¯ç»´æŠ¤æ€§å’Œå¯å¤ç”¨æ€§ã€‚</li>
</ol>
]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>è®¾è®¡æ¨¡å¼</tag>
      </tags>
  </entry>
  <entry>
    <title>hexoåŸºæœ¬æŒ‡ä»¤</title>
    <url>/2025/03/12/Hexo/hexo%E5%9F%BA%E6%9C%AC%E6%8C%87%E4%BB%A4/</url>
    <content><![CDATA[<p>â€ƒâ€ƒå¦‚æœåªæ˜¯æ»¡è¶³å¹³æ—¶å†™å†™åšå®¢ï¼Œæ¨é€åˆ°GitHubæ–¹ä¾¿åœ¨å„å¤„è®¿é—®çš„è¯ï¼Œå…¶å®è¿™ä¸‹é¢è¿™å‡ ä¸ªå‘½ä»¤å°±å¤Ÿäº†ã€‚ä½†æ˜¯è¿™ç¯‡åšæ–‡ä¼šä¸€ç›´æ›´æ–°ï¼Œåšä¸»æœ‰ç”¨åˆ°åˆ«çš„æŒ‡ä»¤ä¼šåŠæ—¶æ¥è¿™é‡Œæ›´æ–°ã€‚</p>
<ol type="1">
<li><p>é¦–å…ˆæ˜¯åˆ›å»ºä¸€ä¸ªæ–°çš„é¡µé¢çš„æŒ‡ä»¤ï¼Œåœ¨ç»ˆç«¯æ•²å‡»ã€‚ç”±äºåšä¸»ä½¿ç”¨çš„æ˜¯WebStormï¼Œæ‰€ä»¥æ˜¯åœ¨åº”ç”¨é‡Œçš„ç»ˆç«¯ç•Œé¢æ•²å‡»çš„ã€‚
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">hexo new <span class="string">&quot;page_name&quot;</span>    <span class="comment"># åˆ›å»ºæ–°çš„é¡µé¢</span></span><br></pre></td></tr></table></figure> <img
src="https://ych-blog.oss-cn-guangzhou.aliyuncs.com/20250312090453.png" /></p></li>
<li><p>å…¶æ¬¡æ˜¯å‡†å¤‡éƒ¨ç½²çº¿ä¸Šç¯å¢ƒéœ€è¦ä½¿ç”¨åˆ°çš„æŒ‡ä»¤ï¼Œä¸‰ä¸ªå‘½ä»¤è¡ŒåŒæ—¶è¿è¡Œï¼Œå°±èƒ½å°†æ–°å†™çš„åšæ–‡æ¨é€åˆ°GitHubå•¦ï¼Œå½“ç„¶éƒ¨ç½²ä¹Ÿéœ€è¦æ—¶é—´ï¼Œåªè¦æŒ‡ä»¤è¿è¡Œä¸æŠ¥é”™ï¼Œå°±è€å¿ƒç­‰å¾…ä¸€ä¸‹å•¦
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">hexo clean   <span class="comment"># æ¸…é™¤ä¹‹å‰ç”Ÿæˆçš„æ¸²æŸ“æ–‡ä»¶</span></span><br><span class="line"></span><br><span class="line">hexo g   <span class="comment"># ç”Ÿæˆæ–°çš„æ¸²æŸ“æ–‡ä»¶</span></span><br><span class="line"></span><br><span class="line">hexo d   <span class="comment"># æ¨é€åˆ°GitHubè¿›è¡Œè‡ªåŠ¨éƒ¨ç½²</span></span><br><span class="line"> </span><br></pre></td></tr></table></figure></p></li>
<li><p>åœ¨æœ¬åœ°æŸ¥çœ‹æ¸²æŸ“æ•ˆæœï¼Œè¿è¡Œè¯¥æŒ‡ä»¤ä¹‹åç›´æ¥è®¿é—®
<code>http://localhost:4000/</code>, å°±å¯ä»¥çœ‹åˆ°æ¸²æŸ“åçš„æœ€æ–°åšå®¢
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">hexo s     <span class="comment"># hexo start çš„æ„æ€ï¼Œå°±æ˜¯å¼€å¯é¡¹ç›® </span></span><br></pre></td></tr></table></figure></p></li>
</ol>
]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
        <tag>æ•™ç¨‹</tag>
      </tags>
  </entry>
  <entry>
    <title>Redisåº”ç”¨</title>
    <url>/2025/03/09/Java/Redis%E5%AE%9E%E6%88%98/</url>
    <content><![CDATA[<h1 id="ä¸€ä½¿ç”¨rediså®ç°ç™»å½•æ ¡éªŒ">ä¸€ã€ä½¿ç”¨Rediså®ç°ç™»å½•æ ¡éªŒ</h1>
<p>â€ƒ
ä¸»è¦éªŒè¯æ˜¯æ ¡éªŒç éªŒè¯å’Œå¯†ç éªŒè¯ï¼Œæˆ‘è§‰å¾—å¯ä»¥è¿™æ ·è®¾è®¡ï¼ŒæŠŠéªŒè¯ç å­˜å…¥åˆ°Redisä¸­ï¼Œç”¨æˆ·ä¿¡æ¯ä½¿ç”¨JWTç”Ÿæˆå¯¹åº”çš„tokenï¼Œç„¶åå°†JWTç”Ÿæˆçš„tokenå­˜å…¥åˆ°Redisä¸­ï¼ˆæ›¿ä»£ç›´æ¥å°†ç”¨æˆ·ä¿¡æ¯å­˜å…¥Redisä¸­ï¼‰ï¼Œè¿™æ ·å¯ä»¥å‡å°‘Redisçš„å†…å­˜è´Ÿæ‹…ã€‚å…·ä½“æµç¨‹å›¾å¦‚ä¸‹æ–¹æ‰€ç¤ºï¼Œ<br />
â€ƒ
ä¸‹å›¾çš„å…·ä½“åšæ³•æ˜¯å°†ç”¨æˆ·çš„ä¿¡æ¯é‡‡ç”¨JWTè¿›è¡ŒåŠ å¯†ä¿å­˜äº†ï¼Œå‡ºäºå®‰å…¨è€ƒè™‘ï¼Œæˆ‘è§‰å¾—å¯¹äºå‰ç«¯é¡µé¢ä¸Šç”¨æˆ·çš„åŸºæœ¬ä¿¡æ¯å¯ä»¥ä½¿ç”¨JWTå­˜å‚¨ï¼Œè¿™æ ·åœ¨è§£æçš„æ—¶å€™ä¹Ÿä¼šæ¯”å»Redisä¸­å†è·å–ä¸€æ¬¡è¦å¿«ã€‚ä½†æ˜¯å¯¹äºç”¨æˆ·ä¸€äº›å¸¸ç”¨çš„æ•æ„Ÿä¿¡æ¯ï¼Œæˆ‘è§‰å¾—è¿˜æ˜¯æœ‰å¿…è¦æ”¾åœ¨Redisä¸­çš„ã€‚
<img src="https://ych-blog.oss-cn-guangzhou.aliyuncs.com/20250309103254.png" style="zoom:50%;" /></p>
<h1 id="äºŒç¼“å­˜">äºŒã€ç¼“å­˜</h1>
<p>ä½¿ç”¨ç¼“å­˜ä¸»è¦ä¼šå­˜åœ¨å‡ ç§é—®é¢˜ï¼šç¼“å­˜é›ªå´©ï¼Œç¼“å­˜å‡»ç©¿ï¼Œç¼“å­˜ç©¿é€ã€‚
<img src="https://ych-blog.oss-cn-guangzhou.aliyuncs.com/20250309110729.png" style="zoom:50%;" /></p>
<h2 id="ç¼“å­˜é›ªå´©">1ã€ ç¼“å­˜é›ªå´©</h2>
<h3 id="ä»€ä¹ˆæ˜¯ç¼“å­˜é›ªå´©">ï¼ˆ1ï¼‰ä»€ä¹ˆæ˜¯ç¼“å­˜é›ªå´©ï¼Ÿ</h3>
<p>å¦‚æœç¼“å­˜åœ¨æŸä¸€ä¸ªæ—¶åˆ»å‡ºç°å¤§è§„æ¨¡keyå¤±æ•ˆï¼Œé‚£ä¹ˆå°±ä¼šå¯¼è‡´å¤§é‡çš„è¯·æ±‚æ‰“åœ¨æ•°æ®åº“ä¸Šé¢ï¼Œå¯¼è‡´æ•°æ®åº“å‹åŠ›å·¨å¤§ï¼Œå¦‚æœé«˜å¹¶å‘çš„æƒ…å†µä¸‹ï¼Œå¯èƒ½ç¬é—´å°±ä¼šå¯¼å¸ˆæ•°æ®åº“å®•æœºã€‚è¿™æ—¶å¦‚æœè¿ç»´é©¬ä¸Šåˆé‡å¯æ•°æ®åº“ï¼Œé©¬ä¸Šåˆä¼šæœ‰æ–°çš„æµé‡æŠŠæ•°æ®åº“æ‰“æ­»ï¼Œè¿™å°±æ˜¯ç¼“å­˜é›ªå´©ã€‚
<img src="https://ych-blog.oss-cn-guangzhou.aliyuncs.com/20250309203618.png" style="zoom:70%;" /></p>
<h3 id="é—®é¢˜åˆ†æ">ï¼ˆ2ï¼‰é—®é¢˜åˆ†æï¼š</h3>
<p>å­˜åœ¨è¿™ç§æƒ…å†µçš„é—®é¢˜æ‰€åœ¨ï¼š</p>
<ul>
<li>Rediså®•æœº</li>
<li>å¤§é‡ç¼“å­˜é‡‡ç”¨äº†ç›¸åŒçš„è¿‡æœŸæ—¶é—´</li>
</ul>
<h3 id="è§£å†³æ–¹æ¡ˆ">ï¼ˆ3ï¼‰è§£å†³æ–¹æ¡ˆï¼š</h3>
<h4 id="äº‹å‰">&lt;1&gt; äº‹å‰ï¼š</h4>
<ol type="1">
<li><p>å‡åŒ€è¿‡æœŸï¼šè®¾ç½®ä¸åŒçš„è¿‡æœŸæ—¶é—´ï¼Œè®©ç¼“å­˜å¤±æ•ˆçš„æ—¶é—´å°½é‡å‡åŒ€ï¼Œé¿å…ç›¸åŒçš„è¿‡æœŸæ—¶é—´å¯¼è‡´ç¼“å­˜é›ªå´©ï¼Œé€ æˆå¤§é‡æ•°æ®åº“çš„è®¿é—®</p></li>
<li><p>åˆ†çº§ç¼“å­˜ï¼šç¬¬ä¸€çº§ç¼“å­˜å¤±æ•ˆçš„åŸºç¡€ä¸Šï¼Œè®¿é—®äºŒçº§ç¼“å­˜ï¼Œæ¯ä¸€çº§ç¼“å­˜çš„å¤±æ•ˆæ—¶é—´éƒ½ä¸ç›¸åŒ</p></li>
<li><p>çƒ­ç‚¹æ•°æ®æ°¸è¿œä¸è¿‡æœŸ</p>
<blockquote>
æ°¸ä¸è¿‡æœŸå®é™…åŒ…å«ä¸¤å±‚æ„æ€ï¼š
<ul>
<li>ç‰©ç†ä¸è¿‡æœŸï¼šé’ˆå¯¹çƒ­ç‚¹keyä¸è®¾ç½®è¿‡æœŸæ—¶é—´</li>
<li>é€»è¾‘è¿‡æœŸï¼šæŠŠè¿‡æœŸæ—¶é—´å­˜åœ¨keyå¯¹åº”çš„valueä¸­ï¼Œå¦‚æœå‘ç°è¦è¿‡æœŸäº†ï¼Œé€šè¿‡ä¸€ä¸ªåå°çš„å¼‚æ­¥çº¿ç¨‹è¿›è¡Œç¼“å­˜çš„æ„å»ºã€‚</li>
</ul>
</blockquote></li>
<li><p>ä¿è¯Redisç¼“å­˜çš„é«˜å¯ç”¨ï¼Œé˜²æ­¢Rediså®•æœºå¯¼è‡´ç¼“å­˜é›ªå´©çš„é—®é¢˜ã€‚å¯ä»¥ä½¿ç”¨
ä¸»ä» + å“¨å…µï¼ŒRedisé›†ç¾¤æ¥é¿å…Rediså…¨ç›˜å´©æºƒçš„æƒ…å†µ</p></li>
</ol>
<h4 id="äº‹ä¸­">&lt;2&gt; äº‹ä¸­ï¼š</h4>
<ol type="1">
<li>äº’æ–¥é”ï¼šåœ¨ç¼“å­˜å¤±æ•ˆåï¼Œé€šè¿‡äº’æ–¥é”æˆ–è€…é˜Ÿåˆ—æ¥æ§åˆ¶è¯»å†™æ•°æ®å†™ç¼“å­˜çš„çº¿ç¨‹æ•°é‡ï¼Œæ¯”å¦‚æŸä¸ªkeyåªå…è®¸ä¸€ä¸ªçº¿ç¨‹æŸ¥è¯¢æ•°æ®å’Œå†™ç¼“å­˜ï¼Œå…¶ä»–çº¿ç¨‹ç­‰å¾…ã€‚è¿™ç§æ–¹å¼ä¼šé˜»å¡å…¶ä»–çº¿ç¨‹ï¼Œæ­¤æ—¶ç³»ç»Ÿçš„ååé‡ä¼šä¸‹é™</li>
<li>ä½¿ç”¨ç†”æ–­æœºåˆ¶ï¼Œé™æµé™çº§ã€‚å½“æµé‡è¾¾åˆ°ä¸€å®šçš„é˜ˆå€¼ï¼Œç›´æ¥è¿”å›â€œç³»ç»Ÿç¹å¿™â€ä¹‹ç±»çš„æç¤ºï¼Œé˜²æ­¢è¿‡å¤šçš„è¯·æ±‚æ‰“åœ¨æ•°æ®åº“ä¸Šå°†æ•°æ®åº“å‡»å®ï¼Œè‡³å°‘èƒ½ä¿è¯ä¸€éƒ¨åˆ†ç”¨æˆ·æ˜¯å¯ä»¥æ­£å¸¸ä½¿ç”¨ï¼Œå…¶ä»–ç”¨æˆ·å¤šåˆ·æ–°å‡ æ¬¡ä¹Ÿèƒ½å¾—åˆ°ç»“æœ</li>
</ol>
<h4 id="äº‹å">&lt;3&gt; äº‹åï¼š</h4>
<p>â€ƒ
å¼€å¯RedisæŒä¹…åŒ–æœºåˆ¶ï¼Œå°½å¿«å›å¤ç¼“å­˜æ•°æ®ï¼Œä¸€æ—¦é‡å¯ï¼Œå°±èƒ½ä»ç£ç›˜ä¸Šè‡ªåŠ¨åŠ è½½æ•°æ®æ¢å¤å†…å­˜ä¸­çš„æ•°æ®ã€‚</p>
<h2 id="ç¼“å­˜å‡»ç©¿">2ã€ç¼“å­˜å‡»ç©¿</h2>
<h3 id="ä»€ä¹ˆæ˜¯ç¼“å­˜å‡»ç©¿">ï¼ˆ1ï¼‰ä»€ä¹ˆæ˜¯ç¼“å­˜å‡»ç©¿</h3>
<p>â€ƒ
ç¼“å­˜å‡»ç©¿è·Ÿç¼“å­˜é›ªå´©æœ‰ç‚¹ç±»ä¼¼ï¼Œç¼“å­˜é›ªå´©æ˜¯å¤§è§„æ¨¡çš„keyå¤±æ•ˆï¼Œè€Œç¼“å­˜å‡»ç©¿åˆ™æ˜¯æŸä¸ªçƒ­ç‚¹keyå¤±æ•ˆï¼Œå¤§è§„æ¨¡å¹¶å‘å¯¹å…¶è¿›è¡Œè¯·æ±‚ï¼Œå°±ä¼šå¯¼è‡´å¤§é‡è¯·æ±‚è¯»ç¼“å­˜è¯»å–ä¸åˆ°æ•°æ®ï¼Œä»è€Œå¯¼è‡´å¤§è§„æ¨¡è¯·æ±‚ç›´æ¥æ‰“åˆ°æ•°æ®åº“ï¼Œå¼•èµ·æ•°æ®åº“å‹åŠ›å‰§å¢ï¼Œè¿™å°±æ˜¯ç¼“å­˜å‡»ç©¿ã€‚</p>
<p><img src="https://ych-blog.oss-cn-guangzhou.aliyuncs.com/20250309135734.png" style="zoom:70%;" /></p>
<h3 id="é—®é¢˜åˆ†æ-1">ï¼ˆ2ï¼‰é—®é¢˜åˆ†æ</h3>
<p>â€ƒ
å…³é”®åœ¨äºæŸä¸ªçƒ­ç‚¹keyå¤±æ•ˆäº†ï¼Œå¯¼è‡´å¤§å¹¶å‘é›†ä¸­æ‰“åœ¨æ•°æ®åº“ä¸Šã€‚æ‰€ä»¥è¦ä»ä¸¤ä¸ªæ–¹é¢è§£å†³ã€‚ç¬¬ä¸€æ˜¯å¦å¯ä»¥è€ƒè™‘çƒ­ç‚¹keyä¸è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œç¬¬äºŒæ˜¯å¦å¯ä»¥è€ƒè™‘é™ä½æ‰“åœ¨æ•°æ®åº“ä¸Šçš„è¯·æ±‚æ•°é‡</p>
<h3 id="è§£å†³æ–¹æ¡ˆ-1">ï¼ˆ3ï¼‰è§£å†³æ–¹æ¡ˆ</h3>
<h4 id="äº’æ–¥é”æˆ–è€…é˜Ÿåˆ—">&lt;1&gt; äº’æ–¥é”æˆ–è€…é˜Ÿåˆ—</h4>
<p>â€ƒ
åœ¨ç¼“å­˜å¤±æ•ˆåï¼Œé€šè¿‡<strong>äº’æ–¥é”æˆ–è€…é˜Ÿåˆ—</strong>æ¥æ§åˆ¶è¯»æ•°æ®å†™ç¼“å­˜çš„çº¿ç¨‹æ•°é‡
#### &lt;2&gt; æ°¸ä¸è¿‡æœŸ â€ƒ çƒ­ç‚¹æ•°æ®ç¼“å­˜<strong>æ°¸ä¸è¿‡æœŸ</strong></p>
<h2 id="ç¼“å­˜ç©¿é€">3ã€ç¼“å­˜ç©¿é€</h2>
<h3 id="ä»€ä¹ˆæ˜¯ç¼“å­˜ç©¿é€">ï¼ˆ1ï¼‰ä»€ä¹ˆæ˜¯ç¼“å­˜ç©¿é€</h3>
<p>â€ƒ
ç¼“å­˜ç©¿é€æ˜¯æŒ‡ç”¨æˆ·è¯·æ±‚çš„æ•°æ®åœ¨<strong>ç¼“å­˜ä¸­ä¸å­˜åœ¨</strong>ï¼Œå³è¯»è¯·æ±‚æ—¶æ²¡æœ‰å‘½ä¸­ç¼“å­˜ï¼ŒåŒæ—¶<strong>æ•°æ®åº“ä¹Ÿä¸å­˜åœ¨è¯¥æ•°æ®</strong>ã€‚å¯¼è‡´ç”¨æˆ·æ¯æ¬¡è¯·æ±‚è¯¥æ•°æ®éƒ½è¦å»æ•°æ®åº“æŸ¥è¯¢ä¸€éã€‚å¦‚æœæœ‰æ¶æ„æ”»å‡»è€…ä¸æ–­è¯·æ±‚ç³»ç»Ÿä¸­ä¸å­˜åœ¨çš„æ•°æ®ï¼Œä¼šå¯¼è‡´çŸ­æ—¶é—´å†…å¤§é‡è¯·æ±‚ç›´æ¥æ‰“åœ¨æ•°æ®åº“ä¸Šï¼Œé€ æˆæ•°æ®åº“å‹åŠ›è¿‡å¤§ï¼Œç”šè‡³å¯¼è‡´æ•°æ®åº“æ‰¿å—ä¸ä½è€Œå®•æœºå´©æºƒã€‚</p>
<p><img src="https://ych-blog.oss-cn-guangzhou.aliyuncs.com/20250309135630.png" style="zoom:70%;" /></p>
<h3 id="é—®é¢˜åˆ†æ-2">ï¼ˆ2ï¼‰é—®é¢˜åˆ†æ</h3>
<p>â€ƒ
ç¼“å­˜ç©¿é€çš„å…³é”®åœ¨äºåœ¨Redisä¸­æŸ¥ä¸åˆ°keyå€¼ã€‚ä¸€èˆ¬å¯¼è‡´ç¼“å­˜ç©¿é€ä¸»è¦æœ‰ä¸¤ç§æƒ…å†µï¼šä¸€ä¸ªæ˜¯ä¸šåŠ¡è¯¯æ“ä½œï¼Œåˆ é™¤äº†æ•°æ®åº“å’Œredisä¸­çš„ç¼“å­˜ï¼›å¦å¤–ä¸€ä¸ªæ˜¯é»‘å®¢æ¶æ„æ”»å‡»ã€‚å‡å¦‚æœ‰é»‘å®¢ä¼ è¿›å¤§é‡çš„ä¸å­˜åœ¨keyï¼Œé‚£ä¹ˆå¤§é‡çš„è¯·æ±‚æ‰“åœ¨æ•°æ®åº“ä¸Šæ˜¯å¾ˆè‡´å‘½çš„é—®é¢˜ã€‚æ‰€ä»¥åœ¨æ—¥å¸¸å¼€å‘ä¸­è¦å¯¹å‚æ•°åšå¥½æ ¡éªŒï¼Œä¸€äº›éæ³•å‚æ•°ï¼Œä¸å¯èƒ½å­˜åœ¨çš„keyå°±ç›´æ¥è¿”å›é”™è¯¯æç¤ºã€‚</p>
<h3 id="è§£å†³æ–¹æ¡ˆ-2">ï¼ˆ3ï¼‰è§£å†³æ–¹æ¡ˆ</h3>
<h4 id="éæ³•è¯·æ±‚çš„é™åˆ¶">&lt;1&gt; éæ³•è¯·æ±‚çš„é™åˆ¶</h4>
<p>â€ƒ
åœ¨APIå…¥å£å¤„åˆ¤æ–­è¯·æ±‚å‚æ•°æ˜¯å¦åˆç†ï¼Œè¯·æ±‚å‚æ•°æ˜¯å¦å«æœ‰éæ³•å€¼ï¼Œè¯·æ±‚å­—æ®µæ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœåˆ¤æ–­å‡ºæ˜¯æ¶æ„è¯·æ±‚åˆ™ç›´æ¥è¿”å›é”™è¯¯ï¼Œé¿å…è¿›ä¸€æ­¥è®¿é—®ç¼“å­˜å’Œæ•°æ®åº“</p>
<h4 id="å°†æ— æ•ˆkeyå­˜æ”¾åœ¨redisä¸­">&lt;2&gt; å°†æ— æ•ˆkeyå­˜æ”¾åœ¨Redisä¸­</h4>
<p>â€ƒ
å½“å‡ºç°RedisæŸ¥ä¸åˆ°æ•°æ®ï¼Œæ•°æ®åº“ä¹ŸæŸ¥ä¸åˆ°æ•°æ®çš„æƒ…å†µï¼Œåˆ™æŠŠè¿™ä¸ªkeyä¿å­˜åˆ°Redisä¸­ï¼Œè¿™æ˜¯value=â€œnullâ€ï¼Œå¹¶è®¾ç½®å…¶è¿‡æœŸæ—¶é—´æçŸ­ï¼Œåé¢å†å‡ºç°æŸ¥è¯¢è¿™ä¸ªkeyçš„è¯·æ±‚çš„æ—¶å€™ï¼Œç›´æ¥è¿”å›nullï¼Œä¸å†éœ€è¦æŸ¥è¯¢æ•°æ®åº“ã€‚ä½†è¯¥æ–¹æ³•å­˜åœ¨ä¸€å®šçš„é—®é¢˜ï¼Œå‡å¦‚ä¼ è¿›æ¥çš„ä¸å­˜åœ¨çš„keyæ¯æ¬¡éƒ½æ˜¯éšæœºçš„ï¼Œé‚£å­˜å…¥Redisä¹Ÿæ²¡æœ‰æ„ä¹‰</p>
<h4 id="ä½¿ç”¨å¸ƒéš†è¿‡æ»¤å™¨">&lt;3&gt; ä½¿ç”¨å¸ƒéš†è¿‡æ»¤å™¨</h4>
<p>â€ƒ
åœ¨ç¼“å­˜ä¹‹å‰å†åŠ ä¸€ä¸ªå¸ƒéš†è¿‡æ»¤å™¨ï¼Œå°†æ•°æ®åº“ä¸­çš„æ‰€æœ‰keyéƒ½å­˜å‚¨åœ¨å¸ƒéš†è¿‡æ»¤å™¨ä¸­ï¼Œåœ¨æŸ¥è¯¢Rediså‰å…ˆå»å¸ƒéš†è¿‡æ»¤å™¨æŸ¥è¯¢keyæ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨å°±ç›´æ¥è¿”å›ï¼Œä¸è®©å…¶è®¿é—®æ•°æ®åº“ï¼Œä»è€Œé¿å…äº†å¯¹åº•å±‚å­˜å‚¨ç³»ç»Ÿçš„æŸ¥è¯¢å‹åŠ›ã€‚</p>
<blockquote>
<p>ä»€ä¹ˆæ˜¯å¸ƒéš†è¿‡æ»¤å™¨ï¼Ÿ</p>
<p>å¸ƒéš†è¿‡æ»¤å™¨å®é™…ä¸Šæ˜¯ä¸€ä¸ªå¾ˆé•¿çš„äºŒè¿›åˆ¶å‘é‡å’Œä¸€ç³»åˆ—éšæœºæ˜ å°„å‡½æ•°ã€‚å¸ƒéš†è¿‡æ»¤å™¨å¯ä»¥ç”¨äºæ£€ç´¢ä¸€ä¸ªå…ƒç´ æ˜¯å¦åœ¨ä¸€ä¸ªé›†åˆä¸­ã€‚å®ƒçš„ä¼˜ç‚¹æ˜¯ç©ºé—´æ•ˆç‡å’ŒæŸ¥è¯¢æ—¶é—´éƒ½æ¯”ä¸€èˆ¬çš„ç®—æ³•è¦å¥½å¾—å¤šï¼Œç¼ºç‚¹æ˜¯æœ‰ä¸€å®šçš„è¯¯è¯†åˆ«ç‡å’Œåˆ é™¤å›°éš¾ã€‚</p>
</blockquote>
<p>å¸ƒéš†è¿‡æ»¤å™¨åŸç†ï¼š</p>
<ul>
<li>ç¬¬ä¸€æ­¥ï¼Œä½¿ç”¨Nä¸ªå“ˆå¸Œå‡½æ•°åˆ†è´å¯¹æ•°æ®åšå“ˆå¸Œè®¡ç®—ï¼Œå¾—åˆ°Nä¸ªå“ˆå¸Œå€¼ï¼›</li>
<li>ç¬¬äºŒæ­¥ï¼Œå°†ç¬¬ä¸€æ­¥å¾—åˆ°çš„Nä¸ªå“ˆå¸Œå€¼å¯¹ä½å›¾æ•°ç»„çš„é•¿åº¦å–æ¨¡ï¼Œå¾—åˆ°æ¯ä¸ªå“ˆå¸Œå€¼åœ¨ä½å›¾æ•°ç»„çš„å¯¹åº”ä½ç½®ï¼›</li>
<li>ç¬¬ä¸‰æ­¥ï¼Œå°†æ¯ä¸ªå“ˆå¸Œå€¼åœ¨ä½å›¾æ•°ç»„çš„å¯¹åº”ä½ç½®çš„å€¼è®¾ç½®ä¸º1ã€‚</li>
</ul>
<p><img src="https://ych-blog.oss-cn-guangzhou.aliyuncs.com/20250309203643.png" style="zoom:80%;" /></p>
<blockquote>
<p>å¦‚ä½•é€‰æ‹©ï¼šé’ˆå¯¹ä¸€äº›æ¶æ„æ”»å‡»ï¼Œæ”»å‡»å¸¦è¿‡æ¥çš„å¤§é‡keyæ˜¯éšæœºçš„ï¼Œè‹¥é‡‡ç”¨ç¼“å­˜ç©ºå¯¹è±¡æ–¹æ¡ˆä¼šç¼“å­˜å¤§é‡ä¸å­˜åœ¨keyçš„æ•°æ®ï¼Œå¹¶ä¸åˆé€‚ã€‚æ‰€ä»¥éœ€è¦é‡‡ç”¨å¸ƒéš†è¿‡æ»¤å™¨æ–¹æ¡ˆï¼Œå¸ƒéš†è¿‡æ»¤å™¨å…ˆè¿‡æ»¤æ‰ä¸å­˜åœ¨çš„keyã€‚é’ˆå¯¹keyå¼‚å¸¸å¤šã€è¯·æ±‚é‡å¤ç‡æ¯”è¾ƒä½çš„æ•°æ®ï¼Œä¼˜å…ˆä½¿ç”¨å¸ƒéš†è¿‡æ»¤å™¨æ–¹æ¡ˆã€‚å¯¹äºç©ºæ•°æ®çš„keyæœ‰é™ï¼Œé‡å¤ç‡æ¯”è¾ƒé«˜çš„ï¼Œåˆ™ä¼˜å…ˆé‡‡ç”¨ç¼“å­˜ç©ºå¯¹è±¡æ–¹æ¡ˆ</p>
</blockquote>
<h2 id="æ±‡æ€»">æ±‡æ€»</h2>
<p><img src="https://ych-blog.oss-cn-guangzhou.aliyuncs.com/20250309181748.png" style="zoom:80%;" /></p>
<h2 id="ç¼“å­˜é¢„çƒ­">4ã€ç¼“å­˜é¢„çƒ­</h2>
<h3 id="ä»€ä¹ˆæ˜¯ç¼“å­˜é¢„çƒ­">ï¼ˆ1ï¼‰ä»€ä¹ˆæ˜¯ç¼“å­˜é¢„çƒ­</h3>
<p>â€ƒ
ç¼“å­˜é¢„çƒ­æ˜¯æŒ‡ç³»ç»Ÿä¸Šçº¿åï¼Œæå‰å°†ç›¸å…³çš„ç¼“å­˜æ•°æ®åŠ è½½åˆ°ç¼“å­˜ç³»ç»Ÿã€‚é¿å…åœ¨ç”¨æˆ·è¯·æ±‚çš„æ—¶å€™ï¼Œå…ˆæŸ¥è¯¢æ•°æ®åº“ï¼Œå†å°†æ•°æ®ç¼“å­˜çš„é—®é¢˜ï¼Œç”¨æˆ·å¯ä»¥ç›´æ¥æŸ¥è¯¢äº‹å…ˆè¢«é¢„çƒ­çš„ç¼“å­˜æ•°æ®ã€‚è‹¥ä¸è¿›è¡Œé¢„çƒ­ï¼Œåˆ™Redisåˆå§‹çŠ¶æ€æ•°æ®ä¸ºç©ºï¼Œç³»ç»Ÿä¸Šçº¿åˆæœŸï¼Œå¯¹äºé«˜å¹¶å‘çš„æµé‡ï¼Œéƒ½ä¼šè®¿é—®åˆ°æ•°æ®åº“ä¸­ï¼Œå¯¹æ•°æ®åº“é€ æˆæµé‡çš„å‹åŠ›ã€‚</p>
<h3 id="ç¼“å­˜é¢„çƒ­å®ç°æ–¹æ¡ˆ">ï¼ˆ2ï¼‰ç¼“å­˜é¢„çƒ­å®ç°æ–¹æ¡ˆ</h3>
<ul>
<li>æ•°æ®é‡ä¸å¤§æ—¶ï¼Œå·¥ç¨‹å¯åŠ¨çš„æ—¶å€™è¿›è¡ŒåŠ è½½ç¼“å­˜åŠ¨ä½œ</li>
<li>æ•°æ®é‡å¤§æ—¶ï¼Œè®¾ç½®ä¸€ä¸ªå®šæ—¶ä»»åŠ¡è„šæœ¬ï¼Œè¿›è¡Œç¼“å­˜çš„åˆ·æ–°</li>
<li>æ•°æ®é‡éå¸¸å¤§æ—¶ï¼Œä¼˜å…ˆä¿è¯çƒ­ç‚¹æ•°æ®è¿›è¡Œæå‰åŠ è½½åˆ°ç¼“å­˜</li>
</ul>
<h2 id="ç¼“å­˜é™çº§">5ã€ç¼“å­˜é™çº§</h2>
<p>â€ƒ
ç¼“å­˜é™çº§æŒ‡ç¼“å­˜å¤±æ•ˆæˆ–ç¼“å­˜æœåŠ¡å™¨æŒ‚æ‰çš„æƒ…å†µä¸‹ï¼Œä¸å»è®¿é—®æ•°æ®åº“ï¼Œç›´æ¥è¿”å›é»˜è®¤æ•°æ®æˆ–è®¿é—®æœåŠ¡çš„å†…å­˜æ•°æ®ã€‚é™çº§ä¸€èˆ¬æ—¶æœ‰æŸçš„æ“ä½œï¼Œæ‰€ä»¥å°½é‡å‡å°‘é™çº§å¯¹ä¸šåŠ¡çš„å½±å“ç¨‹åº¦ã€‚
åœ¨é¡¹ç›®å®æˆ˜ä¸­ï¼Œé€šå¸¸ä¼šå°†éƒ¨åˆ†çƒ­ç‚¹æ•°æ®ç¼“å­˜åˆ°æœåŠ¡çš„å†…å­˜ä¸­ï¼Œè¿™æ ·ä¸€æ—¦ç¼“å­˜å‡ºç°å¼‚å¸¸ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨æœåŠ¡çš„å†…å­˜æ•°æ®ï¼Œä»è€Œé¿å…æ•°æ®åº“é­å—å·¨å¤§å‹åŠ›ã€‚</p>
<h1 id="ä¸‰æ•°æ®åº“ç¼“å­˜ä¿æŒä¸€è‡´æ€§">ä¸‰ã€æ•°æ®åº“ç¼“å­˜ä¿æŒä¸€è‡´æ€§</h1>
<blockquote>
<p>å…ˆè¯´ç»“è®ºï¼šå¤§å¤šæ•°ä¸šåŠ¡é‡‡ç”¨çš„éƒ½æ˜¯<strong>ã€å…ˆæ›´æ–°æ•°æ®åº“ï¼Œå†åˆ é™¤ç¼“å­˜ã€‘</strong>çš„
Cache
Asideï¼ˆæ—è·¯ç¼“å­˜ï¼‰ç­–ç•¥ï¼ŒåŒæ—¶ç»™ç¼“å­˜è®¾å®šè¿‡æœŸæ—¶é—´ï¼Œé˜²æ­¢åœ¨ç¬¬äºŒæ­¥ï¼Œåˆ é™¤ç¼“å­˜æ•°æ®å¤±è´¥å¯¼è‡´æ•°æ®ä¸ä¸€è‡´çš„é—®é¢˜ã€‚</p>
<p>è‹¥ä¸šåŠ¡å¯¹ç¼“å­˜å‘½ä¸­ç‡æœ‰å¾ˆé«˜çš„è¦æ±‚ï¼Œåˆ™å¯ä»¥é‡‡ç”¨ã€å…ˆæ›´æ–°æ•°æ®åº“ï¼Œå†æ›´æ–°ç¼“å­˜ã€‘çš„æ–¹æ¡ˆï¼Œå› ä¸ºä¸»åŠ¨æ›´æ–°ç¼“å­˜å¯ä»¥å‡å°‘ç¼“å­˜æœªå‘½ä¸­çš„æƒ…å†µ</p>
</blockquote>
<h2 id="å…ˆæ›´æ–°æ•°æ®åº“è¿˜æ˜¯å…ˆæ›´æ–°ç¼“å­˜">1ã€å…ˆæ›´æ–°æ•°æ®åº“è¿˜æ˜¯å…ˆæ›´æ–°ç¼“å­˜</h2>
<p>â€ƒ
<strong>éƒ½ä¸å¯è¡Œã€‚</strong>æ— è®ºæ˜¯ã€å…ˆæ›´æ–°æ•°æ®åº“ï¼Œå†æ›´æ–°ç¼“å­˜ã€‘ï¼Œè¿˜æ˜¯ã€å…ˆæ›´æ–°ç¼“å­˜ï¼Œå†æ›´æ–°æ•°æ®åº“ã€‘ï¼Œè¿™ä¸¤ä¸ªæ–¹æ¡ˆéƒ½å­˜åœ¨å¹¶å‘é—®é¢˜ï¼Œå½“ä¸¤ä¸ªè¯·æ±‚å¹¶å‘æ›´æ–°åŒä¸€æ¡æ•°æ®çš„æ—¶å€™ï¼Œå¯èƒ½å‡ºç°æ•°æ®åº“å’Œç¼“å­˜ä¸­çš„æ•°æ®ä¸ä¸€è‡´çš„æƒ…å†µã€‚å¸¸è§çš„ç¼“å­˜æ›´æ–°ç­–ç•¥ä¸»è¦æœ‰ä¸‰ç§ï¼šCache
Asideï¼ˆæ—è·¯ç¼“å­˜ï¼‰ç­–ç•¥ï¼›Read/Write Throughï¼ˆè¯»ç©¿ / å†™ç©¿ï¼‰ç­–ç•¥ï¼›Write
Backï¼ˆå†™å›ï¼‰ç­–ç•¥ï¼›</p>
<p><img src="https://ych-blog.oss-cn-guangzhou.aliyuncs.com/20250309190713.png" style="zoom:50%;" /></p>
<p>ä½†åœ¨å®é™…å¼€å‘ä¸­ï¼ŒRediså’ŒMySQLçš„æ›´æ–°ç­–ç•¥ç”¨çš„æ˜¯Cache
Asideç­–ç•¥ï¼Œå¦å¤–ä¸¤ç§ä¸»è¦æ˜¯ç”¨åœ¨æ“ä½œç³»ç»Ÿä¸­ã€‚</p>
<h2 id="cache-asideæ—è·¯ç¼“å­˜ç­–ç•¥">2ã€ Cache Asideï¼ˆæ—è·¯ç¼“å­˜ï¼‰ç­–ç•¥</h2>
<p>â€ƒ
å…ˆæ›´æ–°æ•°æ®åº“æ•°æ®ï¼Œç„¶åä¸æ›´æ–°ç¼“å­˜ï¼Œç›´æ¥åˆ é™¤ç¼“å­˜ä¸­çš„æ•°æ®ã€‚ç­‰å®¢æˆ·ç«¯è¦è¯»å–æ•°æ®æ—¶ï¼Œå‘ç°ç¼“å­˜ä¸­æ²¡æœ‰ï¼Œå†ä»æ•°æ®åº“ä¸­è¯»å–æ•°æ®æ”¾åˆ°ç¼“å­˜ä¸­ã€‚</p>
<p><img src="https://ych-blog.oss-cn-guangzhou.aliyuncs.com/20250309203658.png" style="zoom:50%;" /></p>
<h3 id="å†™ç­–ç•¥">ï¼ˆ1ï¼‰å†™ç­–ç•¥</h3>
<ul>
<li>æ›´æ–°æ•°æ®åº“ä¸­çš„æ•°æ®</li>
<li>åˆ é™¤ç¼“å­˜ä¸­çš„æ•°æ®</li>
</ul>
<h3 id="è¯»ç­–ç•¥">ï¼ˆ2ï¼‰è¯»ç­–ç•¥</h3>
<ul>
<li>å¦‚æœè¯»å–çš„æ•°æ®å‘½ä¸­äº†ç¼“å­˜ï¼Œåˆ™ç›´æ¥è¿”å›æ•°æ®</li>
<li>å¦‚æœè¯»å–çš„æ•°æ®æœªå‘½ä¸­ç¼“å­˜ï¼Œåˆ™ç›´æ¥è¯»å–æ•°æ®åº“ä¸­çš„æ•°æ®ï¼Œå†å°†æ•°æ®æ”¾å…¥ç¼“å­˜ã€‚</li>
</ul>
<h2 id="å…ˆæ›´æ–°æ•°æ®åº“è¿˜æ˜¯å…ˆåˆ ç¼“å­˜">2.1 å…ˆæ›´æ–°æ•°æ®åº“è¿˜æ˜¯å…ˆåˆ ç¼“å­˜</h2>
<p>â€ƒ
å…ˆè¯´ç»“è®ºï¼Œ<strong>å…ˆæ›´æ–°æ•°æ®åº“ï¼Œå†åˆ ç¼“å­˜</strong>ã€‚ç†è®ºä¸Šæ¥è¯´ï¼Œæ— è®ºæ˜¯ã€å…ˆæ›´æ–°æ•°æ®åº“ï¼Œå†åˆ é™¤ç¼“å­˜ã€‘ï¼Œè¿˜æ˜¯ã€å…ˆåˆ é™¤ç¼“å­˜ï¼Œå†æ›´æ–°æ•°æ®åº“ã€‘éƒ½ä¼šå¯¼è‡´æ•°æ®åº“ä¸ç¼“å­˜æ•°æ®ä¸ä¸€è‡´çš„é—®é¢˜ã€‚ä½†ä¸ºä»€ä¹ˆè¿˜æ˜¯æ¨å´‡ã€å…ˆæ›´æ–°æ•°æ®åº“ï¼Œå†åˆ é™¤ç¼“å­˜ã€‘å‘¢ï¼Ÿ
â€ƒ
ä¸»è¦åŸå› è¿˜æ˜¯åœ¨ã€å…ˆæ›´æ–°æ•°æ®åº“ï¼Œå†æ›´æ–°ç¼“å­˜ã€‘å‡ºç°æ•°æ®åº“ä¸ç¼“å­˜æ•°æ®ä¸ä¸€è‡´çš„æƒ…å†µè¾ƒå°‘ã€‚å› ä¸ºç¼“å­˜çš„å†™å…¥é€šå¸¸è¦è¿œè¿œå¿«äºæ•°æ®åº“çš„å†™å…¥ã€‚å…·ä½“ä¾‹å­å‚è€ƒï¼š<a
href="https://xiaolincoding.com/redis/architecture/mysql_redis_consistency.html#%E5%85%88%E6%9B%B4%E6%96%B0%E6%95%B0%E6%8D%AE%E5%BA%93-%E8%BF%98%E6%98%AF%E5%85%88%E5%88%A0%E9%99%A4%E7%BC%93%E5%AD%98">å°æ—coding</a></p>
<h2 id="readwrite-throughè¯»ç©¿-å†™ç©¿ç­–ç•¥">3ã€ Read/Write Throughï¼ˆè¯»ç©¿ /
å†™ç©¿ï¼‰ç­–ç•¥</h2>
<p>â€ƒ Read / Write
Throughï¼ˆè¯»ç©¿/å†™ç©¿ï¼‰ç­–ç•¥åŸåˆ™æ˜¯åº”ç”¨ç¨‹åºåªå’Œç¼“å­˜äº¤äº’ï¼Œä¸å†å’Œæ•°æ®åº“äº¤äº’ï¼Œè€Œæ˜¯æœ‰ç¼“å­˜å’Œæ•°æ®åº“äº¤äº’ï¼Œç›¸å½“äºæ›´æ–°æ•°æ®åº“çš„æ“ä½œç”±ç¼“å­˜è‡ªå·±ä»£ç†äº†ã€‚</p>
<h3 id="read-through">ï¼ˆ1ï¼‰Read Through</h3>
<p>â€ƒ
å…ˆæŸ¥è¯¢ç¼“å­˜ä¸­æ•°æ®æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨åˆ™ç›´æ¥è¿”å›ï¼›å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™ç”±ç¼“å­˜ç»„ä»¶è´Ÿè´£ä»æ•°æ®åº“æŸ¥è¯¢æ•°æ®ï¼Œå¹¶å°†ç»“æœå†™å…¥åˆ°ç¼“å­˜ç»„ä»¶ï¼Œæœ€åç¼“å­˜ç»„ä»¶å°†æ•°æ®è¿”å›ç»™åº”ç”¨</p>
<h3 id="write-through">ï¼ˆ2ï¼‰Write Through</h3>
<p>å½“æœ‰æ•°æ®æ›´æ–°çš„æ—¶å€™ï¼Œå…ˆæŸ¥è¯¢è¦å†™å…¥çš„æ•°æ®åœ¨ç¼“å­˜ä¸­æ˜¯å¦å·²ç»å­˜åœ¨ï¼š</p>
<ul>
<li>å¦‚æœç¼“å­˜ä¸­æ•°æ®å·²å­˜åœ¨ï¼Œåˆ™æ›´æ–°ç¼“å­˜ä¸­çš„æ•°æ®ï¼Œå¹¶ä¸”ç”±ç¼“å­˜ç»„ä»¶åŒæ­¥æ›´æ–°åˆ°æ•°æ®åº“ä¸­ï¼Œç„¶åç¼“å­˜ç»„ä»¶å‘ŠçŸ¥åº”ç”¨ç¨‹åºæ›´æ–°å®Œæˆã€‚</li>
<li>å¦‚æœç¼“å­˜ä¸­æ•°æ®ä¸å­˜åœ¨ï¼Œåˆ™ç›´æ¥æ›´æ–°æ•°æ®åº“ï¼Œç„¶åè¿”å›ã€‚</li>
</ul>
<h2 id="write-backå†™å›ç­–ç•¥">4ã€Write Backï¼ˆå†™å›ï¼‰ç­–ç•¥</h2>
<p>â€ƒ Write
Backï¼ˆå†™å›ï¼‰ç­–ç•¥åœ¨æ›´æ–°æ•°æ®çš„æ—¶å€™ï¼Œåªæ›´æ–°ç¼“å­˜ï¼ŒåŒæ—¶å°†ç¼“å­˜æ•°æ®è®¾ç½®ä¸ºè„çš„ï¼Œç„¶åç«‹é©¬è¿”å›ï¼Œå¹¶ä¸ä¼šæ›´æ–°æ•°æ®åº“ã€‚å¯¹äºæ•°æ®åº“çš„æ›´æ–°ï¼Œä¼šé€šè¿‡æ‰¹é‡å¼‚æ­¥æ›´æ–°çš„æ–¹å¼è¿›è¡Œã€‚ã€ä¸»è¦ç”¨äºæ“ä½œç³»ç»Ÿã€‘</p>
<h2 id="å°ç»“">5ã€å°ç»“</h2>
<h3
id="ä½¿ç”¨å…ˆåˆ é™¤ç¼“å­˜å†æ›´æ–°æ•°æ®åº“">ï¼ˆ1ï¼‰ä½¿ç”¨ã€å…ˆåˆ é™¤ç¼“å­˜ï¼Œå†æ›´æ–°æ•°æ®åº“ã€‘</h3>
<p>â€ƒ é’ˆå¯¹ã€å…ˆåˆ é™¤ç¼“å­˜ï¼Œå†æ›´æ–°æ•°æ®åº“ã€‘æ–¹æ¡ˆåœ¨ã€è¯» +
å†™ã€‘å¹¶å‘è¯·æ±‚è€Œé€ æˆç¼“å­˜ä¸ä¸€è‡´çš„è§£å†³åŠæ³•æ˜¯<strong>ã€å»¶è¿ŸåŒåˆ ã€‘</strong>ã€‚å°±æ˜¯ç­‰æ›´æ–°æ•°æ®åº“çš„çº¿ç¨‹æ›´æ–°å®Œæ•°æ®åº“ä¹‹åå…ˆç¡çœ ä¸€æ®µæ—¶é—´ï¼Œç„¶åå†åˆ ä¸€æ¬¡ç¼“å­˜ï¼Œå¯ä»¥é¿å…ç”±äºé«˜å¹¶å‘ä½¿ç¼“å­˜ä¸­æ”¾å…¥è„æ•°æ®ã€‚ä½†æ˜¯è¿™ä¸ªç¡çœ æ—¶é—´éœ€è¦å¤§äºå¦å¤–ä¸€ä¸ªè¯»å–æ•°æ®çš„æ—¶é—´ï¼ˆæŸ¥æ•°æ®åº“
+ å°†æ•°æ®æ”¾å…¥ç¼“å­˜ï¼‰ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># åˆ é™¤ç¼“å­˜</span></span><br><span class="line">redis.delKey(X)</span><br><span class="line"><span class="comment"># æ›´æ–°æ•°æ®åº“		</span></span><br><span class="line">db.update(X)</span><br><span class="line"><span class="comment"># ç¡çœ ä¸€æ®µæ—¶é—´</span></span><br><span class="line">thread.sleep(N)</span><br><span class="line"><span class="comment"># åˆ é™¤ç¼“å­˜</span></span><br><span class="line">redis.delKey(X)</span><br></pre></td></tr></table></figure>
<h3
id="ä¿è¯å…ˆæ›´æ–°æ•°æ®åº“å†åˆ é™¤ç¼“å­˜æˆåŠŸ">ï¼ˆ2ï¼‰ä¿è¯ã€å…ˆæ›´æ–°æ•°æ®åº“ï¼Œå†åˆ é™¤ç¼“å­˜ã€‘æˆåŠŸ</h3>
<p>ä¸ºäº†ä¿è¯ã€å…ˆæ›´æ–°æ•°æ®åº“ï¼Œå†åˆ é™¤ç¼“å­˜ã€‘çš„ç¬¬äºŒä¸ªæ­¥éª¤ï¼Œä¹Ÿå°±æ˜¯åˆ é™¤ç¼“å­˜èƒ½æˆåŠŸï¼Œå¯ä»¥ä½¿ç”¨ï¼š</p>
<ul>
<li>æ¶ˆæ¯é˜Ÿåˆ—é‡è¯•ç¼“å­˜çš„åˆ é™¤ï¼Œä¼˜ç‚¹æ˜¯ä¿è¯ç¼“å­˜ä¸€è‡´æ€§é—®é¢˜ï¼Œç¼ºç‚¹æ˜¯å¯¹ä¸šåŠ¡ä»£ç å…¥ä¾µ</li>
<li>è®¢é˜…MySQL binlog + æ¶ˆæ¯é˜Ÿåˆ— +
é‡è¯•ç¼“å­˜çš„åˆ é™¤ï¼Œä¼˜ç‚¹æ˜¯è§„é¿äº†ä»£ç å…¥ä¾µé—®é¢˜ï¼Œä¹Ÿå¾ˆå¥½çš„ä¿è¯ç¼“å­˜ä¸€è‡´æ€§çš„é—®é¢˜ã€‚ç¼ºç‚¹æ˜¯å¼•å…¥çš„ç»„ä»¶è¾ƒå¤šï¼Œå¯¹å›¢é˜Ÿçš„è¿ç»´èƒ½åŠ›æœ‰æ¯”è¾ƒé«˜è¦æ±‚ã€‚</li>
</ul>
<h1 id="å››redisæŒä¹…åŒ–æœºåˆ¶">å››ã€RedisæŒä¹…åŒ–æœºåˆ¶</h1>
<p>RedisæŒä¹…åŒ–æ•°æ®çš„ä¸»è¦æ–¹å¼æœ‰ä¸¤ä¸ªï¼Œåˆ†åˆ«æ˜¯ï¼šRDBå¿«ç…§å’ŒAOFæ—¥å¿—ã€‚</p>
<p><img
src="https://ych-blog.oss-cn-guangzhou.aliyuncs.com/20250309112643.png" /></p>
<h2 id="rdbå¿«ç…§">1ã€ RDBå¿«ç…§</h2>
<h3 id="ç›¸å…³æ¦‚å¿µ">ã€1ã€‘ç›¸å…³æ¦‚å¿µ</h3>
<h4 id="æ¦‚å¿µå’Œå¯ç”¨">ï¼ˆ1ï¼‰æ¦‚å¿µå’Œå¯ç”¨</h4>
<p>è®°å½•æŸä¸€ç¬é—´çš„å†…å­˜æ•°æ®ã€å…¨é‡å¿«ç…§ã€‘ï¼Œè®°å½•çš„æ˜¯å®é™…å…¨éƒ¨æ•°æ®ã€‚æ‰€ä»¥ç›¸æ¯”äºAOFæ–‡ä»¶è®°å½•å‘½ä»¤æ“ä½œæ—¥å¿—ï¼ŒRDBæ¢å¤æ•°æ®çš„æ•ˆç‡è¦é«˜å¾ˆå¤šï¼Œå› ä¸ºç›´æ¥å°†RDBæ–‡ä»¶è¯»å…¥å†…å­˜å³å¯ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># bgsaveæŒ‡ä»¤</span></span><br><span class="line">save <span class="number">900</span> <span class="number">1</span>     <span class="comment"># 900ç§’ä¹‹å†…ï¼Œå¯¹æ•°æ®åº“è¿›è¡Œäº†è‡³å°‘1æ¬¡ä¿®æ”¹</span></span><br><span class="line">save <span class="number">300</span> <span class="number">10</span>		<span class="comment"># 300ç§’ä¹‹å†…ï¼Œå¯¹æ•°æ®åº“è¿›è¡Œäº†è‡³å°‘10æ¬¡ä¿®æ”¹</span></span><br><span class="line">save <span class="number">60</span> <span class="number">10000</span>	<span class="comment"># 60ç§’ä¹‹å†…ï¼Œå¯¹æ•°æ®åº“è¿›è¡Œäº†è‡³å°‘10000æ¬¡ä¿®æ”¹</span></span><br></pre></td></tr></table></figure>
<p>åªè¦æ»¡è¶³ä¸Šé¢æ¡ä»¶çš„ä»»æ„ä¸€ä¸ªï¼Œå°±ä¼šæ‰§è¡Œbgsaveã€‚</p>
<h4 id="ä½¿ç”¨æŒ‡ä»¤">ï¼ˆ2ï¼‰ä½¿ç”¨æŒ‡ä»¤</h4>
<ul>
<li><code>save</code>æŒ‡ä»¤ï¼Œä½¿ç”¨ä¸»çº¿ç¨‹ã€‚è‹¥å†™å…¥RDBæ–‡ä»¶çš„æ—¶é—´å¤ªé•¿ï¼Œä¼šé˜»å¡ä¸»çº¿ç¨‹</li>
<li><code>bgsave</code>æŒ‡ä»¤ï¼Œä½¿ç”¨å­çº¿ç¨‹ã€‚å¯ä»¥é¿å…ä¸»çº¿ç¨‹çš„é˜»å¡</li>
</ul>
<h3 id="æ‰§è¡Œå¿«ç…§æ—¶æ•°æ®èƒ½è¢«ä¿®æ”¹å—">ã€2ã€‘æ‰§è¡Œå¿«ç…§æ—¶ï¼Œæ•°æ®èƒ½è¢«ä¿®æ”¹å—</h3>
<p>ï¼ˆ1ï¼‰saveæŒ‡ä»¤ã€‚ä¸è¡Œï¼Œå½“æ‰§è¡ŒsaveæŒ‡ä»¤æ—¶ï¼Œä½¿ç”¨çš„æ˜¯ä¸»çº¿ç¨‹ç”Ÿæˆå¿«ç…§ï¼Œæ‰€ä»¥æ­¤æ—¶çš„ä¸»çº¿ç¨‹ä¼šè¢«é˜»å¡ï¼Œç„¶åå»æ‰§è¡Œå¿«ç…§æ“ä½œ</p>
<p>ï¼ˆ2ï¼‰bgsaveæŒ‡ä»¤ã€‚
å¯ä»¥ï¼Œbgsaveä½¿ç”¨çš„æ˜¯å­çº¿ç¨‹ï¼Œä¸»çº¿ç¨‹åŸºæœ¬ä¸ä¼šè¢«é˜»å¡ã€‚</p>
<h3
id="å­çº¿ç¨‹å¦‚ä½•æ‹¥æœ‰ä¸»çº¿ç¨‹ç›¸åŒçš„æ•°æ®å‰¯æœ¬">ã€3ã€‘å­çº¿ç¨‹å¦‚ä½•æ‹¥æœ‰ä¸»çº¿ç¨‹ç›¸åŒçš„æ•°æ®å‰¯æœ¬</h3>
<p><strong>å†™æ—¶å¤åˆ¶ã€‚</strong>ä¸»è¿›ç¨‹é€šè¿‡<code>fork</code>ç³»ç»Ÿè°ƒç”¨ç”Ÿæˆå­è¿›ç¨‹ã€‚åŒæ—¶ï¼Œæ“ä½œç³»ç»Ÿä¼šæŠŠä¸»è¿›ç¨‹çš„ã€é¡µè¡¨ã€‘å¤åˆ¶ä¸€ä»½ç»™å­è¿›ç¨‹ï¼Œè¿™ä¸ªé¡µé¢è®°å½•ç€è™šæ‹Ÿåœ°å€å’Œç‰©ç†åœ°å€çš„æ˜ å°„å…³ç³»ï¼Œè€Œä¸ä¼šå¤åˆ¶ç‰©ç†å†…å­˜ï¼Œå³ä¸¤è€…çš„è™šæ‹Ÿç©ºé—´ä¸åŒï¼Œä½†æŒ‡å‘çš„éƒ½æ˜¯åŒä¸€å—ç‰©ç†ç©ºé—´ã€‚å½“çˆ¶è¿›ç¨‹æˆ–å­è¿›ç¨‹åœ¨å‘è¿™å—ç‰©ç†å†…å­˜å‘èµ·å†™æ“ä½œæ—¶ï¼Œç”±äºè¿™å—å†…å­˜çˆ¶å­è¿›ç¨‹åªæœ‰åªè¯»å…±äº«æƒé™ï¼Œæ‰€ä»¥CPUä¼šè§¦å‘å†™ä¿æŠ¤ä¸­æ–­ï¼Œç„¶åæ“ä½œç³»ç»Ÿä¼šåœ¨ã€å†™ä¿æŠ¤ä¸­æ–­å¤„ç†å‡½æ•°ã€‘é‡Œè¿›è¡Œç‰©ç†å†…å­˜çš„å¤åˆ¶ï¼ˆéœ€è¦æ³¨æ„çš„æ˜¯è¿™é‡Œåªä¼šå¤åˆ¶ä¸»è¿›ç¨‹ä¿®æ”¹çš„ç‰©ç†å†…å­˜æ•°æ®ï¼Œæ²¡ä¿®æ”¹çš„ç‰©ç†å†…å­˜æ•°æ®è¿˜æ˜¯å’Œå­è¿›ç¨‹å…±äº«çš„ï¼‰</p>
<h3
id="èƒ½å¦ä¿è¯å¿«ç…§å’Œæ•°æ®åº“æ•°æ®ä¸€è‡´æ€§">ã€4ã€‘èƒ½å¦ä¿è¯å¿«ç…§å’Œæ•°æ®åº“æ•°æ®ä¸€è‡´æ€§</h3>
<p><strong>ä¸èƒ½</strong>ï¼Œå¿«ç…§åªèƒ½ä¿å­˜å¿«ç…§æ‰§è¡Œé‚£ä¸€åˆ»çš„Redisæ‰€æœ‰æ•°æ®ã€‚</p>
<h2 id="aofæ—¥å¿—">2ã€AOFæ—¥å¿—</h2>
<h3 id="ç›¸å…³æ¦‚å¿µ-1">ã€1ã€‘ç›¸å…³æ¦‚å¿µ</h3>
<h4 id="æ¦‚å¿µå’Œå¯ç”¨-1">ï¼ˆ1ï¼‰æ¦‚å¿µå’Œå¯ç”¨</h4>
<p>å¯¹äºRedisçš„æ¯ä¸€æ¬¡<strong>å†™æ“ä½œ</strong>ï¼Œéƒ½ä¼šå°†è¿™æ¬¡å†™æ“ä½œè¿½åŠ åˆ°ä¸€ä¸ªæ–‡ä»¶é‡Œã€‚åœ¨Redisä¸­AOFæŒä¹…åŒ–åŠŸèƒ½é»˜è®¤æ˜¯ä¸å¼€å¯çš„ï¼Œéœ€è¦æˆ‘ä»¬ä¿®æ”¹
redis.conf é…ç½®æ–‡ä»¶ä¸­çš„ä»¥ä¸‹å‚æ•°ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// redis.conf</span><br><span class="line">appendonly       yes   // è¡¨ç¤ºæ˜¯å¦å¼€å¯AOFæŒä¹…åŒ–ï¼ˆé»˜è®¤noï¼Œå…³é—­ï¼‰</span><br><span class="line">appendfilename   &quot;appendonly.aof&quot;   // AOFæŒä¹…åŒ–æ–‡ä»¶çš„åç§°</span><br></pre></td></tr></table></figure>
<h4 id="å…ˆå†™åè®°å½•">ï¼ˆ2ï¼‰å…ˆå†™åè®°å½•</h4>
<p>Redisåªå…ˆæ‰§è¡Œäº†ç›¸å…³çš„å†™æ“ä½œæŒ‡ä»¤åï¼Œæ‰å°†è¯¥æŒ‡ä»¤å†™å…¥åˆ°aofæ–‡ä»¶ä¸­çš„ï¼Œè¿™æ ·å­æœ‰å¤šä¸ªå¥½å¤„ï¼š</p>
<ul>
<li><p>é¿å…é¢å¤–çš„æ£€æŸ¥å¼€é”€</p>
<p>å…ˆæ‰§è¡Œï¼Œå†å†™ã€‚æ‰§è¡Œä¸é€šè¿‡å°±ä¸å†™ã€‚è¯­æ³•æœ‰é—®é¢˜ï¼Œæˆ–è€…é€»è¾‘æœ‰é—®é¢˜ï¼Œåœ¨è¿è¡Œçš„æ—¶å€™å°±èƒ½æ£€æµ‹å‡ºæ¥ï¼Œå‡å°‘äº†å†™è¿›aofæ–‡ä»¶å‰çš„æ£€æŸ¥æ—¶é—´</p></li>
<li><p>ä¸ä¼šé˜»å¡å½“å‰å†™æ“ä½œå‘½ä»¤çš„æ‰§è¡Œ</p>
<p>å½“å‰å†™æ“ä½œæŒ‡ä»¤æ‰§è¡ŒæˆåŠŸåï¼Œæ‰ä¼šå°†å‘½ä»¤è®°å½•åˆ°AOFæ—¥å¿—ä¸­ã€‚</p></li>
</ul>
<h4 id="æ½œåœ¨é£é™©">ï¼ˆ3ï¼‰æ½œåœ¨é£é™©</h4>
<ul>
<li><p>ä¸¢å¤±é£é™©</p>
<p>æ‰§è¡Œå†™æ“ä½œå‘½ä»¤å’Œè®°å½•æ—¥å¿—æ˜¯ä¸¤ä¸ªè¿‡ç¨‹ï¼Œå¹¶ä¸æ˜¯åŸå­æ“ä½œã€‚è‹¥Redisåœ¨è¿˜æ²¡æ¥å¾—åŠå°†å‘½ä»¤å†™å…¥ç¡¬ç›˜æ—¶ï¼ŒæœåŠ¡å™¨å®•æœºï¼Œè¿™ä¸ªæ•°æ®å°±ä¼šæœ‰ä¸¢å¤±çš„é£é™©</p></li>
<li><p>å¯èƒ½ä¼šç»™ã€ä¸‹ä¸€ä¸ªã€‘å‘½ä»¤å¸¦æ¥é˜»å¡é£é™©</p>
<p>ç”±äºRedisåœ¨å†™AOFæ–‡ä»¶æ—¶ï¼Œæ˜¯ä»¥ä¸²è¡Œçš„æ–¹å¼è¿›è¡Œï¼Œæ‰€ä»¥å¯¹å½“å‰çš„å†™Redisçš„æ‰§è¡Œä¸ä¼šé˜»å¡ï¼Œä½†æ˜¯åé¢åœ¨å†™AOFæ–‡ä»¶çš„æ—¶å€™ä¸€æ—¦å‘ç”Ÿé˜»å¡ï¼Œé‚£ä¸‹ä¸€ä¸ªå†™Redisçš„å‘½ä»¤å°±ä¼šæœ‰é˜»å¡é£é™©ã€‚</p></li>
</ul>
<h3 id="ä¸‰ç§å†™å›ç­–ç•¥">ã€2ã€‘ä¸‰ç§å†™å›ç­–ç•¥</h3>
<h4 id="aofå†™å›">ï¼ˆ1ï¼‰AOFå†™å›</h4>
<p>åœ¨ä»‹ç»AOFå†™å›ç­–ç•¥ä¹‹å‰ï¼Œéœ€è¦å…ˆä»‹ç»ä¸€ä¸‹Rediså°†å‘½ä»¤å†™å…¥AOFçš„è¿‡ç¨‹ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p>â‘  Redisæ‰§è¡Œå®Œå†™æ“ä½œå‘½ä»¤åï¼Œä¼šå°†å‘½ä»¤è¿½åŠ åˆ°
<code>server.aof_buf</code>ç¼“å†²åŒºï¼›<br>â‘¡
é€šè¿‡write()ç³»ç»Ÿè°ƒç”¨ï¼Œå°†<code>aof_buf</code>
ç¼“å†²åŒºçš„æ•°æ®å†™å…¥åˆ°AOFæ–‡ä»¶ï¼Œæ­¤æ—¶æ•°æ®å¹¶æ²¡æœ‰å†™å…¥åˆ°ç¡¬ç›˜ï¼Œè€Œæ˜¯æ‹·è´åˆ°äº†å†…æ ¸ç¼“å†²åŒº<code>page cache</code>ï¼Œç­‰å¾…å†…æ ¸å°†æ•°æ®å†™å…¥ç¡¬ç›˜;
<br>â‘¢ å…·ä½“å†…æ ¸ç¼“å†²åŒºçš„æ•°æ®ä»€ä¹ˆæ—¶å€™å†™å…¥åˆ°ç¡¬ç›˜ã€‚ç”±å†…æ ¸å†³å®šã€‚</p>
<p><img src="C:\Users\28778\AppData\Roaming\Typora\typora-user-images\image-20250311141509633.png" alt="image-20250311141509633" style="zoom:50%;" /></p>
<h4 id="ä¸‰ç§å†™å›ç­–ç•¥-1">ï¼ˆ2ï¼‰ä¸‰ç§å†™å›ç­–ç•¥</h4>
<p>Redisä¸»è¦æœ‰ä¸‰ç§å†™å›ç­–ç•¥ï¼Œå¦‚ä¸‹å›¾æ€ç»´å¯¼å›¾æ‰€ç¤ºï¼š</p>
<p><img
src="https://ych-blog.oss-cn-guangzhou.aliyuncs.com/20250311135343.png" /></p>
<h4 id="ä¼˜åŒ–å±€é™">ï¼ˆ3ï¼‰ä¼˜åŒ–å±€é™</h4>
<p>è¿™3ç§å†™å›ç­–ç•¥éƒ½æ— æ³•å®Œç¾è§£å†³ã€ä¸»è¿›ç¨‹é˜»å¡ã€‘å’Œã€å‡å°‘æ•°æ®ä¸¢å¤±ã€‘çš„é—®é¢˜ï¼Œå› ä¸ºä¸¤ä¸ªé—®é¢˜å¯¹ç«‹ï¼Œå°±åƒç®—æ³•é¢˜ä¼˜åŒ–æ—¶é—´å’Œç©ºé—´ä¸€æ ·ï¼Œæœ‰å¾—æœ‰å¤±ã€‚å…·ä½“åŸå› å¦‚ä¸‹ï¼š</p>
<ul>
<li>Always
ç­–ç•¥ï¼Œå¯ä»¥æœ€å¤§ç¨‹åº¦ä¿è¯æ•°æ®ä¸ä¸¢å¤±ï¼Œä½†æ˜¯ç”±äºå®ƒæ¯æ‰§è¡Œä¸€æ¡å†™æ“ä½œå‘½ä»¤å°±åŒæ­¥å°†
AOF å†…å®¹å†™å›ç¡¬ç›˜ï¼Œæ‰€ä»¥æ˜¯ä¸å¯é¿å…ä¼šå½±å“ä¸»è¿›ç¨‹çš„æ€§èƒ½; ã€é€‚åˆé«˜å¯é ã€‘</li>
<li>No ç­–ç•¥ï¼Œæ˜¯äº¤ç”±æ“ä½œç³»ç»Ÿæ¥å†³å®šä½•æ—¶å°† AOF æ—¥å¿—å†…å®¹å†™å›ç¡¬ç›˜ï¼Œç›¸æ¯”äº
Always ç­–ç•¥æ€§èƒ½è¾ƒå¥½ä½†æ˜¯æ“ä½œç³»ç»Ÿå†™å›ç¡¬ç›˜çš„æ—¶æœºæ˜¯ä¸å¯é¢„çŸ¥çš„ï¼Œå¦‚æœ AOF
æ—¥å¿—å†…å®¹æ²¡æœ‰å†™å›ç¡¬ç›˜ï¼Œä¸€æ—¦æœåŠ¡å™¨å®•æœºï¼Œå°±ä¼šä¸¢å¤±ä¸å®šæ•°é‡çš„æ•°æ®ã€‚ã€é€‚åˆé«˜æ€§èƒ½ã€‘</li>
<li>Everysec ç­–ç•¥çš„è¯ï¼Œæ˜¯æŠ˜ä¸­çš„ä¸€ç§æ–¹å¼ï¼Œé¿å…äº† Always
ç­–ç•¥çš„æ€§èƒ½å¼€é”€ï¼Œä¹Ÿæ¯” No
ç­–ç•¥æ›´èƒ½é¿å…æ•°æ®ä¸¢å¤±ï¼Œå½“ç„¶å¦‚æœä¸Šä¸€ç§’çš„å†™æ“ä½œå‘½ä»¤æ—¥å¿—æ²¡æœ‰å†™å›åˆ°ç¡¬ç›˜ï¼Œå‘ç”Ÿäº†å®•æœºï¼Œè¿™ä¸€ç§’å†…çš„æ•°æ®è‡ªç„¶ä¹Ÿä¼šä¸¢å¤±ã€‚ã€æŠ˜ä¸­é€‰æ‹©ã€‘</li>
</ul>
<h4 id="å®ç°åŸç†">ï¼ˆ4ï¼‰å®ç°åŸç†</h4>
<p>åœ¨æŸ¥çœ‹æºç æ—¶ï¼Œä¼šå‘ç°ä¸‰ç§ç­–ç•¥çš„å®ç°éƒ½æ˜¯å»ºç«‹åœ¨æ§åˆ¶<code>fsync()</code>å‡½æ•°çš„è°ƒç”¨æ—¶æœºã€‚è‹¥æƒ³è¦åº”ç”¨ç¨‹åºå‘æ–‡ä»¶å†™å…¥æ•°æ®åï¼Œèƒ½ç«‹é©¬å°†æ•°æ®åŒæ­¥åˆ°ç¡¬ç›˜ï¼Œå°±å¯ä»¥è°ƒç”¨<code>fsync()</code>å‡½æ•°ï¼Œè¿™æ ·å†…æ ¸å°±ä¼šå°†å†…æ ¸ç¼“å†²åŒºçš„æ•°æ®ç›´æ¥å†™å…¥åˆ°ç¡¬ç›˜ï¼Œç­‰åˆ°ç¡¬ç›˜å†™æ“ä½œå®Œæˆåï¼Œè¯¥å‡½æ•°æ‰ä¼šè¿”å›</p>
<ul>
<li>Alwaysç­–ç•¥ï¼šæ¯æ¬¡å†™å…¥AOFæ–‡ä»¶æ•°æ®ï¼Œéƒ½ä¼šè°ƒç”¨<code>fsync</code>å‡½æ•°</li>
<li>Everysecç­–ç•¥ï¼šåˆ›å»ºä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡è°ƒç”¨<code>fsync</code>å‡½æ•°</li>
<li>Noç­–ç•¥ï¼šæ°¸ä¸è°ƒç”¨<code>fsync</code>å‡½æ•°</li>
</ul>
<h3 id="aofé‡å†™æœºåˆ¶">ã€3ã€‘AOFé‡å†™æœºåˆ¶</h3>
<p>â€ƒå…¶å®å°±æ˜¯å‹ç¼©AOFæ–‡ä»¶ï¼Œå‡å°‘AOFæ–‡ä»¶ä¸­çš„æ‰§è¡Œä»£ç ã€‚AOFé‡å†™æœºåˆ¶åœ¨é‡å†™æ—¶ï¼Œä¼šè¯»å–å½“å‰Redisä¸­çš„æ‰€æœ‰é”®å€¼å¯¹ï¼Œç„¶åå¯¹æ¯ä¸€ä¸ªé”®å€¼sç”Ÿæˆä¸€æ¡å‘½ä»¤è®°å½•åˆ°ã€æ–°çš„AOFæ–‡ä»¶ã€‘ï¼Œç­‰å…¨éƒ¨è®°å½•å®Œæˆï¼Œå°†æ–°çš„AOFæ–‡ä»¶æ›¿æ¢æ‰ç°åœ¨çš„AOFæ–‡ä»¶ã€‚</p>
<p>â€ƒä¸¾ä¸ªæ —å­ï¼šå‡å¦‚ç°åœ¨ç‹äº”è¦åœ¨redisç§è®°å½•è‡ªå·±çš„åå­—ï¼Œæœ€å¼€å§‹è®°å½•åå­—ä¸º<code>zs</code>ï¼Œå‘ç°è®°å½•é”™äº†ï¼Œåˆæ”¹æˆ<code>lisi</code>ï¼Œç»“æœå‘ç°è¿˜æ˜¯é”™çš„ï¼Œåˆæ”¹æˆ<code>wangwu</code>ï¼Œå‡ ç•ªæŠ˜è…¾ï¼Œæ­¤æ—¶çš„AOFå°±éœ€è¦è®°å½•3æ¡å†™è¯­å¥ï¼Œè¿™æ ·å¾ˆå¤šå†™æ“ä½œéƒ½æ˜¯è£å†—ä½™çš„ã€‚åœ¨ç»è¿‡AOFé‡å†™åï¼ŒAOFæ–‡ä»¶åªéœ€è¦ä¿å­˜æœ€åä¸€æ¡å†™æ“ä½œå°±å¯ä»¥ã€‚</p>
<p><img src="https://ych-blog.oss-cn-guangzhou.aliyuncs.com/20250311144321.png" style="zoom:67%;" /></p>
<h3 id="aof-åå°é‡å†™">ã€4ã€‘AOF åå°é‡å†™</h3>
<h4 id="ä¸ºä»€ä¹ˆæ˜¯åå°å®Œæˆé‡å†™">ï¼ˆ1ï¼‰ä¸ºä»€ä¹ˆæ˜¯åå°å®Œæˆé‡å†™</h4>
<p>â€ƒä¸ºä»€ä¹ˆæ˜¯åå°é‡å†™å‘¢ï¼Ÿåœ¨ä¸Šæ–‡æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼ŒRedisåœ¨å†™AOFçš„æ—¶å€™ï¼Œéƒ½æ˜¯ä½¿ç”¨äº†ä¸»è¿›ç¨‹ï¼Œï¼ˆå³å†™Redisæ“ä½œå’Œå†™AOFæ“ä½œéƒ½æ˜¯ä¸»è¿›ç¨‹åœ¨æ‰§è¡Œï¼‰ã€‚é‚£ä¸ºä»€ä¹ˆAOFçš„é‡å†™éœ€è¦åå°æ‰§è¡Œå‘¢ï¼Ÿå› ä¸ºAOFé‡å†™ï¼Œæ˜¯éœ€è¦ä»Redisä¸­è¯»å–æ‰€æœ‰é”®å€¼å¯¹ï¼Œç„¶åå¯¹å†ä¸ºæ¯ä¸€ä¸ªé”®å€¼å¯¹ç”Ÿæˆå¯¹åº”çš„Rediså†™æŒ‡ä»¤ï¼Œå†™è¿›æ–°çš„AOFæ–‡ä»¶ä¸­ï¼Œå†æ›¿æ¢åŸæ¥çš„AOFæ–‡ä»¶ï¼Œè¿™ä¸ªè¿‡ç¨‹éå¸¸è€—æ—¶ï¼Œæ‰€ä»¥éœ€è¦ç³»ç»Ÿåœ¨åå°è¿›è¡Œï¼Œä¸ç„¶å¾ˆå®¹æ˜“å°±é˜»å¡äº†å®é™…çš„å†™Redisæ“ä½œã€‚æ‰€ä»¥Redisåœ¨è¿›è¡Œé‡å†™çš„æ—¶å€™æ˜¯<strong>ç”±åå°å­è¿›ç¨‹bgrewriteaofæ¥å®Œæˆ</strong>ã€‚</p>
<h4 id="ä¸ºä»€ä¹ˆæ˜¯å­è¿›ç¨‹">ï¼ˆ2ï¼‰ä¸ºä»€ä¹ˆæ˜¯å­è¿›ç¨‹</h4>
<p>â€ƒè¿›ç¨‹æ‰æ˜¯æ“ä½œç³»ç»Ÿçš„èµ„æºåˆ†é…æœ€å°å•ä½ã€‚å¦‚æœä½¿ç”¨çº¿ç¨‹ï¼Œé‚£ä¹ˆå¤šçº¿ç¨‹ä¹‹é—´ä¼šå…±äº«å†…å­˜ï¼Œé‚£ä¹ˆåœ¨ä¿®æ”¹å…±äº«å†…å­˜æ•°æ®æ—¶ï¼Œéœ€è¦é€šè¿‡åŠ é”æ¥ä¿è¯æ•°æ®çš„å®‰å…¨ï¼Œè¿™æ ·ä¼šé™ä½æ€§èƒ½ã€‚è€Œä½¿ç”¨å­è¿›ç¨‹ï¼Œåˆ›å»ºå­è¿›ç¨‹æ—¶ï¼Œçˆ¶å­è¿›ç¨‹æ˜¯ä»¥<strong>åªè¯»</strong>çš„æ–¹å¼å…±äº«å†…å­˜æ•°æ®çš„ã€‚å½“çˆ¶å­è¿›ç¨‹ä»»æ„ä¸€æ–¹ä¿®æ”¹äº†è¯¥å…±äº«å†…å­˜ï¼Œå°±ä¼šå‘ç”Ÿã€å†™æ—¶å¤åˆ¶ã€‘ï¼ˆå¤åˆ¶çš„ä¹Ÿåªæ˜¯è¦å†™å…¥æˆ–è€…ä¿®æ”¹çš„éƒ¨åˆ†ï¼‰ï¼Œäºæ˜¯çˆ¶å­è¿›ç¨‹å°±æœ‰äº†ç‹¬ç«‹çš„æ•°æ®å‰¯æœ¬ï¼Œè€Œä¸ç”¨åŠ é”æ¥ä¿è¯æ•°æ®å®‰å…¨ã€‚</p>
<h4
id="å­è¿›ç¨‹å¦‚ä½•æ‹¥æœ‰ä¸»è¿›ç¨‹ç›¸åŒçš„æ•°æ®å‰¯æœ¬">ï¼ˆ3ï¼‰å­è¿›ç¨‹å¦‚ä½•æ‹¥æœ‰ä¸»è¿›ç¨‹ç›¸åŒçš„æ•°æ®å‰¯æœ¬</h4>
<p><strong>æ•´ä¸ªè¿‡ç¨‹ï¼š</strong></p>
<p>â‘  ä¸»è¿›ç¨‹é€šè¿‡<code>fork</code>ç³»ç»Ÿè°ƒç”¨ç”Ÿæˆbgrewriteaofå­è¿›ç¨‹ã€‚</p>
<p>â‘¡
åŒæ—¶ï¼Œæ“ä½œç³»ç»Ÿä¼šæŠŠä¸»è¿›ç¨‹çš„ã€é¡µè¡¨ã€‘å¤åˆ¶ä¸€ä»½ç»™å­è¿›ç¨‹ï¼Œè¿™ä¸ªé¡µé¢è®°å½•ç€è™šæ‹Ÿåœ°å€å’Œç‰©ç†åœ°å€çš„æ˜ å°„å…³ç³»ï¼Œè€Œä¸ä¼šå¤åˆ¶ç‰©ç†å†…å­˜ï¼Œå³ä¸¤è€…çš„è™šæ‹Ÿç©ºé—´ä¸åŒï¼Œä½†æŒ‡å‘çš„éƒ½æ˜¯åŒä¸€å—ç‰©ç†ç©ºé—´ã€‚</p>
<p>â‘¢
å½“çˆ¶è¿›ç¨‹æˆ–å­è¿›ç¨‹åœ¨å‘è¿™å—ç‰©ç†å†…å­˜å‘èµ·å†™æ“ä½œæ—¶ï¼Œç”±äºè¿™å—å†…å­˜çˆ¶å­è¿›ç¨‹åªæœ‰åªè¯»å…±äº«æƒé™ï¼Œæ‰€ä»¥CPUä¼šè§¦å‘å†™ä¿æŠ¤ä¸­æ–­ï¼Œç„¶åæ“ä½œç³»ç»Ÿä¼šåœ¨ã€å†™ä¿æŠ¤ä¸­æ–­å¤„ç†å‡½æ•°ã€‘é‡Œè¿›è¡Œç‰©ç†å†…å­˜çš„å¤åˆ¶ï¼ˆéœ€è¦æ³¨æ„çš„æ˜¯è¿™é‡Œåªä¼šå¤åˆ¶ä¸»è¿›ç¨‹ä¿®æ”¹çš„ç‰©ç†å†…å­˜æ•°æ®ï¼Œæ²¡ä¿®æ”¹çš„ç‰©ç†å†…å­˜æ•°æ®è¿˜æ˜¯å’Œå­è¿›ç¨‹å…±äº«çš„ï¼‰<br>
åŒæ—¶ï¼Œç”±äºæ­¤æ—¶å­è¿›ç¨‹è¿˜å¤„äºé‡å†™AOFçŠ¶æ€ï¼Œè¯»å–çš„æ˜¯è¿˜æ˜¯ä¹‹å‰çš„Redisä¸­çš„æ•°æ®ï¼Œæ‰€ä»¥å½“ä¸»è¿›ç¨‹å®Œæˆå†™æ“ä½œæ—¶ï¼Œä¼šå¯¼è‡´å­è¿›ç¨‹è¯»å–çš„Redisæ•°æ®ä¸æœ€æ–°çš„æ•°æ®ä¸ä¸€è‡´ï¼Œä¹Ÿå°±æ˜¯æœ‰â€œè„è¯»â€çš„ç°è±¡ã€‚å¯¹äºè¿™ç§ç°è±¡ï¼ŒRedisä¹Ÿæœ‰åº”å¯¹æªæ–½ã€‚é‚£å°±æ˜¯å°†AOFé‡å†™æœŸé—´ï¼Œä¸»è¿›ç¨‹æ‰§è¡Œçš„æ‰€æœ‰å†™æŒ‡ä»¤ï¼Œéƒ½å†™è¿›<strong>AOFé‡å†™ç¼“å†²åŒº</strong>ã€‚å¦å¤–ï¼ŒRediä¹Ÿä¼šå†™ä¸€ä»½åœ¨<strong>AOFç¼“å†²åŒº</strong>ï¼ˆè¿™ä¸ªæ˜¯ä¸ºäº†é˜²æ­¢å­è¿›ç¨‹å®•æœºï¼ŒåŸæ¥çš„AOFä¹Ÿä¸ä¼šå°‘åœ¨AOFé‡å†™æ—¶å€™çš„å†™æŒ‡ä»¤ï¼‰</p>
<p>â‘£ ç­‰å­è¿›ç¨‹é‡å†™å®Œæˆæ—¶ï¼Œä¸»è¿›ç¨‹ä¼šå°† AOF
é‡å†™ç¼“å†²åŒºçš„æŒ‡ä»¤ï¼Œè¿½åŠ åˆ°æ–°çš„AOFæ–‡ä»¶ä¸­ï¼Œç„¶åç”¨æ–°çš„AOFæ–‡ä»¶æ›¿æ¢åŸæ¥çš„AOFæ–‡ä»¶ï¼Œè¿™æ ·ä¹Ÿå°±ä¿è¯äº†AOFæ–‡ä»¶å’ŒRedisçš„æ•°æ®ä¸€è‡´æ€§ã€‚</p>
<p><img src="https://ych-blog.oss-cn-guangzhou.aliyuncs.com/20250311201538.png" style="zoom:60%;" /></p>
<p><strong>é—®é¢˜ï¼š</strong></p>
<p>æ•´ä¸ªè¿‡ç¨‹ä¼šæœ‰é£é™©å—ï¼Ÿæœ‰ã€‚æ•´ä¸ªè¿‡ç¨‹æœŸé—´ä¼šæœ‰ä¸¤ä¸ªé˜¶æ®µä¼šå¯¼è‡´é˜»å¡çˆ¶è¿›ç¨‹ï¼š</p>
<ul>
<li>åˆ›å»ºå­è¿›ç¨‹æœŸé—´ï¼Œç”±äºè¦å¤åˆ¶çˆ¶ä»Šæ™¨æ›´å¤šé¡µè¡¨ç­‰æ•°æ®ç»“æ„ï¼Œé˜»å¡æ—¶é—´è·Ÿé¡µè¡¨çš„å¤§å°æœ‰å…³ï¼Œé¡µè¡¨è¶Šå¤§ï¼Œé˜»å¡æ—¶é—´è¶Šé•¿</li>
<li>åˆ›å»ºå­è¿›ç¨‹åï¼Œè‹¥å­è¿›ç¨‹æˆ–è€…çˆ¶è¿›ç¨‹ä¿®æ”¹äº†å…±äº«æ•°æ®ï¼Œå°±ä¼šå‘ç”Ÿå†™æ—¶å¤åˆ¶ï¼Œè¿™æœŸé—´ä¼šæ‹·è´ç‰©ç†å†…å­˜ï¼Œè‹¥å†…å­˜è¶Šå¤§ï¼ˆä¼šæœ‰å¤§Keyé—®é¢˜ï¼‰ï¼Œè‡ªç„¶é˜»å¡çš„æ—¶é—´è¶Šé•¿ã€‚</li>
</ul>
<h2 id="rdbå’Œaofåˆä½“">3ã€RDBå’ŒAOFåˆä½“</h2>
<h3 id="ç›¸å…³æ¦‚å¿µ-2">ã€1ã€‘ç›¸å…³æ¦‚å¿µ</h3>
<p>å³å°†RDBå’ŒAOFåˆä½“ä½¿ç”¨ï¼Œè¯¥æ–¹æ³•ä¹Ÿå«åš<strong>æ··åˆä½¿ç”¨AOFæ—¥å¿—å’Œå†…å­˜å¿«ç…§</strong>ï¼Œä¹Ÿå«<strong>æ··åˆæŒä¹…åŒ–</strong>ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">aof-use-rdb-preamble yes	</span><br></pre></td></tr></table></figure>
<h3 id="è¿‡ç¨‹">ã€2ã€‘è¿‡ç¨‹</h3>
<p>ç¼“å’ŒæŒä¹…åŒ–å·¥ä½œåœ¨<strong>AOFæ—¥å¿—é‡å†™è¿‡ç¨‹</strong>ã€‚<br>å½“å¼€å¯äº†æ··åˆæŒä¹…åŒ–ï¼Œåœ¨AOFé‡å†™æ—¥å¿—æ—¶ï¼Œ<code>fork</code>å‡ºæ¥çš„é‡å†™å­è¿›ç¨‹ä¼šå…ˆå°†ä¸ä¸»çº¿ç¨‹å…±äº«çš„å†…å­˜æ•°æ®ä»¥RDBæ–¹å¼å†™å…¥åˆ°AOFæ–‡ä»¶ï¼Œç„¶åä¸»çº¿ç¨‹çš„æ“ä½œå‘½ä»¤ä¼šè¢«è®°å½•åœ¨é‡å†™ç¼“å†²åŒºé‡Œï¼Œé‡å†™ç¼“å†²åŒºé‡Œçš„å¢é‡å‘½ä»¤ä¼šä»¥AOFæ–¹å¼å†™å…¥åˆ°AOFæ–‡ä»¶ï¼Œå†™å…¥å®Œæˆåé€šçŸ¥ä¸»è¿›ç¨‹å°†æ–°çš„å«æœ‰RDBæ ¼å¼å’ŒAOFæ ¼å¼çš„AOFæ–‡ä»¶æ›¿æ¢æ—§çš„AOFæ–‡ä»¶ã€‚</p>
<p>æ¢å¥è¯è¯´ï¼Œä½¿ç”¨äº†æ··åˆæŒä¹…åŒ–ï¼ŒAOFæ–‡ä»¶çš„å‰åŠéƒ¨åˆ†æ—¶RDBæ ¼å¼çš„å…¨é‡æ•°æ®ï¼ŒååŠéƒ¨åˆ†æ—¶AOFæ ¼å¼çš„å¢é‡æ•°æ®ã€‚</p>
<h1 id="äº”rediså®ç°ç§’æ€">äº”ã€Rediså®ç°ç§’æ€</h1>
<h2 id="å…¨å±€å”¯ä¸€id">1ã€ å…¨å±€å”¯ä¸€id</h2>
<p>åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œç”Ÿæˆå…¨å±€å”¯ä¸€idæ˜¯ä¸€ä¸ªå¸¸è§ä¸”é‡è¦çš„éœ€æ±‚ï¼Œå”¯ä¸€IDçš„ç”Ÿæˆéœ€è¦æ»¡è¶³é«˜å¹¶å‘ã€å…¨å±€å”¯ä¸€æ€§å’Œé«˜å¯ç”¨æ€§ã€‚</p>
<h3 id="éœ€è¦å…·å¤‡çš„ç‰¹ç‚¹">ï¼ˆ1ï¼‰éœ€è¦å…·å¤‡çš„ç‰¹ç‚¹</h3>
<ul>
<li>å…¨å±€å”¯ä¸€æ€§ï¼šç”Ÿæˆçš„IDåœ¨æ•´ä¸ªç³»ç»Ÿä¸­å¿…é¡»æ˜¯å”¯ä¸€çš„ï¼Œé¿å…å†²çªã€‚</li>
<li>é«˜å¯ç”¨æ€§ï¼šç”ŸæˆIDçš„æœåŠ¡å¿…é¡»å…·å¤‡é«˜å¯ç”¨æ€§ï¼Œç¡®ä¿åœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹ä¸å‡ºç°æ€§èƒ½ç“¶é¢ˆ</li>
<li>æœ‰åºæ€§ï¼šåœ¨æŸäº›åœºæ™¯ä¸‹ï¼Œéœ€è¦ç”Ÿæˆçš„IDæœ‰ä¸€å®šçš„é¡ºåºæ€§ï¼Œä»¥ä¾¿è¿›è¡Œæ’åºå’Œåˆ†æ</li>
<li>é«˜æ€§èƒ½ï¼šç”ŸæˆIDçš„è¿‡ç¨‹éœ€è¦é«˜æ•ˆï¼Œèƒ½å¤Ÿæ”¯æŒé«˜å¹¶å‘è¯·æ±‚</li>
<li>å®‰å…¨æ€§ï¼šç”ŸæˆIDè¦ä¸å®¹æ˜“è¢«æ‘¸ç´¢å‡ºè§„å¾‹ï¼Œé˜²æ­¢ç½‘ç»œæ”»å‡»</li>
</ul>
<p>Redisç”Ÿæˆå…¨å±€å”¯ä¸€idï¼Œè¿™æ˜¯ç”¨Redisè‡ªå¢çš„æ–¹æ³•ï¼Œæˆ‘ä»¬è¿˜éœ€è¦æ‹¼æ¥ä¸Šå…¶ä»–ä¸œè¥¿ï¼Œæ¯”å¦‚æ—¶é—´æˆ³ä¹‹ç±»çš„</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">stringRedisTemplate.opsForValue().increment(<span class="string">&quot;icr:&quot;</span> + keyPrefix + <span class="string">&quot;:&quot;</span> + date);	</span><br></pre></td></tr></table></figure>
<h2 id="è¶…å–é—®é¢˜">2ã€è¶…å–é—®é¢˜</h2>
<h3 id="é—®é¢˜æè¿°">ï¼ˆ1ï¼‰é—®é¢˜æè¿°</h3>
<p>â€ƒ
ä¸€èˆ¬ç”µå­å•†åŠ¡ç½‘ç«™éƒ½ä¼šé‡åˆ°å¦‚å›¢è´­ã€ç§’æ€ã€ç‰¹ä»·ä¹‹ç±»çš„æ´»åŠ¨ï¼Œè€Œè¿™æ ·çš„æ´»åŠ¨æœ‰ä¸€ä¸ªå…±åŒçš„ç‰¹ç‚¹å°±æ˜¯è®¿é—®é‡æ¿€å¢ã€ä¸Šåƒç”šè‡³ä¸Šä¸‡äººæŠ¢è´­ä¸€ä¸ªå•†å“ã€‚ç„¶è€Œï¼Œä½œä¸ºæ´»åŠ¨å•†å“ï¼Œåº“å­˜è‚¯å®šæ˜¯å¾ˆæœ‰é™çš„ï¼Œå¦‚ä½•æ§åˆ¶åº“å­˜ä¸è®©å‡ºç°è¶…ä¹°ï¼Œä»¥é˜²æ­¢é€ æˆä¸å¿…è¦çš„æŸå¤±æ˜¯æœ€åŸºæœ¬çš„é—®é¢˜ã€‚</p>
<h3 id="äº§ç”ŸåŸå› ">ï¼ˆ2ï¼‰äº§ç”ŸåŸå› </h3>
<p>â€ƒ
åœ¨å¤šä¸ªç”¨æˆ·åŒæ—¶å‘èµ·å¯¹åŒä¸€ä¸ªå•†å“çš„ä¸‹å•è¯·æ±‚æ—¶ï¼Œå…ˆæŸ¥è¯¢å•†å“åº“å­˜ï¼Œå†ä¿®æ”¹å•†å“åº“å­˜ï¼Œä¼šå‡ºç°èµ„æºç«äº‰é—®é¢˜ï¼Œå¯¼è‡´åº“å­˜çš„æœ€ç»ˆç»“æœå‡ºç°å¼‚å¸¸ã€‚é—®é¢˜ï¼š
å½“å•†å“Aä¸€å…±æœ‰åº“å­˜15ä»¶ï¼Œç”¨æˆ·ç”²å…ˆä¸‹å•10ä»¶ï¼Œç”¨æˆ·ä¹™ä¸‹å•8ä»¶ï¼Œè¿™æ—¶å€™åº“å­˜åªèƒ½æ»¡è¶³ä¸€ä¸ªäººä¸‹å•æˆåŠŸï¼Œå¦‚æœä¸¤ä¸ªäººåŒæ—¶æäº¤ï¼Œå°±å‡ºç°äº†è¶…å–çš„é—®é¢˜ã€‚</p>
<p><img src="https://ych-blog.oss-cn-guangzhou.aliyuncs.com/20250310094729.png" style="zoom:67%;" /></p>
<h3 id="è§£å†³æ–¹æ¡ˆ-3">ï¼ˆ3ï¼‰ è§£å†³æ–¹æ¡ˆ</h3>
<p><img src="https://ych-blog.oss-cn-guangzhou.aliyuncs.com/20250310095101.png" style="zoom: 60%;"></p>
<h4 id="æ‚²è§‚é”">ã€1ã€‘ æ‚²è§‚é”</h4>
<p>â€ƒ
æ‚²è§‚é”å¯ä»¥å®ç°å¯¹äºæ•°æ®çš„ä¸²è¡ŒåŒ–æ‰§è¡Œï¼Œæ¯”å¦‚synï¼Œå’Œlockéƒ½æ˜¯æ‚²è§‚é”çš„ä»£è¡¨ï¼ŒåŒæ—¶ï¼Œæ‚²è§‚é”ä¸­åˆå¯ä»¥å†ç»†åˆ†ä¸ºå…¬å¹³é”ï¼Œéå…¬å¹³é”ï¼Œå¯é‡å…¥é”</p>
<h4 id="ä¹è§‚é”">ã€2ã€‘ ä¹è§‚é”</h4>
<p>â€ƒä¼šæœ‰ä¸€ä¸ªç‰ˆæœ¬å·ï¼Œæ¯æ¬¡æ“ä½œæ•°æ®ä¼šå¯¹ç‰ˆæœ¬å·+1ï¼Œå†æäº¤å›æ•°æ®æ—¶ï¼Œä¼šå»æ ¡éªŒæ˜¯å¦æ¯”ä¹‹å‰çš„ç‰ˆæœ¬å¤§1
ï¼Œå¦‚æœå¤§1
ï¼Œåˆ™è¿›è¡Œæ“ä½œæˆåŠŸï¼Œè¿™å¥—æœºåˆ¶çš„æ ¸å¿ƒé€»è¾‘åœ¨äºï¼Œå¦‚æœåœ¨æ“ä½œè¿‡ç¨‹ä¸­ï¼Œç‰ˆæœ¬å·åªæ¯”åŸæ¥å¤§1
ï¼Œé‚£ä¹ˆå°±æ„å‘³ç€æ“ä½œè¿‡ç¨‹ä¸­æ²¡æœ‰äººå¯¹ä»–è¿›è¡Œè¿‡ä¿®æ”¹ï¼Œä»–çš„æ“ä½œå°±æ˜¯å®‰å…¨çš„ï¼Œå¦‚æœä¸å¤§1ï¼Œåˆ™æ•°æ®è¢«ä¿®æ”¹è¿‡ï¼Œå½“ç„¶ä¹è§‚é”è¿˜æœ‰ä¸€äº›å˜ç§çš„å¤„ç†æ–¹å¼æ¯”å¦‚cas.</p>
<p>â€ƒä¹è§‚é”çš„å…¸å‹ä»£è¡¨ï¼šå°±æ˜¯casï¼Œåˆ©ç”¨casè¿›è¡Œæ— é”åŒ–æœºåˆ¶åŠ é”ï¼Œvar5
æ˜¯æ“ä½œå‰è¯»å–çš„å†…å­˜å€¼ï¼Œwhileä¸­çš„var1+var2 æ˜¯é¢„ä¼°å€¼ï¼Œå¦‚æœé¢„ä¼°å€¼ ==
å†…å­˜å€¼ï¼Œåˆ™ä»£è¡¨ä¸­é—´æ²¡æœ‰è¢«äººä¿®æ”¹è¿‡ï¼Œæ­¤æ—¶å°±å°†æ–°å€¼å»æ›¿æ¢ å†…å­˜å€¼ã€‚ å…¶ä¸­do
while
æ˜¯ä¸ºäº†åœ¨æ“ä½œå¤±è´¥æ—¶ï¼Œå†æ¬¡è¿›è¡Œè‡ªæ—‹æ“ä½œï¼Œå³æŠŠä¹‹å‰çš„é€»è¾‘å†æ“ä½œä¸€æ¬¡ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> var5;</span><br><span class="line"><span class="keyword">do</span> &#123;</span><br><span class="line">    var5 = <span class="built_in">this</span>.getIntVolatile(var1, var2);</span><br><span class="line">&#125; <span class="keyword">while</span>(!<span class="built_in">this</span>.compareAndSwapInt(var1, var2, var5, var5 + var4));</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> var5;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>CASä¸€èˆ¬æ˜¯Javaè™šæ‹Ÿæœºåœ¨å®ç°JUCçš„æ—¶å€™ä½¿ç”¨çš„ï¼ŒJavaåœ¨UnSafeæ–‡ä»¶ä¸­ç¼–å†™äº†å¾ˆå¤šç›´æ¥è°ƒç”¨ç³»ç»Ÿåº•å±‚å‡½æ•°çš„åŠŸèƒ½æ–¹æ³•ï¼Œè¯¥ç±»ä¸­å°±å®ç°äº†CASã€‚</p>
<p>å¯¹äºä¸€èˆ¬çš„è¶…å–é—®é¢˜ï¼Œä¸»æµæ–¹æ³•è¿˜æ˜¯ä½¿ç”¨ä¹è§‚é”æˆ–è€…åŸºäºRedisçš„luaè„šæœ¬è¿›è¡Œè§£å†³</p>
</blockquote>
<h3 id="è¡ç”Ÿæ”¹è‰¯">ï¼ˆ4ï¼‰è¡ç”Ÿæ”¹è‰¯</h3>
<h4 id="é—®é¢˜">ã€1ã€‘é—®é¢˜</h4>
<p>â€ƒå¯¹äºç”µå•†çš„è¶…å–é—®é¢˜ï¼Œå¦‚æœåªæ˜¯ç®€å•è®©ç¨‹åºåœ¨æ‰£å‡åº“å­˜æ—¶ï¼Œåˆ¤æ–­åº“å­˜ä¸æ“ä½œå‰çš„æ•°å€¼æ˜¯å¦ä¸€è‡´ï¼Œä¼šå¯¼è‡´å…¶ä»–å¤§é‡å¹¶å‘æ“ä½œå¤±è´¥ã€‚æ¯”å¦‚ç°åœ¨æœ‰100ä¸ªè¿›ç¨‹æ‰“è¿›æ¥ï¼ŒæŸ¥è¯¢åˆ°å‰©ä½™çš„åº“å­˜éƒ½æ˜¯1000ä¸ªï¼Œç»è¿‡ä¸€é¡¿æ“ä½œåï¼Œç°åœ¨è¦æ‰§è¡Œæ‰£å‡åº“å­˜çš„æ“ä½œã€‚æ­¤æ—¶æˆ‘ä»¬é‡‡ç”¨äº†ä¹è§‚é”è¿›è¡Œæ›´æ–°ï¼Œå¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">update table set åº“å­˜ = åº“å­˜ - 1 where id = 1 and åº“å­˜ = 1000</span><br></pre></td></tr></table></figure>
<p>â€ƒå¦‚æœæ›´æ–°æ–¹å¼å¦‚ä¸Šæ‰€è¿°ï¼Œé‚£ä¹ˆç¨‹åºåœ¨è¿è¡Œæ—¶ï¼Œå› ä¸ºæˆ‘ä»¬çš„ç¨‹åºå¹¶æ²¡æœ‰åƒCASé‚£æ ·å­å®ç°è‡ªæ—‹æ“ä½œï¼Œæ‰€ä»¥è¿™æ‰“è¿›æ¥çš„100ä¸ªè¿›ç¨‹å°±åªæœ‰ä¸€ä¸ªä¼šæˆåŠŸã€‚è¿™å¯¹ç”¨æˆ·çš„ä½¿ç”¨ä½“éªŒæ˜¯éå¸¸ä¸å¥½çš„ã€‚</p>
<h4 id="è§£å†³">ã€2ã€‘è§£å†³</h4>
<p>æˆ‘ä»¬éœ€è¦æ”¹è‰¯ä¸€ä¸‹æ•°æ®åº“çš„æ‰§è¡Œæ“ä½œï¼Œå¯¹äºåº“å­˜è€Œè¨€ï¼Œåªè¦åº“å­˜å¤§äº0ï¼Œæˆ‘ä»¬å°±èƒ½å–ã€‚æ‰€ä»¥ï¼Œæ²¡å¿…è¦æ¯ä¸ªçº¿ç¨‹æ›´æ–°æ—¶éƒ½è¦ç¡®ä¿å½“å‰åº“å­˜è·Ÿæ“ä½œå‰çš„åº“å­˜ä¸€æ ·ï¼Œäºæ˜¯å¯ä»¥è°ƒæ•´ä»£ç æˆï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">update table set åº“å­˜ = åº“å­˜ - 1 where id = 1 and åº“å­˜ &gt; 0</span><br></pre></td></tr></table></figure>
<h2 id="ä¸€äººä¸€å•">3ã€ä¸€äººä¸€å•</h2>
<h3 id="é—®é¢˜æè¿°-1">ï¼ˆ1ï¼‰é—®é¢˜æè¿°</h3>
<p>â€ƒÂ å¾ˆå¤šæ—¶å€™æœ‰äº›å•†å®¶è¦æ‹¿å‡ºä¸€éƒ¨åˆ†å¥½ç”¨ä¸”è´µé‡çš„äº§å“æ¥åšä¿ƒé”€å¼•æµï¼Œè€Œå°†è¯¥ç‰©å“è¿›è¡Œä½ä»·å”®å‡ºï¼Œæ­¤æ—¶ä¸ºäº†é˜²æ­¢æœ‰äººæ¶æ„ä½ä¹°é«˜å–ä»¥åŠä¿è¯å¼•æµçš„æ•ˆæœï¼Œæˆ‘ä»¬è¦ä¿è¯ä¸€ä¸ªç”¨æˆ·åªèƒ½ä¹°ä¸€æ¬¡ï¼Œä¹Ÿå°±ä¸€äººä¸€å•.</p>
<h3 id="äº§ç”ŸåŸå› -1">ï¼ˆ2ï¼‰äº§ç”ŸåŸå› </h3>
<p>â€ƒä¸€äººä¸€å•çš„å®ç°æ­¥éª¤æ˜¯åœ¨åŸæ¥ä¸‹å•é€»è¾‘çš„åˆ¤æ–­åº“å­˜æ˜¯å¦è¶³å¤Ÿä¹‹åå»æŸ¥è¯¢æ•°æ®åº“çœ‹æ˜¯å¦è¯¥ç”¨æˆ·çš„æ˜¯å¦å·²ç»å­˜åœ¨è®¢å•ï¼Œå¦‚æœå­˜åœ¨åˆ™ä¸èƒ½ä¸‹å•æˆåŠŸï¼Œå¦‚æœä¸å­˜åœ¨åˆ™ç»§ç»­ä¸‹å•ã€‚</p>
<p>â€ƒç”±äºè¯¥ç‰©å“çš„ç‰¹æ®Šæ€§ï¼Œå½“å¼€å§‹ç§’æ€æ—¶çš„å¹¶å‘é‡æ˜¯æé«˜çš„ï¼Œè¿™å°±ä¼šäº§ç”Ÿè¿™æ ·çš„é—®é¢˜ï¼Œå¤šä¸ªçº¿ç¨‹æŸ¥è¯¢åº“å­˜ååˆ¤æ–­è¯¥ç”¨æˆ·æ˜¯å¦å­˜å·²ç»å­˜åœ¨è®¢å•æ—¶ï¼Œæ­¤æ—¶è¿™äº›çº¿ç¨‹éƒ½æ²¡æœ‰æŸ¥è¯¢åˆ°è®¢å•ä¿¡æ¯è¯´æ˜è¯¥ç”¨æˆ·æœªä¸‹è¿‡å•ï¼Œè®©è¿™äº›çº¿ç¨‹è¿›è¡Œåç»­ä¸‹å•æ“ä½œï¼Œä½†æ˜¯åœ¨æŸ¥è¯¢åæœ‰çº¿ç¨‹ä¸‹å•æˆåŠŸäº†ï¼Œä½†æ˜¯å…¶ä»–çº¿ç¨‹å·²ç»åˆ¤æ–­ä¸ºæœªä¸‹è¿‡å•ï¼Œè¿˜åœ¨è¿›è¡Œåç»­çš„ä¸‹å•æ“ä½œï¼Œè¿™å°±å¯¼è‡´ä¸€ä¸ªç”¨æˆ·ä¸‹å•å¥½å‡ æ¬¡</p>
<p><img src="https://ych-blog.oss-cn-guangzhou.aliyuncs.com/20250310134922.png" style="zoom:50%;" /></p>
<h3 id="è§£å†³æ–¹æ¡ˆ-4">ï¼ˆ3ï¼‰è§£å†³æ–¹æ¡ˆ</h3>
<p>ã€1ã€‘è§£å†³ä¸€</p>
<p>â€ƒå¯ä»¥å°†ä¸Šè¿°çš„<strong>æŸ¥è¯¢æ˜¯å¦ä¸‹è¿‡å•ä¸åç»­çš„åº“å­˜æ‰£å‡æ“ä½œè¿›è¡ŒåŠ é”</strong>ã€‚ä½†åœ¨åŠ é”æ—¶éœ€è¦æ§åˆ¶å¥½é”çš„ç²’åº¦ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Transactional</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">synchronized</span> Result <span class="title function_">createVoucherOrder</span><span class="params">(Long voucherId)</span> &#123;</span><br><span class="line">	<span class="comment">// æŸ¥è¯¢æ˜¯å¦å·²ç»ä¸‹å•</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æ‰£å‡åº“å­˜</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ã€2ã€‘é—®é¢˜ä¸€</p>
<p>â€ƒå¦‚æœç»™æ–¹æ³•åŠ é”ï¼Œå¯¹äºæ¯ä¸€ä¸ªç”¨æˆ·è¿›ç¨‹ï¼Œè¿›å…¥ç¨‹åºæ—¶éƒ½éœ€è¦è¿›è¡Œé”ç«äº‰ï¼Œè¿™æ ·å¯¹å¯¼è‡´åŒä¸€æ—¶é—´åªæœ‰ä¸€ä¸ªç”¨æˆ·çš„è¿›ç¨‹å¯ä»¥æ‰§è¡Œæ“ä½œï¼Œç›´æ¥æŠŠå¹¶å‘æ‰§è¡Œå˜æˆäº†ç”¨æˆ·æ’é˜Ÿæ‰§è¡Œï¼ˆä¸²è¡Œæ‰§è¡Œï¼‰</p>
<p>ã€3ã€‘è§£å†³äºŒ</p>
<p>â€ƒä¸€äººä¸€å•çš„çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œå…¶å®æ˜¯å•ä¸ªç”¨æˆ·åœ¨åŒä¸€æ—¶é—´è§¦å‘äº†å¤šä¸ªçº¿ç¨‹è®¿é—®çš„é—®é¢˜ï¼Œæ‰€ä»¥æˆ‘ä»¬åŠ é”çš„ç²’åº¦å¯ä»¥é’ˆå¯¹å•ä¸ªç”¨æˆ·è¿›è¡ŒåŠ é”ï¼Œé‚£ä¹ˆï¼Œæˆ‘ä»¬å¯ä»¥è·å–ç”¨æˆ·idï¼Œå¯¹ç”¨æˆ·idè¿›è¡ŒåŠ é”ã€‚éœ€è¦æ³¨æ„çš„æ—¶ï¼Œç”¨æˆ·idæ˜¯ä¸€ä¸ªStringçš„å­—ç¬¦ä¸²å˜é‡ï¼Œå¦‚æœæˆ‘ä»¬ç›´æ¥ä½¿ç”¨userId.toString()
ä»–æ‹¿åˆ°çš„å¯¹è±¡å®é™…ä¸Šæ˜¯ä¸åŒçš„å¯¹è±¡ï¼Œnewå‡ºæ¥çš„å¯¹è±¡ï¼Œæˆ‘ä»¬ä½¿ç”¨é”å¿…é¡»ä¿è¯é”å¿…é¡»æ˜¯åŒä¸€æŠŠï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä½¿ç”¨intern()æ–¹æ³•ã€‚æˆ‘ä»¬çš„ä»£ç å°±å¯ä»¥ä¿®æ”¹æˆå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Transactionl</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">createVoucherOrder</span><span class="params">(Long userId)</span> &#123;</span><br><span class="line">    <span class="keyword">synchronized</span>(userId.toString().intern())&#123;</span><br><span class="line">        <span class="comment">// æŸ¥è¯¢æ˜¯å¦å·²ç»ä¸‹å•</span></span><br><span class="line"> </span><br><span class="line">        <span class="comment">// æ‰£å‡åº“å­˜</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ã€4ã€‘é—®é¢˜äºŒ</p>
<p>â€ƒÂ ä¸Šè¿°åŠ é”åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šä¿è¯äº†ä¸€äººä¸€å•çš„çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œä½†æ˜¯è¿˜æœ‰ä¸€ç§æƒ…å†µï¼Œå°±æ˜¯ä¸Šè¿°æˆ‘ä»¬æåˆ°çš„çº¿ç¨‹1è¿›è¡Œæ“ä½œåæŠŠé”é‡Šæ”¾äº†ï¼Œä½†æ˜¯äº‹åŠ¡è¿˜æ²¡æäº¤ä¹Ÿå°±æ˜¯æ•°æ®åº“ä¸­å·²ä¸‹å•è¿˜æ²¡æœ‰è®¢å•ä¿¡æ¯ï¼Œæ­¤æ—¶çº¿ç¨‹2è·å–åˆ°äº†é”ï¼ŒæŸ¥è¯¢æ•°æ®åº“ä¸­æ˜¯å¦å­˜åœ¨è®¢å•ä¿¡æ¯æ—¶æ²¡æœ‰æŸ¥è¯¢åˆ°ï¼Œäºæ˜¯åˆå»è¿›è¡Œäº†æ‰£å‡åº“å­˜æ“ä½œï¼Œæ­¤æ—¶è¯¥ç”¨æˆ·ä¸€ä¸ªäººåˆä¸‹äº†å¤šå•ã€‚</p>
<p>ã€5ã€‘è§£å†³ä¸‰</p>
<p>â€ƒÂ ä¸Šè¿°é—®é¢˜äº§ç”Ÿçš„åŸå› æ˜¯ï¼Œé”é‡Šæ”¾åœ¨äº‹åŠ¡æäº¤ä¹‹å‰ã€‚æˆ‘ä»¬éœ€è¦åšçš„å°±æ˜¯ä¿è¯é”é‡Šæ”¾åœ¨äº‹åŠ¡æäº¤ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥å°†åŠ é”çš„ä½ç½®è¿›è¡Œä¿®æ”¹ï¼Œåœ¨è°ƒç”¨è¯¥æ–¹æ³•çš„åœ°æ–¹è¿›è¡ŒåŠ é”ã€‚ä¿®æ”¹åçš„ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">(Long userId)</span> &#123;</span><br><span class="line">    <span class="comment">// æŸ¥è¯¢åº“å­˜åˆ¤æ–­æ˜¯å¦è¶³å¤Ÿ</span></span><br><span class="line"> </span><br><span class="line">    <span class="comment">// æŸ¥è¯¢æ˜¯å¦å·²ä¸‹å•ä¸æ‰£å‡åº“å­˜</span></span><br><span class="line">    <span class="keyword">synchronized</span>(userId.toString().intern())&#123;</span><br><span class="line">        createVoucherOrder</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="meta">@Transactionl</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">createVoucherOrder</span><span class="params">(Long userId)</span> &#123;</span><br><span class="line">    <span class="comment">// æŸ¥è¯¢æ˜¯å¦å·²ç»ä¸‹å•</span></span><br><span class="line"> </span><br><span class="line">     <span class="comment">// æ‰£å‡åº“å­˜</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="åˆ†å¸ƒå¼é—®é¢˜">ï¼ˆ4ï¼‰åˆ†å¸ƒå¼é—®é¢˜</h3>
<p>â€ƒä¸Šè¿°æ‚²è§‚é”è§£å†³æ€è·¯å¯ä»¥è§£å†³å•æœºç¯å¢ƒä¸‹çš„çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œä½†æ˜¯åœ¨é›†ç¾¤æ¨¡å¼ä¸‹å°±ä¸è¡Œäº†ï¼Œåœ¨ä¸åŒçš„æœåŠ¡å™¨è¿›è¡Œéƒ¨ç½²è¯¥æœåŠ¡æ—¶ï¼Œç”±äºä¸åŒæœåŠ¡å™¨æœ‰ç€ä¸åŒçš„JVMï¼Œå…¶çº¿ç¨‹é”çš„ç›‘è§†å™¨ä¹Ÿä¸åŒï¼Œæ‰€ä»¥åŠ é”ä¸èƒ½è§£å†³é›†ç¾¤ç¯å¢ƒä¸‹çš„å®‰å…¨é—®é¢˜</p>
<p><img src="https://ych-blog.oss-cn-guangzhou.aliyuncs.com/20250310141541.png" style="zoom:50%;" /></p>
<h2 id="åˆ†å¸ƒå¼é”">4ã€åˆ†å¸ƒå¼é”</h2>
<h3 id="åŸºæœ¬åŸç†">ï¼ˆ1ï¼‰åŸºæœ¬åŸç†</h3>
<p>â€ƒåˆ†å¸ƒå¼é”ï¼šæ»¡è¶³åˆ†å¸ƒå¼ç³»ç»Ÿæˆ–é›†ç¾¤æ¨¡å¼ä¸‹å¤šè¿›ç¨‹å¯è§å¹¶ä¸”äº’æ–¥çš„é”ã€‚åˆ†å¸ƒå¼é”éœ€è¦å…·å¤‡å¤šè¿›ç¨‹å¯è§ã€äº’æ–¥ã€é«˜å¯ç”¨ã€é«˜æ€§èƒ½ã€å®‰å…¨æ€§ç­‰ç‰¹ç‚¹ã€‚åˆ†å¸ƒå¼é”çš„æ ¸å¿ƒæ€æƒ³æ˜¯è®©å„ä¸ªæœåŠ¡å™¨ä½¿ç”¨åŒä¸€æŠŠé”ï¼Œåªè¦ä½¿ç”¨çš„éƒ½æ˜¯åŒä¸€æŠŠé”ï¼Œå°±èƒ½é”ä½çº¿ç¨‹ï¼Œä¸è®©çº¿ç¨‹æ‰§è¡Œã€‚</p>
<p><img src="https://ych-blog.oss-cn-guangzhou.aliyuncs.com/20250310141854.png" style="zoom:50%;" /></p>
<h3 id="åŸºæœ¬æ–¹æ³•">ï¼ˆ2ï¼‰åŸºæœ¬æ–¹æ³•</h3>
<p><img src="https://ych-blog.oss-cn-guangzhou.aliyuncs.com/20250310142616.png" style="zoom:67%;" /></p>
<h3 id="å®ç°ä»£ç ">ï¼ˆ3ï¼‰å®ç°ä»£ç </h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è·å–é”</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String KEY_PREFIX=<span class="string">&quot;lock:&quot;</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">tryLock</span><span class="params">(<span class="type">long</span> timeoutSec)</span> &#123;</span><br><span class="line">    <span class="comment">// è·å–çº¿ç¨‹æ ‡ç¤º</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">threadId</span> <span class="operator">=</span> Thread.currentThread().getId()</span><br><span class="line">    <span class="comment">// è·å–é”ï¼Œå¹¶è®¾ç½®è¶…æ—¶æ—¶é—´ï¼Œé˜²æ­¢æ­»é”</span></span><br><span class="line">    <span class="type">Boolean</span> <span class="variable">success</span> <span class="operator">=</span> stringRedisTemplate.opsForValue()</span><br><span class="line">            .setIfAbsent(KEY_PREFIX + name, threadId + <span class="string">&quot;&quot;</span>, timeoutSec, TimeUnit.SECONDS);</span><br><span class="line">    <span class="keyword">return</span> Boolean.TRUE.equals(success);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é‡Šæ”¾é”</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">unlock</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">//é€šè¿‡delåˆ é™¤é”</span></span><br><span class="line">    stringRedisTemplate.delete(KEY_PREFIX + name);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="å­˜åœ¨é—®é¢˜">ï¼ˆ4ï¼‰å­˜åœ¨é—®é¢˜</h3>
<h4 id="redisåˆ†å¸ƒå¼é”è¯¯åˆ ">ã€1ã€‘Redisåˆ†å¸ƒå¼é”è¯¯åˆ </h4>
<p><strong>é—®é¢˜ï¼š</strong>æŒæœ‰é”çš„çº¿ç¨‹åœ¨é”çš„å†…éƒ¨å‡ºç°äº†é˜»å¡ï¼Œå¯¼è‡´ä»–çš„é”è‡ªåŠ¨é‡Šæ”¾ï¼Œè¿™æ—¶å…¶ä»–çº¿ç¨‹ï¼Œçº¿ç¨‹2æ¥å°è¯•è·å¾—é”ï¼Œå°±æ‹¿åˆ°äº†è¿™æŠŠé”ï¼Œç„¶åçº¿ç¨‹2åœ¨æŒæœ‰é”æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œçº¿ç¨‹1ååº”è¿‡æ¥ï¼Œç»§ç»­æ‰§è¡Œï¼Œè€Œçº¿ç¨‹1æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œèµ°åˆ°äº†åˆ é™¤é”é€»è¾‘ï¼Œæ­¤æ—¶å°±ä¼šæŠŠæœ¬åº”è¯¥å±äºçº¿ç¨‹2çš„é”è¿›è¡Œåˆ é™¤ï¼Œè¿™å°±æ˜¯è¯¯åˆ åˆ«äººé”çš„æƒ…å†µè¯´æ˜ã€‚</p>
<p><img src="https://ych-blog.oss-cn-guangzhou.aliyuncs.com/20250310143057.png" style="zoom:50%;" /></p>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong>åœ¨æ¯ä¸ªçº¿ç¨‹é‡Šæ”¾é”çš„æ—¶å€™ï¼Œå»åˆ¤æ–­ä¸€ä¸‹å½“å‰è¿™æŠŠé”æ˜¯å¦å±äºè‡ªå·±ï¼Œå¦‚æœå±äºè‡ªå·±ï¼Œåˆ™ä¸è¿›è¡Œé”çš„åˆ é™¤ï¼Œå‡è®¾è¿˜æ˜¯ä¸Šè¾¹çš„æƒ…å†µï¼Œçº¿ç¨‹1å¡é¡¿ï¼Œé”è‡ªåŠ¨é‡Šæ”¾ï¼Œçº¿ç¨‹2è¿›å…¥åˆ°é”çš„å†…éƒ¨æ‰§è¡Œé€»è¾‘ï¼Œæ­¤æ—¶çº¿ç¨‹1ååº”è¿‡æ¥ï¼Œç„¶ååˆ é™¤é”ï¼Œä½†æ˜¯çº¿ç¨‹1ï¼Œä¸€çœ‹å½“å‰è¿™æŠŠé”ä¸æ˜¯å±äºè‡ªå·±ï¼Œäºæ˜¯ä¸è¿›è¡Œåˆ é™¤é”é€»è¾‘ï¼Œå½“çº¿ç¨‹2èµ°åˆ°åˆ é™¤é”é€»è¾‘æ—¶ï¼Œå¦‚æœæ²¡æœ‰å¡è¿‡è‡ªåŠ¨é‡Šæ”¾é”çš„æ—¶é—´ç‚¹ï¼Œåˆ™åˆ¤æ–­å½“å‰è¿™æŠŠé”æ˜¯å±äºè‡ªå·±çš„ï¼Œäºæ˜¯åˆ é™¤è¿™æŠŠé”ã€‚</p>
<p><img src="https://ych-blog.oss-cn-guangzhou.aliyuncs.com/20250310143251.png" style="zoom:50%;" /></p>
<p><strong>å®ç°ä»£ç ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åŠ é”</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">ID_PREFIX</span> <span class="operator">=</span> UUID.randomUUID().toString(<span class="literal">true</span>) + <span class="string">&quot;-&quot;</span>;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">tryLock</span><span class="params">(<span class="type">long</span> timeoutSec)</span> &#123;</span><br><span class="line">   <span class="comment">// è·å–çº¿ç¨‹æ ‡ç¤º</span></span><br><span class="line">   <span class="type">String</span> <span class="variable">threadId</span> <span class="operator">=</span> ID_PREFIX + Thread.currentThread().getId();</span><br><span class="line">   <span class="comment">// è·å–é”</span></span><br><span class="line">   <span class="type">Boolean</span> <span class="variable">success</span> <span class="operator">=</span> stringRedisTemplate.opsForValue()</span><br><span class="line">                .setIfAbsent(KEY_PREFIX + name, threadId, timeoutSec, TimeUnit.SECONDS);</span><br><span class="line">   <span class="keyword">return</span> Boolean.TRUE.equals(success);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é‡Šæ”¾é”</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">unlock</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// è·å–çº¿ç¨‹æ ‡ç¤º</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">threadId</span> <span class="operator">=</span> ID_PREFIX + Thread.currentThread().getId();</span><br><span class="line">    <span class="comment">// è·å–é”ä¸­çš„æ ‡ç¤º</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">id</span> <span class="operator">=</span> stringRedisTemplate.opsForValue().get(KEY_PREFIX + name);</span><br><span class="line">    <span class="comment">// åˆ¤æ–­æ ‡ç¤ºæ˜¯å¦ä¸€è‡´</span></span><br><span class="line">    <span class="keyword">if</span>(threadId.equals(id)) &#123;</span><br><span class="line">        <span class="comment">// é‡Šæ”¾é”</span></span><br><span class="line">        stringRedisTemplate.delete(KEY_PREFIX + name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="åˆ†å¸ƒå¼é”åŸå­æ€§é—®é¢˜">ã€2ã€‘åˆ†å¸ƒå¼é”åŸå­æ€§é—®é¢˜</h4>
<p><strong>é—®é¢˜ï¼š</strong>çº¿ç¨‹1ç°åœ¨æŒæœ‰é”ä¹‹åï¼Œåœ¨æ‰§è¡Œä¸šåŠ¡é€»è¾‘è¿‡ç¨‹ä¸­ï¼Œä»–æ­£å‡†å¤‡åˆ é™¤é”ï¼Œè€Œä¸”å·²ç»èµ°åˆ°äº†æ¡ä»¶åˆ¤æ–­çš„è¿‡ç¨‹ä¸­ï¼Œæ¯”å¦‚ä»–å·²ç»æ‹¿åˆ°äº†å½“å‰è¿™æŠŠé”ç¡®å®æ˜¯å±äºä»–è‡ªå·±çš„ï¼Œæ­£å‡†å¤‡åˆ é™¤é”ï¼Œä½†æ˜¯æ­¤æ—¶ä»–çš„é”åˆ°æœŸäº†ï¼Œé‚£ä¹ˆæ­¤æ—¶çº¿ç¨‹2è¿›æ¥ï¼Œä½†æ˜¯çº¿ç¨‹1ä»–ä¼šæ¥ç€å¾€åæ‰§è¡Œï¼Œå½“ä»–å¡é¡¿ç»“æŸåï¼Œä»–ç›´æ¥å°±ä¼šæ‰§è¡Œåˆ é™¤é”é‚£è¡Œä»£ç ï¼Œç›¸å½“äºæ¡ä»¶åˆ¤æ–­å¹¶æ²¡æœ‰èµ·åˆ°ä½œç”¨ï¼Œè¿™å°±æ˜¯åˆ é”æ—¶çš„åŸå­æ€§é—®é¢˜ï¼Œä¹‹æ‰€ä»¥æœ‰è¿™ä¸ªé—®é¢˜ï¼Œæ˜¯å› ä¸ºçº¿ç¨‹1çš„æ‹¿é”ï¼Œæ¯”é”ï¼Œåˆ é”ï¼Œå®é™…ä¸Šå¹¶ä¸æ˜¯åŸå­æ€§çš„ï¼Œæˆ‘ä»¬è¦é˜²æ­¢åˆšæ‰çš„æƒ…å†µå‘ç”Ÿã€‚</p>
<p><img src="https://ych-blog.oss-cn-guangzhou.aliyuncs.com/20250310143500.png" style="zoom:50%;" /></p>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong>é‚£å°±æ˜¯ä½¿ç”¨Redisæä¾›çš„Luaè„šæœ¬ï¼ŒæŠŠ<strong>åˆ¤æ–­é”å’Œé‡Šæ”¾é”å˜æˆä¸€ä¸ªåŸå­æ“ä½œ</strong></p>
<p>å®ç°ä»£ç ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- &lt; unlick.lua &gt;</span></span><br><span class="line"><span class="comment">-- è¿™é‡Œçš„ KEYS[1] å°±æ˜¯é”çš„keyï¼Œè¿™é‡Œçš„ARGV[1] å°±æ˜¯å½“å‰çº¿ç¨‹æ ‡ç¤º</span></span><br><span class="line"><span class="comment">-- è·å–é”ä¸­çš„æ ‡ç¤ºï¼Œåˆ¤æ–­æ˜¯å¦ä¸å½“å‰çº¿ç¨‹æ ‡ç¤ºä¸€è‡´</span></span><br><span class="line"><span class="keyword">if</span> (redis.call(<span class="string">&#x27;GET&#x27;</span>, KEYS[<span class="number">1</span>]) == ARGV[<span class="number">1</span>]) <span class="keyword">then</span></span><br><span class="line">  <span class="comment">-- ä¸€è‡´ï¼Œåˆ™åˆ é™¤é”</span></span><br><span class="line">  <span class="keyword">return</span> redis.call(<span class="string">&#x27;DEL&#x27;</span>, KEYS[<span class="number">1</span>])</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">-- ä¸ä¸€è‡´ï¼Œåˆ™ç›´æ¥è¿”å›</span></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// é‡Šæ”¾é”</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> DefaultRedisScript&lt;Long&gt; UNLOCK_SCRIPT;</span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        UNLOCK_SCRIPT = <span class="keyword">new</span> <span class="title class_">DefaultRedisScript</span>&lt;&gt;();</span><br><span class="line">        UNLOCK_SCRIPT.setLocation(<span class="keyword">new</span> <span class="title class_">ClassPathResource</span>(<span class="string">&quot;unlock.lua&quot;</span>));</span><br><span class="line">        UNLOCK_SCRIPT.setResultType(Long.class);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">unlock</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// è°ƒç”¨luaè„šæœ¬</span></span><br><span class="line">    stringRedisTemplate.execute(</span><br><span class="line">            UNLOCK_SCRIPT,</span><br><span class="line">            Collections.singletonList(KEY_PREFIX + name),</span><br><span class="line">            ID_PREFIX + Thread.currentThread().getId());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="åˆ†å¸ƒå¼é”--redission">5ã€åˆ†å¸ƒå¼é”--Redission</h2>
<h3 id="å¼•è¨€">ï¼ˆ1ï¼‰å¼•è¨€</h3>
<p>åŸºäºsetnxå®ç°çš„åˆ†å¸ƒå¼é”å­˜åœ¨ä¸‹é¢çš„é—®é¢˜ï¼š</p>
<p><strong>é‡å…¥é—®é¢˜</strong>ï¼šé‡å…¥é—®é¢˜æ˜¯æŒ‡
è·å¾—é”çš„çº¿ç¨‹å¯ä»¥å†æ¬¡è¿›å…¥åˆ°ç›¸åŒçš„é”çš„ä»£ç å—ä¸­ï¼Œå¯é‡å…¥é”çš„æ„ä¹‰åœ¨äºé˜²æ­¢æ­»é”ï¼Œæ¯”å¦‚HashTableè¿™æ ·çš„ä»£ç ä¸­ï¼Œä»–çš„æ–¹æ³•éƒ½æ˜¯ä½¿ç”¨synchronizedä¿®é¥°çš„ï¼Œå‡å¦‚ä»–åœ¨ä¸€ä¸ªæ–¹æ³•å†…ï¼Œè°ƒç”¨å¦ä¸€ä¸ªæ–¹æ³•ï¼Œé‚£ä¹ˆæ­¤æ—¶å¦‚æœæ˜¯ä¸å¯é‡å…¥çš„ï¼Œä¸å°±æ­»é”äº†å—ï¼Ÿæ‰€ä»¥å¯é‡å…¥é”ä»–çš„ä¸»è¦æ„ä¹‰æ˜¯é˜²æ­¢æ­»é”ï¼Œæˆ‘ä»¬çš„synchronizedå’ŒLocké”éƒ½æ˜¯å¯é‡å…¥çš„ã€‚</p>
<p><strong>ä¸å¯é‡è¯•</strong>ï¼šæ˜¯æŒ‡ç›®å‰çš„åˆ†å¸ƒå¼åªèƒ½å°è¯•ä¸€æ¬¡ï¼Œæˆ‘ä»¬è®¤ä¸ºåˆç†çš„æƒ…å†µæ˜¯ï¼šå½“çº¿ç¨‹åœ¨è·å¾—é”å¤±è´¥åï¼Œä»–åº”è¯¥èƒ½å†æ¬¡å°è¯•è·å¾—é”ã€‚</p>
<p><strong>è¶…æ—¶é‡Šæ”¾ï¼š</strong>æˆ‘ä»¬åœ¨åŠ é”æ—¶å¢åŠ äº†è¿‡æœŸæ—¶é—´ï¼Œè¿™æ ·çš„æˆ‘ä»¬å¯ä»¥é˜²æ­¢æ­»é”ï¼Œä½†æ˜¯å¦‚æœå¡é¡¿çš„æ—¶é—´è¶…é•¿ï¼Œè™½ç„¶æˆ‘ä»¬é‡‡ç”¨äº†luaè¡¨è¾¾å¼é˜²æ­¢åˆ é”çš„æ—¶å€™ï¼Œè¯¯åˆ åˆ«äººçš„é”ï¼Œä½†æ˜¯æ¯•ç«Ÿæ²¡æœ‰é”ä½ï¼Œæœ‰å®‰å…¨éšæ‚£</p>
<p><strong>ä¸»ä»ä¸€è‡´æ€§ï¼š</strong>
å¦‚æœRedisæä¾›äº†ä¸»ä»é›†ç¾¤ï¼Œå½“æˆ‘ä»¬å‘é›†ç¾¤å†™æ•°æ®æ—¶ï¼Œä¸»æœºéœ€è¦å¼‚æ­¥çš„å°†æ•°æ®åŒæ­¥ç»™ä»æœºï¼Œè€Œä¸‡ä¸€åœ¨åŒæ­¥è¿‡å»ä¹‹å‰ï¼Œä¸»æœºå®•æœºäº†ï¼Œå°±ä¼šå‡ºç°æ­»é”é—®é¢˜ã€‚</p>
<p><img src="https://ych-blog.oss-cn-guangzhou.aliyuncs.com/20250310144256.png" style="zoom:50%;" /></p>
<h3 id="ä»€ä¹ˆæ˜¯redission">ï¼ˆ2ï¼‰ä»€ä¹ˆæ˜¯Redission</h3>
<p>â€ƒRedissonæ˜¯ä¸€ä¸ªåœ¨Redisçš„åŸºç¡€ä¸Šå®ç°çš„Javaé©»å†…å­˜æ•°æ®ç½‘æ ¼ï¼ˆIn-Memory
Data
Gridï¼‰ã€‚å®ƒä¸ä»…æä¾›äº†ä¸€ç³»åˆ—çš„åˆ†å¸ƒå¼çš„Javaå¸¸ç”¨å¯¹è±¡ï¼Œè¿˜æä¾›äº†è®¸å¤šåˆ†å¸ƒå¼æœåŠ¡ï¼Œå…¶ä¸­å°±åŒ…å«äº†å„ç§åˆ†å¸ƒå¼é”çš„å®ç°ã€‚Redissionæä¾›äº†åˆ†å¸ƒå¼é”çš„å¤šç§å¤šæ ·çš„åŠŸèƒ½</p>
<p><img src="https://ych-blog.oss-cn-guangzhou.aliyuncs.com/20250310144414.png" style="zoom: 80%;" /></p>
<h3 id="åˆ†å¸ƒå¼é”redisson---å¯é‡å…¥é”åŸç†">ï¼ˆ3ï¼‰åˆ†å¸ƒå¼é”Redisson--
å¯é‡å…¥é”åŸç†</h3>
<blockquote>
<p>ReentrantLockå®ç°å¯é‡å…¥é”åŸç†ï¼šå€ŸåŠ©äºåº•å±‚çš„ä¸€ä¸ªvoaltileçš„ä¸€ä¸ªstateå˜é‡æ¥è®°å½•é‡å…¥çš„çŠ¶æ€çš„ï¼Œæ¯”å¦‚å½“å‰æ²¡æœ‰äººæŒæœ‰è¿™æŠŠé”ï¼Œé‚£ä¹ˆstate=0ï¼Œå‡å¦‚æœ‰äººæŒæœ‰è¿™æŠŠé”ï¼Œé‚£ä¹ˆstate=1ï¼Œå¦‚æœæŒæœ‰è¿™æŠŠé”çš„äººå†æ¬¡æŒæœ‰è¿™æŠŠé”ï¼Œé‚£ä¹ˆstateå°±ä¼š+1
ã€‚</p>
<p>å¦‚æœæ˜¯å¯¹äºsynchronizedè€Œè¨€ï¼Œä»–åœ¨cè¯­è¨€ä»£ç ä¸­ä¼šæœ‰ä¸€ä¸ªcountï¼ŒåŸç†å’Œstateç±»ä¼¼ï¼Œä¹Ÿæ˜¯é‡å…¥ä¸€æ¬¡å°±åŠ ä¸€ï¼Œé‡Šæ”¾ä¸€æ¬¡å°±-1
ï¼Œç›´åˆ°å‡å°‘æˆ0 æ—¶ï¼Œè¡¨ç¤ºå½“å‰è¿™æŠŠé”æ²¡æœ‰è¢«äººæŒæœ‰ã€‚</p>
</blockquote>
<p>â€ƒå…¶å®å®ç°çš„åŸç†è·ŸReentrantLockæ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯å€ŸåŠ©è®¡æ•°å˜é‡ï¼Œè®°å½•é‡å…¥æ¬¡æ•°ï¼Œå®ç°å¯é‡å…¥ã€‚å®ç°åŸç†å¤§è‡´æ˜¯è¿™æ ·çš„ï¼šé‡‡ç”¨hashç»“æ„ç”¨æ¥å­˜å‚¨é”ï¼Œå…¶ä¸­å¤§keyè¡¨ç¤ºè¡¨ç¤ºè¿™æŠŠé”æ˜¯å¦å­˜åœ¨ï¼Œç”¨å°keyè¡¨ç¤ºå½“å‰è¿™æŠŠé”è¢«å“ªä¸ªçº¿ç¨‹æŒæœ‰ï¼Œæœ€ç»ˆçš„valueè®°å½•çš„å°±æ˜¯é‡å…¥æ¬¡æ•°ã€‚</p>
<p><img src="https://ych-blog.oss-cn-guangzhou.aliyuncs.com/20250310145407.png" style="zoom:50%;" /></p>
<p><strong>ä»£ç å®ç°ï¼š</strong>Redissionåº•å±‚å®ç°å¯é‡å…¥é”ï¼Œä¹Ÿæ˜¯å€ŸåŠ©äº†Luaè„šæœ¬å®ç°çš„ï¼Œè¿™æ ·å¯ä»¥ä¿è¯å…¶æ‰§è¡Œçš„åŸå­æ€§ã€‚</p>
<p>â€”â€”åŠ é”å®ç°ä»£ç ï¼š</p>
<p><img src="https://ych-blog.oss-cn-guangzhou.aliyuncs.com/20250310151049.png" style="zoom: 67%;" /></p>
<p>â€”â€”é‡Šæ”¾é”å®ç°ä»£ç ï¼š</p>
<p><img src="https://ych-blog.oss-cn-guangzhou.aliyuncs.com/20250311140348.png" style="zoom:67%;" /></p>
<h3 id="åˆ†å¸ƒå¼é”ression-é”é‡è¯•å’Œwatchdogæœºåˆ¶">ï¼ˆ4ï¼‰åˆ†å¸ƒå¼é”Ression â€”â€”
é”é‡è¯•å’ŒWatchDogæœºåˆ¶</h3>
<blockquote>
<p>è·å–é”å¤±è´¥ï¼Œå°±ä¼šå¯åŠ¨ã€é”é‡è¯•ã€‘æœºåˆ¶ï¼Œä¸æ–­è¯¢é—®é”æ˜¯å¦é‡Šæ”¾ã€‚
è·å–é”æˆåŠŸï¼Œå°±ä¼šå¯åŠ¨ã€WatchDogæœºåˆ¶ã€‘ï¼Œä¿è¯å½“å‰çº¿ç¨‹çš„ä»»åŠ¡æ‰§è¡Œå®Œæˆã€‚</p>
</blockquote>
<h4 id="åŸç†">ã€1ã€‘åŸç†</h4>
<p><img src="https://ych-blog.oss-cn-guangzhou.aliyuncs.com/20250310165123.png" style="zoom:67%;" /></p>
<h4 id="æºç è§£æ">ã€2ã€‘æºç è§£æ</h4>
<blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">boolean</span> <span class="title function_">tryLock</span><span class="params">(<span class="type">long</span> waitTime, <span class="type">long</span> leaseTime, TimeUnit unit)</span></span><br></pre></td></tr></table></figure>
<p>waitTime â€“
è·å–é”çš„æœ€å¤§ç­‰å¾…æ—¶é—´ï¼Œ<strong>ä¸è®¾ç½®å°±åªå°è¯•è·å–é”ä¸€æ¬¡ï¼Œä¸ä¼šé‡è¯•</strong>
leaseTime â€“
ç§Ÿçº¦æ—¶é—´ï¼Œçº¦å®šä½¿ç”¨é”æ—¶é—´ï¼Œåˆ°æœŸé”è‡ªåŠ¨é‡Šæ”¾ã€‚ä¸è®¾å®šåˆ™ä¼šè‡ªåŠ¨é‡‡ç”¨çœ‹é—¨ç‹—æœºåˆ¶ï¼Œè‡ªåŠ¨ç»­è´¹
unit â€“ æ—¶é—´å•ä½</p>
</blockquote>
<p>â‘ 
æŠ¢é”è¿‡ç¨‹ä¸­ï¼Œè·å¾—å½“å‰çº¿ç¨‹ï¼Œé€šè¿‡tryAcquireè¿›è¡ŒæŠ¢é”ï¼Œè¯¥æŠ¢é”é€»è¾‘å’Œä¹‹å‰é€»è¾‘ç›¸åŒ</p>
<p>1ã€å…ˆåˆ¤æ–­å½“å‰è¿™æŠŠé”æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œæ’å…¥ä¸€æŠŠé”ï¼Œè¿”å›null</p>
<p>2ã€åˆ¤æ–­å½“å‰è¿™æŠŠé”æ˜¯å¦æ˜¯å±äºå½“å‰çº¿ç¨‹ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å›null</p>
<p>æ‰€ä»¥å¦‚æœè¿”å›æ˜¯nullï¼Œåˆ™ä»£è¡¨ç€å½“å‰è¿™çº¿ç¨‹å·²ç»æŠ¢é”å®Œæ¯•ï¼Œæˆ–è€…å¯é‡å…¥å®Œæ¯•ã€‚ä½†æ˜¯å¦‚æœä»¥ä¸Šä¸¤ä¸ªæ¡ä»¶éƒ½ä¸æ»¡è¶³ï¼Œåˆ™è¿›å…¥åˆ°ç¬¬ä¸‰ä¸ªæ¡ä»¶ï¼Œè¿”å›çš„æ˜¯é”çš„å¤±æ•ˆæ—¶é—´ï¼Œå¯ä»¥å‘ç°æœ‰ä¸ªwhile(
true) å†æ¬¡è¿›è¡ŒtryAcquireè¿›è¡ŒæŠ¢é”ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">long</span> <span class="variable">threadId</span> <span class="operator">=</span> Thread.currentThread().getId();</span><br><span class="line"><span class="type">Long</span> <span class="variable">ttl</span> <span class="operator">=</span> tryAcquire(waitTime, leaseTime, unit, threadId);</span><br><span class="line"><span class="comment">// lock acquired</span></span><br><span class="line"><span class="keyword">if</span> (ttl == <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>â‘¡ tryAcquireä¸­æœ‰æ¡ä»¶åˆ†æ”¯ï¼Œå¦‚æœ leaseTime ä¸º
-1ï¼Œåˆ™è¡¨ç¤ºä¸è®¾å®šç§Ÿé”æ—¶é—´ï¼Œä¹Ÿå°±æ˜¯è¿™æŠŠé”å¾—å€Ÿåˆ°å½“å‰è¿›ç¨‹æ‰§è¡Œå®Œæˆåæ‰èƒ½é‡Šæ”¾ã€‚é‚£Redissionæ˜¯æ€ä¹ˆå®ç°çš„å‘¢ï¼ŸRedissionä¹Ÿæ˜¯ç…§å¸¸ä¼šå»è·å–é”ï¼Œæœ‰æ‰€åŒºåˆ«çš„æ˜¯ï¼Œå¦‚æœä¸è®¾å®šç§Ÿé”æ—¶é—´(leaseTime)ï¼Œé‚£ä¹ˆRedission
ä¼šå¯åŠ¨çœ‹é—¨ç‹—æœºåˆ¶ï¼Œè‡ªåŠ¨å»¶é•¿ç§Ÿé”æ—¶é—´ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> &lt;T&gt; RFuture&lt;Long&gt; <span class="title function_">tryAcquireAsync</span><span class="params">(<span class="type">long</span> waitTime, <span class="type">long</span> leaseTime, TimeUnit unit, <span class="type">long</span> threadId)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (leaseTime != -<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="comment">// è®¾å®šäº†ç§Ÿé”æ—¶é—´ï¼Œé‚£å°±å°†å…¶è®¾ç½®ä¸ºå€Ÿé”çš„æ—¶é—´ï¼Œåˆ°æœŸé”è‡ªåŠ¨é‡Šæ”¾</span></span><br><span class="line">        <span class="keyword">return</span> tryLockInnerAsync(waitTime, leaseTime, unit, threadId, RedisCommands.EVAL_LONG);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// ä¸è®¾ç½®ï¼Œå°±å¯ç”¨çœ‹é—¨ç‹—æœºåˆ¶</span></span><br><span class="line">    RFuture&lt;Long&gt; ttlRemainingFuture = tryLockInnerAsync(waitTime,</span><br><span class="line">                                                         commandExecutor.getConnectionManager().getCfg().getLockWatchdogTimeout(),</span><br><span class="line">                                                         TimeUnit.MILLISECONDS, threadId, RedisCommands.EVAL_LONG);</span><br><span class="line">    ttlRemainingFuture.onComplete((ttlRemaining, e) -&gt; &#123;</span><br><span class="line">        <span class="keyword">if</span> (e != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// lock acquired</span></span><br><span class="line">        <span class="keyword">if</span> (ttlRemaining == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="comment">// çœ‹é—¨ç‹—æœºåˆ¶åˆ·æ–°ç§Ÿé”æ—¶é—´</span></span><br><span class="line">            scheduleExpirationRenewal(threadId);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> ttlRemainingFuture;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>â‘¢
çœ‹é—¨ç‹—é€»è¾‘ï¼šå› ä¸ºã€çœ‹é—¨ç‹—æœºåˆ¶ã€‘é”çš„å¤±æ•ˆæ—¶é—´æ˜¯30sï¼Œå½“10sä¹‹åï¼Œæ­¤æ—¶è¿™ä¸ªtimeTask
å°±è§¦å‘äº†ï¼Œä»–å°±å»è¿›è¡Œç»­çº¦ï¼ŒæŠŠå½“å‰è¿™æŠŠé”ç»­çº¦æˆ30sï¼Œå¦‚æœæ“ä½œæˆåŠŸï¼Œé‚£ä¹ˆæ­¤æ—¶å°±ä¼šé€’å½’è°ƒç”¨è‡ªå·±ï¼Œå†é‡æ–°è®¾ç½®ä¸€ä¸ªtimeTask()ï¼Œäºæ˜¯å†è¿‡10sååˆå†è®¾ç½®ä¸€ä¸ªtimerTaskï¼Œå®Œæˆä¸åœçš„ç»­çº¦ã€‚é‚£ä¹ˆå‡è®¾æˆ‘ä»¬çš„çº¿ç¨‹å‡ºç°äº†å®•æœºä»–è¿˜ä¼šç»­çº¦å—ï¼Ÿå½“ç„¶ä¸ä¼šï¼Œå› ä¸ºæ²¡æœ‰äººå†å»è°ƒç”¨renewExpirationè¿™ä¸ªæ–¹æ³•ï¼Œæ‰€ä»¥ç­‰åˆ°æ—¶é—´ä¹‹åè‡ªç„¶å°±é‡Šæ”¾äº†ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">renewExpiration</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">ExpirationEntry</span> <span class="variable">ee</span> <span class="operator">=</span> EXPIRATION_RENEWAL_MAP.get(getEntryName());</span><br><span class="line">    <span class="keyword">if</span> (ee == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="type">Timeout</span> <span class="variable">task</span> <span class="operator">=</span> commandExecutor.getConnectionManager().newTimeout(<span class="keyword">new</span> <span class="title class_">TimerTask</span>() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">(Timeout timeout)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">            <span class="type">ExpirationEntry</span> <span class="variable">ent</span> <span class="operator">=</span> EXPIRATION_RENEWAL_MAP.get(getEntryName());</span><br><span class="line">            <span class="keyword">if</span> (ent == <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="type">Long</span> <span class="variable">threadId</span> <span class="operator">=</span> ent.getFirstThreadId();</span><br><span class="line">            <span class="keyword">if</span> (threadId == <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            RFuture&lt;Boolean&gt; future = renewExpirationAsync(threadId);</span><br><span class="line">            future.onComplete((res, e) -&gt; &#123;</span><br><span class="line">                <span class="keyword">if</span> (e != <span class="literal">null</span>) &#123;</span><br><span class="line">                    log.error(<span class="string">&quot;Can&#x27;t update lock &quot;</span> + getName() + <span class="string">&quot; expiration&quot;</span>, e);</span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                </span><br><span class="line">                <span class="keyword">if</span> (res) &#123;</span><br><span class="line">                    <span class="comment">// reschedule itself</span></span><br><span class="line">                    renewExpiration();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;, internalLockLeaseTime / <span class="number">3</span>, TimeUnit.MILLISECONDS);</span><br><span class="line">    </span><br><span class="line">    ee.setTimeout(task);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="åˆ†å¸ƒå¼é”redission-mutilockåŸç†">ï¼ˆ5ï¼‰åˆ†å¸ƒå¼é”Redission â€”â€”
MutiLockåŸç†</h3>
<blockquote>
<p>è§£å†³ä¸»ä»ä¸€è‡´æ€§é—®é¢˜ï¼</p>
</blockquote>
<h4 id="åŸç†-1">ã€1ã€‘åŸç†</h4>
<p>â€ƒä¸ºäº†æé«˜redisçš„å¯ç”¨æ€§ï¼Œæˆ‘ä»¬ä¼šæ­å»ºé›†ç¾¤æˆ–è€…ä¸»ä»ï¼Œç°åœ¨ä»¥ä¸»ä»ä¸ºä¾‹ã€‚æ­¤æ—¶æˆ‘ä»¬å»å†™å‘½ä»¤ï¼Œå†™åœ¨ä¸»æœºä¸Šï¼Œ
ä¸»æœºä¼šå°†æ•°æ®åŒæ­¥ç»™ä»æœºï¼Œä½†æ˜¯å‡è®¾åœ¨ä¸»æœºè¿˜æ²¡æœ‰æ¥å¾—åŠæŠŠæ•°æ®å†™å…¥åˆ°ä»æœºå»çš„æ—¶å€™ï¼Œæ­¤æ—¶ä¸»æœºå®•æœºï¼Œå“¨å…µä¼šå‘ç°ä¸»æœºå®•æœºï¼Œå¹¶ä¸”é€‰ä¸¾ä¸€ä¸ªslaveå˜æˆmasterï¼Œè€Œæ­¤æ—¶æ–°çš„masterä¸­å®é™…ä¸Šå¹¶æ²¡æœ‰é”ä¿¡æ¯ï¼Œæ­¤æ—¶é”ä¿¡æ¯å°±å·²ç»ä¸¢æ‰äº†ã€‚</p>
<p><img src="https://ych-blog.oss-cn-guangzhou.aliyuncs.com/20250310163322.png" style="zoom:50%;" /></p>
<p>â€ƒä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œredissionæå‡ºæ¥äº†MutiLocké”ï¼Œä½¿ç”¨è¿™æŠŠé”å’±ä»¬å°±ä¸ä½¿ç”¨ä¸»ä»äº†ï¼Œæ¯ä¸ªèŠ‚ç‚¹çš„åœ°ä½éƒ½æ˜¯ä¸€æ ·çš„ï¼Œ
è¿™æŠŠé”åŠ é”çš„é€»è¾‘éœ€è¦å†™å…¥åˆ°æ¯ä¸€ä¸ªä¸»ä¸›èŠ‚ç‚¹ä¸Šï¼Œåªæœ‰æ‰€æœ‰çš„æœåŠ¡å™¨éƒ½å†™å…¥æˆåŠŸï¼Œæ­¤æ—¶æ‰æ˜¯åŠ é”æˆåŠŸï¼Œå‡è®¾ç°åœ¨æŸä¸ªèŠ‚ç‚¹æŒ‚äº†ï¼Œé‚£ä¹ˆä»–å»è·å¾—é”çš„æ—¶å€™ï¼Œåªè¦æœ‰ä¸€ä¸ªèŠ‚ç‚¹æ‹¿ä¸åˆ°ï¼Œéƒ½ä¸èƒ½ç®—æ˜¯åŠ é”æˆåŠŸï¼Œå°±ä¿è¯äº†åŠ é”çš„å¯é æ€§ã€‚</p>
<p><img src="https://ych-blog.oss-cn-guangzhou.aliyuncs.com/20250310163403.png" style="zoom:40%;" /></p>
<h4 id="æºç è§£æ-1">ã€2ã€‘æºç è§£æ</h4>
<p>â‘  åˆ›å»ºè”é” multilockï¼Œå°±æ˜¯å°†ä¼ å…¥çš„lockç”¨ä¸€ä¸ªæ•°ç»„å»å­˜ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">final</span> List&lt;RLock&gt; locks = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">RedissonMultiLock</span><span class="params">(RLock... locks)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (locks.length == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(<span class="string">&quot;Lock objects are not defined&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">this</span>.locks.addAll(Arrays.asList(locks));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>â‘¡ è·å–é”æ—¶ï¼Œä¼šæŒ¨ä¸ªè®¿é—®æ¯ä¸ªèŠ‚ç‚¹ï¼Œå¯¹æ¯ä¸ªèŠ‚ç‚¹ï¼Œéƒ½è·å–ä¸€éé”</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (ListIterator&lt;RLock&gt; iterator = locks.listIterator(); iterator.hasNext();) &#123;</span><br><span class="line">    <span class="type">RLock</span> <span class="variable">lock</span> <span class="operator">=</span> iterator.next();</span><br><span class="line">    <span class="comment">// è‹¥è·å–é”å¤±è´¥ï¼Œåˆ™ä¼šé‡Šæ”¾æ‰å·²ç»è·å–çš„é‚£äº›èŠ‚ç‚¹çš„é”</span></span><br><span class="line">    <span class="keyword">if</span> (remainTime != -<span class="number">1</span>) &#123;</span><br><span class="line">        remainTime -= System.currentTimeMillis() - time;</span><br><span class="line">        time = System.currentTimeMillis();</span><br><span class="line">        <span class="keyword">if</span> (remainTime &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">            unlockInner(acquiredLocks);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// è®¾ç½®äº†é‡è¯•æœºåˆ¶</span></span><br><span class="line">    <span class="keyword">if</span> (failedLocksLimit == <span class="number">0</span>) &#123;</span><br><span class="line">        unlockInner(acquiredLocks);</span><br><span class="line">        <span class="keyword">if</span> (waitTime == -<span class="number">1</span>) &#123;</span><br><span class="line">            <span class="comment">// æ²¡æœ‰è®¾ç½®ç­‰å¾…è·å–é”æ—¶é—´ï¼Œè¡¨ç¤ºåªæƒ³è·å–ä¸€æ¬¡ï¼Œåˆ™è·å–å¤±è´¥çš„è¯ç›´æ¥é€€å‡º</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// è¿™æ˜¯äº†ç­‰å¾…æ—¶é—´</span></span><br><span class="line">        failedLocksLimit = failedLocksLimit();</span><br><span class="line">        acquiredLocks.clear();</span><br><span class="line">        <span class="comment">// reset iterator</span></span><br><span class="line">        <span class="comment">// é‡è¯•çš„æ—¶å€™é‡æ–°å¼€å§‹</span></span><br><span class="line">        <span class="keyword">while</span> (iterator.hasPrevious()) &#123;</span><br><span class="line">            iterator.previous();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        failedLocksLimit--;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// è·å–é”æˆåŠŸ</span></span><br><span class="line"><span class="comment">// è‹¥è®¾ç½®äº†ç§Ÿé”æ—¶é—´ï¼Œä¼šå¯¹æ¯ä¸€ä¸ªèŠ‚ç‚¹ä¸Šçš„é”ï¼Œè®¾ç½®ä¸€ä¸ªé”çš„æœ‰æ•ˆæ—¶é—´</span></span><br><span class="line"><span class="keyword">if</span> (leaseTime != -<span class="number">1</span>) &#123;</span><br><span class="line">    List&lt;RFuture&lt;Boolean&gt;&gt; futures = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(acquiredLocks.size());</span><br><span class="line">    <span class="keyword">for</span> (RLock rLock : acquiredLocks) &#123;</span><br><span class="line">        RFuture&lt;Boolean&gt; future = ((RedissonLock) rLock).expireAsync(unit.toMillis(leaseTime), TimeUnit.MILLISECONDS);</span><br><span class="line">        futures.add(future);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (RFuture&lt;Boolean&gt; rFuture : futures) &#123;</span><br><span class="line">        rFuture.syncUninterruptibly();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br></pre></td></tr></table></figure>
<h1 id="å…­redisæ¶ˆæ¯é˜Ÿåˆ—">å…­ã€Redisæ¶ˆæ¯é˜Ÿåˆ—</h1>
<h2 id="è®¤è¯†æ¶ˆæ¯é˜Ÿåˆ—">1ã€ è®¤è¯†æ¶ˆæ¯é˜Ÿåˆ—</h2>
<p>å³å­˜æ”¾æ¶ˆæ¯çš„é˜Ÿåˆ—ã€‚æœ€ç®€å•çš„æ¶ˆæ¯é˜Ÿåˆ—æ¨¡å‹åŒ…æ‹¬3ä¸ªè§’è‰²ï¼š</p>
<ul>
<li>æ¶ˆæ¯é˜Ÿåˆ—ï¼šå­˜å‚¨å’Œç®¡ç†æ¶ˆæ¯ï¼Œä¹Ÿè¢«ç§°ä¸ºæ¶ˆæ¯ä»£ç†ï¼ˆMessage Brokerï¼‰</li>
<li>ç”Ÿäº§è€…ï¼šå‘é€æ¶ˆæ¯åˆ°æ¶ˆæ¯é˜Ÿåˆ—</li>
<li>æ¶ˆè´¹è€…ï¼šä»æ¶ˆæ¯é˜Ÿåˆ—è·å–æ¶ˆæ¯å¹¶å¤„ç†æ¶ˆæ¯</li>
</ul>
<p><img
src="https://ych-blog.oss-cn-guangzhou.aliyuncs.com/20250310172219.png" /></p>
<p>ä½¿ç”¨é˜Ÿåˆ—çš„å¥½å¤„åœ¨äº<strong>è§£è€¦</strong>ï¼šæ‰€è°“è§£è€¦ï¼Œä¸¾ä¸€ä¸ªç”Ÿæ´»ä¸­çš„ä¾‹å­å°±æ˜¯ï¼šå¿«é€’å‘˜(ç”Ÿäº§è€…)æŠŠå¿«é€’æ”¾åˆ°å¿«é€’æŸœé‡Œè¾¹(Message
Queue)å»ï¼Œæˆ‘ä»¬(æ¶ˆè´¹è€…)ä»å¿«é€’æŸœé‡Œè¾¹å»æ‹¿ä¸œè¥¿ï¼Œè¿™å°±æ˜¯ä¸€ä¸ªå¼‚æ­¥ï¼Œå¦‚æœè€¦åˆï¼Œé‚£ä¹ˆè¿™ä¸ªå¿«é€’å‘˜ç›¸å½“äºç›´æ¥æŠŠå¿«é€’äº¤ç»™ä½ ï¼Œè¿™äº‹å›ºç„¶å¥½ï¼Œä½†æ˜¯ä¸‡ä¸€ä½ ä¸åœ¨å®¶ï¼Œé‚£ä¹ˆå¿«é€’å‘˜å°±ä¼šä¸€ç›´ç­‰ä½ ï¼Œè¿™å°±æµªè´¹äº†å¿«é€’å‘˜çš„æ—¶é—´ï¼Œæ‰€ä»¥è¿™ç§æ€æƒ³åœ¨æˆ‘ä»¬æ—¥å¸¸å¼€å‘ä¸­ï¼Œæ˜¯éå¸¸æœ‰å¿…è¦çš„ã€‚</p>
<p>è¿™ç§åœºæ™¯åœ¨æˆ‘ä»¬ç§’æ€ä¸­å°±å˜æˆäº†ï¼šæˆ‘ä»¬ä¸‹å•ä¹‹åï¼Œåˆ©ç”¨rediså»è¿›è¡Œæ ¡éªŒä¸‹å•æ¡ä»¶ï¼Œå†é€šè¿‡é˜Ÿåˆ—æŠŠæ¶ˆæ¯å‘é€å‡ºå»ï¼Œç„¶åå†å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹å»æ¶ˆè´¹è¿™ä¸ªæ¶ˆæ¯ï¼Œå®Œæˆè§£è€¦ï¼ŒåŒæ—¶ä¹ŸåŠ å¿«æˆ‘ä»¬çš„å“åº”é€Ÿåº¦ã€‚</p>
<h2 id="åŸºäºlistå®ç°æ¶ˆæ¯é˜Ÿåˆ—">2ã€ åŸºäºListå®ç°æ¶ˆæ¯é˜Ÿåˆ—</h2>
<h3 id="å®ç°åŸç†-1">ï¼ˆ1ï¼‰å®ç°åŸç†</h3>
<p>æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆMessage
Queueï¼‰ï¼Œå­—é¢æ„æ€å°±æ˜¯å­˜æ”¾æ¶ˆæ¯çš„é˜Ÿåˆ—ã€‚è€ŒRedisçš„listæ•°æ®ç»“æ„æ˜¯ä¸€ä¸ªåŒå‘é“¾è¡¨ï¼Œå¾ˆå®¹æ˜“æ¨¡æ‹Ÿå‡ºé˜Ÿåˆ—æ•ˆæœã€‚</p>
<p>é˜Ÿåˆ—æ˜¯å…¥å£å’Œå‡ºå£ä¸åœ¨ä¸€è¾¹ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ï¼šLPUSH ç»“åˆ RPOPã€æˆ–è€…
RPUSH ç»“åˆ
LPOPæ¥å®ç°ã€‚ä¸è¿‡è¦æ³¨æ„çš„æ˜¯ï¼Œå½“é˜Ÿåˆ—ä¸­æ²¡æœ‰æ¶ˆæ¯æ—¶RPOPæˆ–LPOPæ“ä½œä¼šè¿”å›nullï¼Œå¹¶ä¸åƒJVMçš„é˜»å¡é˜Ÿåˆ—é‚£æ ·ä¼šé˜»å¡å¹¶ç­‰å¾…æ¶ˆæ¯ã€‚å› æ­¤è¿™é‡Œåº”è¯¥ä½¿ç”¨BRPOPæˆ–è€…BLPOPæ¥å®ç°é˜»å¡æ•ˆæœã€‚</p>
<p><img
src="https://ych-blog.oss-cn-guangzhou.aliyuncs.com/20250310213814.png" /></p>
<h3 id="ä¼˜ç¼ºç‚¹">ï¼ˆ2ï¼‰ä¼˜ç¼ºç‚¹</h3>
<p>ä¼˜ç‚¹ï¼šâ‘  åˆ©ç”¨Rediså­˜å‚¨ï¼Œä¸å—é™äºJVMå†…å­˜ä¸Šé™ï¼› â‘¡
åŸºäºRedisçš„æŒä¹…åŒ–æœºåˆ¶ï¼Œæ•°æ®å®‰å…¨æ€§æœ‰ä¿è¯ï¼› â‘¢ å¯ä»¥æ»¡è¶³æ¶ˆæ¯æœ‰åºæ€§</p>
<p>ç¼ºç‚¹ï¼šâ‘  æ— æ³•é¿å…æ¶ˆæ¯ä¸¢å¤±ï¼› â‘¡åªæ”¯æŒå•æ¶ˆè´¹è€…</p>
<h2 id="åŸºäºpubsubçš„æ¶ˆæ¯é˜Ÿåˆ—">3ã€åŸºäºPubSubçš„æ¶ˆæ¯é˜Ÿåˆ—</h2>
<h3 id="å®ç°åŸç†-2">ï¼ˆ1ï¼‰å®ç°åŸç†</h3>
<p>PubSubï¼ˆå‘å¸ƒè®¢é˜…ï¼‰æ˜¯Redis2.0ç‰ˆæœ¬å¼•å…¥çš„æ¶ˆæ¯ä¼ é€’æ¨¡å‹ã€‚é¡¾åæ€ä¹‰ï¼Œæ¶ˆè´¹è€…å¯ä»¥è®¢é˜…ä¸€ä¸ªæˆ–å¤šä¸ªchannelï¼Œç”Ÿäº§è€…å‘å¯¹åº”channelå‘é€æ¶ˆæ¯åï¼Œæ‰€æœ‰è®¢é˜…è€…éƒ½èƒ½æ”¶åˆ°ç›¸å…³æ¶ˆæ¯ã€‚</p>
<p>SUBSCRIBE channel [channel] ï¼šè®¢é˜…ä¸€ä¸ªæˆ–å¤šä¸ªé¢‘é“ PUBLISH channel msg
ï¼šå‘ä¸€ä¸ªé¢‘é“å‘é€æ¶ˆæ¯ PSUBSCRIBE pattern[pattern]
ï¼šè®¢é˜…ä¸patternæ ¼å¼åŒ¹é…çš„æ‰€æœ‰é¢‘é“</p>
<p><img
src="https://ych-blog.oss-cn-guangzhou.aliyuncs.com/20250310213954.png" /></p>
<h3 id="ä¼˜ç¼ºç‚¹-1">ï¼ˆ2ï¼‰ä¼˜ç¼ºç‚¹</h3>
<p>ä¼˜ç‚¹ï¼šé‡‡ç”¨å‘å¸ƒè®¢é˜…æ¨¡å‹ï¼Œæ”¯æŒå¤šç”Ÿäº§ã€å¤šæ¶ˆè´¹</p>
<p>ç¼ºç‚¹ï¼šâ‘  ä¸æ”¯æŒæ•°æ®æŒä¹…åŒ–ï¼› â‘¡ æ— æ³•é¿å…æ¶ˆæ¯ä¸¢å¤±ï¼› â‘¢
æ¶ˆæ¯å †ç§¯æœ‰ä¸Šé™ï¼Œè¶…å‡ºæ—¶æ•°æ®ä¸¢å¤±</p>
<h2 id="åŸºäºstreamçš„æ¶ˆæ¯é˜Ÿåˆ—">4ã€åŸºäºStreamçš„æ¶ˆæ¯é˜Ÿåˆ—</h2>
<p>Stream æ˜¯ Redis 5.0
å¼•å…¥çš„ä¸€ç§æ–°æ•°æ®ç±»å‹ï¼Œå¯ä»¥å®ç°ä¸€ä¸ªåŠŸèƒ½éå¸¸å®Œå–„çš„æ¶ˆæ¯é˜Ÿåˆ—ã€‚</p>
<p>å‘é€æ¶ˆæ¯çš„å‘½ä»¤ï¼š</p>
<p><img
src="https://ych-blog.oss-cn-guangzhou.aliyuncs.com/20250311084806.png" /></p>
<p>ä¾‹å¦‚</p>
<p><img
src="https://ych-blog.oss-cn-guangzhou.aliyuncs.com/20250311085207.png" /></p>
<p>è¯»å–æ¶ˆæ¯çš„æ–¹å¼ä¹‹ä¸€ï¼šXREAD</p>
<p><img
src="https://ych-blog.oss-cn-guangzhou.aliyuncs.com/20250311085146.png" /></p>
<p>ä¾‹å¦‚ï¼Œä½¿ç”¨XREADè¯»å–ç¬¬ä¸€ä¸ªæ¶ˆæ¯ï¼š</p>
<p><img
src="https://ych-blog.oss-cn-guangzhou.aliyuncs.com/20250311085241.png" /></p>
<p>XREADé˜»å¡æ–¹å¼ï¼Œè¯»å–æœ€æ–°çš„æ¶ˆæ¯ï¼š</p>
<p><img
src="https://ych-blog.oss-cn-guangzhou.aliyuncs.com/20250311085304.png" /></p>
<p>åœ¨ä¸šåŠ¡å¼€å‘ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å¾ªç¯çš„è°ƒç”¨XREADé˜»å¡æ–¹å¼æ¥æŸ¥è¯¢æœ€æ–°æ¶ˆæ¯ï¼Œä»è€Œå®ç°æŒç»­ç›‘å¬é˜Ÿåˆ—çš„æ•ˆæœï¼Œä¼ªä»£ç å¦‚ä¸‹</p>
<figure>
<img
src="C:\Users\28778\AppData\Roaming\Typora\typora-user-images\image-20250311085324492.png"
alt="image-20250311085324492" />
<figcaption aria-hidden="true">image-20250311085324492</figcaption>
</figure>
<p>æ³¨æ„ï¼šå½“æˆ‘ä»¬æŒ‡å®šèµ·å§‹IDä¸º$æ—¶ï¼Œä»£è¡¨è¯»å–æœ€æ–°çš„æ¶ˆæ¯ï¼Œå¦‚æœæˆ‘ä»¬å¤„ç†ä¸€æ¡æ¶ˆæ¯çš„è¿‡ç¨‹ä¸­ï¼Œåˆæœ‰è¶…è¿‡1æ¡ä»¥ä¸Šçš„æ¶ˆæ¯åˆ°è¾¾é˜Ÿåˆ—ï¼Œåˆ™ä¸‹æ¬¡è·å–æ—¶ä¹Ÿåªèƒ½è·å–åˆ°æœ€æ–°çš„ä¸€æ¡ï¼Œä¼šå‡ºç°æ¼è¯»æ¶ˆæ¯çš„é—®é¢˜</p>
<p>STREAMç±»å‹æ¶ˆæ¯é˜Ÿåˆ—çš„XREADå‘½ä»¤ç‰¹ç‚¹ï¼š</p>
<ul>
<li>æ¶ˆæ¯å¯å›æº¯</li>
<li>ä¸€ä¸ªæ¶ˆæ¯å¯ä»¥è¢«å¤šä¸ªæ¶ˆè´¹è€…è¯»å–</li>
<li>å¯ä»¥é˜»å¡è¯»å–</li>
<li>æœ‰æ¶ˆæ¯æ¼è¯»çš„é£é™©</li>
</ul>
<h2
id="åŸºäºstreamçš„æ¶ˆæ¯é˜Ÿåˆ—æ¶ˆè´¹è€…ç»„">5ã€åŸºäºStreamçš„æ¶ˆæ¯é˜Ÿåˆ—â€”æ¶ˆè´¹è€…ç»„</h2>
<p>æ¶ˆè´¹è€…ç»„ï¼ˆConsumer
Groupï¼‰ï¼šå°†å¤šä¸ªæ¶ˆè´¹è€…åˆ’åˆ†åˆ°ä¸€ä¸ªç»„ä¸­ï¼Œç›‘å¬åŒä¸€ä¸ªé˜Ÿåˆ—ã€‚å…·å¤‡ä¸‹åˆ—ç‰¹ç‚¹ï¼š</p>
<p><img
src="https://ych-blog.oss-cn-guangzhou.aliyuncs.com/20250311091741.png" /></p>
<p>åˆ›å»ºæ¶ˆè´¹è€…ç»„ï¼š</p>
<p><img
src="https://ych-blog.oss-cn-guangzhou.aliyuncs.com/20250311091835.png" /></p>
<ul>
<li>keyï¼šé˜Ÿåˆ—åç§°</li>
<li>groupNameï¼šæ¶ˆè´¹è€…ç»„åç§°</li>
<li>IDï¼šèµ·å§‹IDæ ‡ç¤ºï¼Œ$ä»£è¡¨é˜Ÿåˆ—ä¸­æœ€åä¸€ä¸ªæ¶ˆæ¯ï¼Œ0åˆ™ä»£è¡¨é˜Ÿåˆ—ä¸­ç¬¬ä¸€ä¸ªæ¶ˆæ¯</li>
<li>MKSTREAMï¼šé˜Ÿåˆ—ä¸å­˜åœ¨æ—¶è‡ªåŠ¨åˆ›å»ºé˜Ÿåˆ—</li>
</ul>
<p>å…¶ä»–å‘½ä»¤ï¼š</p>
<p><strong>åˆ é™¤æŒ‡å®šçš„æ¶ˆè´¹è€…ç»„</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">XGROUP DESTORY key groupName</span><br></pre></td></tr></table></figure>
<p><strong>ç»™æŒ‡å®šçš„æ¶ˆè´¹è€…ç»„æ·»åŠ æ¶ˆè´¹è€…</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">XGROUP CREATECONSUMER key groupname consumername</span><br></pre></td></tr></table></figure>
<p><strong>åˆ é™¤æ¶ˆè´¹è€…ç»„ä¸­çš„æŒ‡å®šæ¶ˆè´¹è€…</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">XGROUP DELCONSUMER key groupname consumername</span><br></pre></td></tr></table></figure>
<p>ä»æ¶ˆè´¹è€…ç»„è¯»å–æ¶ˆæ¯ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">XREADGROUP GROUP group consumer [COUNT count] [BLOCK milliseconds] [NOACK] STREAMS key [key ...] ID [ID ...]</span><br></pre></td></tr></table></figure>
<ul>
<li>groupï¼šæ¶ˆè´¹ç»„åç§°</li>
<li>consumerï¼šæ¶ˆè´¹è€…åç§°ï¼Œå¦‚æœæ¶ˆè´¹è€…ä¸å­˜åœ¨ï¼Œä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªæ¶ˆè´¹è€…</li>
<li>countï¼šæœ¬æ¬¡æŸ¥è¯¢çš„æœ€å¤§æ•°é‡</li>
<li>BLOCK millisecondsï¼šå½“æ²¡æœ‰æ¶ˆæ¯æ—¶æœ€é•¿ç­‰å¾…æ—¶é—´</li>
<li>NOACKï¼šæ— éœ€æ‰‹åŠ¨ACKï¼Œè·å–åˆ°æ¶ˆæ¯åè‡ªåŠ¨ç¡®è®¤</li>
<li>STREAMS keyï¼šæŒ‡å®šé˜Ÿåˆ—åç§°</li>
<li>IDï¼šè·å–æ¶ˆæ¯çš„èµ·å§‹IDï¼š
<ul>
<li>"&gt;"ï¼šä»ä¸‹ä¸€ä¸ªæœªæ¶ˆè´¹çš„æ¶ˆæ¯å¼€å§‹</li>
<li>å…¶å®ƒï¼šæ ¹æ®æŒ‡å®šidä»pending-listä¸­è·å–å·²æ¶ˆè´¹ä½†æœªç¡®è®¤çš„æ¶ˆæ¯ï¼Œä¾‹å¦‚0ï¼Œæ˜¯ä»pending-listä¸­çš„ç¬¬ä¸€ä¸ªæ¶ˆæ¯å¼€å§‹</li>
</ul></li>
</ul>
<p>æ¶ˆè´¹è€…ç›‘å¬æ¶ˆæ¯çš„åŸºæœ¬æ€è·¯ï¼š</p>
<p><img src="C:\Users\28778\AppData\Roaming\Typora\typora-user-images\image-20250311092621147.png" alt="image-20250311092621147" style="zoom:50%;" /></p>
<p>åˆ—çš„XREADGROUPå‘½ä»¤ç‰¹ç‚¹ï¼š</p>
<ul>
<li>æ¶ˆæ¯å¯å›æº¯</li>
<li>å¯ä»¥å¤šæ¶ˆè´¹è€…äº‰æŠ¢æ¶ˆæ¯ï¼ŒåŠ å¿«æ¶ˆè´¹é€Ÿåº¦</li>
<li>å¯ä»¥é˜»å¡è¯»å–</li>
<li>æ²¡æœ‰æ¶ˆæ¯æ¼è¯»çš„é£é™©</li>
<li>æœ‰æ¶ˆæ¯ç¡®è®¤æœºåˆ¶ï¼Œä¿è¯æ¶ˆæ¯è‡³å°‘è¢«æ¶ˆè´¹ä¸€æ¬¡</li>
</ul>
<h2 id="å¯¹æ¯”">6ã€å¯¹æ¯”</h2>
<p><img
src="https://ych-blog.oss-cn-guangzhou.aliyuncs.com/20250311092658.png" /></p>
<h1 id="ä¸ƒç‚¹èµæ”¶è—å’Œå…³æ³¨">ä¸ƒã€ç‚¹èµã€æ”¶è—å’Œå…³æ³¨</h1>
<p>å®ç°æ–¹å¼æ¯”è¾ƒç®€å•ï¼Œéƒ½æ˜¯é€šè¿‡åˆ©ç”¨Redisçš„seté›†åˆåˆ¤æ–­æ˜¯å¦å·²ç»ç‚¹èµã€æˆ–è€…å·²ç»æ”¶è—ã€æˆ–è€…å·²ç»å…³æ³¨</p>
<p>è¿™é‡Œè´´ä¸€ä¸ªdemoä»£ç </p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å…³æ³¨å®ç°</span></span><br><span class="line"><span class="keyword">public</span> Boolean <span class="title function_">followUser</span><span class="params">(FollowAddVO addVO)</span> &#123;</span><br><span class="line">    <span class="type">Integer</span> <span class="variable">channel</span> <span class="operator">=</span> addVO.getChannel();</span><br><span class="line">    <span class="comment">// æ„é€ redisçš„key</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">currentId</span> <span class="operator">=</span> ThreadLocalUtil.getCurrentId();</span><br><span class="line">    <span class="type">String</span> <span class="variable">key</span> <span class="operator">=</span> FollowConstant.followKey + addVO.getUid();</span><br><span class="line">    <span class="type">Double</span> <span class="variable">zScore</span> <span class="operator">=</span> redisUtils.zScore(key, currentId);</span><br><span class="line">    <span class="comment">// å…ˆåˆ¤æ–­èƒ½ä¸èƒ½å…³æ³¨</span></span><br><span class="line">    <span class="keyword">if</span> ((Objects.nonNull(zScore) &amp;&amp; CollectionConstant.OperateEnum.ON_COLL.getCode().equals(channel))</span><br><span class="line">        || (Objects.isNull(zScore) &amp;&amp; CollectionConstant.OperateEnum.DOWN_COLL.getCode().equals(addVO.getChannel()))) &#123;</span><br><span class="line">        <span class="keyword">return</span> Boolean.FALSE;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (CollectionConstant.OperateEnum.ON_COLL.getCode().equals(channel)) &#123;</span><br><span class="line">        <span class="comment">// å®ç°å…³æ³¨é€»è¾‘ï¼Œå¹¶å°†å…³æ³¨çš„å…³ç³»åŠ å…¥åˆ°redisä¸­</span></span><br><span class="line">        <span class="keyword">return</span> redisUtils.zAdd(key, currentId, System.currentTimeMillis());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// å–æ¶ˆå…³æ³¨</span></span><br><span class="line">    <span class="keyword">if</span> (CollectionConstant.OperateEnum.DOWN_COLL.getCode().equals(addVO.getChannel())) &#123;</span><br><span class="line">        <span class="comment">// å®ç°å–æ¶ˆå…³æ³¨çš„æ•°æ®åº“é€»è¾‘ï¼Œå¹¶å°†redisä¸­çš„å…³æ³¨å…³ç³»åˆ é™¤</span></span><br><span class="line">        <span class="keyword">return</span> redisUtils.zRemove(key, currentId) &gt; <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> Boolean.FALSE;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="å…«geoæ•°æ®ç»“æ„è®¡ç®—è·ç¦»">å…«ã€GEOæ•°æ®ç»“æ„è®¡ç®—è·ç¦»</h1>
<blockquote>
<p>ä½¿ç”¨Redisçš„GEOæ•°æ®æœºæ„è¿›è¡Œç»Ÿè®¡</p>
</blockquote>
<h2 id="geoæ•°æ®ç»“æ„åŸºæœ¬ç”¨æ³•">1ã€ GEOæ•°æ®ç»“æ„åŸºæœ¬ç”¨æ³•</h2>
<p>GEOå°±æ˜¯Geolocationçš„ç®€å†™å½¢å¼ï¼Œä»£è¡¨åœ°ç†åæ ‡ã€‚Redisåœ¨3.2ç‰ˆæœ¬ä¸­åŠ å…¥äº†å¯¹GEOçš„æ”¯æŒï¼Œå…è®¸å­˜å‚¨åœ°ç†åæ ‡ä¿¡æ¯ï¼Œå¸®åŠ©æˆ‘ä»¬æ ¹æ®ç»çº¬åº¦æ¥æ£€ç´¢æ•°æ®ã€‚å¸¸è§çš„å‘½ä»¤æœ‰ï¼š</p>
<ul>
<li>GEOADDï¼šæ·»åŠ ä¸€ä¸ªåœ°ç†ç©ºé—´ä¿¡æ¯ï¼ŒåŒ…å«ï¼šç»åº¦ï¼ˆlongitudeï¼‰ã€çº¬åº¦ï¼ˆlatitudeï¼‰ã€å€¼ï¼ˆmemberï¼‰</li>
<li>GEODISTï¼šè®¡ç®—æŒ‡å®šçš„ä¸¤ä¸ªç‚¹ä¹‹é—´çš„è·ç¦»å¹¶è¿”å›</li>
<li>GEOHASHï¼šå°†æŒ‡å®šmemberçš„åæ ‡è½¬ä¸ºhashå­—ç¬¦ä¸²å½¢å¼å¹¶è¿”å›</li>
<li>GEOPOSï¼šè¿”å›æŒ‡å®šmemberçš„åæ ‡</li>
<li>GEORADIUSï¼šæŒ‡å®šåœ†å¿ƒã€åŠå¾„ï¼Œæ‰¾åˆ°è¯¥åœ†å†…åŒ…å«çš„æ‰€æœ‰memberï¼Œå¹¶æŒ‰ç…§ä¸åœ†å¿ƒä¹‹é—´çš„è·ç¦»æ’åºåè¿”å›ã€‚6.ä»¥åå·²åºŸå¼ƒ</li>
<li>GEOSEARCHï¼šåœ¨æŒ‡å®šèŒƒå›´å†…æœç´¢memberï¼Œå¹¶æŒ‰ç…§ä¸æŒ‡å®šç‚¹ä¹‹é—´çš„è·ç¦»æ’åºåè¿”å›ã€‚èŒƒå›´å¯ä»¥æ˜¯åœ†å½¢æˆ–çŸ©å½¢ã€‚6.2.æ–°åŠŸèƒ½</li>
<li>GEOSEARCHSTOREï¼šä¸GEOSEARCHåŠŸèƒ½ä¸€è‡´ï¼Œä¸è¿‡å¯ä»¥æŠŠç»“æœå­˜å‚¨åˆ°ä¸€ä¸ªæŒ‡å®šçš„keyã€‚
6.2.æ–°åŠŸèƒ½</li>
</ul>
<h2 id="å­˜å…¥redisä¸­çš„æ•°æ®ç»“æ„å®šä¹‰">2ã€å­˜å…¥Redisä¸­çš„æ•°æ®ç»“æ„å®šä¹‰</h2>
<p>â€ƒGEOåœ¨redisä¸­å°±ä¸€ä¸ªmenberå’Œä¸€ä¸ªç»çº¬åº¦ï¼Œæˆ‘ä»¬æŠŠxå’Œyè½´ä¼ å…¥åˆ°redisåšçš„ç»çº¬åº¦ä½ç½®å»ï¼Œä½†æˆ‘ä»¬ä¸èƒ½æŠŠæ‰€æœ‰çš„æ•°æ®éƒ½æ”¾å…¥åˆ°menberä¸­å»ï¼Œæ¯•ç«Ÿä½œä¸ºredisæ˜¯ä¸€ä¸ªå†…å­˜çº§æ•°æ®åº“ï¼Œå¦‚æœå­˜æµ·é‡æ•°æ®ï¼Œredisè¿˜æ˜¯åŠ›ä¸ä»å¿ƒï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨è¿™ä¸ªåœ°æ–¹å­˜å‚¨ä»–çš„idå³å¯ã€‚</p>
<p>â€ƒä½†æ˜¯è¿™ä¸ªæ—¶å€™è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯åœ¨redisä¸­å¹¶æ²¡æœ‰å­˜å‚¨typeï¼Œæ‰€ä»¥æˆ‘ä»¬æ— æ³•æ ¹æ®typeæ¥å¯¹æ•°æ®è¿›è¡Œç­›é€‰ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥æŒ‰ç…§å•†æˆ·ç±»å‹åšåˆ†ç»„ï¼Œç±»å‹ç›¸åŒçš„å•†æˆ·ä½œä¸ºåŒä¸€ç»„ï¼Œä»¥typeIdä¸ºkeyå­˜å…¥åŒä¸€ä¸ªGEOé›†åˆä¸­å³å¯</p>
<p><img src="https://ych-blog.oss-cn-guangzhou.aliyuncs.com/20250311105501.png" style="zoom:50%;" /></p>
<h1 id="ä¹rediså®ç°ç­¾åˆ°åŠŸèƒ½">ä¹ã€Rediså®ç°ç­¾åˆ°åŠŸèƒ½</h1>
<blockquote>
<p>ä½¿ç”¨Redisçš„BitMapå®ç°</p>
</blockquote>
<h2 id="bitmapæ•°æ®æœºæ„åŸºæœ¬ç”¨æ³•">1ã€BitMapæ•°æ®æœºæ„åŸºæœ¬ç”¨æ³•</h2>
<p>BitMapçš„æ“ä½œå‘½ä»¤æœ‰ï¼š</p>
<ul>
<li>SETBITï¼šå‘æŒ‡å®šä½ç½®ï¼ˆoffsetï¼‰å­˜å…¥ä¸€ä¸ª0æˆ–1</li>
<li>GETBIT ï¼šè·å–æŒ‡å®šä½ç½®ï¼ˆoffsetï¼‰çš„bitå€¼</li>
<li>BITCOUNT ï¼šç»Ÿè®¡BitMapä¸­å€¼ä¸º1çš„bitä½çš„æ•°é‡</li>
<li>BITFIELD
ï¼šæ“ä½œï¼ˆæŸ¥è¯¢ã€ä¿®æ”¹ã€è‡ªå¢ï¼‰BitMapä¸­bitæ•°ç»„ä¸­çš„æŒ‡å®šä½ç½®ï¼ˆoffsetï¼‰çš„å€¼</li>
<li>BITFIELD_RO ï¼šè·å–BitMapä¸­bitæ•°ç»„ï¼Œå¹¶ä»¥åè¿›åˆ¶å½¢å¼è¿”å›</li>
<li>BITOP ï¼šå°†å¤šä¸ªBitMapçš„ç»“æœåšä½è¿ç®—ï¼ˆä¸ ã€æˆ–ã€å¼‚æˆ–ï¼‰</li>
<li>BITPOS ï¼šæŸ¥æ‰¾bitæ•°ç»„ä¸­æŒ‡å®šèŒƒå›´å†…ç¬¬ä¸€ä¸ª0æˆ–1å‡ºç°çš„ä½ç½®</li>
</ul>
<h2 id="å®ç°åŸç†-3">2ã€å®ç°åŸç†</h2>
<p>â€ƒæˆ‘ä»¬æŒ‰æœˆæ¥ç»Ÿè®¡ç”¨æˆ·ç­¾åˆ°ä¿¡æ¯ï¼Œç­¾åˆ°è®°å½•ä¸º1ï¼Œæœªç­¾åˆ°åˆ™è®°å½•ä¸º0ã€‚æŠŠæ¯ä¸€ä¸ªbitä½å¯¹åº”å½“æœˆçš„æ¯ä¸€å¤©ï¼Œå½¢æˆäº†æ˜ å°„å…³ç³»ã€‚ç”¨0å’Œ1æ ‡ç¤ºä¸šåŠ¡çŠ¶æ€ï¼Œè¿™ç§æ€è·¯å°±ç§°ä¸ºä½å›¾ï¼ˆBitMapï¼‰ã€‚è¿™æ ·æˆ‘ä»¬å°±ç”¨æå°çš„ç©ºé—´ï¼Œæ¥å®ç°äº†å¤§é‡æ•°æ®çš„è¡¨ç¤ºã€‚Redisä¸­æ˜¯åˆ©ç”¨stringç±»å‹æ•°æ®ç»“æ„å®ç°BitMapï¼Œå› æ­¤æœ€å¤§ä¸Šé™æ˜¯512Mï¼Œè½¬æ¢ä¸ºbitåˆ™æ˜¯
2^32ä¸ªbitä½ã€‚</p>
<p><img
src="https://ych-blog.oss-cn-guangzhou.aliyuncs.com/20250311105928.png" /></p>
<h2 id="åŠŸèƒ½ç‚¹å®ç°">3ã€åŠŸèƒ½ç‚¹å®ç°</h2>
<p><strong>é—®é¢˜1ï¼š</strong>ä»€ä¹ˆå«åšè¿ç»­ç­¾åˆ°å¤©æ•°ï¼Ÿ
ä»æœ€åä¸€æ¬¡ç­¾åˆ°å¼€å§‹å‘å‰ç»Ÿè®¡ï¼Œç›´åˆ°é‡åˆ°ç¬¬ä¸€æ¬¡æœªç­¾åˆ°ä¸ºæ­¢ï¼Œè®¡ç®—æ€»çš„ç­¾åˆ°æ¬¡æ•°ï¼Œå°±æ˜¯è¿ç»­ç­¾åˆ°å¤©æ•°ã€‚</p>
<p><img
src="https://ych-blog.oss-cn-guangzhou.aliyuncs.com/20250311110039.png" /></p>
<p>Javaé€»è¾‘ä»£ç ï¼šè·å¾—å½“å‰è¿™ä¸ªæœˆçš„æœ€åä¸€æ¬¡ç­¾åˆ°æ•°æ®ï¼Œå®šä¹‰ä¸€ä¸ªè®¡æ•°å™¨ï¼Œç„¶åä¸åœçš„å‘å‰ç»Ÿè®¡ï¼Œç›´åˆ°è·å¾—ç¬¬ä¸€ä¸ªé0çš„æ•°å­—å³å¯ï¼Œæ¯å¾—åˆ°ä¸€ä¸ªé0çš„æ•°å­—è®¡æ•°å™¨+1ï¼Œç›´åˆ°éå†å®Œæ‰€æœ‰çš„æ•°æ®ï¼Œå°±å¯ä»¥è·å¾—å½“å‰æœˆçš„ç­¾åˆ°æ€»å¤©æ•°äº†</p>
<p><strong>é—®é¢˜2ï¼š</strong>å¦‚ä½•å¾—åˆ°æœ¬æœˆåˆ°ä»Šå¤©ä¸ºæ­¢çš„æ‰€æœ‰ç­¾åˆ°æ•°æ®ï¼Ÿ</p>
<p>BITFIELD key GET u[dayOfMonth] 0</p>
<p>å‡è®¾ä»Šå¤©æ˜¯10å·ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥ä»å½“å‰æœˆçš„ç¬¬ä¸€å¤©å¼€å§‹ï¼Œè·å¾—åˆ°å½“å‰è¿™ä¸€å¤©çš„ä½æ•°ï¼Œæ˜¯10å·ï¼Œé‚£ä¹ˆå°±æ˜¯10ä½ï¼Œå»æ‹¿è¿™æ®µæ—¶é—´çš„æ•°æ®ï¼Œå°±èƒ½æ‹¿åˆ°æ‰€æœ‰çš„æ•°æ®äº†ï¼Œé‚£ä¹ˆè¿™10å¤©é‡Œè¾¹ç­¾åˆ°äº†å¤šå°‘æ¬¡å‘¢ï¼Ÿç»Ÿè®¡æœ‰å¤šå°‘ä¸ª1å³å¯ã€‚</p>
<p><strong>é—®é¢˜3ï¼šå¦‚ä½•ä»åå‘å‰éå†æ¯ä¸ªbitä½ï¼Ÿ</strong></p>
<p>æ³¨æ„ï¼šbitMapè¿”å›çš„æ•°æ®æ˜¯10è¿›åˆ¶ï¼Œå“ªå‡å¦‚è¯´è¿”å›ä¸€ä¸ªæ•°å­—8ï¼Œé‚£ä¹ˆæˆ‘å“ªå„¿çŸ¥é“åˆ°åº•å“ªäº›æ˜¯0ï¼Œå“ªäº›æ˜¯1å‘¢ï¼Ÿæˆ‘ä»¬åªéœ€è¦è®©å¾—åˆ°çš„10è¿›åˆ¶æ•°å­—å’Œ1åšä¸è¿ç®—å°±å¯ä»¥äº†ï¼Œå› ä¸º1åªæœ‰é‡è§1
æ‰æ˜¯1ï¼Œå…¶ä»–æ•°å­—éƒ½æ˜¯0
ï¼Œæˆ‘ä»¬æŠŠç­¾åˆ°ç»“æœå’Œ1è¿›è¡Œä¸æ“ä½œï¼Œæ¯ä¸ä¸€æ¬¡ï¼Œå°±æŠŠç­¾åˆ°ç»“æœå‘å³ç§»åŠ¨ä¸€ä½ï¼Œä¾æ¬¡å†…æ¨ï¼Œæˆ‘ä»¬å°±èƒ½å®Œæˆé€ä¸ªéå†çš„æ•ˆæœäº†ã€‚</p>
<p>éœ€æ±‚ï¼šå®ç°ä¸‹é¢æ¥å£ï¼Œç»Ÿè®¡å½“å‰ç”¨æˆ·æˆªæ­¢å½“å‰æ—¶é—´åœ¨æœ¬æœˆçš„è¿ç»­ç­¾åˆ°å¤©æ•°</p>
<p>æœ‰ç”¨æˆ·æœ‰æ—¶é—´æˆ‘ä»¬å°±å¯ä»¥ç»„ç»‡å‡ºå¯¹åº”çš„keyï¼Œæ­¤æ—¶å°±èƒ½æ‰¾åˆ°è¿™ä¸ªç”¨æˆ·æˆªæ­¢è¿™å¤©çš„æ‰€æœ‰ç­¾åˆ°è®°å½•ï¼Œå†æ ¹æ®è¿™å¥—ç®—æ³•ï¼Œå°±èƒ½ç»Ÿè®¡å‡ºæ¥ä»–è¿ç»­ç­¾åˆ°çš„æ¬¡æ•°äº†</p>
<h2
id="å…³äºä½¿ç”¨bitmapæ¥è§£å†³ç¼“å­˜ç©¿é€çš„æ–¹æ¡ˆ">4ã€å…³äºä½¿ç”¨BitMapæ¥è§£å†³ç¼“å­˜ç©¿é€çš„æ–¹æ¡ˆ</h2>
<p>å®ç°åŸç†è·Ÿå¸ƒéš†è¿‡æ»¤å™¨æ˜¯åŸºæœ¬ä¸€æ ·çš„ï¼Œéƒ½æ˜¯é€šè¿‡Hashï¼Œå°†ç‰©æ–™çš„ä¸»é”®idæ˜ å°„æˆä½å›¾èƒ½å¤Ÿè®°å½•çš„idxï¼Œç„¶ååœ¨ä½å›¾ä¸­æ ‡è¯†å‡ºæ¥ã€‚ç­‰è¦åˆ¤æ–­æ˜¯å½“å‰æŸ¥è¯¢ä¸»é”®idæ˜¯å¦å­˜åœ¨æ—¶ï¼Œå†å°†å½“å‰ä¸»é”®idè¿›è¡ŒHashï¼Œçœ‹æ˜¯å¦åœ¨ä½å›¾ä¸­è¢«æ ‡æ³¨ã€‚è‹¥è¢«æ ‡æ³¨ï¼Œåˆ™å¯ä»¥è®¿é—®ï¼Œè‹¥æ²¡æœ‰ï¼Œåˆ™æ‹’ç»è®¿é—®ã€‚å¸ƒéš†è¿‡æ»¤å™¨çš„åŒºåˆ«ä¸»è¦æ˜¯ï¼Œå¯èƒ½å¸ƒéš†è¿‡æ»¤å™¨ä¼šå¤šç”¨å‡ ä¸ªHashå‡½æ•°ã€‚</p>
<h1 id="åuvç»Ÿè®¡">åã€UVç»Ÿè®¡</h1>
<h2 id="uvå’Œpv">1ã€UVå’ŒPV</h2>
<ul>
<li>UVï¼šå…¨ç§°Unique
Visitorï¼Œä¹Ÿå«ç‹¬ç«‹è®¿å®¢é‡ï¼Œæ˜¯æŒ‡é€šè¿‡äº’è”ç½‘è®¿é—®ã€æµè§ˆè¿™ä¸ªç½‘é¡µçš„è‡ªç„¶äººã€‚1å¤©å†…åŒä¸€ä¸ªç”¨æˆ·å¤šæ¬¡è®¿é—®è¯¥ç½‘ç«™ï¼Œåªè®°å½•1æ¬¡ã€‚</li>
<li>PVï¼šå…¨ç§°Page
Viewï¼Œä¹Ÿå«é¡µé¢è®¿é—®é‡æˆ–ç‚¹å‡»é‡ï¼Œç”¨æˆ·æ¯è®¿é—®ç½‘ç«™çš„ä¸€ä¸ªé¡µé¢ï¼Œè®°å½•1æ¬¡PVï¼Œç”¨æˆ·å¤šæ¬¡æ‰“å¼€é¡µé¢ï¼Œåˆ™è®°å½•å¤šæ¬¡PVã€‚å¾€å¾€ç”¨æ¥è¡¡é‡ç½‘ç«™çš„æµé‡ã€‚</li>
</ul>
<h2 id="hyperloglog-ç®—æ³•åŸç†">2ã€HyperLogLog ç®—æ³•åŸç†</h2>
<p><a
href="https://juejin.cn/post/6844903785744056333#heading-0">å‚è€ƒæ–‡ç« </a></p>
]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>Redis</tag>
        <tag>ä¸­é—´ä»¶</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€åŠ›æ‰£ã€‘çƒ­é¢˜100</title>
    <url>/2025/03/02/Algorithm/%E3%80%90%E5%8A%9B%E6%89%A3%E3%80%91%E7%83%AD%E9%A2%98100/</url>
    <content><![CDATA[<blockquote>
<p>ğŸš© å­¦å¦‚é€†æ°´è¡ŒèˆŸï¼Œä¸è¿›åˆ™é€€ã€‚ â€”â€” ã€Šå¢å¹¿è´¤æ–‡ã€‹</p>
</blockquote>
<h1 id="ä¸€åŠ›æ‰£çƒ­é¢˜100">ä¸€ã€åŠ›æ‰£çƒ­é¢˜100</h1>
]]></content>
      <categories>
        <category>ç®—æ³•</category>
      </categories>
      <tags>
        <tag>åŠ›æ‰£</tag>
        <tag>çƒ­é¢˜100</tag>
      </tags>
  </entry>
  <entry>
    <title>JUCå¹¶å‘ç¼–ç¨‹</title>
    <url>/2025/02/24/Java/JUC%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/</url>
    <content><![CDATA[<h1 id="ä¸€åŸºç¡€çŸ¥è¯†å¤ä¹ ">ä¸€ã€åŸºç¡€çŸ¥è¯†å¤ä¹ </h1>
<h2 id="ä»startä¸€ä¸ªçº¿ç¨‹è¯´èµ·">1ã€ ä»startä¸€ä¸ªçº¿ç¨‹è¯´èµ·</h2>
<p>â€‹ Javaçš„çº¿ç¨‹å¯åŠ¨æ˜¯è°ƒç”¨äº†çº¿ç¨‹å˜é‡startå‡½æ•°ï¼Œè€Œåœ¨æºç ä¸­ start
å‡½æ•°è°ƒç”¨çš„æ˜¯ start0() ï¼ˆnativeä¿®é¥°ï¼‰çš„ç³»ç»Ÿå‡½æ•°ï¼Œstart0
çš„ç³»ç»Ÿå‡½æ•°æ˜¯ç»“åˆäº†Javaçš„JVMå’Œä¸»æœºç³»ç»Ÿçš„çº¿ç¨‹å‡½æ•°æ˜¯å®ç°çš„ã€‚</p>
<p><img src="https://ych-blog.oss-cn-guangzhou.aliyuncs.com/20250309202911.png" style="zoom:50%;" /></p>
<h2 id="javaå¤šçº¿ç¨‹ç›¸å…³æ¦‚å¿µ">2ã€Javaå¤šçº¿ç¨‹ç›¸å…³æ¦‚å¿µ</h2>
<h3 id="æ¦‚å¿µ">ï¼ˆ1ï¼‰æ¦‚å¿µ</h3>
<p><img src="https://ych-blog.oss-cn-guangzhou.aliyuncs.com/20250309202950.png" style="zoom: 67%;" /></p>
<h3
id="javaçº¿ç¨‹åˆ†ä¸ºç”¨æˆ·çº¿ç¨‹å’Œå®ˆæŠ¤çº¿ç¨‹">ï¼ˆ2ï¼‰Javaçº¿ç¨‹åˆ†ä¸ºç”¨æˆ·çº¿ç¨‹å’Œå®ˆæŠ¤çº¿ç¨‹</h3>
<ol type="1">
<li><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä¸åšä»»ä½•é…ç½®éƒ½æ˜¯ç”¨æˆ·çº¿ç¨‹ã€‚</p></li>
<li><p>ç”¨æˆ·çº¿ç¨‹ï¼ˆUser Threadï¼‰
æ˜¯ç³»ç»Ÿçš„å·¥ä½œçº¿ç¨‹ï¼Œå®ƒä¼šå®Œæˆè¿™ä¸ªç¨‹åºéœ€è¦å®Œæˆçš„ä¸šåŠ¡æ“ä½œã€‚</p></li>
<li><p>å®ˆæŠ¤çº¿ç¨‹ï¼ˆDaemon
Threadï¼‰æ˜¯ä¸€ç§ç‰¹æ®Šçš„çº¿ç¨‹ï¼Œæ˜¯ä¸ºå…¶å®ƒçº¿ç¨‹æœåŠ¡çš„ï¼Œåœ¨åå°é»˜é»˜å®Œæˆä¸€äº›ç³»ç»Ÿæ€§çš„æœåŠ¡ï¼Œæ¯”å¦‚åƒåœ¾å›æ”¶çº¿ç¨‹å°±æ˜¯ä¸€ç§å…¸å‹çš„å®ˆæŠ¤çº¿ç¨‹ã€‚å½“ç³»ç»Ÿåªå‰©ä¸‹å®ˆæŠ¤çº¿ç¨‹æ—¶ï¼ŒJavaè™šæ‹Ÿæœºä¼šè‡ªåŠ¨é€€å‡ºã€‚</p></li>
</ol>
<h3 id="daemonå±æ€§">ï¼ˆ3ï¼‰Daemonå±æ€§</h3>
<p>çº¿ç¨‹ä¸­ä¼šå­˜åœ¨Daemonå±æ€§ï¼Œè°ƒç”¨isDaemonå‡½æ•°å¯ä»¥åˆ¤æ–­å½“å‰çº¿ç¨‹æ˜¯å¦ä¸ºå®ˆæŠ¤çº¿ç¨‹ï¼Œè°ƒç”¨setDaemonå¯ä»¥è®¾ç½®å½“å‰çº¿ç¨‹ä¸ºå®ˆæŠ¤çº¿ç¨‹ã€‚</p>
<h3 id="å°æ€»ç»“">ï¼ˆ4ï¼‰å°æ€»ç»“</h3>
<p>â€‹
å¦‚æœç”¨æˆ·çº¿ç¨‹å…¨éƒ¨ç»“æŸæ„å‘³ç€ç¨‹åºéœ€è¦å®Œæˆçš„ä¸šåŠ¡æ“ä½œå·²ç»ç»“æŸäº†ï¼Œå®ˆæŠ¤çº¿ç¨‹éšç€JVMä¸€åŒç»“æŸå·¥ä½œã€‚setDaemon(true)æ–¹æ³•å¿…é¡»åœ¨start()ä¹‹å‰è®¾ç½®ï¼Œå¦åˆ™æŠ¥IIIegalThreadStateExceptionå¼‚å¸¸</p>
<p>demoï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">thread</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; &#123;</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">&quot; çº¿ç¨‹æ­£åœ¨è¿è¡Œ~~~~&quot;</span>);</span><br><span class="line">            System.out.println(Thread.currentThread().isDaemon()? <span class="string">&quot;å®ˆæŠ¤çº¿ç¨‹&quot;</span>:<span class="string">&quot;ç”¨æˆ·çº¿ç¨‹&quot;</span>);</span><br><span class="line">            <span class="keyword">while</span> (<span class="literal">true</span>)&#123;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;, <span class="string">&quot;test&quot;</span>);</span><br><span class="line">        thread.setDaemon(<span class="literal">true</span>);</span><br><span class="line">        thread.start();</span><br><span class="line">        Thread.sleep(<span class="number">3000L</span>);</span><br><span class="line">        System.out.println(Thread.currentThread().getName() + <span class="string">&quot; ç³»ç»Ÿçº¿ç¨‹æ­£åœ¨è¿è¡Œ~~~&quot;</span>);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h1 id="äºŒcompletablefuture">äºŒã€CompletableFuture</h1>
<h2 id="futureç†è®ºçŸ¥è¯†å¤ä¹ ">1ã€Futureç†è®ºçŸ¥è¯†å¤ä¹ </h2>
<p>â€‹
Futureæ¥å£ï¼ˆFutureTaskå®ç°ç±»ï¼‰å®šä¹‰äº†æ“ä½œå¼‚æ­¥ä»»åŠ¡æ‰§è¡Œä¸€äº›æ–¹æ³•ï¼Œå¦‚è·å–å¼‚æ­¥ä»»åŠ¡çš„æ‰§è¡Œç»“æœã€å–æ¶ˆä»»åŠ¡çš„æ‰§è¡Œã€åˆ¤æ–­ä»»åŠ¡æ˜¯å¦è¢«å–æ¶ˆã€åˆ¤æ–­ä»»åŠ¡æ‰§è¡Œæ˜¯å¦å®Œæ¯•ç­‰ã€‚</p>
<p>å¤šçº¿ç¨‹éœ€è¦æ»¡è¶³ä¸‰ä¸ªç‰¹ç‚¹ï¼šå¤šçº¿ç¨‹/æœ‰è¿”å›/å¼‚æ­¥ä»»åŠ¡</p>
<h3 id="futuretaskå®ç°ç±»">ï¼ˆ1ï¼‰FutureTaskå®ç°ç±»</h3>
<p>â€‹
Futureå®ç°äº†RunnableFuturæ¥å£ï¼Œè€ŒRunnableFuturåˆç»§æ‰¿äº†Runnableå’ŒFutureæ¥å£ï¼Œæ»¡è¶³äº†å¤šçº¿ç¨‹å’Œå¼‚æ­¥ä»»åŠ¡çš„ç‰¹æ€§ï¼ŒåŒæ—¶é‡‡ç”¨æ„é€ æ³¨å…¥çš„æ–¹å¼ï¼Œä½¿å¾—FutureTaskå®ç°ç±»å…·å¤‡æœ‰è¿”å›çš„ç‰¹æ€§ï¼Œåªè¦è¿™ä¸ªå®ç°ç±»æ„é€ æ³¨å…¥Callableå°±èƒ½æœ‰è¿”å›å€¼ã€‚</p>
<p><img src="https://ych-blog.oss-cn-guangzhou.aliyuncs.com/20250309203019.png" style="zoom:67%;" /></p>
<p>ä»£ç ç¤ºèŒƒï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FutureTaskDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ExecutionException, InterruptedException &#123;</span><br><span class="line">        FutureTask&lt;String&gt; futureTask  = <span class="keyword">new</span> <span class="title class_">FutureTask</span>&lt;&gt;(<span class="keyword">new</span> <span class="title class_">Mythread</span>());</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">thread</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(futureTask,<span class="string">&quot;test&quot;</span>);</span><br><span class="line">        thread.start();</span><br><span class="line">        System.out.println(futureTask.get());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Mythread</span> <span class="keyword">implements</span> <span class="title class_">Callable</span>&lt;String&gt; &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">call</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;come in call ~~~~&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;å¼ ä¸‰&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="futureç¼–ç å®æˆ˜å’Œä¼˜ç¼ºç‚¹">ï¼ˆ2ï¼‰Futureç¼–ç å®æˆ˜å’Œä¼˜ç¼ºç‚¹</h3>
<ol type="1">
<li>ä¼˜ç‚¹ï¼š
<ul>
<li>future + çº¿ç¨‹æ± å¼‚æ­¥å¤šçº¿ç¨‹ä»»åŠ¡é…åˆï¼Œèƒ½æ˜¾è‘—æé«˜ç¨‹åºçš„æ‰§è¡Œæ•ˆç‡ã€‚</li>
</ul></li>
<li>ç¼ºç‚¹ï¼š
<ul>
<li>getæ–¹æ³•é˜»å¡</li>
<li>isDone() è½®è¯¢æ›´å®¹æ˜“å¯¼è‡´CPUä¸­æ–­ã€‚
isDoneå‡½æ•°å¯ä»¥è¿”å›å½“å‰çº¿ç¨‹æ˜¯å¦æ‰§è¡Œå®Œæˆ</li>
</ul></li>
</ol>
<h2 id="completablefuture">2ã€CompletableFuture</h2>
<h3
id="completablefutureå¯¹futureçš„æ”¹è¿›">ï¼ˆ1ï¼‰CompletableFutureå¯¹Futureçš„æ”¹è¿›</h3>
<p>ä¸»è¦å†…å®¹ï¼šCompletableFutureæä¾›äº†ä¸€ç§è§‚å¯Ÿè€…æ¨¡å¼ç±»ä¼¼çš„æœºåˆ¶ï¼Œå¯ä»¥è®©ä»»åŠ¡å®Œæˆåé€šçŸ¥ç›‘å¬çš„ä¸€æ–¹</p>
<ol type="1">
<li>ç»§æ‰¿å…³ç³»</li>
</ol>
<p>CompletableFutureç»§æ‰¿äº†Futureå’ŒCompletionStageæ¥å£ï¼Œæ‰€ä»¥Futureæ‹¥æœ‰çš„åŠŸèƒ½ï¼Œå®ƒä¹Ÿæœ‰ã€‚</p>
<p><img src="https://ych-blog.oss-cn-guangzhou.aliyuncs.com/20250309203030.png" style="zoom:80%;" /></p>
<ol start="2" type="1">
<li>CompletionStageä»£è¡¨å¼‚æ­¥è®¡ç®—è¿‡ç¨‹ä¸­çš„æŸä¸€ä¸ªé˜¶æ®µï¼Œä¸€ä¸ªé˜¶æ®µå®Œæˆä»¥åå¯èƒ½ä¼šè§¦å‘å¦å¤–ä¸€ä¸ªé˜¶æ®µã€‚æœ‰ç‚¹ç±»ä¼¼Linuxç³»ç»Ÿçš„ç®¡é“åˆ†éš”ç¬¦ä¼ å‚æ•°</li>
<li>CompletableFutureä¸éœ€è¦å†å¦å¤–åˆ›é€ æ–°çš„çº¿ç¨‹å˜é‡æˆ–è€…çº¿ç¨‹æ± æ‰§è¡Œå¼‚æ­¥ä»»åŠ¡ã€‚FutureTaskå¹¶æ²¡æœ‰å†…ç½®çº¿ç¨‹æ± ï¼Œæ‰€ä»¥åœ¨è¿›è¡Œå£°æ˜åï¼Œéœ€è¦ä½¿ç”¨çº¿ç¨‹å¯¹è±¡å»æ‰§è¡Œè¿™ä¸ªå¼‚æ­¥ç¼–ç¨‹ï¼Œä½†æ˜¯CompletableFutureåœ¨æ²¡æœ‰ä¸ºå®ƒä¼ å…¥çº¿ç¨‹æ± æ—¶ï¼Œå®ƒä¼šè°ƒç”¨è‡ªèº«å†…ç½®çš„ForkJoinPool.commonPool()çº¿ç¨‹æ± å®Œæˆå¼‚æ­¥ä»»åŠ¡ï¼Œä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒForkJoinPoolæ‰§è¡Œä»»åŠ¡çš„çº¿ç¨‹æ˜¯å®ˆæŠ¤çº¿ç¨‹ï¼Œæ‰€ä»¥åœ¨mainå‡½æ•°æ‰§è¡Œç»“æŸæ—¶ï¼Œè¿˜æ²¡æœ‰å®Œæˆçš„çº¿ç¨‹ä¼šè¢«å¼ºåˆ¶ä¸­æ–­ã€‚å¯¹äºè¿™ç§æƒ…å†µï¼Œè§£å†³æ–¹æ³•æ˜¯ï¼Œä½¿ç”¨è‡ªå·±çš„çº¿ç¨‹æ± ï¼Œåœ¨ç¨‹åºæœ«å°¾ï¼Œæ·»åŠ çº¿ç¨‹æ± å…³é—­åŠ¨ä½œã€‚</li>
</ol>
<h3
id="completablefutureä¹‹å››å¤§é™æ€æ–¹æ³•">ï¼ˆ2ï¼‰CompletableFutureä¹‹å››å¤§é™æ€æ–¹æ³•</h3>
<ol type="1">
<li><p>runAsync æ— è¿”å›å€¼</p>
<ol type="1">
<li>```java public static CompletableFuture<Void> runAsync(Runnable
runnable, Executor executor) <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">2. ```java</span><br><span class="line">   public static CompletableFuture&lt;Void&gt; runAsync(Runnable runnable)</span><br></pre></td></tr></table></figure></li>
</ol></li>
<li><p>supplyAsync æœ‰è¿”å›å€¼</p>
<pre><code>1. ```java
public static &lt;U&gt; CompletableFuture&lt;U&gt; supplyAsync(Supplier&lt;U&gt; supplier,
                                                   Executor executor)
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">	2. ```java</span><br><span class="line">public static &lt;U&gt; CompletableFuture&lt;U&gt; supplyAsync(Supplier&lt;U&gt; supplier)</span><br><span class="line"></span><br></pre></td></tr></table></figure></code></pre></li>
</ol>
<p>å¦‚æœæ²¡æœ‰ä¼ å…¥çº¿ç¨‹æ± ï¼Œé‚£ä¹ˆä¼šé»˜è®¤ä½¿ç”¨ForkJoinPool.commonPool()
ä½œä¸ºå®ƒçš„çº¿ç¨‹æ± æ‰§è¡Œå¼‚æ­¥ä»£ç ã€‚å¦‚æœè°ƒç”¨äº†éœ€è¦ä¼ å…¥çº¿ç¨‹æ± çš„æ„é€ å‡½æ•°ï¼Œåˆ™ä¼šä½¿ç”¨æˆ‘ä»¬ä¼ å…¥çš„çº¿ç¨‹æ± æ¥æ‰§è¡Œå¯¹åº”çš„å¼‚æ­¥ä»£ç ã€‚</p>
<p>demoä»£ç </p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ExecutionException, InterruptedException &#123;</span><br><span class="line">        <span class="type">ExecutorService</span> <span class="variable">executorService</span> <span class="operator">=</span> Executors.newFixedThreadPool(<span class="number">3</span>);</span><br><span class="line"><span class="comment">//        CompletableFuture&lt;Void&gt; completableFuture = CompletableFuture.runAsync(() -&gt; &#123;</span></span><br><span class="line"><span class="comment">//            System.out.println(Thread.currentThread().getName() + &quot; ========= &quot;);</span></span><br><span class="line"><span class="comment">//            try &#123;  TimeUnit.SECONDS.sleep(2);  &#125; catch (InterruptedException e) &#123;  throw new RuntimeException(e);  &#125;</span></span><br><span class="line"><span class="comment">//        &#125;);</span></span><br><span class="line"><span class="comment">//        System.out.println(completableFuture.get());</span></span><br><span class="line"></span><br><span class="line">        CompletableFuture&lt;String&gt; completableFuture = CompletableFuture.supplyAsync(() -&gt; &#123;</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">&quot; ========= &quot;</span>);</span><br><span class="line">            <span class="keyword">try</span> &#123;  TimeUnit.SECONDS.sleep(<span class="number">2</span>);  &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;  <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);  &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;ä»Šå¤©æ˜¯ä¸ªå¥½æ—¥å­ï¼&quot;</span>;</span><br><span class="line">        &#125;, executorService);</span><br><span class="line">        System.out.println(completableFuture.get());</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h3
id="completablefutureä¹‹é€šç”¨å¼‚æ­¥ç¼–ç¨‹">ï¼ˆ3ï¼‰CompletableFutureä¹‹é€šç”¨å¼‚æ­¥ç¼–ç¨‹</h3>
<p>â€‹
ä¼šæœ‰è¿”å›å€¼ï¼Œå¹¶ä¸”å¯ä»¥åˆ†é˜¶æ®µå®Œæˆï¼Œä¸ºäº†è°ƒç”¨whenCompleteç›‘å¬çº¿ç¨‹å®Œæˆï¼Œå¼‚æ­¥ä»»åŠ¡å®Œæˆåå°†è°ƒç”¨è¯¥æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å¯ä»¥ä½¿ç”¨lambdaå‡½æ•°è·å–å¼‚æ­¥ä»»åŠ¡çš„è¿”å›å€¼ã€‚</p>
<p>ä¼˜ç‚¹ï¼š</p>
<ul>
<li>å¼‚æ­¥ä»»åŠ¡ç»“æŸæ—¶ï¼Œä¼šè‡ªåŠ¨å›è°ƒæŸä¸ªå¯¹è±¡çš„æ–¹æ³•</li>
<li>ä¸»çº¿ç¨‹è®¾ç½®å¥½å›è°ƒåï¼Œä¸éœ€è¦å…³å¿ƒå¼‚æ­¥ä»»åŠ¡çš„æ‰§è¡Œï¼Œå¼‚æ­¥ä»»åŠ¡ä¹‹é—´å¯ä»¥é¡ºåºæ‰§è¡Œ</li>
<li>å¼‚æ­¥ä»»åŠ¡å‡ºé”™æ—¶ï¼Œä¼šè‡ªåŠ¨å›è°ƒæŸä¸ªå¯¹è±¡çš„æ–¹æ³•</li>
</ul>
<p>demoä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ExecutionException, InterruptedException &#123;</span><br><span class="line">    <span class="comment">// ä½¿ç”¨è‡ªå·±çš„çº¿ç¨‹æ± </span></span><br><span class="line">    <span class="type">ExecutorService</span> <span class="variable">executorService</span> <span class="operator">=</span> Executors.newFixedThreadPool(<span class="number">3</span>);</span><br><span class="line">    <span class="keyword">try</span>&#123;</span><br><span class="line">        CompletableFuture&lt;Integer&gt; completableFuture = CompletableFuture.supplyAsync(() -&gt; &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> ThreadLocalRandom.current().nextInt(<span class="number">10</span>);</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                TimeUnit.SECONDS.sleep(<span class="number">2</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">&quot;è®¡ç®—ç»“æŸå•¦ï¼Œè®¡ç®—åæœ€ç»ˆçš„ç»“æœæ˜¯ï¼š&quot;</span> + result);</span><br><span class="line">            <span class="keyword">return</span> result;</span><br><span class="line">        &#125;, executorService).whenComplete((v, e) -&gt; &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;ç»ˆäºè®¡ç®—ç»“æŸäº†ï¼Ÿ æ­å–œå•¦&quot;</span>);</span><br><span class="line">        &#125;).exceptionally(e -&gt; &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            System.out.println(<span class="string">&quot;å¼‚å¸¸æƒ…å†µæ˜¯&quot;</span> + e.getCause() + <span class="string">&quot;å¼‚å¸¸ä¿¡æ¯ä¸º ï¼š &quot;</span> + e.getMessage());</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;);</span><br><span class="line">        System.out.println(completableFuture.get());</span><br><span class="line">    &#125;<span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        System.out.println(e.getMessage());</span><br><span class="line">    &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">        executorService.shutdown();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æ‹“å±•">ï¼ˆ4ï¼‰æ‹“å±•</h3>
<ol type="1">
<li>é€šç”¨å‡½æ•°æ¥å£</li>
</ol>
<table>
<thead>
<tr>
<th style="text-align: center;">å‡½æ•°å¼æ¥å£åç§°</th>
<th style="text-align: center;">æ–¹æ³•åç§°</th>
<th style="text-align: center;">å‚æ•°</th>
<th style="text-align: center;">è¿”å›å€¼</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">Runnable</td>
<td style="text-align: center;">run</td>
<td style="text-align: center;">æ— å‚æ•°</td>
<td style="text-align: center;">æ— è¿”å›å€¼</td>
</tr>
<tr>
<td style="text-align: center;">Function</td>
<td style="text-align: center;">apply</td>
<td style="text-align: center;">1ä¸ªå‚æ•°</td>
<td style="text-align: center;">æœ‰è¿”å›å€¼</td>
</tr>
<tr>
<td style="text-align: center;">Consume</td>
<td style="text-align: center;">accept</td>
<td style="text-align: center;">1ä¸ªå‚æ•°</td>
<td style="text-align: center;">æ— è¿”å›å€¼</td>
</tr>
<tr>
<td style="text-align: center;">Supplier</td>
<td style="text-align: center;">get</td>
<td style="text-align: center;">æ²¡æœ‰å‚æ•°</td>
<td style="text-align: center;">æœ‰è¿”å›å€¼</td>
</tr>
<tr>
<td style="text-align: center;">BiSummer</td>
<td style="text-align: center;">accept</td>
<td style="text-align: center;">2ä¸ªå‚æ•°</td>
<td style="text-align: center;">æ²¡æœ‰è¿”å›å€¼</td>
</tr>
</tbody>
</table>
<ol start="2" type="1">
<li><p>getå‡½æ•°å’Œjoinå‡½æ•°çš„åŒºåˆ«</p>
<p>getå‡½æ•°ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œjoinå‡½æ•°ä¸ä¼šæŠ›å‡ºå¼‚å¸¸</p></li>
</ol>
<h2 id="å®é™…æ¡ˆä¾‹">3ã€å®é™…æ¡ˆä¾‹</h2>
<p>ç”µå•†è·å–å¯¹åº”ä»·æ ¼æ¡ˆä¾‹ï¼Œä½¿ç”¨streamå’Œchainè¿˜æœ‰CompletableFutureè¿›è¡Œå®ç°</p>
<p>demoä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CompletableFutureMallDemo</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> List&lt;NetMall&gt; netMallList = Arrays.asList(</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">NetMall</span>(<span class="string">&quot;äº¬ä¸œ&quot;</span>),</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">NetMall</span>(<span class="string">&quot;æ·˜å®&quot;</span>),</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">NetMall</span>(<span class="string">&quot;å½“å½“&quot;</span>)</span><br><span class="line">    );</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> List&lt;String&gt; <span class="title function_">getPriceByCompletableFuture</span><span class="params">(List&lt;NetMall&gt; netMallList, String productName, ExecutorService executorService)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> netMallList.stream().map(netMall -&gt; CompletableFuture.supplyAsync(() -&gt;</span><br><span class="line">                String.format(productName + <span class="string">&quot; in %s price is %.2f &quot;</span>, netMall.getNetMallName(), netMall.calcPrice(productName), executorService)</span><br><span class="line">        )).collect(Collectors.toList()).stream().map(CompletableFuture::join).collect(Collectors.toList());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ExecutorService</span> <span class="variable">executorService</span> <span class="operator">=</span> Executors.newFixedThreadPool(<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">long</span> <span class="variable">startTime</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        List&lt;String&gt; prices = getPriceByCompletableFuture(netMallList, <span class="string">&quot;mysql&quot;</span>, executorService);</span><br><span class="line">        <span class="keyword">for</span> (String price : prices) &#123;</span><br><span class="line">            System.out.println(price);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">long</span> <span class="variable">endTime</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        System.out.println(<span class="string">&quot;-----costTime: &quot;</span> + (endTime - startTime) + <span class="string">&quot;æ¯«ç§’&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Getter</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">NetMall</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String netMallName;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">NetMall</span><span class="params">(String netMallName)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.netMallName = netMallName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Double <span class="title function_">calcPrice</span><span class="params">(String productName)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            TimeUnit.SECONDS.sleep(<span class="number">1</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ThreadLocalRandom.current().nextDouble() * <span class="number">2</span> + productName.charAt(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="completablefutureå¸¸ç”¨æ–¹æ³•">4ã€ CompletableFutureå¸¸ç”¨æ–¹æ³•</h2>
<h3 id="è·å¾—ç»“æœå’Œè§¦å‘è®¡ç®—">ï¼ˆ1ï¼‰è·å¾—ç»“æœå’Œè§¦å‘è®¡ç®—</h3>
<ol type="1">
<li>è·å¾—ç»“æœ
<ol type="1">
<li>get ä¸è§ä¸æ•£</li>
<li>å®šæ—¶get è¿‡æ—¶ä¸å€™</li>
<li>join ä¸è§ä¸æ•£ä½†ä¸æŠ›å¼‚å¸¸</li>
<li>getNew æ²¡æœ‰è®¡ç®—å®Œæˆï¼Œç»™ä¸€ä¸ªæå‰è®¾å®šçš„ç»“æœ</li>
</ol></li>
<li>ä¸»åŠ¨è§¦å‘è®¡ç®—
<ol type="1">
<li>complete æ˜¯å¦æ‰“ç®—getæ–¹æ³•ï¼Œç«‹å³è¿”å›æ‹¬å·å€¼</li>
</ol></li>
</ol>
<h3 id="å¯¹è®¡ç®—ç»“æœè¿›è¡Œå¤„ç†">ï¼ˆ2ï¼‰å¯¹è®¡ç®—ç»“æœè¿›è¡Œå¤„ç†</h3>
<ol type="1">
<li><p>thenApply</p>
<p>è®¡ç®—ç»“æœå­˜åœ¨ä¾èµ–å…³ç³»ï¼Œè¿™ä¸¤ä¸ªçº¿ç¨‹ä¸²è¡ŒåŒ–</p>
<p>å¼‚å¸¸ç›¸å…³ï¼šç”±äºå­˜åœ¨ä¾èµ–ï¼ˆå½“å‰æ­¥é”™ï¼Œä¸èµ°ä¸‹ä¸€æ­¥ï¼‰ï¼Œå½“å‰æ­¥éª¤æœ‰å¼‚å¸¸çš„è¯å°±å«åœ</p></li>
<li><p>handle</p>
<p>è®¡ç®—ç»“æœå­˜åœ¨ä¾èµ–å…³ç³»ï¼Œè¿™ä¸¤ä¸ªçº¿ç¨‹ä¸²è¡ŒåŒ–</p>
<p>å¼‚å¸¸ç›¸å…³ï¼šæœ‰å¼‚å¸¸ä¹Ÿå¯ä»¥å¾€ä¸‹ä¸€æ­¥èµ°ï¼Œæ ¹æ®å¸¦çš„å¼‚å¸¸å‚æ•°å¯ä»¥è¿›ä¸€æ­¥å¤„ç†</p></li>
</ol>
<h3 id="å¯¹è®¡ç®—ç»“æœè¿›è¡Œæ¶ˆè´¹">ï¼ˆ3ï¼‰å¯¹è®¡ç®—ç»“æœè¿›è¡Œæ¶ˆè´¹</h3>
<ol type="1">
<li><p>æ¥æ”¶ä»»åŠ¡çš„å¤„ç†ç»“æœï¼Œå¹¶æ¶ˆè´¹å¤„ç†ï¼Œæ— è¿”å›ç»“æœã€‚</p></li>
<li><p>thenAccept å¯ä»¥æ¥æ”¶ä¸Šä¸€æ­¥çš„ç»“æœï¼Œä½†æ˜¯ä¸ç”¨è¿”å›</p></li>
<li><p>å¯¹æ¯”è¡¥å……</p>
<p><img src="https://ych-blog.oss-cn-guangzhou.aliyuncs.com/20250309203046.png" style="zoom:80%;" /></p></li>
</ol>
<h3 id="å¯¹è®¡ç®—é€Ÿåº¦è¿›è¡Œé€‰ç”¨">ï¼ˆ4ï¼‰å¯¹è®¡ç®—é€Ÿåº¦è¿›è¡Œé€‰ç”¨</h3>
<p>é€šè¿‡è°ƒç”¨applyToEither()
å‡½æ•°æ¯”è¾ƒä¸¤ä¸ªçº¿ç¨‹ä¹‹é—´å“ªä¸€ä¸ªçº¿ç¨‹çš„æ‰§è¡Œæ‰€éœ€è¦çš„æ—¶é—´æ›´å°‘ï¼Œå¾—åˆ°çš„è¿”å›ç»“æœå°±æ˜¯é‚£ä¸ªç”¨æ—¶æ¯”è¾ƒå°‘çš„çº¿ç¨‹æ‰€è¿”å›çš„ç»“æœã€‚</p>
<h3 id="å¯¹è®¡ç®—ç»“æœè¿›è¡Œåˆå¹¶">ï¼ˆ5ï¼‰å¯¹è®¡ç®—ç»“æœè¿›è¡Œåˆå¹¶</h3>
<p>â€‹
ä¸¤ä¸ªCompletionStageä»»åŠ¡éƒ½å®Œæˆåï¼Œæœ€ç»ˆèƒ½æŠŠä¸¤ä¸ªä»»åŠ¡çš„ç»“æœä¸€èµ·äº¤ç»™thenCombineè¿›è¡Œå¤„ç†ï¼Œå…ˆå®Œæˆç­‰åå®Œæˆï¼Œä¸€èµ·å®Œæˆåå†è¿›è¡Œåˆå¹¶ã€‚</p>
<h2 id="completablefutureå’Œçº¿ç¨‹æ± ">5ã€CompletableFutureå’Œçº¿ç¨‹æ± </h2>
<ol type="1">
<li><p>æ²¡æœ‰ä¼ å…¥è‡ªå®šä¹‰çº¿ç¨‹æ± ï¼Œéƒ½ç”¨é»˜è®¤çº¿ç¨‹æ± ForkJoinPool</p></li>
<li><p>ä¼ å…¥äº†ä¸€ä¸ªè‡ªå®šä¹‰çº¿ç¨‹æ± </p>
<p>å¦‚æœæ‰§è¡Œç¬¬ä¸€ä¸ªä»»åŠ¡çš„æ—¶å€™ï¼Œä¼ å…¥äº†ä¸€ä¸ªè‡ªå®šä¹‰çº¿ç¨‹æ± </p>
<p>è°ƒç”¨thenRunæ–¹æ³•æ‰§è¡Œç¬¬äºŒä¸ªä»»åŠ¡æ—¶ï¼Œåˆ™ç¬¬äºŒä¸ªä»»åŠ¡å’Œç¬¬ä¸€ä¸ªä»»åŠ¡æ˜¯å…±åŒä½¿ç”¨åŒä¸€ä¸ªçº¿ç¨‹æ± </p>
<p>è°ƒç”¨thenRunAsyncæ‰§è¡Œç¬¬äºŒä¸ªä»»åŠ¡æ—¶ï¼Œåˆ™ç¬¬ä¸€ä¸ªä»»åŠ¡ä½¿ç”¨çš„æ˜¯è‡ªå®šä¹‰çº¿ç¨‹æ± ï¼Œç¬¬äºŒä¸ªä»»åŠ¡ä½¿ç”¨çš„æ˜¯ForkJoinçº¿ç¨‹æ± </p></li>
<li><p>å¤‡æ³¨</p>
<p>æœ‰å¯èƒ½å¤„ç†å¤ªå¿«ï¼Œç³»ç»Ÿä¼˜åŒ–åˆ‡æ¢åŸåˆ™ï¼Œç›´æ¥ä½¿ç”¨mainçº¿ç¨‹å¤„ç†</p></li>
</ol>
<p>å…¶ä»–å¦‚ï¼šthenAcceptå’ŒthenAcceptAsyncï¼ŒthenApplyå’ŒthenApplyAsyncç­‰ï¼Œä»–ä»¬ä¹‹é—´çš„åŒºåˆ«ä¹Ÿæ˜¯åŒç†ã€‚</p>
<h1 id="ä¸‰javaçš„é”äº‹">ä¸‰ã€Javaçš„â€œé”â€äº‹</h1>
<h2 id="ä¹è§‚é”å’Œæ‚²è§‚é”">1ã€ ä¹è§‚é”å’Œæ‚²è§‚é”</h2>
<h3 id="æ‚²è§‚é”">ï¼ˆ1ï¼‰æ‚²è§‚é”</h3>
<p>synchronizedå…³é”®å­—å’ŒLockçš„å®ç°ç±»éƒ½æ˜¯æ‚²è§‚é”ï¼Œè®¤ä¸ºå½“å‰çº¿ç¨‹åœ¨ä½¿ç”¨æ•°æ®æ—¶ï¼Œä¸€å®šæœ‰åˆ«çš„çº¿ç¨‹æ¥ä¿®æ”¹æ•°æ®ï¼Œå› æ­¤åœ¨è·å–æ•°æ®æ—¶ä¼šå…ˆåŠ é”ï¼Œç¡®ä¿æ•°æ®ä¸ä¼šè¢«åˆ«çš„çº¿ç¨‹ä¿®æ”¹</p>
<p>åº”ç”¨ï¼š</p>
<ul>
<li>é€‚åˆå†™æ“ä½œå¤šçš„åœºæ™¯ï¼Œå…ˆåŠ é”å¯ä»¥ä¿è¯å†™æ“ä½œæ—¶æ•°æ®æ­£ç¡®</li>
<li>æ˜¾å¼çš„é”å®šä¹‹åå†æ“ä½œåŒæ­¥èµ„æº</li>
<li>ç‹¼æ€§é”</li>
</ul>
<h3 id="æ‚²è§‚é”-1">ï¼ˆ2ï¼‰æ‚²è§‚é”</h3>
<p>è®¤ä¸ºå½“å‰çº¿ç¨‹åœ¨ä½¿ç”¨æ•°æ®æ—¶ä¸ä¼šæœ‰å…¶ä»–çº¿ç¨‹ä¿®æ”¹æ•°æ®æˆ–èµ„æºï¼Œæ‰€ä»¥ä¸åŠ é”ï¼ŒJavaæ˜¯é€šè¿‡ä½¿ç”¨æ— é”ç¼–ç¨‹æ¥å®ç°ï¼Œåªåœ¨æ›´æ–°æ—¶åˆ¤æ–­æœ‰æ²¡æœ‰åˆ«çš„çº¿ç¨‹æ›´æ–°è¿‡æ•°æ®ã€‚è‹¥æ•°æ®æ²¡æœ‰è¢«æ›´æ–°ï¼Œåˆ™ç›´æ¥å†™å…¥ï¼›è‹¥æ•°æ®è¢«æ›´æ–°äº†ï¼Œåˆ™æ ¹æ®ä¸åŒçš„å®ç°æ–¹å¼æ‰§è¡Œä¸åŒçš„æ“ä½œï¼Œæ¯”å¦‚æ”¾å¼ƒä¿®æ”¹å’Œé‡è¯•æŠ¢é”ç­‰</p>
<p>å®ç°æ–¹æ³•ï¼š</p>
<ol type="1">
<li>ç‰ˆæœ¬å·æœºåˆ¶Vision</li>
<li>æœ€å¸¸é‡‡ç”¨çš„æ˜¯CASç®—æ³•ï¼ŒJavaåŸå­ç±»ä¸­çš„é€’å¢æ“ä½œå°±æ˜¯é€šè¿‡CASè‡ªæ—‹æ¥å®ç°çš„</li>
</ol>
<p>åº”ç”¨ï¼š</p>
<ul>
<li>é€‚åˆè¯»æ“ä½œå¤šçš„åœºæ™¯ï¼Œä¸åŠ é”çš„ç‰¹ç‚¹èƒ½å¤Ÿä½¿å…¶è¯»æ“ä½œçš„æ€§èƒ½å¤§å¹…æå‡</li>
<li>ä½›ç³»é”</li>
</ul>
<h2 id="å…«ç§åŠ é”æƒ…å†µ">2ã€å…«ç§åŠ é”æƒ…å†µ</h2>
<p>ï¼ˆ1ï¼‰ã€1-2ã€‘ä¸€ä¸ªç±»å­˜åœ¨å¤šä¸ªsynchronizedæ–¹æ³•ï¼Œå¤šçº¿ç¨‹è°ƒç”¨åŒä¸€å¯¹è±¡çš„ä¸åŒsynchronizedæ–¹æ³•</p>
<p>ä¸€ä¸ªå¯¹è±¡é‡Œé¢å¦‚æœæœ‰å¤šä¸ªsynchronizedæ–¹æ³•ï¼ŒæŸä¸€æ—¶åˆ»å†…ï¼Œåªè¦ä¸€ä¸ªçº¿ç¨‹å»è°ƒç”¨å…¶ä¸­çš„ä¸€ä¸ªsynchronizedæ–¹æ³•äº†ï¼Œå…¶ä»–çº¿ç¨‹éƒ½åªèƒ½ç­‰å¾…ã€‚ç®€è€Œè¨€ä¹‹ï¼Œåªèƒ½æœ‰å”¯ä¸€ä¸€ä¸ªçº¿ç¨‹å»è®¿é—®è¿™äº›synchronizedæ–¹æ³•ã€‚é”çš„æ˜¯å½“å‰å¯¹è±¡thisï¼Œè¢«é”å®šåï¼Œå…¶ä»–çº¿ç¨‹éƒ½ä¸éœ€è¦è¿›å…¥åˆ°å½“å‰å¯¹è±¡çš„å…¶ä»–çš„synchronizedæ–¹æ³•ã€‚</p>
<p>ï¼ˆ2ï¼‰ã€3-4ã€‘ä¸€ä¸ªç±»å­˜åœ¨synchronizedæ–¹æ³•ï¼Œä¹Ÿå­˜åœ¨ésynchronizedæ–¹æ³•</p>
<p>åŠ ä¸ªæ™®é€šæ–¹æ³•åå‘ç°åŒæ­¥é”å¤±æ•ˆï¼›æ¢æˆä¸¤ä¸ªå¯¹è±¡ï¼Œä¸æ˜¯åŒä¸€æŠŠé”ï¼Œæƒ…å†µç«‹åˆ»å˜åŒ–ã€‚</p>
<p>ï¼ˆ3ï¼‰ã€5-6ã€‘æŠŠsynchronizedæ–¹æ³•éƒ½æ¢æˆé™æ€æ–¹æ³•</p>
<p>ä¸‰ç§synchronizedé”çš„å†…å®¹æœ‰ä¸€äº›å·®åˆ«ï¼š</p>
<ul>
<li>å¯¹è±¡é”ï¼šå¯¹äºæ™®é€šåŒæ­¥æ–¹æ³•ï¼Œé”çš„æ˜¯å½“å‰å®ä¾‹å¯¹è±¡ï¼Œé€šå¸¸æŒ‡thisï¼Œæ‰€æœ‰çš„æ™®é€šåŒæ­¥æ–¹æ³•ç”¨çš„éƒ½æ˜¯åŒä¸€æŠŠé”--ã€‹å®ä¾‹å¯¹è±¡æœ¬èº«</li>
<li>ç±»é”ï¼šå¯¹äºé™æ€åŒæ­¥æ–¹æ³•ï¼Œé”çš„æ˜¯å½“å‰ç±»çš„classå¯¹è±¡ï¼Œé”çš„æ˜¯å”¯ä¸€æ¨¡æ¿</li>
<li>å¯¹äºåŒæ­¥æ–¹æ³•å—ï¼Œé”çš„æ˜¯synchronizedæ‹¬å·å†…çš„å¯¹è±¡</li>
</ul>
<p>ï¼ˆ4 ï¼‰ã€7-8ã€‘ é™æ€é”å’Œæ™®é€šé”ä¸ä¼šæœ‰ç«äº‰å…³ç³»</p>
<p>å½“ä¸€ä¸ªçº¿ç¨‹è¯•å›¾è®¿é—®åŒæ­¥ä»£ç å—æ—¶ï¼Œå®ƒé¦–å…ˆå¿…é¡»å¾—åˆ°é”ï¼Œæ­£å¸¸é€€å‡ºæˆ–æŠ›å‡ºå¼‚å¸¸æ—¶å¿…é¡»é‡Šæ”¾é”ã€‚</p>
<p>æ‰€æœ‰çš„æ™®é€šåŒæ­¥æ–¹æ³•ç”¨çš„éƒ½æ˜¯åŒä¸€æŠŠé”â€”â€”å®ä¾‹å¯¹è±¡æœ¬èº«ï¼Œå°±æ˜¯newå‡ºæ¥çš„å…·ä½“å®ä¾‹å¯¹è±¡æœ¬èº«ï¼Œæœ¬ç±»thisã€‚å³å¦‚æœä¸€ä¸ªå®ä¾‹å¯¹è±¡çš„æ™®é€šåŒæ­¥æ–¹æ³•è·å¾—é”åï¼Œè¯¥å®ä¾‹å¯¹è±¡çš„å…¶ä»–æ™®é€šåŒæ­¥æ–¹æ³•å¿…é¡»ç­‰å¾…è·å¾—é”çš„æ–¹æ³•é‡Šæ”¾é”åæ‰èƒ½è·å¾—é”ã€‚</p>
<p>æ‰€æœ‰çš„é™æ€åŒæ­¥æ–¹æ³•ç”¨çš„ä¹Ÿæ˜¯åŒä¸€æŠŠé”â€”â€”ç±»å¯¹è±¡æœ¬èº«ï¼Œå³å”¯ä¸€æ¨¡æ¿classã€‚å…·ä½“å®ä¾‹å¯¹è±¡thiså’Œå”¯ä¸€æ¨¡æ¿classï¼Œè¿™ä¸¤æŠŠé”æ—¶ä¸¤ä¸ªä¸åŒçš„å¯¹è±¡ï¼Œæ‰€æœ‰é™æ€åŒæ­¥æ–¹æ³•å’Œæ™®é€šåŒæ­¥æ–¹æ³•ä¹‹é—´ä¸ä¼šæœ‰ç«äº‰å…³ç³»ã€‚ä½†æ˜¯ä¸€æ—¦ä¸€ä¸ªé™æ€åŒæ­¥æ–¹æ³•è·å–é”åï¼Œå…¶ä»–é™æ€åŒæ­¥æ–¹æ³•éƒ½å¿…é¡»ç­‰å¾…è¯¥æ–¹æ³•é‡Šæ”¾é”åæ‰èƒ½è·å¾—é”</p>
<h2 id="synchronizedä¸‰ç§åº”ç”¨æ–¹å¼">3ã€synchronizedä¸‰ç§åº”ç”¨æ–¹å¼</h2>
<h3
id="ç§é”çš„æ¡ˆä¾‹å®é™…ä½“ç°åœ¨3ä¸ªåœ°æ–¹">ï¼ˆ1ï¼‰8ç§é”çš„æ¡ˆä¾‹å®é™…ä½“ç°åœ¨3ä¸ªåœ°æ–¹</h3>
<ul>
<li>ä½œç”¨äºå®ä¾‹æ–¹æ³•ï¼Œå½“å‰å®ä¾‹åŠ é”ï¼Œè¿›å…¥åŒæ­¥ä»£ç å‰è¦è·å¾—å½“å‰å®ä¾‹çš„é”</li>
<li>ä½œç”¨äºä»£ç å—ï¼Œå¯¹æ‹¬å·é‡Œé…ç½®çš„å¯¹è±¡åŠ é”</li>
<li>ä½œç”¨äºé™æ€æ–¹æ³•ï¼Œå½“å‰ç±»å¯¹è±¡åŠ é”ï¼Œè¿›å»åŒæ­¥ä»£ç å‰è¦è·å¾—å½“å‰ç±»å¯¹è±¡çš„é”</li>
</ul>
<h3
id="å­—èŠ‚ç è§’åº¦åˆ†æsynchronizedå®ç°">ï¼ˆ2ï¼‰å­—èŠ‚ç è§’åº¦åˆ†æsynchronizedå®ç°</h3>
<ul>
<li><p>synchronizedåŒæ­¥ä»£ç å—</p>
<p>å®ç°ä½¿ç”¨çš„æ—¶monitorenterå’ŒmonitorexitæŒ‡ä»¤</p></li>
<li><p>synchronizedæ™®é€šåŒæ­¥æ–¹æ³•</p>
<p>è°ƒç”¨æŒ‡ä»¤å°†ä¼šæ£€æŸ¥æ–¹æ³•çš„ACC_SYNCHRONIZEDè®¿é—®æ ‡å¿—æ˜¯å¦è¢«è®¾ç½®ã€‚å¦‚æœè®¾ç½®äº†ï¼Œæ‰§è¡Œçº¿ç¨‹ä¼šå°†å…ˆæŒæœ‰monitoré”ï¼Œç„¶ååœ¨æ‰§è¡Œæ–¹æ³•ï¼Œæœ€ååœ¨æ–¹æ³•å®Œæˆï¼ˆæ— è®ºæ˜¯å¦æ­£å¸¸å®Œæˆï¼‰æ—¶é‡Šæ”¾monitor</p></li>
<li><p>synchronizedé™æ€åŒæ­¥æ–¹æ³•</p>
<p>ACC_STATICï¼ŒACC_SYNCHRONIZEDè®¿é—®æ ‡å¿—åŒºåˆ†è¯¥æ–¹æ³•æ˜¯å¦é™æ€åŒæ­¥æ–¹æ³•</p></li>
</ul>
<h3 id="åç¼–è¯‘synchronizedé”">ï¼ˆ3ï¼‰åç¼–è¯‘synchronizedé”</h3>
<p>ä¸ºä»€ä¹ˆä»»ä½•ä¸€ä¸ªå¯¹è±¡éƒ½å¯ä»¥æˆä¸ºä¸€ä¸ªé”ï¼Ÿæ¯ä¸ªå¯¹è±¡åœ¨åˆ›å»ºæ—¶éƒ½ä¼šåˆå§‹åŒ–ä¸€ä¸ªObjectMonitorå¯¹è±¡ã€‚ObjectMonitoré‡Œé¢å¯ä»¥è®°å½•å æœ‰é”çš„çº¿ç¨‹ï¼Œé˜»å¡é˜Ÿåˆ—ï¼Œé‡å…¥æ¬¡æ•°ç­‰ä¿¡æ¯</p>
<h2 id="å…¬å¹³é”å’Œéå…¬å¹³é”">4ã€å…¬å¹³é”å’Œéå…¬å¹³é”</h2>
<table>
<colgroup>
<col style="width: 11%" />
<col style="width: 88%" />
</colgroup>
<thead>
<tr>
<th>é”ç±»å‹</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>å…¬å¹³é”</td>
<td>æŒ‡å¤šä¸ªçº¿ç¨‹æŒ‰ç…§ç”³è¯·é”çš„é¡ºåºæ¥è·å–é”ï¼ŒLock lock = new
ReentrantLock(true)</td>
</tr>
<tr>
<td>éå…¬å¹³é”</td>
<td>æŒ‡å¤šä¸ªçº¿ç¨‹è·å¾—é”çš„é¡ºåºå¹¶ä¸æ˜¯æŒ‰ç…§ç”³è¯·é”çš„é¡ºåºï¼Œæœ‰å¯èƒ½åç”³è¯·çš„çº¿ç¨‹æ¯”å…ˆç”³è¯·çš„çº¿ç¨‹ä¼˜å…ˆè·å¾—é”ï¼Œåœ¨é«˜å¹¶å‘ç¯å¢ƒä¸‹é€ æˆä¼˜å…ˆçº§ç¿»è½¬æˆ–è€…é¥¥é¥¿çš„çŠ¶æ€ï¼ŒLock
lock = new ReentrantLock(false)</td>
</tr>
</tbody>
</table>
<p>éå…¬å¹³ä¼˜ç‚¹ï¼š</p>
<ul>
<li>éå…¬å¹³é”èƒ½æ›´å……åˆ†çš„åˆ©ç”¨æ—¶é—´ç‰‡ï¼Œå°½é‡å‡å°‘CPUç©ºé—²çŠ¶æ€æ—¶é—´</li>
<li>å½“ä½¿ç”¨éå…¬å¹³é”æ—¶ï¼Œ1ä¸ªçº¿ç¨‹è¯·æ±‚é”è·å–åŒæ­¥çŠ¶æ€ï¼Œç„¶åé‡Šæ”¾åŒæ­¥çŠ¶æ€ï¼Œåˆšé‡Šæ”¾é”çš„çº¿ç¨‹åœ¨æ­¤åˆ»å†æ¬¡è·å–é”çš„æ¦‚ç‡ä¼šå˜å¾—å¾ˆå¤§ï¼Œè¿™æ ·å¯ä»¥å‡å°‘çº¿ç¨‹çš„å¼€é”€ã€‚</li>
</ul>
<p>åº”ç”¨ï¼š</p>
<p>ä¸ºäº†æ›´é«˜ååé‡ï¼Œå¾ˆæ˜¾ç„¶éå…¬å¹³é”æ˜¯æ¯”è¾ƒåˆé€‚çš„ï¼Œå› ä¸ºèŠ‚çœäº†å¾ˆå¤šçº¿ç¨‹åˆ‡æ¢çš„æ—¶é—´ï¼Œååé‡è‡ªç„¶å°±ä¸Šå»äº†ï¼›å¦åˆ™å°±ç”¨å…¬å¹³é”ã€‚</p>
<h2 id="å¯é‡å…¥é”é€’å½’é”">5ã€å¯é‡å…¥é”ï¼ˆé€’å½’é”ï¼‰</h2>
<h3 id="æ¦‚å¿µ-1">ï¼ˆ1ï¼‰æ¦‚å¿µ</h3>
<p>â€‹
æ˜¯æŒ‡åœ¨åŒä¸€ä¸ªçº¿ç¨‹åœ¨å¤–å±‚æ–¹æ³•è·å–é”çš„æ—¶å€™ï¼Œå†è¿›å…¥çº¿ç¨‹çš„å†…å±‚æ–¹æ³•ä¼šè‡ªåŠ¨è·å–é”ï¼ˆå‰æï¼Œé”å¯¹è±¡æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼‰ï¼Œä¸ä¼šå› ä¸ºä¹‹å‰å·²ç»è·å–è¿‡è¿˜æ²¡é‡Šæ”¾è€Œé˜»å¡ã€‚ç®€è€Œè¨€ä¹‹ï¼Œå°±æ˜¯è‡ªå·±å¯ä»¥è·å–è‡ªå·±çš„å†…éƒ¨é”ã€‚</p>
<p><img src="https://ych-blog.oss-cn-guangzhou.aliyuncs.com/20250309203102.png" style="zoom:80%;" /></p>
<p>åœ¨Javaä¸­ReentrantLockå’Œsynchronizedéƒ½æ˜¯å¯é‡å…¥é”ï¼Œä¼˜ç‚¹æ˜¯å¯ä»¥ä¸€å®šç¨‹åº¦ä¸Šé¿å…æ­»é”ã€‚</p>
<h3 id="å¯é‡å…¥é”ç§ç±»">ï¼ˆ2ï¼‰å¯é‡å…¥é”ç§ç±»</h3>
<ul>
<li><p>éšå¼é”ï¼ˆå³synchronizedå…³é”®å­—ä¿®é¥°çš„é”ï¼‰é»˜è®¤æ˜¯å¯é‡å…¥é”</p>
<p>ä¸€ä¸ªsynchronizedä¿®é¥°çš„æ–¹æ³•æˆ–ä»£ç å—çš„å†…éƒ¨è°ƒç”¨æœ¬ç±»çš„å…¶ä»–synchronizedä¿®é¥°çš„æ–¹æ³•æˆ–ä»£ç å—æ—¶ï¼Œæ˜¯æ°¸è¿œå¯ä»¥å¾—åˆ°é”çš„</p></li>
<li><p>æ˜¾å¼é”ï¼ˆå³Lockï¼‰ä¹Ÿæœ‰ReentrantLockè¿™æ ·çš„å¯é‡å…¥é”</p></li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// éšå¼é”</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="keyword">final</span> <span class="type">Object</span> <span class="variable">object</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line">    <span class="type">Thread</span> <span class="variable">thread</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; &#123;</span><br><span class="line">        <span class="keyword">synchronized</span> (object) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;è¿™æ˜¯ç¬¬ä¸€å±‚ï¼&quot;</span>);</span><br><span class="line">            <span class="keyword">synchronized</span> (object) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;è¿™æ˜¯ç¬¬äºŒå±‚ï¼&quot;</span>);</span><br><span class="line">                <span class="keyword">synchronized</span> (object) &#123;</span><br><span class="line">                    System.out.println(<span class="string">&quot;è¿™æ˜¯ç¬¬ä¸‰å±‚ï¼&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;, <span class="string">&quot;a&quot;</span>);</span><br><span class="line">    thread.start();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ˜¾å¼é”</span></span><br><span class="line"><span class="keyword">static</span> <span class="type">Lock</span> <span class="variable">lock</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ReentrantLock</span>();</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">Thread</span> <span class="variable">thread</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(()-&gt;&#123;</span><br><span class="line">        lock.lock();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;è¿™æ˜¯ç¬¬ä¸€æ¬¡è¿›å…¥ï¼&quot;</span>);</span><br><span class="line">            lock.lock();</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;è¿™æ˜¯ç¬¬äºŒæ¬¡è¿›å…¥ï¼&quot;</span>);</span><br><span class="line">            &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">                lock.unlock();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            lock.unlock();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,<span class="string">&quot;a&quot;</span>);</span><br><span class="line">    thread.start();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>synchronizedçš„é‡å…¥å®ç°æœºåˆ¶</p>
<p>æ¯ä¸ªé”å¯¹è±¡æ‹¥æœ‰ä¸€ä¸ªé”è®¡æ•°å™¨å’Œä¸€ä¸ªæŒ‡å‘æŒæœ‰è¯¥é”çš„çº¿ç¨‹çš„æŒ‡é’ˆã€‚å½“æ‰§è¡Œmonitorenteræ—¶ï¼Œå¦‚æœç›®æ ‡é”å¯¹è±¡çš„è®¡æ•°å™¨ä¸º0ï¼Œé‚£ä¹ˆè¯´æ˜å®ƒæ²¡æœ‰è¢«å…¶ä»–çº¿ç¨‹æ‰€æŒæœ‰ï¼ŒJavaè™šæ‹Ÿæœºä¼šå°†è¯¥é”å¯¹è±¡çš„æŒæœ‰çº¿ç¨‹è®¾ç½®ä¸ºå½“å‰çº¿ç¨‹ï¼Œå¹¶ä¸”å°†å…¶è®¡æ•°å™¨åŠ 1</p>
<p>åœ¨ç›®æ ‡é”å¯¹è±¡çš„è®¡æ•°å™¨ä¸ä¸º0çš„æƒ…å†µä¸‹ï¼Œå¦‚æœé”å¯¹è±¡çš„æŒæœ‰çº¿ç¨‹æ˜¯å½“å‰çº¿ç¨‹ï¼Œé‚£ä¹ˆJavaè™šæ‹Ÿæœºå¯ä»¥å°†å…¶è®¡æ•°å™¨åŠ 1ï¼Œå¦åˆ™éœ€è¦ç­‰å¾…ï¼Œç›´è‡³æŒæœ‰çº¿ç¨‹é‡Šæ”¾è¯¥é”ã€‚</p>
<p>å½“æ‰§è¡Œmonitorexitæ—¶ï¼ŒJavaè™šæ‹Ÿæœºåˆ™éœ€è¦å°†é”å¯¹è±¡çš„è®¡æ•°å™¨å‡1.è®¡æ•°å™¨ä¸º0ä»£è¡¨é”å·²è¢«é‡Šæ”¾ã€‚</p>
<h2 id="æ­»é”åŠæ’æŸ¥">6ã€æ­»é”åŠæ’æŸ¥</h2>
<h3 id="æ¦‚å¿µ-2">ï¼ˆ1ï¼‰æ¦‚å¿µ</h3>
<p>â€‹
æ˜¯æŒ‡ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šçš„çº¿ç¨‹åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå› äº‰å¤ºèµ„æºè€Œé€ æˆçš„ä¸€ç§äº’ç›¸ç­‰å¾…çš„ç°è±¡ï¼Œè‹¥æ— å¤–åŠ›å¹²æ¶‰é‚£å®ƒä»¬éƒ½å°†æ— æ³•æ¨è¿›ä¸‹å»ï¼Œå¦‚æœç³»ç»Ÿèµ„æºå……è¶³ï¼Œè¿›ç¨‹çš„èµ„æºè¯·æ±‚éƒ½èƒ½å¾—åˆ°æ»¡è¶³ï¼Œæ­»é”å‡ºç°çš„å¯èƒ½æ€§å°±å¾ˆä½ï¼Œå¦åˆ™å°±ä¼šå› äº‰å¤ºæœ‰é™çš„èµ„æºè€Œé™·å…¥æ­»é”ã€‚</p>
<p><img src="https://ych-blog.oss-cn-guangzhou.aliyuncs.com/20250309203113.png" style="zoom:67%;" /></p>
<p>æ­»é”å®ç°Demoä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="type">Lock</span> <span class="variable">lockA</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ReentrantLock</span>();</span><br><span class="line"><span class="keyword">static</span> <span class="type">Lock</span> <span class="variable">lockB</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ReentrantLock</span>();</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">Thread</span> <span class="variable">threadA</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(()-&gt;&#123;</span><br><span class="line">        lockA.lock();</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;æˆ‘çº¿ç¨‹Aå·²ç»å¯åŠ¨äº†ï¼Œè®©æˆ‘è¿è¡Œå‡ ç§’é’Ÿ&quot;</span>);</span><br><span class="line">            <span class="keyword">try</span> &#123;  TimeUnit.SECONDS.sleep(<span class="number">2</span>);  &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;  <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);  &#125;</span><br><span class="line">            lockB.lock();</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;æˆ‘éœ€è¦Bé”çš„æ”¯æŒï¼&quot;</span>);</span><br><span class="line">            &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">                lockB.unlock();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            lockA.unlock();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,<span class="string">&quot;A&quot;</span>);</span><br><span class="line">    <span class="type">Thread</span> <span class="variable">threadB</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(()-&gt;&#123;</span><br><span class="line">        lockB.lock();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;æˆ‘çº¿ç¨‹Bä¹Ÿå¯åŠ¨äº†ï¼è®©æˆ‘è¿è¡Œå‡ ç§’é’Ÿï¼&quot;</span>);</span><br><span class="line">            <span class="keyword">try</span> &#123;  TimeUnit.SECONDS.sleep(<span class="number">3</span>);  &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;  <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);  &#125;</span><br><span class="line">            lockA.lock();</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;æˆ‘éœ€è¦Aé”çš„æ”¯æŒï¼&quot;</span>);</span><br><span class="line">            &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">                lockA.unlock();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            lockB.unlock();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,<span class="string">&quot;B&quot;</span>);</span><br><span class="line">    threadA.start();  threadB.start();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æ­»é”äº§ç”ŸåŸå› ">ï¼ˆ2ï¼‰æ­»é”äº§ç”ŸåŸå› </h3>
<ul>
<li>ç³»ç»Ÿèµ„æºä¸è¶³</li>
<li>è¿›ç¨‹è¿è¡Œæ¨è¿›çš„é¡ºåºä¸åˆé€‚</li>
<li>èµ„æºåˆ†é…ä¸å½“</li>
</ul>
<h3 id="æ’æŸ¥æ­»é”">ï¼ˆ3ï¼‰æ’æŸ¥æ­»é”</h3>
<p>ä½¿ç”¨å‘½ä»¤ï¼Œæ˜¾ç¤ºå½“å‰æ‰€æœ‰Javaè¿›ç¨‹pidçš„å‘½ä»¤</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ jps -l</span><br><span class="line">17540 </span><br><span class="line">1500 com.ych.lock.DeadLockDemo</span><br><span class="line">25180 jdk.jcmd/sun.tools.jps.Jps</span><br><span class="line">26284 org.jetbrains.jps.cmdline.Launcher</span><br></pre></td></tr></table></figure>
<p>å¾—åˆ°æˆ‘ä»¬æƒ³è¦æŸ¥è¯¢çš„ç›®æ ‡è¿è¡Œç¨‹åºçš„pidä¹‹åï¼Œå†ä½¿ç”¨å‘½ä»¤</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ jstack 1500</span><br><span class="line"></span><br><span class="line">Found 1 deadlock.</span><br></pre></td></tr></table></figure>
<p>å³å¯æ’é™¤å‡ºæ˜¯å“ªä¸ªç¨‹åºå‡ºç°äº†æ­»é”ã€‚</p>
<p>å¦å¤–ä¹Ÿå¯ä»¥ä½¿ç”¨ jconsoleï¼Œè°ƒå‡ºJavaæ€§èƒ½åˆ†æå™¨ï¼Œåˆ†ææ˜¯å¦å­˜åœ¨æ­»é”ã€‚</p>
<h1 id="å››locksupportä¸çº¿ç¨‹ä¸­æ–­">å››ã€LockSupportä¸çº¿ç¨‹ä¸­æ–­</h1>
<h2 id="çº¿ç¨‹ä¸­æ–­">1ã€çº¿ç¨‹ä¸­æ–­</h2>
<h3 id="æ¦‚å¿µ-3">ï¼ˆ1ï¼‰æ¦‚å¿µ</h3>
<p>çº¿ç¨‹ä¸­æ–­åªæ˜¯ä¸€ç§åä½œåå•†æœºåˆ¶ï¼ŒJavaæ²¡æœ‰ç»™ä¸­æ–­å¢åŠ ä»»ä½•è¯­æ³•ï¼Œä¸­æ–­çš„è¿‡ç¨‹å®Œå…¨éœ€è¦ç¨‹åºå‘˜è‡ªå·±å®ç°ï¼Œè‹¥è¦ä¸­æ–­ä¸€ä¸ªçº¿ç¨‹ï¼Œéœ€è¦æ‰‹åŠ¨è°ƒç”¨interruptæ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¹Ÿä»…ä»…æ˜¯å°†è¯¥çº¿ç¨‹å¯¹è±¡çš„ä¸­æ–­æ ‡è¯†è®¾æˆtrue</p>
<h3 id="ä¸­æ–­çš„ä¸‰å¤§apiæ–¹æ³•è¯´æ˜">ï¼ˆ2ï¼‰ä¸­æ–­çš„ä¸‰å¤§APIæ–¹æ³•è¯´æ˜</h3>
<table>
<colgroup>
<col style="width: 36%" />
<col style="width: 63%" />
</colgroup>
<thead>
<tr>
<th>ä¸­æ–­å‡½æ•°</th>
<th>æ–¹æ³•æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>public void interrupt()</td>
<td>// Just to set the interrupt flag
ä»…ä»…è®¾ç½®çº¿ç¨‹ä¸­æ–­çŠ¶æ€ä¸ºtrueï¼Œå‘èµ·ä¸€ä¸ªåå•†è€Œä¸ä¼šåœæ­¢çº¿ç¨‹</td>
</tr>
<tr>
<td>public static boolean interrupted()</td>
<td>åˆ¤æ–­çº¿ç¨‹æ˜¯å¦è¢«ä¸­æ–­ï¼Œå¹¶æ¸…é™¤å½“å‰ä¸­æ–­çŠ¶æ€ã€‚
è¿”å›å½“å‰çº¿ç¨‹çš„ä¸­æ–­çŠ¶æ€ï¼Œå¹¶å°†å½“å‰çº¿ç¨‹çš„ä¸­æ–­çŠ¶æ€é‡æ–°è®¾ç½®ä¸ºfalse</td>
</tr>
<tr>
<td>public boolean isInterrupted()</td>
<td>åˆ¤æ–­å½“å‰çº¿ç¨‹æ˜¯å¦è¢«ä¸­æ–­ï¼ˆé€šè¿‡æ£€æŸ¥ä¸­æ–­æ ‡å¿—ä½ï¼‰</td>
</tr>
</tbody>
</table>
<h2 id="ä¸­æ–­æœºåˆ¶è€ƒç‚¹">2ã€ä¸­æ–­æœºåˆ¶è€ƒç‚¹</h2>
<h3 id="å¦‚ä½•åœæ­¢ä¸­æ–­è¿è¡Œä¸­çš„çº¿ç¨‹">ï¼ˆ1ï¼‰å¦‚ä½•åœæ­¢ä¸­æ–­è¿è¡Œä¸­çš„çº¿ç¨‹</h3>
<ul>
<li>é€šè¿‡ä¸€ä¸ªvolatileå˜é‡æ¥å®ç°</li>
<li>é€šè¿‡AtomicBoolean</li>
<li>é€šè¿‡Threadç±»è‡ªå¸¦çš„ä¸­æ–­apiå®ä¾‹æ–¹æ³•å®ç°
<ul>
<li>å†éœ€è¦ä¸­æ–­çš„çº¿ç¨‹ä¸­ä¸æ–­ç›‘å¬ä¸­æ–­çŠ¶æ€ï¼Œä¸€æ—¦å‘ç”Ÿä¸­æ–­ï¼Œå°±æ‰§è¡Œç›¸åº”çš„ä¸­æ–­å¤„ç†ä¸šåŠ¡é€»è¾‘stopçº¿ç¨‹ã€‚</li>
</ul></li>
</ul>
<p>å®ç°demoï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">m3_interrupt</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">Thread</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(()-&gt;&#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;æˆ‘æ˜¯t1ï¼Œæˆ‘ç°åœ¨æ²¡æœ‰è¢«ä¸­æ–­~~~~~&quot;</span>);</span><br><span class="line">            <span class="keyword">if</span>(Thread.currentThread().isInterrupted())&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;æˆ‘è¢«ä¸­æ–­äº†ï¼&quot;</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,<span class="string">&quot;t1&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">Thread</span> <span class="variable">t2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(()-&gt;&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æˆ‘æ˜¯t2 æˆ‘æ˜¯æ¥ä¸­æ–­t1çš„&quot;</span>);</span><br><span class="line">        t1.interrupt();</span><br><span class="line">    &#125;,<span class="string">&quot;t2&quot;</span>);</span><br><span class="line"></span><br><span class="line">    t1.start();</span><br><span class="line">    <span class="keyword">try</span> &#123;  TimeUnit.SECONDS.sleep(<span class="number">1</span>);  &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;  <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);  &#125;</span><br><span class="line">    t2.start();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">m2_atomicBoolean</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">Thread</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(()-&gt;&#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;æˆ‘æ˜¯t1ï¼Œæˆ‘ç°åœ¨æ²¡æœ‰è¢«ä¸­æ–­~~~~~&quot;</span>);</span><br><span class="line">            <span class="keyword">if</span>(atomicBoolean.get())&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;æˆ‘è¢«ä¸­æ–­äº†ï¼&quot;</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,<span class="string">&quot;t1&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">Thread</span> <span class="variable">t2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(()-&gt;&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æˆ‘æ˜¯t2 æˆ‘æ˜¯æ¥ä¸­æ–­t1çš„&quot;</span>);</span><br><span class="line">        atomicBoolean.set(<span class="literal">true</span>);</span><br><span class="line">    &#125;,<span class="string">&quot;t2&quot;</span>);</span><br><span class="line"></span><br><span class="line">    t1.start();</span><br><span class="line">    <span class="keyword">try</span> &#123;  TimeUnit.SECONDS.sleep(<span class="number">1</span>);  &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;  <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);  &#125;</span><br><span class="line">    t2.start();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">m1_volatile</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">Thread</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(()-&gt;&#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>(flag)&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;æˆ‘è·³å‡ºæ¥äº†ï¼&quot;</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">&quot;t1 ------------&gt; æˆ‘æ²¡æœ‰è¢«ä¸­æ–­&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,<span class="string">&quot;t1&quot;</span>);</span><br><span class="line">    <span class="type">Thread</span> <span class="variable">t2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(()-&gt;&#123;</span><br><span class="line">        flag = <span class="literal">true</span>;</span><br><span class="line">    &#125;,<span class="string">&quot;t2&quot;</span>);</span><br><span class="line"></span><br><span class="line">    t1.start();</span><br><span class="line">    <span class="keyword">try</span> &#123;  TimeUnit.SECONDS.sleep(<span class="number">2</span>);  &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;  <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);  &#125;</span><br><span class="line">    t2.start();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3
id="å…³äºinterruptedexceptionå¼‚å¸¸å¤„ç†æ–¹å¼">ï¼ˆ2ï¼‰å…³äºInterruptedExceptionå¼‚å¸¸å¤„ç†æ–¹å¼</h3>
<p>â€‹
æˆ‘ä»¬éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå½“å½“å‰çº¿ç¨‹å¤„äºé˜»å¡çŠ¶æ€æ—¶ï¼ˆå¦‚waitæˆ–sleepï¼‰ï¼Œå¦‚æœæœ‰å…¶ä»–çº¿ç¨‹è°ƒç”¨äº†å½“å‰çº¿ç¨‹çš„interruptå‡½æ•°ï¼Œå°è¯•æ›´æ”¹å½“å‰çº¿ç¨‹çš„ä¸­æ–­æ ‡è¯†ï¼Œä¼šå¯¼è‡´å½“å‰çº¿ç¨‹æŠ›å‡ºInterruptedExceptionå¼‚å¸¸ï¼Œç„¶åè®¾ç½®è‡ªå·±çš„ä¸­æ–­æ ‡è¯†ä¸ºfalseã€‚ç®€è€Œè¨€ä¹‹ï¼š<strong>å½“é˜»å¡æ–¹æ³•æ”¶åˆ°ä¸­æ–­è¯·æ±‚çš„æ—¶å€™å°±ä¼šæŠ›å‡ºInterruptedExceptionå¼‚å¸¸</strong>ã€‚</p>
<p>ç»“è®ºï¼šinterruptæ–¹æ³•æœ¬è´¨ä¸Šä¸ä¼šè¿›è¡Œçº¿ç¨‹çš„ç»ˆæ­¢æ“ä½œçš„ï¼Œå®ƒä¸è¿‡æ˜¯æ”¹å˜äº†çº¿ç¨‹çš„ä¸­æ–­çŠ¶æ€ã€‚è€Œæ”¹å˜äº†æ­¤çŠ¶æ€å¸¦æ¥çš„å½±å“æ˜¯ï¼Œéƒ¨åˆ†å¯ä¸­æ–­çš„çº¿ç¨‹æ–¹æ³•ï¼ˆæ¯”å¦‚Object.wait,
Thread.sleepï¼‰ä¼šå®šæœŸæ‰§è¡ŒisInterruptedæ–¹æ³•ï¼Œæ£€æµ‹åˆ°æ­¤å˜åŒ–ï¼ŒJVMä¼šå°†çº¿ç¨‹çš„ä¸­æ–­æ ‡å¿—é‡æ–°è®¾ç½®ä¸ºfalseï¼Œéšåä¼šåœæ­¢é˜»å¡å¹¶æŠ›å‡ºInterruptedExceptionå¼‚å¸¸ã€‚æ€»ä¹‹ï¼Œinterruptçš„ä½œç”¨å°±æ˜¯éœ€è¦ç”¨æˆ·è‡ªå·±å»ç›‘è§†çº¿ç¨‹çš„çŠ¶æ€ä½å¹¶åšå¤„ç†ã€‚ä½†InterruptedExceptionå¼‚å¸¸çš„æŠ›å‡ºå¹¶ä¸æ˜¯æ„å‘³ç€çº¿ç¨‹å¿…é¡»å¾—ç»ˆæ­¢ï¼Œå®ƒåªæ˜¯æé†’å½“å‰çº¿ç¨‹æœ‰ä¸­æ–­æ“ä½œå‘ç”Ÿäº†ï¼Œæ¥ä¸‹æ¥æ€ä¹ˆå¤„ç†å®Œå…¨å–å†³äºçº¿ç¨‹æœ¬èº«ï¼Œä¸€èˆ¬æœ‰3ç§å¤„ç†æ–¹å¼ï¼š</p>
<ol type="1">
<li><p>"åå¹¶"å¼‚å¸¸ï¼Œå½“åšä»€ä¹ˆäº‹éƒ½æ²¡å‘ç”Ÿè¿‡ã€‚</p></li>
<li><p>ç»§ç»­å¾€å¤–æŠ›å‡ºå¼‚å¸¸ã€‚</p></li>
<li><p>å…¶å®ƒæ–¹å¼å¤„ç†å¼‚å¸¸(å…¶å®ƒå¤„ç†å¼‚å¸¸çš„æ–¹å¼å°±æœ‰å¾ˆå¤šç§äº†ï¼Œåœæ­¢å½“å‰çº¿ç¨‹æˆ–è€…è¾“å‡ºå¼‚å¸¸ä¿¡æ¯ç­‰ç­‰)ã€‚</p></li>
</ol>
<h3 id="é™æ€æ–¹æ³•-thread.interrupted">ï¼ˆ3ï¼‰é™æ€æ–¹æ³•
Thread.interrupted()</h3>
<p>æ–¹æ³•å®é™…åŠŸèƒ½ï¼š</p>
<ol type="1">
<li>è¿”å›å½“å‰çº¿ç¨‹çš„ä¸­æ–­çŠ¶æ€ï¼Œæµ‹è¯•å½“å‰çº¿ç¨‹æ˜¯å¦è¢«ä¸­æ–­</li>
<li>å°†å½“å‰çº¿ç¨‹çš„ä¸­æ–­çŠ¶æ€æ¸…é›¶å¹¶é‡ç½®ä¸ºfalse</li>
</ol>
<h2 id="locksupport">3ã€ LockSupport</h2>
<h3 id="æ¦‚å¿µ-4">ï¼ˆ1ï¼‰æ¦‚å¿µ</h3>
<p>æ˜¯ä¸€ä¸ªçº¿ç¨‹é˜»å¡çš„å·¥å…·ç±»ï¼Œæ‰€æœ‰æ–¹æ³•éƒ½æ˜¯é™æ€æ–¹æ³•ï¼Œç”¨äºåˆ›å»ºé”å’Œå…¶ä»–åŒæ­¥ç±»çš„åŸºæœ¬çº¿ç¨‹é˜»å¡åŸè¯­ã€‚å¯ä»¥è®©çº¿ç¨‹åœ¨ä»»æ„ä½ç½®é˜»å¡ï¼Œé˜»å¡ä¹‹åä¹Ÿæœ‰å¯¹åº”çš„å”¤é†’æ–¹æ³•ã€‚</p>
<h3 id="çº¿ç¨‹ç­‰å¾…å”¤é†’æœºåˆ¶">ï¼ˆ2ï¼‰çº¿ç¨‹ç­‰å¾…å”¤é†’æœºåˆ¶</h3>
<h4 id="ç§è®©çº¿ç¨‹ç­‰å¾…å’Œå”¤é†’çš„æ–¹æ³•">ã€1ã€‘3ç§è®©çº¿ç¨‹ç­‰å¾…å’Œå”¤é†’çš„æ–¹æ³•</h4>
<ul>
<li>æ–¹æ³•ä¸€ï¼šä½¿ç”¨Objectä¸­çš„wait()æ–¹æ³•è®©çº¿ç¨‹ç­‰å¾…ï¼Œä½¿ç”¨Objectä¸­çš„notify()æ–¹æ³•å”¤é†’çº¿ç¨‹</li>
<li>æ–¹æ³•äºŒï¼šä½¿ç”¨JUCåŒ…ä¸­çš„Conditionçš„await()æ–¹æ³•è®©çº¿ç¨‹ç­‰å¾…ï¼Œä½¿ç”¨signal()æ–¹æ³•å”¤é†’çº¿ç¨‹</li>
<li>æ–¹æ³•ä¸‰ï¼šLockSupportç±»å¯ä»¥é˜»å¡å½“å‰çº¿ç¨‹ä»¥åŠå”¤é†’æŒ‡å®šè¢«é˜»å¡çš„çº¿ç¨‹</li>
</ul>
<h4
id="objectç±»ä¸­çš„waitå’Œnotifyæ–¹æ³•å®ç°çº¿ç¨‹ç­‰å¾…å’Œå”¤é†’">ã€2ã€‘Objectç±»ä¸­çš„waitå’Œnotifyæ–¹æ³•å®ç°çº¿ç¨‹ç­‰å¾…å’Œå”¤é†’</h4>
<ul>
<li><p>waitå’Œnotifyæ–¹æ³•å¿…é¡»è¦åœ¨åŒæ­¥å—æˆ–è€…æ–¹æ³•é‡Œé¢ï¼Œä¸”æˆå¯¹å‡ºç°ä½¿ç”¨</p></li>
<li><p>å…ˆwaitånotifyï¼Œé¡ºåºä¸èƒ½é¢ å€’</p></li>
</ul>
<h4
id="conditionæ¥å£ä¸­çš„awaitå’Œsignalæ–¹æ³•å®ç°çº¿ç¨‹çš„ç­‰å¾…å’Œå”¤é†’">ã€3ã€‘Conditionæ¥å£ä¸­çš„awaitå’Œsignalæ–¹æ³•å®ç°çº¿ç¨‹çš„ç­‰å¾…å’Œå”¤é†’</h4>
<ul>
<li>Conditionä¸­çš„çº¿ç¨‹ç­‰å¾…å’Œå”¤é†’æ–¹æ³•ï¼Œéœ€è¦å…ˆè·å–é”</li>
<li>ä¸€å®šè¦å…ˆawaitåsignalï¼Œé¡ºåºä¸èƒ½é¢ å€’</li>
</ul>
<p>â€‹
å…¶å®ä¸Šé¢ä¸¤ç§æƒ…å†µéƒ½åœ¨è¯´æ˜ä¸€ä»¶äº‹æƒ…ï¼Œå°±æ˜¯å¦‚æœä½ æƒ³å¯¹ä¸€ä¸ªçº¿ç¨‹è¿›è¡Œé˜»å¡æ“ä½œï¼Œå¦‚waitæ“ä½œï¼Œå°±å¿…é¡»å…ˆè·å¾—å½“å‰è¿™ä¸ªçº¿ç¨‹é”çš„æƒé™ï¼Œä¹Ÿå°±æ˜¯Objectçš„waitå’Œnotifyéƒ½éœ€è¦åœ¨åŒæ­¥å—æˆ–åŒæ­¥æ–¹æ³•ä¸­ï¼›Conditionçš„awaitå’Œsignalä¹Ÿéœ€è¦åœ¨lock.lock()å’Œ
lock.unlock()ä¹‹é—´ã€‚å¦å¤–ç­‰å¾…å’Œå”¤é†’çš„é¡ºåºä¸èƒ½é¢ å€’</p>
<h4
id="locksupportç±»ä¸­çš„parkç­‰å¾…å’Œunparkå”¤é†’">ã€4ã€‘LockSupportç±»ä¸­çš„parkç­‰å¾…å’Œunparkå”¤é†’</h4>
<ul>
<li>LockSupportç±»ä½¿ç”¨äº†ä¸€ç§åä¸ºPermitï¼ˆè®¸å¯è¯ï¼‰çš„æ¦‚å¿µæ¥åšåˆ°é˜»å¡å’Œå”¤é†’çº¿ç¨‹çš„åŠŸèƒ½ï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½æœ‰ä¸€ä¸ªè®¸å¯(permit)ï¼Œä½†ä¸Semaphoreä¸åŒçš„æ˜¯ï¼Œ<strong>è®¸å¯çš„ç´¯åŠ ä¸Šé™æ˜¯1</strong></li>
<li>LockSupport
å’Œæ¯ä¸ªä½¿ç”¨å®ƒçš„çº¿ç¨‹éƒ½æœ‰ä¸€ä¸ªè®¸å¯å…³è”ã€‚æ¯ä¸ªçº¿ç¨‹éƒ½æœ‰ä¸€ä¸ªç›¸å…³çš„permitï¼Œpermitæœ€å¤šåªæœ‰ä¸€ä¸ªï¼Œé‡å¤è°ƒç”¨unparkä¹Ÿä¸ä¼šç§¯ç´¯å‡­è¯</li>
</ul>
<h1 id="äº”javaå†…å­˜æ¨¡å‹-jmm">äº”ã€Javaå†…å­˜æ¨¡å‹ JMM</h1>
<h2 id="è®¡ç®—æœºç¡¬ä»¶å­˜å‚¨ä½“ç³»">1ã€è®¡ç®—æœºç¡¬ä»¶å­˜å‚¨ä½“ç³»</h2>
<p>ç¡¬ç›˜ ---&gt; å†…å­˜ ----&gt; é«˜é€Ÿç¼“å­˜ ----&gt; CPU</p>
<h2 id="javaçš„å†…å­˜æ¨¡å‹">2ã€Javaçš„å†…å­˜æ¨¡å‹</h2>
<p>â€‹
æœ¬èº«æ˜¯ä¸€ç§æŠ½è±¡çš„æ¦‚å¿µå¹¶ä¸çœŸå®å­˜åœ¨ï¼Œå®ƒä»…ä»…æè¿°çš„æ˜¯ä¸€ç»„çº¦å®šæˆ–è§„èŒƒï¼Œé€šè¿‡è¿™ç»„è§„èŒƒå®šä¹‰äº†ç¨‹åºä¸­ï¼ˆå°¤å…¶æ˜¯å¤šçº¿ç¨‹ï¼‰æ¯ä¸ªå˜é‡çš„è¯»å†™è®¿é—®æ–¹å¼å¹¶å†³å®šä¸€ä¸ªçº¿ç¨‹å¯¹å…±äº«å˜é‡çš„å†™å…¥åˆé€‚ä»¥åŠå¦‚ä½•å˜æˆå¯¹å¦ä¸€ä¸ªçº¿ç¨‹å¯è§ï¼Œå…³é”®æŠ€æœ¯ç‚¹éƒ½æ˜¯å›´ç»•å¤šçº¿ç¨‹çš„åŸå­æ€§ã€å¯è§æ€§å’Œæœ‰åºæ€§å±•å¼€çš„ã€‚</p>
<h2 id="jmmè§„èŒƒä¸‹çš„ä¸‰å¤§ç‰¹æ€§">3ã€JMMè§„èŒƒä¸‹çš„ä¸‰å¤§ç‰¹æ€§</h2>
<h3 id="å¯è§æ€§">ï¼ˆ1ï¼‰å¯è§æ€§</h3>
<p>â€‹
æŒ‡å½“ä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹äº†æŸä¸€ä¸ªå…±äº«å˜é‡çš„å€¼ï¼Œå…¶ä»–çº¿ç¨‹æ˜¯å¦èƒ½å¤Ÿç«‹å³çŸ¥é“è¯¥å˜æ›´ï¼ŒJMMè§„å®šäº†æ‰€æœ‰å˜é‡éƒ½å­˜å‚¨åœ¨ä¸»å†…å­˜ä¸­ã€‚</p>
<p>â€‹
ç³»ç»Ÿä¸»å†…å­˜å…±äº«å˜é‡æ•°æ®ä¿®æ”¹è¢«å†™å…¥çš„æ—¶æœºæ˜¯ä¸ç¡®å®šçš„ï¼Œå¤šçº¿ç¨‹å¹¶å‘ä¸‹å¾ˆå¯èƒ½å‡ºç°â€œè„è¯»â€ï¼Œæ‰€ä»¥æ¯ä¸ªçº¿ç¨‹éƒ½æœ‰è‡ªå·±çš„å·¥ä½œå†…å­˜ï¼Œçº¿ç¨‹è‡ªå·±çš„å·¥ä½œå†…å­˜ä¸­ä¿å­˜äº†è¯¥çº¿ç¨‹ä½¿ç”¨åˆ°çš„å˜é‡çš„ä¸»å†…å­˜å‰¯æœ¬æ‹·è´ï¼Œçº¿ç¨‹å¯¹å˜é‡çš„æ‰€æœ‰æ“ä½œï¼ˆè¯»å–ã€èµ‹å€¼ç­‰ï¼‰éƒ½å¿…é¡»åœ¨çº¿ç¨‹è‡ªå·±çš„å·¥ä½œå†…å­˜ä¸­è¿›è¡Œï¼Œè€Œä¸èƒ½å¤Ÿç›´æ¥è¯»å†™ä¸»å†…å­˜ä¸­çš„å˜é‡ï¼Œä¸åŒçº¿ç¨‹ä¹‹é—´ä¹Ÿæ— æ³•ç›´æ¥è®¿é—®å¯¹æ–¹å·¥ä½œå†…å­˜ä¸­çš„å˜é‡ï¼Œçº¿ç¨‹é—´å˜é‡çš„ä¼ é€’å‡éœ€è¦é€šè¿‡ä¸»å†…å­˜æ¥å®Œæˆã€‚</p>
<p><img src="https://ych-blog.oss-cn-guangzhou.aliyuncs.com/20250309203128.png" style="zoom:80%;" /></p>
<h3 id="åŸå­æ€§">ï¼ˆ2ï¼‰åŸå­æ€§</h3>
<p>æŒ‡ä¸€ä¸ªæ“ä½œæ˜¯ä¸å¯æ‰“æ–­çš„ï¼Œå³å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œæ“ä½œä¸èƒ½è¢«å…¶ä»–çº¿ç¨‹å¹²æ‰°</p>
<h3 id="æœ‰åºæ€§">ï¼ˆ3ï¼‰æœ‰åºæ€§</h3>
<p>å¯¹äºä¸€ä¸ªçº¿ç¨‹çš„æ‰§è¡Œä»£ç è€Œè¨€ï¼Œä¸ºäº†æå‡æ€§èƒ½ï¼Œç¼–è¯‘å™¨å’Œå¤„ç†å™¨é€šå¸¸ä¼šå¯¹æŒ‡ä»¤åºåˆ—è¿›è¡Œé‡æ–°æ’åºã€‚Javaè§„èŒƒè§„å®šJVMçº¿ç¨‹å†…éƒ¨ç»´æŒé¡ºåºåŒ–è¯­ä¹‰ï¼Œå³åªè¦ç¨‹åºçš„æœ€ç»ˆç»“æœä¸å®ƒé¡ºåºåŒ–æ‰§è¡Œçš„ç»“æœç›¸ç­‰ï¼Œé‚£ä¹ˆæŒ‡ä»¤çš„æ‰§è¡Œé¡ºåºå¯ä»¥ä¸ä»£ç é¡ºåºä¸ä¸€è‡´ï¼Œæ­¤è¿‡ç¨‹å«æŒ‡ä»¤çš„é‡æ’åºã€‚</p>
<h2 id="å¤šçº¿ç¨‹å¯¹å˜é‡çš„è¯»å†™è¿‡ç¨‹">4ã€å¤šçº¿ç¨‹å¯¹å˜é‡çš„è¯»å†™è¿‡ç¨‹</h2>
<p>â€‹
çº¿ç¨‹å¯¹å˜é‡çš„æ“ä½œï¼ˆè¯»å–èµ‹å€¼ç­‰ï¼‰å¿…é¡»åœ¨å·¥ä½œå†…å­˜ä¸­è¿›è¡Œï¼Œé¦–å…ˆè¦å°†å˜é‡ä»ä¸»å†…å­˜æ‹·è´åˆ°çº¿ç¨‹è‡ªå·±çš„å·¥ä½œå†…å­˜ç©ºé—´ï¼Œç„¶åå¯¹å˜é‡è¿›è¡Œæ“ä½œï¼Œæ“ä½œå®Œæˆåå†å°†å˜é‡å†™å›ä¸»å†…å­˜ï¼Œä¸èƒ½ç›´æ¥æ“ä½œä¸»å†…å­˜ä¸­çš„å˜é‡ï¼Œå„ä¸ªçº¿ç¨‹ä¸­çš„å·¥ä½œå†…å­˜ä¸­å­˜å‚¨ç€ä¸»å†…å­˜ä¸­çš„å˜é‡å‰¯æœ¬çš„æ‹·è´ã€‚</p>
<p>æ€»ç»“ï¼š</p>
<ul>
<li>å®šä¹‰çš„æ‰€æœ‰å…±äº«å˜é‡éƒ½å‚¨å­˜åœ¨ç‰©ç†ä¸»å†…å­˜ä¸­</li>
<li>æ¯ä¸ªçº¿ç¨‹éƒ½æœ‰è‡ªå·±ç‹¬ç«‹çš„å·¥ä½œå†…å­˜ï¼Œé‡Œé¢ä¿å­˜è¯¥çº¿ç¨‹ä½¿ç”¨åˆ°çš„å˜é‡çš„å‰¯æœ¬ï¼ˆä¸»å†…å­˜ä¸­è¯¥å˜é‡çš„ä¸€ä»½æ‹·è´ï¼‰</li>
<li>çº¿ç¨‹å¯¹å…±äº«å˜é‡æ‰€æœ‰çš„æ“ä½œéƒ½å¿…é¡»ç°åœ¨è‡ªå·±çš„å·¥ä½œå†…å­˜ä¸­è¿›è¡Œåå†™å›ä¸»å†…å­˜ï¼Œä¸èƒ½ç›´æ¥ä»ä¸»å†…å­˜ä¸­è¯»å†™ï¼ˆä¸èƒ½è¶Šçº§ï¼‰</li>
<li>ä¸åŒçº¿ç¨‹ä¹‹é—´ä¹Ÿæ— æ³•ç›´æ¥è®¿é—®å…¶ä»–çº¿ç¨‹çš„å·¥ä½œå†…å­˜ä¸­çš„å˜é‡ï¼Œçº¿ç¨‹é—´å˜é‡å€¼çš„ä¼ é€’éœ€è¦é€šè¿‡ä¸»å†…å­˜æ¥è¿›è¡Œï¼ˆåŒçº§ä¸èƒ½ç›¸äº’è®¿é—®ï¼‰</li>
</ul>
<h2 id="å¤šçº¿ç¨‹å…ˆè¡Œå‘ç”ŸåŸåˆ™-happens-before">5ã€å¤šçº¿ç¨‹å…ˆè¡Œå‘ç”ŸåŸåˆ™
happens-before</h2>
<h3 id="å®šä¹‰">ï¼ˆ1ï¼‰å®šä¹‰</h3>
<p>â€‹
åœ¨JMMä¸­ï¼Œå¦‚æœä¸€ä¸ªæ“ä½œæ‰§è¡Œçš„ç»“æœéœ€è¦å¯¹å¦ä¸€ä¸ªæ“ä½œå¯åŠ æ€§æˆ–è€…ä»£ç é‡æ’åºï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ªæ“ä½œä¹‹é—´å¿…é¡»å­˜åœ¨happens-beforeï¼ˆå…ˆè¡Œå‘ç”Ÿï¼‰åŸåˆ™ã€‚é€»è¾‘ä¸Šçš„å…ˆåå…³ç³»ã€‚æœ¬è´¨ä¸Šæ˜¯ä¸€ç§å¯è§æ€§ã€‚</p>
<h3 id="æ€»åŸåˆ™">ï¼ˆ2ï¼‰æ€»åŸåˆ™</h3>
<ul>
<li>å¦‚æœä¸€ä¸ªæ“ä½œhappens-beforeå¦ä¸€ä¸ªæ“ä½œï¼Œé‚£ä¹ˆç¬¬ä¸€ä¸ªæ“ä½œçš„æ‰§è¡Œç»“æœå°†å¯¹ç¬¬äºŒä¸ªæ“ä½œå¯è§ã€‚è€Œä¸”ç¬¬ä¸€ä¸ªæ“ä½œçš„æ‰§è¡Œé¡ºåºæ’åœ¨ç¬¬äºŒä¸ªæ“ä½œä¹‹å‰</li>
<li>ä¸¤ä¸ªæ“ä½œä¹‹é—´å­˜åœ¨happens-beforeå…³ç³»ï¼Œå¹¶ä¸æ„å‘³ç€ä¸€å®šè¦æŒ‰ç…§happens-beforeåŸåˆ™æŒ‡å®šçš„é¡ºåºæ¥æ‰§è¡Œã€‚å¦‚æœé‡æ’åºä¹‹åçš„æ‰§è¡Œç»“æœä¸æŒ‰ç…§happens-beforeå…³ç³»æ¥<strong>æ‰§è¡Œçš„ç»“æœä¸€è‡´</strong>ï¼Œé‚£ä¹ˆè¿™ç§é‡æ’åº<strong>å¹¶ä¸éæ³•</strong>ã€‚</li>
</ul>
<h3 id="æ¡åŸåˆ™">ï¼ˆ3ï¼‰8æ¡åŸåˆ™</h3>
<h4 id="æ¬¡åºè§„åˆ™">ã€1ã€‘æ¬¡åºè§„åˆ™</h4>
<p>ä¸€ä¸ªçº¿ç¨‹å†…ï¼ŒæŒ‰ç…§ä»£ç é¡ºåºï¼Œå¸è½½å‰é¢çš„æ“ä½œå…ˆè¡Œå‘ç”Ÿäºå†™åœ¨åé¢çš„æ“ä½œ</p>
<h4 id="é”å®šè§„åˆ™">ã€2ã€‘é”å®šè§„åˆ™</h4>
<p>ä¸€ä¸ªunlockæ“ä½œå…ˆè¡Œå‘ç”Ÿäºåé¢å¯¹åŒä¸€ä¸ªé”çš„lockæ“ä½œ</p>
<h4 id="volatileå˜é‡è§„åˆ™">ã€3ã€‘volatileå˜é‡è§„åˆ™</h4>
<p>å¯¹ä¸€ä¸ªvolatileå˜é‡çš„å†™æ“ä½œï¼Œå…ˆè¡Œå‘ç”Ÿäºåé¢å¯¹è¿™ä¸ªå˜é‡çš„è¯»æ“ä½œï¼Œå‰é¢çš„å†™å¯¹åé¢çš„è¯»æ˜¯å¯è§çš„ï¼Œè¿™é‡Œçš„â€œåé¢â€åŒæ ·æŒ‡æ—¶é—´ä¸Šçš„å…ˆåã€‚</p>
<h4 id="ä¼ é€’è§„åˆ™">ã€4ã€‘ä¼ é€’è§„åˆ™</h4>
<p>å¦‚æœæ“ä½œAå…ˆå‘ç”Ÿäºæ“ä½œBï¼Œæ“ä½œBåˆå…ˆè¡Œå‘ç”Ÿäºæ“ä½œCï¼Œåˆ™å¯ä»¥å¾—å‡ºæ“ä½œAå…ˆè¡Œå‘ç”Ÿäºæ“ä½œC</p>
<h4 id="çº¿ç¨‹å¯åŠ¨è§„åˆ™thread-start-rule">ã€5ã€‘çº¿ç¨‹å¯åŠ¨è§„åˆ™ï¼ˆThread Start
Ruleï¼‰</h4>
<p>Threadå¯¹è±¡çš„start() æ–¹æ³•å…ˆè¡Œå‘ç”Ÿäºæ­¤çº¿ç¨‹çš„æ¯ä¸€ä¸ªåŠ¨ä½œã€‚</p>
<h4 id="çº¿ç¨‹ä¸­æ–­è§„åˆ™thread-interruption-rule">ã€6ã€‘çº¿ç¨‹ä¸­æ–­è§„åˆ™ï¼ˆThread
Interruption Ruleï¼‰</h4>
<p>å¯¹äºçº¿ç¨‹interrupt()æ–¹æ³•çš„è°ƒç”¨å…ˆè¡Œå‘ç”Ÿäºè¢«ä¸­æ–­çº¿ç¨‹çš„ä»£ç æ£€æµ‹åˆ°ä¸­æ–­äº‹ä»¶çš„å‘ç”Ÿã€‚ç®€è€Œè¨€ä¹‹ï¼Œè¦å…ˆè°ƒç”¨interrupt()æ–¹æ³•è®¾ç½®è¿‡ä¸­æ–­æ ‡å¿—ä½ï¼Œæ‰èƒ½æ£€æµ‹åˆ°ä¸­æ–­å‘ç”Ÿ</p>
<h4 id="çº¿ç¨‹ç»ˆæ­¢è§„åˆ™thread-termination-rule">ã€7ã€‘çº¿ç¨‹ç»ˆæ­¢è§„åˆ™ï¼ˆThread
Termination Ruleï¼‰</h4>
<p>çº¿ç¨‹ä¸­çš„æ‰€æœ‰æ“ä½œéƒ½å…ˆè¡Œå‘ç”Ÿäºå¯¹æ­¤çº¿ç¨‹çš„ç»ˆæ­¢æ£€æµ‹ï¼Œå¯ä»¥é€šè¿‡è°ƒç”¨isAlive()ç­‰æ‰‹æ®µæ£€æµ‹çº¿ç¨‹æ˜¯å¦å·²ç»ç»ˆæ­¢æ‰§è¡Œã€‚</p>
<h4 id="å¯¹è±¡ç»ˆç»“åŸåˆ™finalizer-rule">ã€8ã€‘å¯¹è±¡ç»ˆç»“åŸåˆ™ï¼ˆFinalizer
Ruleï¼‰</h4>
<p>ä¸€ä¸ªå¯¹è±¡çš„åˆå§‹åŒ–å®Œæˆï¼ˆæ„é€ å‡½æ•°æ‰§è¡Œç»“æŸï¼‰å…ˆè¡Œå‘ç”Ÿäºå®ƒçš„finalize()æ–¹æ³•çš„å¼€å§‹</p>
<h1 id="å…­volatileä¸jmm">å…­ã€volatileä¸JMM</h1>
<h2
id="è¢«volatileä¿®é¥°çš„å˜é‡çš„ä¸¤å¤§ç‰¹ç‚¹">1ã€è¢«volatileä¿®é¥°çš„å˜é‡çš„ä¸¤å¤§ç‰¹ç‚¹</h2>
<h3 id="ç‰¹ç‚¹">ï¼ˆ1ï¼‰ç‰¹ç‚¹</h3>
<ul>
<li>å¯è§æ€§</li>
<li>æœ‰åºæ€§</li>
</ul>
<h3 id="volatileçš„å†…å­˜è¯­ä¹‰">ï¼ˆ2ï¼‰volatileçš„å†…å­˜è¯­ä¹‰</h3>
<ul>
<li>å½“å†™ä¸€ä¸ªvolatileå˜é‡æ—¶ï¼ŒJMMä¼šæŠŠè¯¥çº¿ç¨‹å¯¹åº”çš„æœ¬åœ°å†…å­˜ä¸­çš„å…±äº«å˜é‡å€¼<strong>ç«‹å³åˆ·æ–°å›ä¸»å†…å­˜</strong>ä¸­</li>
<li>å½“è¯»ä¸€ä¸ªvolatileå˜é‡æ—¶ï¼ŒJMMä¼šæŠŠè¯¥çº¿ç¨‹å¯¹åº”çš„æœ¬åœ°å†…å­˜è®¾ç½®ä¸ºæ— æ•ˆï¼Œé‡æ–°å›åˆ°ä¸»å†…å­˜ä¸­è¯»å–æœ€æ–°å…±äº«å˜é‡</li>
<li>æ‰€æœ‰volatileçš„å†™å†…å­˜è¯­ä¹‰æ˜¯ç›´æ¥åˆ·æ–°åˆ°ä¸»å†…å­˜ä¸­ï¼Œè¯»å†…å­˜çš„è¯­ä¹‰æ˜¯ç›´æ¥ä»ä¸»å†…å­˜ä¸­è¯»å–ã€‚</li>
</ul>
<h2 id="å†…å­˜å±éšœ">2ã€å†…å­˜å±éšœ</h2>
<h3 id="æ —å­">ï¼ˆ1ï¼‰æ —å­</h3>
<ul>
<li>å¯è§ï¼šå†™å®Œåç«‹å³åˆ·æ–°ä¼šä¸»å†…å­˜ï¼Œå¹¶åŠæ—¶å‘å‡ºé€šçŸ¥ï¼Œå¤§å®¶å¯ä»¥å»ä¸»å†…å­˜æ‹¿æœ€æ–°ç‰ˆï¼Œå‰é¢çš„ä¿®æ”¹å¯¹åé¢æ‰€æœ‰çº¿ç¨‹å¯è§</li>
<li>æœ‰åºæ€§ï¼šå­˜åœ¨æ•°æ®ä¾èµ–å…³ç³»ï¼Œç¦æ­¢é‡æ’åº</li>
</ul>
<h3 id="æ¦‚å¿µ-5">ï¼ˆ2ï¼‰æ¦‚å¿µ</h3>
<p>â€‹
å†…å­˜å±éšœï¼ˆä¹Ÿç§°å†…å­˜æ …æ ï¼Œå±éšœæŒ‡ä»¤ç­‰ï¼Œæ˜¯ä¸€ç±»åŒæ­¥å±éšœæŒ‡ä»¤ï¼Œæ˜¯CPUæˆ–ç¼–è¯‘å™¨åœ¨å¯¹å†…å­˜éšæœºè®¿é—®çš„æ“ä½œä¸­çš„ä¸€ä¸ªåŒæ­¥ç‚¹ï¼Œä½¿å¾—æ­¤ç‚¹ä¹‹å‰çš„æ‰€æœ‰è¯»å†™æ“ä½œéƒ½æ‰§è¡Œåæ‰å¯ä»¥å¼€å§‹æ‰§è¡Œæ­¤ç‚¹ä¹‹åçš„æ“ä½œï¼‰ã€‚é¿å…ä»£ç é‡æ’åºã€‚å†…å­˜å±éšœå…¶å®å°±æ˜¯ä¸€ç§JVMæŒ‡ä»¤ï¼ŒJavaå†…å­˜æ¨¡å‹çš„é‡æ’è§„åˆ™ä¼šè¦æ±‚Javaç¼–è¯‘å™¨åœ¨ç”ŸæˆVMæŒ‡ä»¤æ—¶æ’å…¥ç‰¹å®šçš„å†…å­˜å±éšœæŒ‡ä»¤ï¼Œé€šè¿‡è¿™äº›å†…å­˜å±éšœæŒ‡ä»¤ï¼Œvolatileå®ç°äº†Javaå†…å­˜æ¨¡å‹ä¸­çš„å¯è§æ€§å’Œæœ‰åºæ€§ï¼ˆç¦é‡æ’ï¼‰ï¼Œä½†<strong>volatileæ— æ³•ä¿è¯åŸå­æ€§</strong>ã€‚</p>
<ul>
<li>å†…å­˜å±éšœ<strong>ä¹‹å‰</strong>çš„æ‰€æœ‰<strong>å†™æ“ä½œ</strong>éƒ½è¦ä¼š<strong>å†™åˆ°ä¸»å†…å­˜</strong></li>
<li>å†…å­˜å±éšœ<strong>ä¹‹å</strong>çš„æ‰€æœ‰<strong>è¯»æ“ä½œ</strong>éƒ½èƒ½è·å¾—<strong>å†…å­˜å±éšœä¹‹å‰çš„æ‰€æœ‰å†™æ“ä½œçš„æœ€æ–°ç»“æœ</strong>ï¼ˆå®ç°å¯è§æ€§ï¼‰</li>
</ul>
<p><img src="https://ych-blog.oss-cn-guangzhou.aliyuncs.com/20250309203143.png" style="zoom:67%;" /></p>
<h4 id="å†™å±éšœstore-memory-barrier">ã€1ã€‘å†™å±éšœï¼ˆStore Memory
Barrierï¼‰</h4>
<p>å‘Šè¯‰å¤„ç†å™¨åœ¨å†™å±éšœä¹‹å‰å°†æ‰€æœ‰å­˜å‚¨åœ¨ç¼“å­˜ï¼ˆstore
bufferesï¼‰ä¸­çš„æ•°æ®åŒæ­¥åˆ°ä¸»å†…å­˜ã€‚å³çœ‹åˆ°Storeå±éšœæŒ‡ä»¤ï¼Œå¿…é¡»æŠŠè¯¥æŒ‡ä»¤ä¹‹å‰æ‰€æœ‰å†™å…¥æŒ‡ä»¤æ‰§è¡Œå®Œæ¯•æ‰èƒ½ç»§ç»­å¾€ä¸‹æ‰§è¡Œ</p>
<h4 id="è¯»å±éšœload-memory-barrier">ã€2ã€‘è¯»å±éšœï¼ˆLoad Memory
Barrierï¼‰</h4>
<p>å¤„ç†å™¨åœ¨è¯»å±éšœä¹‹åçš„è¯»æ“ä½œï¼Œéƒ½åœ¨è¯»å±éšœä¹‹åæ‰§è¡Œï¼Œå³åœ¨Loadå±éšœæŒ‡ä»¤ä¹‹åå°±èƒ½ä¿è¯åé¢çš„è¯»å–æ•°æ®æŒ‡ä»¤ä¸€å®šèƒ½å¤Ÿè¯»å–åˆ°æœ€æ–°çš„æ•°æ®</p>
<h3 id="å†…å­˜å±éšœçš„åˆ†ç±»">ï¼ˆ3ï¼‰å†…å­˜å±éšœçš„åˆ†ç±»</h3>
<figure>
<img
src="C:\Users\28778\AppData\Roaming\Typora\typora-user-images\image-20250226100314936.png"
alt="image-20250226100314936" />
<figcaption aria-hidden="true">image-20250226100314936</figcaption>
</figure>
<h2
id="happens-beforeä¹‹volatileå˜é‡è§„åˆ™">3ã€happens-beforeä¹‹volatileå˜é‡è§„åˆ™</h2>
<table>
<colgroup>
<col style="width: 13%" />
<col style="width: 27%" />
<col style="width: 29%" />
<col style="width: 29%" />
</colgroup>
<thead>
<tr>
<th>ç¬¬ä¸€ä¸ªæ“ä½œ</th>
<th>ç¬¬äºŒä¸ªæ“ä½œï¼šæ™®é€šè¯»å†™</th>
<th>ç¬¬äºŒä¸ªæ“ä½œï¼švolatileè¯»</th>
<th>ç¬¬äºŒä¸ªæ“ä½œï¼švolatileå†™</th>
</tr>
</thead>
<tbody>
<tr>
<td>æ™®é€šè¯»å†™</td>
<td>å¯ä»¥é‡æ’</td>
<td>å¯ä»¥é‡æ’</td>
<td>ä¸å¯ä»¥é‡æ’</td>
</tr>
<tr>
<td>volatileè¯»</td>
<td>ä¸å¯ä»¥é‡æ’</td>
<td>ä¸å¯ä»¥é‡æ’</td>
<td>ä¸å¯ä»¥é‡æ’</td>
</tr>
<tr>
<td>volatileå†™</td>
<td>å¯ä»¥é‡æ’</td>
<td>ä¸å¯ä»¥é‡æ’</td>
<td>ä¸å¯ä»¥é‡æ’</td>
</tr>
</tbody>
</table>
<h2 id="å†…å­˜å±éšœæ’å…¥ç­–ç•¥çš„4ç§è§„åˆ™">4ã€å†…å­˜å±éšœæ’å…¥ç­–ç•¥çš„4ç§è§„åˆ™</h2>
<h3 id="è¯»å±éšœ">ï¼ˆ1ï¼‰è¯»å±éšœ</h3>
<ul>
<li>åœ¨æ¯ä¸€ä¸ªvolatileè¯»æ“ä½œçš„åé¢æ’å…¥ä¸€ä¸ªLoadLoadå±éšœ</li>
<li>åœ¨æ¯ä¸€ä¸ªvolatileè¯»æ“ä½œçš„åé¢æ’å…¥ä¸€ä¸ªLoadStoreå±éšœ</li>
</ul>
<p><img src="https://ych-blog.oss-cn-guangzhou.aliyuncs.com/20250309203153.png" style="zoom:67%;" /></p>
<h3 id="å†™å±éšœ">ï¼ˆ2ï¼‰å†™å±éšœ</h3>
<ul>
<li>åœ¨æ¯ä¸€ä¸ªvolatileå†™æ“ä½œçš„å‰é¢æ’å…¥ä¸€ä¸ªStoreStoreå±éšœ</li>
<li>åœ¨æ¯ä¸€ä¸ªvolatileå†™æ“ä½œçš„åé¢æ’å…¥ä¸€ä¸ªStoreLoadå±éšœ</li>
</ul>
<p><img src="https://ych-blog.oss-cn-guangzhou.aliyuncs.com/20250309203204.png" style="zoom:80%;" /></p>
<h2 id="volatileç‰¹æ€§">5ã€volatileç‰¹æ€§</h2>
<h3 id="ä¿è¯å¯è§æ€§">ï¼ˆ1ï¼‰ä¿è¯å¯è§æ€§</h3>
<p>ä»£ç demoï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ä¸åŠ volatileä¼šé™·å…¥æ­»å¾ªç¯</span></span><br><span class="line"><span class="comment">// éœ€è¦æ³¨æ„çš„æ˜¯whileå¾ªç¯é‡Œé¢ä¸è¦æ·»åŠ  print è¯­å¥ï¼Œ å› ä¸ºJavaçš„printè¯­å¥åŠ äº†synchronizedï¼Œä¿®æ”¹å˜é‡ä¹Ÿä¼šå¯¼è‡´çº¿ç¨‹ç»ˆæ­¢</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">volatile</span> <span class="type">Boolean</span> <span class="variable">flag</span> <span class="operator">=</span> <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">Thread</span> <span class="variable">thread</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(()-&gt;&#123;</span><br><span class="line">        <span class="keyword">while</span> (flag) &#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;æˆ‘è¢«ç»ˆæ­¢äº†ï¼&quot;</span>);</span><br><span class="line">    &#125;,<span class="string">&quot;t1&quot;</span>);</span><br><span class="line">    thread.start();</span><br><span class="line">    <span class="keyword">try</span> &#123;  TimeUnit.SECONDS.sleep(<span class="number">1</span>);  &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;  <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);  &#125;</span><br><span class="line">    flag = <span class="literal">false</span>;</span><br><span class="line">    System.out.println(Thread.currentThread().getName() + <span class="string">&quot; æˆ‘ç»ˆæ­¢äº† &quot;</span> + thread.getName() + <span class="string">&quot; çš„è¿è¡Œï¼&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>volatileå˜é‡è¯»å†™è¿‡ç¨‹</p>
<p><img
src="https://ych-blog.oss-cn-guangzhou.aliyuncs.com/20250309203221.png" /></p>
<p>readï¼šä½œç”¨äºä¸»å†…å­˜ï¼Œå°†å˜é‡çš„å€¼ä»ä¸»å†…å­˜ä¼ è¾“åˆ°å·¥ä½œå†…å­˜ï¼Œä¸»å†…å­˜åˆ°å·¥ä½œå†…å­˜</p>
<p>loadï¼šä½œç”¨äºå·¥ä½œå†…å­˜ï¼Œå°†readä»ä¸»å†…å­˜ä¼ è¾“çš„å˜é‡å€¼æ”¾å…¥å·¥ä½œå†…å­˜å˜é‡å‰¯æœ¬ä¸­ï¼Œå³æ•°æ®åŠ è½½</p>
<p>useï¼šä½œç”¨äºå·¥ä½œå†…å­˜ï¼Œå°†å·¥ä½œå†…å­˜å˜é‡å‰¯æœ¬çš„å€¼ä¼ é€’ç»™æ‰§è¡Œå¼•æ“ï¼Œæ¯å½“JVMé‡åˆ°éœ€è¦è¯¥å˜é‡çš„å­—èŠ‚ç æŒ‡ä»¤æ—¶ä¼šæ‰§è¡Œè¯¥æ“ä½œ</p>
<p>assignï¼šä½œç”¨äºå·¥ä½œå†…å­˜ï¼Œå°†ä»æ‰§è¡Œå¼•æ“æ¥æ”¶åˆ°çš„å€¼èµ‹å€¼ç»™å·¥ä½œå†…å­˜å˜é‡ï¼Œæ¯å½“JVMé‡åˆ°ä¸€ä¸ªç»™å˜é‡èµ‹å€¼å­—èŠ‚ç æŒ‡ä»¤æ—¶ä¼šæ‰§è¡Œè¯¥æ“ä½œã€‚</p>
<p>storeï¼šä½œç”¨äºå·¥ä½œå†…å­˜ï¼Œå°†èµ‹å€¼å®Œæ¯•çš„å·¥ä½œå˜é‡çš„å€¼å†™å›ç»™ä¸»å†…å­˜</p>
<p>writeï¼šä½œç”¨äºä¸»å†…å­˜ï¼Œå°†storeä¼ è¾“è¿‡æ¥çš„å˜é‡èµ‹å€¼ç»™ä¸»å†…å­˜ä¸­çš„å˜é‡</p>
<p>ç”±äºä¸Šè¿°6æ¡åªèƒ½ä¿è¯å•æ¡æŒ‡ä»¤çš„åŸå­æ€§ï¼Œé’ˆå¯¹å¤šæ¡æŒ‡ä»¤çš„ç»„åˆæ€§åŸå­ä¿è¯ï¼Œæ²¡æœ‰å¤§é¢ç§¯åŠ é”ï¼Œæ‰€ä»¥JVMæä¾›äº†å¦å¤–ä¸¤ä¸ªåŸå­æŒ‡ä»¤</p>
<p>lockï¼šä½œç”¨äºä¸»å†…å­˜ï¼Œå°†ä¸€ä¸ªå˜é‡æ ‡è®°ä¸ºä¸€ä¸ªçº¿ç¨‹ç‹¬å çš„çŠ¶æ€ï¼Œåªæ˜¯å†™æ—¶å€™åŠ é”ï¼Œåªæ˜¯é”äº†å†™å˜é‡çš„è¿‡ç¨‹ã€‚</p>
<p>unlockï¼šä½œç”¨äºä¸»å†…å­˜ï¼ŒæŠŠä¸€ä¸ªå¤„äºé”å®šçŠ¶æ€çš„å˜é‡é‡Šæ”¾ï¼Œç„¶åæ‰èƒ½è¢«å…¶ä»–çº¿ç¨‹å ç”¨</p>
<h3 id="æ²¡æœ‰åŸå­æ€§">ï¼ˆ2ï¼‰æ²¡æœ‰åŸå­æ€§</h3>
<p>å¯¹äºvolatileå˜é‡å…·å¤‡å¯è§æ€§ï¼ŒJVMåªæ˜¯ä¿è¯ä»ä¸»å†…å­˜åŠ è½½åˆ°çº¿ç¨‹å·¥ä½œå†…å­˜çš„å€¼æ˜¯æœ€æ–°çš„ï¼Œä¹Ÿä»…æ˜¯æ•°æ®åŠ è½½æ—¶æ˜¯æœ€æ–°çš„ï¼Œä½†æ˜¯å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œâ€œæ•°æ®è®¡ç®—â€å’Œâ€œæ•°æ®èµ‹å€¼â€æ“ä½œå¯èƒ½å¤šæ¬¡å‡ºç°ï¼Œè‹¥æ•°æ®åœ¨åŠ è½½ä¹‹åï¼Œä¸»å†…å­˜volatileä¿®é¥°å˜é‡å‘ç”Ÿä¿®æ”¹ï¼Œçº¿ç¨‹å·¥ä½œå†…å­˜ä¸­çš„æ“ä½œå°†ä¼šä½œåºŸå»è¯»ä¸»å†…å­˜æœ€æ–°å€¼ï¼Œæ“ä½œå‡ºç°å†™ä¸¢å¤±é—®é¢˜ã€‚å³<strong>å„çº¿ç¨‹ç§æœ‰å†…å­˜å’Œä¸»å†…å­˜å…¬å…±å†…å­˜ä¸­å˜é‡ä¸åŒæ­¥</strong>ï¼Œè¿›è€Œå¯¼è‡´æ•°æ®ä¸ä¸€è‡´ï¼Œç”±æ­¤å¯è§volatileè§£å†³çš„æ˜¯å˜é‡è¯»æ—¶çš„å¯è§æ€§é—®é¢˜ï¼Œä½†æ— æ³•ä¿è¯åŸå­æ€§ï¼Œ<strong>å¯¹äºå¤šçº¿ç¨‹ä¿®æ”¹ä¸»å†…å­˜å…±äº«å˜é‡çš„åœºæ™¯å¿…é¡»ä½¿ç”¨åŠ é”åŒæ­¥ã€‚</strong></p>
<p>demoä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">VolatileNoAutomicDemo</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">MyNumber</span> <span class="variable">myNumber</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyNumber</span>();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">1</span>; j &lt;= <span class="number">1000</span>; ++j) &#123;</span><br><span class="line">                    myNumber.plusOneToNum();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;, <span class="string">&quot;thread&quot;</span>).start();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">try</span> &#123;  TimeUnit.SECONDS.sleep(<span class="number">1</span>);  &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;  <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);  &#125;</span><br><span class="line">        System.out.println(myNumber.getNum());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyNumber</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">volatile</span> <span class="type">Integer</span> <span class="variable">num</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title function_">plusOneToNum</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.num++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æŒ‡ä»¤ç¦é‡æ’">ï¼ˆ3ï¼‰æŒ‡ä»¤ç¦é‡æ’</h3>
<p>volatileçš„åº•å±‚å®ç°æ˜¯é€šè¿‡å†…å­˜å±éšœ</p>
<h3 id="ç»“è®º">ï¼ˆ4ï¼‰ç»“è®º</h3>
<p>â€‹ volatileå˜é‡ä¸é€‚åˆå‚ä¸åˆ°ä¾èµ–å½“å‰å€¼çš„è¿ç®—ï¼Œå¦‚ i = i+1; i++; ä¹‹ç±»
ã€‚é€šå¸¸volatileç”¨ä½œä¿å­˜æŸä¸ªçŠ¶æ€çš„Booleanå€¼æˆ– int å€¼ã€‚</p>
<p>â€‹
ç”±äºvolatileå˜é‡åªèƒ½ä¿è¯å¯è§æ€§ï¼Œåœ¨ä¸ç¬¦åˆä»¥ä¸‹ä¸¤æ¡è§„åˆ™çš„è¿ç®—åœºæ™¯ä¸­ï¼Œæˆ‘ä»¬ä»ç„¶è¦é€šè¿‡åŠ é”æ¥ä¿è¯åŸå­æ€§ï¼š</p>
<ul>
<li>è¿ç®—ç»“æœå¹¶ä¸ä¾èµ–å˜é‡çš„å½“å‰å€¼ï¼Œæˆ–è€…èƒ½å¤Ÿç¡®ä¿åªèƒ½å•ä¸€çš„çº¿ç¨‹ä¿®æ”¹å˜é‡çš„å€¼</li>
<li>å˜é‡ä¸éœ€è¦ä¸å…¶ä»–çš„çŠ¶æ€å˜é‡å…±åŒå‚ä¸ä¸å˜çº¦æŸ</li>
</ul>
<h2 id="ä½¿ç”¨volatile">6ã€ä½¿ç”¨volatile</h2>
<ul>
<li>å•ä¸€èµ‹å€¼å¯ä»¥ä½¿ç”¨volatileï¼Œå«å¤åˆè¿ç®—èµ‹å€¼ä¸å¯ä»¥ï¼ˆi++ä¹‹ç±»ï¼‰</li>
<li>ä½œä¸ºä¸€ä¸ªå¸ƒå°”çŠ¶æ€æ ‡å¿—ï¼Œç”¨äºæŒ‡ç¤ºå‘ç”Ÿäº†ä¸€ä¸ªé‡è¦çš„ä¸€æ¬¡æ€§äº‹ä»¶</li>
<li>å½“è¯»è¿œå¤šäºå†™ï¼Œç»“åˆä½¿ç”¨å†…éƒ¨é”å’Œvolatileå˜é‡å‡å°‘åŒæ­¥çš„å¼€é”€</li>
</ul>
<h1 id="ä¸ƒcascompare-and-swap">ä¸ƒã€CASï¼ˆcompare and swapï¼‰</h1>
<h2 id="æ¦‚å¿µ-6">1ã€æ¦‚å¿µ</h2>
<p>ï¼ˆæœ‰ç‚¹åƒä¹è§‚é”ï¼Œæ›´æ–°ä¹‹å‰å…ˆæ¯”è¾ƒä¸€ä¸‹æ˜¯ä¸æ˜¯ä¹‹å‰çš„é‚£ä¸ªå€¼ï¼‰</p>
<p>compare and swap
æ¯”è¾ƒå¹¶äº¤æ¢ï¼ŒåŒ…å«ä¸‰ä¸ªæ“ä½œæ•°â€”â€”å†…å­˜ä½ç½®ã€é¢„æœŸåŸå€¼åŠæ›´æ–°å€¼</p>
<p>æ‰§è¡ŒCASæ“ä½œçš„æ—¶å€™ï¼Œå°†å†…å­˜ä½ç½®çš„å€¼ä¸é¢„æœŸåŸå€¼æ¯”è¾ƒï¼š</p>
<ul>
<li>å¦‚æœç›¸åŒ¹é…ï¼Œé‚£ä¹ˆå¤„ç†å™¨ä¼šè‡ªåŠ¨å°†è¯¥ä½ç½®å€¼æ›´æ–°ä¸ºæ–°å€¼</li>
<li>å¦‚æœä¸åŒ¹é…ï¼Œå¤„ç†å™¨ä¸åšä»»ä½•æ“ä½œï¼Œå¤šä¸ªçº¿ç¨‹åŒæ—¶æ‰§è¡ŒCASæ“ä½œåªæœ‰ä¸€ä¸ªä¼šæˆåŠŸ</li>
</ul>
<p><img
src="https://ych-blog.oss-cn-guangzhou.aliyuncs.com/20250309203233.png" /></p>
<p>CASæ˜¯JDKæä¾›çš„éé˜»å¡åŸå­æ€§æ“ä½œï¼Œå®ƒé€šè¿‡ç¡¬ä»¶ä¿è¯äº†æ¯”è¾ƒ-æ›´æ–°çš„åŸå­æ€§ã€‚å®ƒæ˜¯éé˜»å¡çš„ä¸”è‡ªèº«å…·æœ‰åŸå­æ€§ã€‚CASæ˜¯ä¸€æ¡CPUçš„åŸå­æŒ‡ä»¤ï¼ˆcmpxchgæŒ‡ä»¤ï¼‰ï¼Œæ‰§è¡ŒcmpxchgæŒ‡ä»¤æ—¶ï¼Œä¼šåˆ¤æ–­å½“å‰ç³»ç»Ÿæ˜¯å¦ä¸ºå¤šæ ¸ç³»ç»Ÿï¼Œè‹¥ä¸ºå¤šæ ¸ç³»ç»Ÿï¼Œåˆ™ç»™æ€»çº¿åŠ é”ï¼Œåªæœ‰ä¸€ä¸ªçº¿ç¨‹ä¼šå¯¹æ€»çº¿åŠ é”æˆåŠŸï¼ŒåŠ é”æˆåŠŸåä¼šæ‰§è¡ŒCASæ“ä½œï¼Œå³CASçš„åŸå­æ€§å®é™…ä¸Šæ˜¯CPUå®ç°ç‹¬å ï¼Œæ¯”èµ·synchronizedé‡é‡çº§é”ï¼Œè¿™é‡Œçš„æ’ä»–äº‹ä»¶è¦çŸ­å¾ˆå¤šï¼Œæ‰€ä»¥åœ¨å¤šçº¿ç¨‹æƒ…å†µä¸‹æ€§èƒ½ä¼šæ›´å¥½ã€‚</p>
<h2 id="casåº•å±‚åŸç†">2ã€CASåº•å±‚åŸç†</h2>
<h3 id="unsafe">ï¼ˆ1ï¼‰Unsafe</h3>
<p>æ˜¯CASçš„æ ¸å¿ƒç±»ï¼Œç”±äºJavaæ–¹æ³•æ— æ³•ç›´æ¥è®¿é—®åº•å±‚ç³»ç»Ÿï¼Œéœ€è¦é€šè¿‡æœ¬åœ°ï¼ˆnativeï¼‰æ–¹æ³•æ¥è®¿é—®ï¼ŒUnsafeåŸºäºè¯¥ç±»å¯ä»¥ç›´æ¥æ“ä½œç‰¹å®šå†…å­˜çš„æ•°æ®ã€‚Unsafeç±»å…¶å†…éƒ¨æ–¹æ³•æ“ä½œå¯ä»¥åƒCçš„æŒ‡é’ˆä¸€æ ·ç›´æ¥æ“ä½œå†…å­˜ï¼Œå› æ­¤Javaä¸­CASæ“ä½œçš„æ‰§è¡Œä¾èµ–äºUnsafeç±»çš„æ–¹æ³•ã€‚</p>
<p><strong>æ³¨æ„Unsafeç±»ä¸­çš„æ‰€æœ‰æ–¹æ³•éƒ½æ˜¯nativeä¿®é¥°çš„ï¼Œä¹Ÿå°±æ˜¯è¯´Unsafeç±»ä¸­çš„æ–¹æ³•éƒ½ç›´æ¥è°ƒç”¨æ“ä½œç³»ç»Ÿåº•å±‚èµ„æºæ‰§è¡Œç›¸åº”ä»»åŠ¡</strong></p>
<h3 id="å˜é‡valueoffset">ï¼ˆ2ï¼‰å˜é‡valueOffset</h3>
<p>å…¶å®å°±æ˜¯å†…å­˜åç§»åœ°å€ï¼Œå› ä¸ºUnsafeæ˜¯æ ¹æ®å†…å­˜åç§»åœ°å€æ¥è·å–æ•°æ®çš„</p>
<h3 id="ä½¿ç”¨volatileä¿®é¥°å˜é‡value">ï¼ˆ3ï¼‰ä½¿ç”¨volatileä¿®é¥°å˜é‡value</h3>
<p>å˜é‡valueç”¨volatileä¿®é¥°ï¼Œä¿è¯äº†å¤šçº¿ç¨‹ä¹‹é—´çš„å†…å­˜å¯è§æ€§ã€‚</p>
]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>JUC</tag>
        <tag>å¹¶å‘ç¼–ç¨‹</tag>
      </tags>
  </entry>
  <entry>
    <title>å®ä¹ å‘ç‚¹</title>
    <url>/2025/01/04/Java/%E5%AE%9E%E4%B9%A0%E5%9D%91%E7%82%B9/</url>
    <content><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">
  <script id="hbeData" type="hbeData" data-hmacdigest="39f6fc65c56b885e0fadb17bc2a8eeb1a64c28db461f500933fdcec77f7e0e02">1f6bb8509d126916afe1b073331b8b303e8fc819b81490765ad837df7dc1353814a72d845b5617ce1fc01ae8d2343ee9e00ca198754762b83bc34dc85adcadb9565ade93116558bad147e024d233f6fd50676540c5cfc12ef02bdb9408ec77a9cd0fd45cd751c067d00a32d02564a9ded5e79fab6af90cb1efe5602c3a23dbe85bc00b055b02a7731ad71244f3df0a0e4b22e405093904fdb426d271773c3cd945f10cef61240550fe1fc4511c9ce05e4299e86b95d3c2629b712259f3645574d5450c3915182a5b63f52fd1b9a987470d809318389bf47264abc009d75e63699fe01e548d0ccd5c5a5393bac04d96ba61630da33c84987a274094cae6c6fb00be8a457b5703d7bf2dc1e6825e0314e1bd96e928fc5384ab593e02b2028ac65117828b0a7171311817a002c4804b5e87d6b862a31cfee9328e8793a5763a6f7998bee9741e2163ad1fdc40b65842374a933ac726a26b96e1d1f09fa850a77136af875dadf227595bae3174aaead10bf6be33ad53fe0b55a65c627c7361b07e6b00e8e9b0c51cddcc2d99bb5247a33dea91e5f30f48ae20d72e65e22f909fe3ba4ed66a3344b608738ad3eab169b50d6fe0097944f2e1f4af6ef793a37a5cf3ab8c7d027451039abc4a88d9ce6ee052c506c77959dd1e471e137ff984b576d9011611a60632198f2bb59b7330544a51958a13b094b5a1b39cf8f1c817e57e0ba87f2ae06d347bd39c25953b40c518d8167f0beef5cc0e7982735fd0fffc1c699dd9923e1f4570d5255f0f985dabcc890e004b6fbc9faf80cd66cee28b03be73b0b2a3edf2da7fcaa9bf50059da89ae9be</script>
  <div class="hbe hbe-content">
    <div class="hbe hbe-input hbe-input-default">
      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">
      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">
        <span class="hbe hbe-input-label-content hbe-input-label-content-default">Hey, password is required here.</span>
      </label>
    </div>
  </div>
</div>
<script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      <categories>
        <category>å®ä¹ </category>
      </categories>
      <tags>
        <tag>å®ä¹ </tag>
        <tag>è®°å½•</tag>
      </tags>
  </entry>
  <entry>
    <title>Javaé¢è¯•</title>
    <url>/2025/01/04/Java/Java%E9%9D%A2%E8%AF%95/</url>
    <content><![CDATA[<h1 id="ä¸€ç¾å›¢">ä¸€ã€ç¾å›¢</h1>
<h1 id="äºŒå­—èŠ‚">äºŒã€å­—èŠ‚</h1>
<h1 id="ä¸‰momenta">ä¸‰ã€Momenta</h1>
<h2 id="ä¸€httpè¯·æ±‚æŠ¥æ–‡è§£æçš„è¿‡ç¨‹">ä¸€ã€HTTPè¯·æ±‚æŠ¥æ–‡è§£æçš„è¿‡ç¨‹</h2>
<h3 id="httpåŸºæœ¬æ¦‚å¿µ">1. HTTPåŸºæœ¬æ¦‚å¿µ</h3>
<p>HTTPæ˜¯æŒ‡è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼Œå…¨ç§°HyperText Transfer
Protocolï¼Œå®ƒçš„åç§°ç”±ä¸‰éƒ¨åˆ†ç»„æˆ</p>
<p>è¶…æ–‡æœ¬ï¼šæŒ‡çš„ä¸ä»…ä»…é™äºæ–‡æœ¬çš„å¤šæ ·æ€§ï¼Œè¿˜åŒ…æ‹¬è§†é¢‘ã€å›¾ç‰‡ç­‰</p>
<p>ä¼ è¾“ï¼šè¡¨ç¤ºæ•°æ®çš„ä¼ è¾“</p>
<p>åè®®ï¼šè¡¨ç¤ºé€šä¿¡åŒæ–¹çš„åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­çº¦å®šä¿—æˆçš„è§„èŒƒ</p>
<h3 id="httpè¯·æ±‚ä½äºè®¡ç®—æœºç½‘ç»œçš„å“ªä¸€å±‚å‘¢">2.
HTTPè¯·æ±‚ä½äºè®¡ç®—æœºç½‘ç»œçš„å“ªä¸€å±‚å‘¢ï¼Ÿ</h3>
<p>åº”ç”¨å±‚ã€‚
åœ¨ç½‘ç»œé€šä¿¡ä¸­ï¼Œåº”ç”¨å±‚æ˜¯æœ€æ¥è¿‘ç”¨æˆ·çš„ä¸€å±‚ï¼Œå®ƒè´Ÿè´£ä¸ºç‰¹å®šçš„ç½‘ç»œåº”ç”¨æä¾›æœåŠ¡å’ŒåŠŸèƒ½ã€‚åº”ç”¨å±‚åè®®å®šä¹‰äº†æ•°æ®äº¤æ¢çš„è§„åˆ™å’Œæ ¼å¼ï¼Œä»¥ä¾¿ä¸åŒçš„åº”ç”¨ç¨‹åºèƒ½å¤Ÿç›¸äº’é€šä¿¡å’Œäº¤æ¢ä¿¡æ¯ã€‚</p>
<h3 id="httpè¯·æ±‚çš„æ•´ä¸ªæµç¨‹">3. HTTPè¯·æ±‚çš„æ•´ä¸ªæµç¨‹</h3>
<h4 id="æ€»ä½“æµç¨‹"><strong>ï¼ˆ1ï¼‰æ€»ä½“æµç¨‹</strong></h4>
<p><img
src="https://ych-blog.oss-cn-guangzhou.aliyuncs.com/20250104142003.png" /></p>
<h4 id="å®é™…ä¾‹å­"><strong>ï¼ˆ2ï¼‰å®é™…ä¾‹å­</strong></h4>
<p>ä»¥ä¸€ä¸ªå®é™…çš„æ¡ˆä¾‹ï¼Œæ¥æ·±å…¥æ¢è®¨ä¸€ä¸‹HTTPçš„è¯·æ±‚å“åº”è¿‡ç¨‹ï¼Œå‡è®¾æˆ‘ä»¬è®¿é—®çš„ç½‘å€æ˜¯ï¼šhttps://baidu.com</p>
<p>å½“æˆ‘ä»¬åœ¨æµè§ˆå™¨åœ°å€æ è¾“å…¥è¯¥ç½‘å€å¹¶æŒ‰ä¸‹å›è½¦é”®åï¼Œæµè§ˆå™¨ä¼šè¿›è¡Œå¦‚ä¸‹æ“ä½œï¼š</p>
<ol type="1">
<li>é¦–å…ˆæµè§ˆå™¨ä¼šä½¿ç”¨DNSåŸŸåè§£æåè®®ï¼Œè§£æè¾“å…¥çš„ç½‘ç«™åŸŸåï¼Œç„¶åè·å–å®é™…æœåŠ¡å™¨çš„ipåœ°å€è¿”å›ç»™æµè§ˆå™¨ã€‚</li>
<li>æµè§ˆå™¨æ¥æ”¶åˆ°å®é™…çš„æœåŠ¡å™¨ipåœ°å€åï¼Œä¼šéšæœºé€‰æ‹©ä¸€ä¸ªå¯ç”¨çš„å®¢æˆ·ç«¯ç«¯å£ï¼Œä¸æœåŠ¡å™¨é»˜è®¤çš„80ç«¯å£å»ºç«‹TCPè¿æ¥ï¼ˆ3æ¬¡æ¡æ‰‹ï¼‰ã€‚åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´ä¼šå»ºç«‹ä¸€ä¸ªå¥—æ¥å­—ç”¨äºé€šä¿¡ã€‚</li>
<li>æ¥ç€æµè§ˆå™¨ä¼šé€šè¿‡å¥—æ¥å­—å‘æœåŠ¡å™¨å‘é€ä¸€ä¸ªHTTPè¯·æ±‚ï¼Œè¯¥è¯·æ±‚ä¼šæºå¸¦å®¢æˆ·ç«¯æƒ³è¦çš„å¯¹è±¡çš„ç›¸å…³ä¿¡æ¯ã€‚</li>
<li>æœåŠ¡å™¨é€šè¿‡å¥—æ¥å­—æ¥æ”¶åˆ°è¿™ä¸ªè¯·æ±‚æŠ¥æ–‡åï¼Œä¼šå¯¹è¯·æ±‚è¿›è¡Œè§£æï¼Œå¹¶ä»å­˜å‚¨å™¨(RAMæˆ–ç£ç›˜)ä¸­æ£€ç´¢å‡ºè¯·æ±‚çš„å¯¹è±¡ã€‚ç„¶åï¼ŒæœåŠ¡å™¨ä¼šå°†æ£€ç´¢åˆ°çš„å¯¹è±¡å°è£…åˆ°HTTPå“åº”æŠ¥æ–‡ä¸­ï¼Œå¹¶é€šè¿‡å¥—æ¥å­—å‘é€ç»™å®¢æˆ·ç«¯ã€‚</li>
<li>å®¢æˆ·ç«¯ä¼šä»å“åº”æŠ¥æ–‡ä¸­æå–å‡ºå“åº”çš„æ–‡ä»¶ï¼Œå¹¶å¯¹HTMLæ–‡ä»¶è¿›è¡Œæ£€æŸ¥ã€‚ç„¶åï¼Œå®¢æˆ·ç«¯ä¼šå¾ªç¯æ£€æŸ¥æŠ¥æ–‡ä¸­çš„å…¶ä»–å†…éƒ¨å¯¹è±¡ã€‚åœ¨æ£€æŸ¥å®Œæˆåï¼ŒHTTPå®¢æˆ·ç«¯ä¼šå°†ç›¸åº”çš„èµ„æºé€šè¿‡æ˜¾ç¤ºå™¨å‘ˆç°ç»™ç”¨æˆ·ã€‚</li>
<li>å½“æœåŠ¡å™¨å“åº”å®Œå®¢æˆ·ç«¯è¯·æ±‚åï¼Œä¼šä¸»åŠ¨é€šçŸ¥TCPæ–­å¼€è¿æ¥ï¼Œè·Ÿæµè§ˆå™¨è¿›è¡Œ4æ¬¡æŒ¥æ‰‹æœ€ç»ˆæ–­å¼€TCPè¿æ¥ã€‚</li>
</ol>
<h3 id="åŒå‘è¿æ¥">4. åŒå‘è¿æ¥</h3>
<p>â€‹ ä»ä¸Šé¢çš„æµç¨‹æè¿°å¯ä»¥çœ‹åˆ°ï¼ŒHTTP
åè®®æ˜¯ä¸€ç§å•å‘æ— çŠ¶æ€åè®®ï¼Œè¿™æ„å‘³ç€åªæœ‰å®¢æˆ·ç«¯å‘æœåŠ¡å™¨ç«¯å‘é€è¯·æ±‚æ—¶ï¼ŒæœåŠ¡å™¨æ‰ä¼šå“åº”å¹¶è¿”å›æ•°æ®ç»™å®¢æˆ·ç«¯ã€‚ç„¶è€Œï¼ŒæœåŠ¡å™¨å¹¶ä¸ä¼šä¸»åŠ¨å‘é€HTTPè¯·æ±‚è¿”å›ç»™å®¢æˆ·ç«¯ã€‚å› æ­¤ï¼Œå•å‘é€šä¿¡æœ‰å¯¹åº”çš„åŒå‘é€šä¿¡æ–¹å¼ï¼Œé€šè¿‡æŸäº›æŠ€æœ¯å’Œæ‰©å±•ï¼ŒHTTPåè®®ä¹Ÿå¯ä»¥å®ç°ç±»ä¼¼äºåŒå‘é€šä¿¡çš„æ•ˆæœã€‚ä¾‹å¦‚ï¼Œé€šè¿‡é•¿è½®è¯¢ï¼ˆLong
Pollingï¼‰ï¼Œå®¢æˆ·ç«¯å¯ä»¥å‘é€ä¸€ä¸ªè¯·æ±‚å¹¶ä¿æŒè¿æ¥æ‰“å¼€ï¼Œç›´åˆ°æœåŠ¡å™¨æœ‰æ–°çš„æ•°æ®å¯ç”¨æ—¶æ‰è¿”å›å“åº”ã€‚è¿™ç§æ–¹å¼ä½¿å¾—æœåŠ¡å™¨èƒ½å¤Ÿå‘å®¢æˆ·ç«¯æ¨é€æ•°æ®ï¼Œä»è€Œå®ç°äº†ç±»ä¼¼äºåŒå‘é€šä¿¡çš„æ•ˆæœã€‚</p>
<p>â€‹
WebSocketsæ˜¯ä¸€ç§å…¨åŒå·¥é€šä¿¡åè®®ï¼Œå®ƒå…è®¸å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´è¿›è¡ŒåŒå‘é€šä¿¡ã€‚é€šè¿‡å»ºç«‹æŒä¹…çš„è¿æ¥ï¼ŒWebSocketså®ç°äº†æ›´å®æ—¶çš„åŒå‘é€šä¿¡ã€‚</p>
<h2 id="äºŒredis">äºŒã€Redis</h2>
<h3 id="åŸºæœ¬æ•°æ®ç±»å‹">1. åŸºæœ¬æ•°æ®ç±»å‹</h3>
<table>
<thead>
<tr>
<th style="text-align: center;">ç±»å‹</th>
<th style="text-align: center;">ä¸¾ä¾‹</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">String</td>
<td style="text-align: center;">hello world</td>
</tr>
<tr>
<td style="text-align: center;">Hash</td>
<td style="text-align: center;">{name:"jack", age:21}</td>
</tr>
<tr>
<td style="text-align: center;">List</td>
<td style="text-align: center;">[A-&gt;B-&gt;B-&gt;C]</td>
</tr>
<tr>
<td style="text-align: center;">Set</td>
<td style="text-align: center;">{A,C,B}</td>
</tr>
<tr>
<td style="text-align: center;">SortSet</td>
<td style="text-align: center;">{A:1,B:2,C:3}</td>
</tr>
</tbody>
</table>
<h3 id="ç‰¹æ®Šæ•°æ®ç±»å‹">2. ç‰¹æ®Šæ•°æ®ç±»å‹</h3>
<table>
<thead>
<tr>
<th style="text-align: center;">ç±»å‹</th>
<th style="text-align: center;">ä¸¾ä¾‹</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">GEO</td>
<td style="text-align: center;">{A:(120.3, 30.5)}</td>
</tr>
<tr>
<td style="text-align: center;">BitMap</td>
<td style="text-align: center;">0111001000101010101</td>
</tr>
<tr>
<td style="text-align: center;">HyperLog</td>
<td style="text-align: center;">101001010110101</td>
</tr>
</tbody>
</table>
<h3 id="rediså’Œmysqlä¿æŒæ•°æ®ä¸€è‡´æ€§">3. Rediså’ŒMySQLä¿æŒæ•°æ®ä¸€è‡´æ€§</h3>
<h4 id="ä¸€ç¼“å­˜å…ˆååˆ é™¤é—®é¢˜"><strong>ï¼ˆä¸€ï¼‰ç¼“å­˜å…ˆååˆ é™¤é—®é¢˜</strong></h4>
<blockquote>
<p>ä¸ç®¡æ˜¯å…ˆå†™<a
href="https://cloud.tencent.com/product/cdb?from_column=20065&amp;from=20065">MySQLæ•°æ®åº“</a>ï¼Œå†åˆ é™¤Redisç¼“å­˜ï¼›è¿˜æ˜¯å…ˆåˆ é™¤ç¼“å­˜ï¼Œå†å†™åº“ï¼Œéƒ½æœ‰å¯èƒ½å‡ºç°æ•°æ®ä¸ä¸€è‡´çš„æƒ…å†µã€‚</p>
</blockquote>
<h5 id="å…ˆåˆ é™¤ç¼“å­˜">1.1 å…ˆåˆ é™¤ç¼“å­˜</h5>
<ul>
<li>å¦‚æœå…ˆåˆ é™¤Redisç¼“å­˜æ•°æ®ï¼Œç„¶è€Œè¿˜æ²¡æœ‰æ¥å¾—åŠå†™å…¥MySQLï¼Œå¦ä¸€ä¸ªçº¿ç¨‹å°±æ¥è¯»å–</li>
<li>è¿™ä¸ªæ—¶å€™å‘ç°ç¼“å­˜ä¸ºç©ºï¼Œåˆ™å»Mysqlæ•°æ®åº“ä¸­è¯»å–æ—§æ•°æ®å†™å…¥ç¼“å­˜ï¼Œæ­¤æ—¶ç¼“å­˜ä¸­ä¸ºè„æ•°æ®ã€‚</li>
<li>ç„¶åæ•°æ®åº“æ›´æ–°åå‘ç°Rediså’ŒMysqlå‡ºç°äº†æ•°æ®ä¸ä¸€è‡´çš„é—®é¢˜</li>
</ul>
<h5 id="ååˆ é™¤ç¼“å­˜">1.2 ååˆ é™¤ç¼“å­˜</h5>
<ul>
<li>å¦‚æœå…ˆå†™äº†åº“ï¼Œç„¶åå†åˆ é™¤ç¼“å­˜ï¼Œä¸å¹¸çš„å†™åº“çš„çº¿ç¨‹æŒ‚äº†ï¼Œå¯¼è‡´äº†ç¼“å­˜æ²¡æœ‰åˆ é™¤</li>
<li>è¿™ä¸ªæ—¶å€™å°±ä¼šç›´æ¥è¯»å–æ—§ç¼“å­˜ï¼Œæœ€ç»ˆä¹Ÿå¯¼è‡´äº†æ•°æ®ä¸ä¸€è‡´æƒ…å†µ</li>
<li>å› ä¸ºå†™å’Œè¯»æ˜¯å¹¶å‘çš„ï¼Œæ²¡æ³•ä¿è¯é¡ºåº,å°±ä¼šå‡ºç°ç¼“å­˜å’Œæ•°æ®åº“çš„æ•°æ®ä¸ä¸€è‡´çš„é—®é¢˜</li>
</ul>
<h4 id="äºŒè§£å†³åŠæ³•">ï¼ˆäºŒï¼‰è§£å†³åŠæ³•</h4>
<h5 id="å»¶æ—¶åŒåˆ ç­–ç•¥">2.1 å»¶æ—¶åŒåˆ ç­–ç•¥</h5>
<ul>
<li>1.å…ˆåˆ é™¤ç¼“å­˜</li>
<li>2.å†å†™æ•°æ®åº“</li>
<li>3.ä¼‘çœ 500æ¯«ç§’</li>
<li>4.å†æ¬¡åˆ é™¤ç¼“å­˜</li>
</ul>
<h5 id="å¼‚æ­¥æ›´æ–°ç¼“å­˜åŸºäºmysql-binlogçš„åŒæ­¥æœºåˆ¶">2.2
å¼‚æ­¥æ›´æ–°ç¼“å­˜ï¼ˆåŸºäºMysql binlogçš„åŒæ­¥æœºåˆ¶ï¼‰</h5>
<ul>
<li>1.æ¶‰åŠåˆ°æ›´æ–°çš„æ•°æ®æ“ä½œï¼Œåˆ©ç”¨Mysql binlog è¿›è¡Œå¢é‡è®¢é˜…æ¶ˆè´¹</li>
<li>2.å°†æ¶ˆæ¯å‘é€åˆ°æ¶ˆæ¯é˜Ÿåˆ—</li>
<li>3.é€šè¿‡æ¶ˆæ¯é˜Ÿåˆ—æ¶ˆè´¹å°†å¢é‡æ•°æ®æ›´æ–°åˆ°Redisä¸Š</li>
<li>4.æ“ä½œæƒ…å†µ</li>
<li>è¯»å–Redisç¼“å­˜ï¼šçƒ­æ•°æ®éƒ½åœ¨Redisä¸Š</li>
<li>å†™Mysqlï¼šå¢åˆ æ”¹éƒ½æ˜¯åœ¨Mysqlè¿›è¡Œæ“ä½œ</li>
<li>æ›´æ–°Redisæ•°æ®ï¼šMysqlçš„æ•°æ®æ“ä½œéƒ½è®°å½•åˆ°binlogï¼Œé€šè¿‡æ¶ˆæ¯é˜Ÿåˆ—åŠæ—¶æ›´æ–°åˆ°Redisä¸Š</li>
</ul>
<h3 id="ç¼“å­˜ç©¿é€">4. ç¼“å­˜ç©¿é€</h3>
<h4 id="æ¦‚å¿µ">ï¼ˆ1ï¼‰æ¦‚å¿µ</h4>
<p>æŒ‡å®¢æˆ·ç«¯è¯·æ±‚çš„æ•°æ®åœ¨ç¼“å­˜å’Œæ•°æ®åº“ä¸­éƒ½ä¸å­˜åœ¨ï¼Œè¿™æ ·ç¼“å­˜æ°¸è¿œä¸ä¼šç”Ÿæ•ˆï¼Œè¿™äº›è¯·æ±‚éƒ½ä¼šç›´æ¥æ‰“åˆ°æ•°æ®åº“</p>
<h4 id="è§£å†³æ–¹æ¡ˆ">ï¼ˆ2ï¼‰è§£å†³æ–¹æ¡ˆ</h4>
<ul>
<li>ç¼“å­˜ç©ºå¯¹è±¡</li>
<li>å¸ƒéš†è¿‡æ»¤å™¨</li>
<li>å¢å¼ºidçš„å¤æ‚åº¦ï¼Œé¿å…è¢«çŒœæµ‹idè§„å¾‹</li>
<li>åšå¥½æ•°æ®çš„åŸºç¡€æ ¼å¼æ ¡éªŒ</li>
<li>åŠ å¼ºç”¨æˆ·æƒé™æ ¡éªŒ</li>
<li>åšå¥½çƒ­ç‚¹å‚æ•°çš„é™æµ</li>
</ul>
<h3 id="ç¼“å­˜é›ªå´©">5. ç¼“å­˜é›ªå´©</h3>
<h4 id="æ¦‚å¿µ-1">ï¼ˆ1ï¼‰æ¦‚å¿µ</h4>
<p>æŒ‡åŒä¸€æ—¶æ®µï¼Œå¤§é‡çš„ç¼“å­˜keyåŒæ—¶å¤±æ•ˆï¼Œæˆ–è€…RedisæœåŠ¡å®•æœºï¼Œå¯¼è‡´å¤§é‡çš„è¯·æ±‚ç›´æ¥æ‰“åˆ°æ•°æ®åº“ï¼Œå¸¦æ¥å·¨å¤§çš„å‹åŠ›</p>
<h4 id="è§£å†³æ–¹æ¡ˆ-1">ï¼ˆ2ï¼‰è§£å†³æ–¹æ¡ˆ</h4>
<ul>
<li>ç»™ä¸åŒkeyçš„TTLæ·»åŠ éšæœºå€¼</li>
<li>åˆ©ç”¨Redisé›†ç¾¤æé«˜æœåŠ¡çš„å¯ç”¨æ€§</li>
<li>ç»™ç¼“å­˜ä¸šåŠ¡æ·»åŠ é™çº§é™æµç­–ç•¥</li>
<li>ç»™ä¸šåŠ¡æ·»åŠ å¤šçº§ç¼“å­˜</li>
</ul>
<h3 id="ç¼“å­˜å‡»ç©¿">6. ç¼“å­˜å‡»ç©¿</h3>
<h4 id="æ¦‚å¿µ-2">ï¼ˆ1ï¼‰æ¦‚å¿µ</h4>
<p>ä¹Ÿå«çƒ­ç‚¹Keyé—®é¢˜ï¼Œå°±æ˜¯è¢«ä¸€ä¸ªé«˜å¹¶å‘è®¿é—®å¹¶ä¸”ç¼“å­˜é‡å»ºä¸šåŠ¡è¾ƒå¤æ‚çš„keyçªç„¶å¤±æ•ˆäº†ï¼Œæ— æ•°çš„è¯·æ±‚è®¿é—®ä¼šåœ¨ç¬é—´ç»™æ•°æ®åº“å¸¦æ¥å·¨å¤§çš„å‹åŠ›ã€‚</p>
<h4 id="è§£å†³æ–¹æ¡ˆ-2">ï¼ˆ2ï¼‰è§£å†³æ–¹æ¡ˆ</h4>
<ul>
<li>äº’æ–¥é”</li>
<li>é€»è¾‘è¿‡æœŸ</li>
</ul>
<h3 id="redisæŒä¹…åŒ–">7. RedisæŒä¹…åŒ–</h3>
<h4 id="ä¸€rdbæŒä¹…åŒ–">ï¼ˆä¸€ï¼‰RDBæŒä¹…åŒ–</h4>
<h5 id="æ¦‚å¿µ-3">1. æ¦‚å¿µ</h5>
<p>â€‹ RDBå…¨ç§°Redis Database Backup
fileï¼ˆRedisæ•°æ®å¤‡ä»½æ–‡ä»¶ï¼‰ï¼Œä¹Ÿè¢«å«åšRedisæ•°æ®å¿«ç…§ã€‚ï¼ˆå¿«ç…§æ–‡ä»¶ç§°ä¸ºRDBæ–‡ä»¶ï¼Œé»˜è®¤æ˜¯ä¿å­˜åœ¨å½“å‰è¿è¡Œç›®å½•ã€‚ï¼‰ç®€å•æ¥è¯´å°±æ˜¯æŠŠå†…å­˜ä¸­çš„æ‰€æœ‰æ•°æ®éƒ½è®°å½•åˆ°ç£ç›˜ä¸­ã€‚å½“Rediså®ä¾‹æ•…éšœé‡å¯åï¼Œä»ç£ç›˜è¯»å–å¿«ç…§æ–‡ä»¶ï¼Œæ¢å¤æ•°æ®ã€‚Redisåœæœºæ—¶ä¼šæ‰§è¡Œä¸€æ¬¡RDBã€‚</p>
<h5 id="è¿‡ç¨‹">2. è¿‡ç¨‹</h5>
<p>bgsaveå¼€å§‹æ—¶ä¼šforkä¸»è¿›ç¨‹å¾—åˆ°å­è¿›ç¨‹ï¼Œå­è¿›ç¨‹å…±äº«ä¸»è¿›ç¨‹çš„å†…å­˜æ•°æ®ã€‚å®Œæˆforkåè¯»å–å†…å­˜æ•°æ®å¹¶å†™å…¥
RDB æ–‡ä»¶ã€‚ forké‡‡ç”¨çš„æ˜¯copy-on-writeæŠ€æœ¯ï¼š</p>
<ul>
<li>å½“ä¸»è¿›ç¨‹æ‰§è¡Œè¯»æ“ä½œæ—¶ï¼Œè®¿é—®å…±äº«å†…å­˜ï¼›</li>
<li>å½“ä¸»è¿›ç¨‹æ‰§è¡Œå†™æ“ä½œæ—¶ï¼Œåˆ™ä¼šæ‹·è´ä¸€ä»½æ•°æ®ï¼Œæ‰§è¡Œå†™æ“ä½œã€‚</li>
</ul>
<h4 id="äºŒaofæŒä¹…åŒ–">ï¼ˆäºŒï¼‰AOFæŒä¹…åŒ–</h4>
<h5 id="æ¦‚å¿µ-4">1. æ¦‚å¿µ</h5>
<p>AOFå…¨ç§°ä¸ºAppend Only
Fileï¼ˆè¿½åŠ æ–‡ä»¶ï¼‰ã€‚Rediså¤„ç†çš„æ¯ä¸€ä¸ªå†™å‘½ä»¤éƒ½ä¼šè®°å½•åœ¨AOFæ–‡ä»¶ï¼Œå¯ä»¥çœ‹åšæ˜¯å‘½ä»¤æ—¥å¿—æ–‡ä»¶ã€‚</p>
<h5 id="è¿‡ç¨‹-1">2. è¿‡ç¨‹</h5>
<p>å…¶å®å°±æ˜¯ä¸€ä¸ªæ‰§è¡Œæ—¥å¿—æ–‡ä»¶ï¼Œæ¯æ¬¡è¿›è¡Œæ“ä½œéƒ½å†™å…¥æ—¥å¿—ä¸­ã€‚</p>
<h3 id="redisä¸»ä»">8. Redisä¸»ä»</h3>
<h4 id="ä¸€æ•°æ®åŒæ­¥">ï¼ˆä¸€ï¼‰æ•°æ®åŒæ­¥</h4>
<h5 id="å…¨é‡åŒæ­¥">1. å…¨é‡åŒæ­¥</h5>
<ul>
<li>slaveèŠ‚ç‚¹è¯·æ±‚å¢é‡åŒæ­¥</li>
<li>masterèŠ‚ç‚¹åˆ¤æ–­replidï¼Œå‘ç°ä¸ä¸€è‡´ï¼Œæ‹’ç»å¢é‡åŒæ­¥</li>
<li>masterå°†å®Œæ•´å†…å­˜æ•°æ®ç”ŸæˆRDBï¼Œå‘é€RDBåˆ°slave</li>
<li>slaveæ¸…ç©ºæœ¬åœ°æ•°æ®ï¼ŒåŠ è½½masterçš„RDB</li>
<li>masterå°†RDBæœŸé—´çš„å‘½ä»¤è®°å½•åœ¨repl_baklogï¼Œå¹¶æŒç»­å°†logä¸­çš„å‘½ä»¤å‘é€ç»™slave</li>
<li>slaveæ‰§è¡Œæ¥æ”¶åˆ°çš„å‘½ä»¤ï¼Œä¿æŒä¸masterä¹‹é—´çš„åŒæ­¥</li>
</ul>
<p><img src="https://ych-blog.oss-cn-guangzhou.aliyuncs.com/20250104163740.png" style="zoom: 33%;" /></p>
<h5 id="å¢é‡åŒæ­¥">2. å¢é‡åŒæ­¥</h5>
<h2 id="javaæ€§èƒ½ä¼˜åŒ–">Javaæ€§èƒ½ä¼˜åŒ–</h2>
<h2 id="transactional-æ³¨è§£å¤±æ•ˆ"><span class="citation"
data-cites="Transactional">@Transactional</span> æ³¨è§£å¤±æ•ˆ</h2>
]]></content>
      <tags>
        <tag>åç«¯é¢è¯•</tag>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>ç”Ÿæ´»å¿ƒå¾—</title>
    <url>/2024/12/17/Life/%E7%94%9F%E6%B4%BB%E5%BF%83%E5%BE%97/</url>
    <content><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">
  <script id="hbeData" type="hbeData" data-hmacdigest="39a3e91f4c5d7c1cb6483996f53257fe2795255f840c0cc7179afd0fb8315f2c">1f6bb8509d126916afe1b073331b8b3022b18b79a6847b5197580c9561aefcdb7ef0d420fd891ef5503bc83738620ef4a03ae5124c312909ce9f60dd3706ecabbc0cd5634cd8567a22be1e022bf0beac66afc389469082db29e3c78737e66c4869d462d61098a196d97f1fb073e9db885418219d96e4bc9e2f913f689beea7090dea7ab83fc87afe9d2ff383fe1e248dbbaf05ac0c1ec0500b944ded297209fe18aff9a11d46d9a4fc6ab496725c433095de62d152a9162636a045a2cdc03161295105e4916ee87e6cc7b11d01b9e3abe31b4547d444f892500e8ec573e8f69aa16e5b86d4b67b40d4ee4c250366d93855d964061885b29695c54d19dd8071a224b942c7c980457c01d379b1a8dddf4a5958e7751778e79b5630b8b05b918843</script>
  <div class="hbe hbe-content">
    <div class="hbe hbe-input hbe-input-default">
      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">
      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">
        <span class="hbe hbe-input-label-content hbe-input-label-content-default">Hey, password is required here.</span>
      </label>
    </div>
  </div>
</div>
<script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      <categories>
        <category>ç”Ÿæ´»</category>
      </categories>
      <tags>
        <tag>ç”Ÿæ´»</tag>
      </tags>
  </entry>
  <entry>
    <title>AcwingåŸºç¡€ç®—æ³•æ¿å­</title>
    <url>/2024/12/14/Algorithm/Acwing%E5%9F%BA%E7%A1%80%E7%AE%97%E6%B3%95%E6%9D%BF%E5%AD%90/</url>
    <content><![CDATA[<h1 id="ç¬¬ä¸€è®²-åŸºç¡€ç®—æ³•">ç¬¬ä¸€è®² åŸºç¡€ç®—æ³•</h1>
<h2 id="å¿«é€Ÿæ’åº">1. å¿«é€Ÿæ’åº</h2>
<h3 id="å¿«é€Ÿæ’åº-1">1.1 <a
href="https://www.acwing.com/problem/content/787/">å¿«é€Ÿæ’åº</a></h3>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1e5</span> + <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> arr[N], n;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">quickSort</span><span class="params">(<span class="type">int</span> arr[], <span class="type">int</span> l, <span class="type">int</span> r)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (l &gt;= r)<span class="keyword">return</span>;</span><br><span class="line">	<span class="type">int</span> i = l - <span class="number">1</span>, j = r + <span class="number">1</span>, base = arr[l + r &gt;&gt; <span class="number">1</span>];</span><br><span class="line">	<span class="keyword">while</span> (i &lt; j) &#123;</span><br><span class="line">		<span class="keyword">do</span> ++i; <span class="keyword">while</span> (arr[i] &lt; base);</span><br><span class="line">		<span class="keyword">do</span> --j; <span class="keyword">while</span> (arr[j] &gt; base);</span><br><span class="line">		<span class="keyword">if</span> (i &lt; j) <span class="built_in">swap</span>(arr[i], arr[j]);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">quickSort</span>(arr, l, j);</span><br><span class="line">	<span class="built_in">quickSort</span>(arr, j + <span class="number">1</span>, r);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;arr[i]);</span><br><span class="line">	<span class="built_in">quickSort</span>(arr, <span class="number">0</span>, n - <span class="number">1</span>);</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, arr[i]);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ç¬¬kä¸ªæ•°">1.2 <a
href="https://www.acwing.com/problem/content/788/">ç¬¬Kä¸ªæ•°</a></h3>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1e5</span> + <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> arr[N], n, k;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">quickSort</span><span class="params">(<span class="type">int</span> arr[], <span class="type">int</span> l, <span class="type">int</span> r, <span class="type">int</span> k)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (l == r) <span class="keyword">return</span> arr[l];</span><br><span class="line">	<span class="type">int</span> i = l - <span class="number">1</span>, j = r + <span class="number">1</span>, base = arr[l + r &gt;&gt; <span class="number">1</span>];</span><br><span class="line">	<span class="keyword">while</span> (i &lt; j) &#123;</span><br><span class="line">		<span class="keyword">do</span> ++i; <span class="keyword">while</span> (arr[i] &lt; base);</span><br><span class="line">		<span class="keyword">do</span> --j; <span class="keyword">while</span> (arr[j] &gt; base);</span><br><span class="line">		<span class="keyword">if</span> (i &lt; j) <span class="built_in">swap</span>(arr[i], arr[j]);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>(k &lt;= j) <span class="keyword">return</span> <span class="built_in">quickSort</span>(arr, l, j, k);</span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">return</span> <span class="built_in">quickSort</span>(arr, j + <span class="number">1</span>, r, k);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>, &amp;n, &amp;k);</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;arr[i]);</span><br><span class="line">	<span class="type">int</span> res = <span class="built_in">quickSort</span>(arr, <span class="number">0</span>, n - <span class="number">1</span>, k - <span class="number">1</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, res);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="å½’å¹¶æ’åº">2.å½’å¹¶æ’åº</h2>
<h3 id="å½’å¹¶æ’åº-1">2.1 <a
href="https://www.acwing.com/problem/content/789/">å½’å¹¶æ’åº</a></h3>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1e5</span> + <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> arr[N], n, temp[N];</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">mergeSort</span><span class="params">(<span class="type">int</span> arr[], <span class="type">int</span> l, <span class="type">int</span> r)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(l &gt;= r) <span class="keyword">return</span>;</span><br><span class="line">	<span class="type">int</span> mid = l + (r - l) / <span class="number">2</span>;</span><br><span class="line">	<span class="built_in">mergeSort</span>(arr, l, mid);</span><br><span class="line">	<span class="built_in">mergeSort</span>(arr, mid + <span class="number">1</span>, r);</span><br><span class="line">	<span class="type">int</span> i = l, j = mid<span class="number">+1</span>, k = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span> (i &lt;= mid &amp;&amp; j &lt;= r) &#123;</span><br><span class="line">		<span class="keyword">if</span> (arr[i] &lt; arr[j]) temp[k++] = arr[i++];</span><br><span class="line">		<span class="keyword">else</span> temp[k++] = arr[j++];</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">while</span> (i &lt;= mid) temp[k++] = arr[i++];</span><br><span class="line">	<span class="keyword">while</span> (j &lt;= r) temp[k++] = arr[j++];</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> t = l, m = <span class="number">0</span>; t &lt;= r; ++t, ++m) arr[t] = temp[m];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;arr[i]);</span><br><span class="line">	<span class="built_in">mergeSort</span>(arr, <span class="number">0</span>, n - <span class="number">1</span>);</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, arr[i]);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="é€†åºå¯¹çš„æ•°é‡">2.1 <a
href="https://www.acwing.com/problem/content/790/">é€†åºå¯¹çš„æ•°é‡</a></h3>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1e5</span> + <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> arr[N], n, temp[N];</span><br><span class="line">ll res;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">mergeSort</span><span class="params">(<span class="type">int</span> arr[], <span class="type">int</span> l, <span class="type">int</span> r)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (l &gt;= r)<span class="keyword">return</span>;</span><br><span class="line">	<span class="type">int</span> mid = l + (r - l) / <span class="number">2</span>;</span><br><span class="line">	<span class="built_in">mergeSort</span>(arr, l, mid);</span><br><span class="line">	<span class="built_in">mergeSort</span>(arr, mid + <span class="number">1</span>, r);</span><br><span class="line">	<span class="type">int</span> i = l, j = mid + <span class="number">1</span>, k = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span> (i &lt;= mid &amp;&amp; j &lt;= r) &#123;</span><br><span class="line">		<span class="keyword">if</span> (arr[i] &lt;= arr[j]) temp[k++] = arr[i++];</span><br><span class="line">		<span class="keyword">else</span> &#123;</span><br><span class="line">			res += mid - i + <span class="number">1</span>;</span><br><span class="line">			temp[k++] = arr[j++];</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">while</span> (i &lt;= mid) temp[k++] = arr[i++];</span><br><span class="line">	<span class="keyword">while</span> (j &lt;= r) temp[k++] = arr[j++];</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> t = l, m = <span class="number">0</span>; t &lt;= r; ++t, ++m) arr[t] = temp[m];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;arr[i]);</span><br><span class="line">	<span class="built_in">mergeSort</span>(arr, <span class="number">0</span>, n - <span class="number">1</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>, res);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="äºŒåˆ†">3. äºŒåˆ†</h2>
<h3 id="æ•°çš„èŒƒå›´">3.1 <a
href="https://www.acwing.com/problem/content/791/">æ•°çš„èŒƒå›´</a></h3>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1e5</span> + <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> arr[N], n, q, num;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>, &amp;n, &amp;q);</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;arr[i]);</span><br><span class="line">	<span class="keyword">while</span> (q--) &#123;</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;num);</span><br><span class="line">		<span class="type">int</span> l = <span class="number">0</span>, r = n - <span class="number">1</span>;</span><br><span class="line">		<span class="keyword">while</span> (l &lt; r) &#123;</span><br><span class="line">			<span class="type">int</span> mid = l + r &gt;&gt; <span class="number">1</span>;</span><br><span class="line">			<span class="keyword">if</span> (arr[mid] &gt;= num) r = mid;</span><br><span class="line">			<span class="keyword">else</span> l = mid + <span class="number">1</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span> (num != arr[l]) &#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;%d %d\n&quot;</span>, <span class="number">-1</span>, <span class="number">-1</span>);</span><br><span class="line">			<span class="keyword">continue</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, l);</span><br><span class="line">		l = <span class="number">0</span>;   r = n - <span class="number">1</span>;</span><br><span class="line">		<span class="keyword">while</span> (l &lt; r) &#123;</span><br><span class="line">			<span class="type">int</span> mid = l + r + <span class="number">1</span> &gt;&gt; <span class="number">1</span>;</span><br><span class="line">			<span class="keyword">if</span> (arr[mid] &lt;= num) l = mid;</span><br><span class="line">			<span class="keyword">else</span> r = mid - <span class="number">1</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, l);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æ•°çš„ä¸‰æ¬¡æ–¹æ ¹">3.2 <a
href="https://www.acwing.com/problem/content/792/">æ•°çš„ä¸‰æ¬¡æ–¹æ ¹</a></h3>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="type">double</span> n = <span class="number">0</span>;</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%lf&quot;</span>, &amp;n);</span><br><span class="line">	<span class="type">double</span> l = <span class="number">-100000</span>, r = <span class="number">100000</span>;</span><br><span class="line">	<span class="keyword">while</span> (r-l&gt;<span class="number">1e-8</span>)&#123;</span><br><span class="line">		<span class="type">double</span> num = l + (r - l) / <span class="number">2</span>;</span><br><span class="line">		<span class="keyword">if</span> (num * num * num &gt; n) r = num;</span><br><span class="line">		<span class="keyword">else</span> l = num;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%.6lf\n&quot;</span>, l);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="é«˜ç²¾åº¦">4.é«˜ç²¾åº¦</h2>
<h3 id="é«˜ç²¾åº¦åŠ æ³•">4.1 <a
href="https://www.acwing.com/problem/content/793/">é«˜ç²¾åº¦åŠ æ³•</a></h3>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1e6</span> + <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> A[N], B[N], C[N];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">add</span><span class="params">(<span class="type">int</span> cnt)</span> </span>&#123;</span><br><span class="line">	<span class="type">int</span> t = <span class="number">0</span>, len = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= cnt; ++i) &#123;</span><br><span class="line">		t += A[i] + B[i];</span><br><span class="line">		C[++len] = t % <span class="number">10</span>;</span><br><span class="line">		t /= <span class="number">10</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> (t) C[++len] = <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">return</span> len;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	string a, b;</span><br><span class="line">	cin &gt;&gt; a &gt;&gt; b;</span><br><span class="line">	<span class="type">int</span> cnt1 = <span class="number">0</span>, cnt2 = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = a.<span class="built_in">size</span>() - <span class="number">1</span>; i &gt;= <span class="number">0</span>; --i)A[++cnt1] = a[i] - <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = b.<span class="built_in">size</span>() - <span class="number">1</span>; i &gt;= <span class="number">0</span>; --i)B[++cnt2] = b[i] - <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">	<span class="type">int</span> len = <span class="built_in">add</span>(<span class="built_in">max</span>(cnt1, cnt2));</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = len; i &gt;= <span class="number">1</span>; --i)cout &lt;&lt; C[i];</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="é«˜ç²¾åº¦å‡æ³•">4.2 <a
href="https://www.acwing.com/problem/content/794/">é«˜ç²¾åº¦å‡æ³•</a></h3>
<p>å¾…è¡¥å……~~~ ### 4.3 <a
href="https://www.acwing.com/problem/content/795/">é«˜ç²¾åº¦ä¹˜æ³•</a>
å¾…è¡¥å……~~~ ### 4.4 <a
href="https://www.acwing.com/problem/content/796/">é«˜ç²¾åº¦é™¤æ³•</a>
å¾…è¡¥å……~~~</p>
<h2 id="å‰ç¼€å’Œä¸å·®åˆ†">5. å‰ç¼€å’Œä¸å·®åˆ†</h2>
<h3 id="å‰ç¼€å’Œ">5.1 <a
href="https://www.acwing.com/problem/content/797/">å‰ç¼€å’Œ</a></h3>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1e5</span> + <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> arr[N], n, q;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>, &amp;n, &amp;q);</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;arr[i]);     arr[i] += arr[i - <span class="number">1</span>];</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="type">int</span> l = <span class="number">0</span>, r = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span> (q--) &#123;</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>, &amp;l, &amp;r);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, arr[r] - arr[l - <span class="number">1</span>]);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="å­çŸ©é˜µçš„å’Œ">5.2 <a
href="https://www.acwing.com/problem/content/798/">å­çŸ©é˜µçš„å’Œ</a></h3>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1e3</span> + <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> arr[N][N], n, m, q;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d %d %d&quot;</span>, &amp;n, &amp;m, &amp;q);</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">		<span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt;= m; ++j) &#123;</span><br><span class="line">			<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;arr[i][j]);</span><br><span class="line">			arr[i][j] = arr[i][j] + arr[i - <span class="number">1</span>][j] + arr[i][j - <span class="number">1</span>] - arr[i - <span class="number">1</span>][j - <span class="number">1</span>];</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="type">int</span> x1, y1, x2, y2;</span><br><span class="line">	<span class="keyword">while</span> (q--) &#123;</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%d %d %d %d&quot;</span>, &amp;x1, &amp;y1, &amp;x2, &amp;y2);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, arr[x2][y2] - arr[x1 - <span class="number">1</span>][y2] - arr[x2][y1 - <span class="number">1</span>] + arr[x1 - <span class="number">1</span>][y1 - <span class="number">1</span>]);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="å·®åˆ†">5.3 <a
href="https://www.acwing.com/problem/content/799/">å·®åˆ†</a></h3>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1e5</span> + <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> arr[N], n, m, num;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">(<span class="type">int</span> l, <span class="type">int</span> r, <span class="type">int</span> c)</span> </span>&#123;</span><br><span class="line">	arr[l] += c;</span><br><span class="line">	arr[r + <span class="number">1</span>] -= c;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>, &amp;n, &amp;m);</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;num);   <span class="built_in">add</span>(i, i, num);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="type">int</span> a, b, c;</span><br><span class="line">	<span class="keyword">while</span> (m--) &#123;</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%d %d %d&quot;</span>, &amp;a, &amp;b, &amp;c);</span><br><span class="line">		<span class="built_in">add</span>(a, b, c);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">		arr[i] += arr[i - <span class="number">1</span>];</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, arr[i]);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="å·®åˆ†çŸ©é˜µ">5.4 <a
href="https://www.acwing.com/problem/content/description/800/">å·®åˆ†çŸ©é˜µ</a></h3>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1e3</span> + <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> arr[N][N], n, m, q;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">(<span class="type">int</span> x1, <span class="type">int</span> y1, <span class="type">int</span> x2, <span class="type">int</span> y2,<span class="type">int</span> c)</span> </span>&#123;</span><br><span class="line">	arr[x1][y1] += c;</span><br><span class="line">	arr[x2 + <span class="number">1</span>][y1] -= c;</span><br><span class="line">	arr[x1][y2 + <span class="number">1</span>] -= c;</span><br><span class="line">	arr[x2 + <span class="number">1</span>][y2 + <span class="number">1</span>] += c;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="type">int</span> num, x1, y1, x2, y2;</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d %d %d&quot;</span>, &amp;n, &amp;m, &amp;q);</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">		<span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt;= m; ++j) &#123;</span><br><span class="line">			<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;num);</span><br><span class="line">			<span class="built_in">add</span>(i, j, i, j, num);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">while</span> (q--) &#123;</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%d %d %d %d %d&quot;</span>, &amp;x1, &amp;y1, &amp;x2, &amp;y2, &amp;num);</span><br><span class="line">		<span class="built_in">add</span>(x1, y1, x2, y2, num);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">		<span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt;= m; ++j) &#123;</span><br><span class="line">			arr[i][j] = arr[i][j] + arr[i - <span class="number">1</span>][j] + arr[i][j - <span class="number">1</span>] - arr[i - <span class="number">1</span>][j - <span class="number">1</span>];</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, arr[i][j]);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">puts</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="åŒæŒ‡é’ˆç®—æ³•">6. åŒæŒ‡é’ˆç®—æ³•</h2>
<h3 id="æœ€é•¿è¿ç»­ä¸é‡å¤å­åºåˆ—">6.1 <a
href="https://www.acwing.com/problem/content/801/">æœ€é•¿è¿ç»­ä¸é‡å¤å­åºåˆ—</a></h3>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1e5</span> + <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> arr[N], n, s[N], res = <span class="number">0</span>;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>, j = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;arr[i]);</span><br><span class="line">		s[arr[i]]++;</span><br><span class="line">		<span class="keyword">while</span> (s[arr[i]] &gt; <span class="number">1</span>) &#123;</span><br><span class="line">			s[arr[j]]--;</span><br><span class="line">			j++;</span><br><span class="line">		&#125;</span><br><span class="line">		res = <span class="built_in">max</span>(res, i - j + <span class="number">1</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, res);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æ•°ç»„å…ƒç´ çš„ç›®æ ‡å’Œ">6.2 <a
href="https://www.acwing.com/problem/content/802/">æ•°ç»„å…ƒç´ çš„ç›®æ ‡å’Œ</a></h3>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1e5</span> + <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> n, m, x, A[N], B[N];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d %d %d&quot;</span>, &amp;n, &amp;m, &amp;x);</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;A[i]);</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; m; ++j) <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;B[j]);</span><br><span class="line">	<span class="type">int</span> i = <span class="number">0</span>, j = m - <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">while</span> (i &lt; n &amp;&amp; j &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">		<span class="keyword">if</span> (A[i] + B[j] == x) &#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;%d %d\n&quot;</span>, i, j);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span> (A[i] + B[j] &gt; x) j--;</span><br><span class="line">		<span class="keyword">else</span> i++;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="åˆ¤æ–­å­åºåˆ—">6.3 <a
href="https://www.acwing.com/problem/content/2818/">åˆ¤æ–­å­åºåˆ—</a></h3>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1e5</span> + <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> n, m, A[N], B[N];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>, &amp;n, &amp;m);</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;A[i]);</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; m; ++j) <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;B[j]);</span><br><span class="line">	<span class="type">int</span> i = <span class="number">0</span>, j = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span> (i &lt; n &amp;&amp; j &lt; m) &#123;</span><br><span class="line">		<span class="keyword">if</span> (A[i] == B[j]) ++i;</span><br><span class="line">		++j;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> (i == n) <span class="built_in">puts</span>(<span class="string">&quot;Yes&quot;</span>);</span><br><span class="line">	<span class="keyword">else</span> <span class="built_in">puts</span>(<span class="string">&quot;No&quot;</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="ä½è¿ç®—">7. ä½è¿ç®—</h2>
<h3 id="äºŒè¿›åˆ¶ä¸­1çš„ä¸ªæ•°">7.1 äºŒè¿›åˆ¶ä¸­1çš„ä¸ªæ•°</h3>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">getNumber</span><span class="params">(<span class="type">int</span> num)</span> </span>&#123;</span><br><span class="line">	<span class="type">int</span> res = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span> (num) &#123;</span><br><span class="line">		<span class="keyword">if</span> (num &amp; <span class="number">1</span>) res++;</span><br><span class="line">		num &gt;&gt;= <span class="number">1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="type">int</span> n, num;</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;num);</span><br><span class="line">		<span class="type">int</span> ans = <span class="built_in">getNumber</span>(num);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, ans);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="ç¦»æ•£åŒ–">8.ç¦»æ•£åŒ–</h2>
<h3 id="åŒºé—´å’Œ">8.1 <a
href="https://www.acwing.com/problem/content/804/">åŒºé—´å’Œ</a></h3>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">300010</span>;</span><br><span class="line"><span class="type">int</span> a[N],n,m,s[N];</span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="type">int</span>,<span class="type">int</span>&gt;PII;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt;alls;</span><br><span class="line">vector&lt;PII&gt;add,query;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">find</span><span class="params">(<span class="type">int</span> x)</span></span>&#123;</span><br><span class="line">    <span class="type">int</span> l = <span class="number">0</span>,r = alls.<span class="built_in">size</span>()<span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">while</span>(l&lt;r)&#123;</span><br><span class="line">        <span class="type">int</span> mid = (l+r) &gt;&gt;<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(alls[mid]&gt;=x)r = mid;</span><br><span class="line">        <span class="keyword">else</span> l = mid<span class="number">+1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> r<span class="number">+1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin&gt;&gt;n&gt;&gt;m;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>;i&lt;n;++i)&#123;</span><br><span class="line">        <span class="type">int</span> x,c;</span><br><span class="line">        cin&gt;&gt;x&gt;&gt;c;</span><br><span class="line">        alls.<span class="built_in">push_back</span>(x);</span><br><span class="line">        add.<span class="built_in">push_back</span>(&#123;x,c&#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i =<span class="number">0</span>;i&lt;m;++i)&#123;</span><br><span class="line">        <span class="type">int</span> l,r;</span><br><span class="line">        cin&gt;&gt;l&gt;&gt;r;</span><br><span class="line">        query.<span class="built_in">push_back</span>(&#123;l,r&#125;);</span><br><span class="line">        alls.<span class="built_in">push_back</span>(l);</span><br><span class="line">        alls.<span class="built_in">push_back</span>(r);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">sort</span>(alls.<span class="built_in">begin</span>(),alls.<span class="built_in">end</span>());</span><br><span class="line">    alls.<span class="built_in">erase</span>(<span class="built_in">unique</span>(alls.<span class="built_in">begin</span>(),alls.<span class="built_in">end</span>()),alls.<span class="built_in">end</span>());</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> item:add)&#123;</span><br><span class="line">        <span class="type">int</span> x = <span class="built_in">find</span>(item.first);</span><br><span class="line">        a[x] += item.second;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>;i&lt;=alls.<span class="built_in">size</span>();++i)s[i] = s[i<span class="number">-1</span>]+a[i];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> item:query)&#123;</span><br><span class="line">        <span class="type">int</span> l = <span class="built_in">find</span>(item.first);</span><br><span class="line">        <span class="type">int</span> r = <span class="built_in">find</span>(item.second);</span><br><span class="line">        cout&lt;&lt;s[r]-s[l<span class="number">-1</span>]&lt;&lt;<span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="åŒºé—´åˆå¹¶">9.åŒºé—´åˆå¹¶</h2>
<h3 id="åŒºé—´åˆå¹¶-1">9.1 <a
href="https://www.acwing.com/problem/content/805/">åŒºé—´åˆå¹¶</a></h3>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">100010</span>;</span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="type">int</span>, <span class="type">int</span>&gt;PII;</span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line">vector&lt;PII&gt;segs;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">merge</span><span class="params">(vector&lt;PII&gt;&amp; segs)</span> </span>&#123;</span><br><span class="line">	vector&lt;PII&gt;res;</span><br><span class="line">	<span class="built_in">sort</span>(segs.<span class="built_in">begin</span>(), segs.<span class="built_in">end</span>());</span><br><span class="line">	<span class="type">int</span> st = <span class="number">-2e9</span>, ed = <span class="number">-2e9</span>;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">auto</span> item : segs) &#123;</span><br><span class="line">		<span class="keyword">if</span> (ed &lt; item.first) &#123;</span><br><span class="line">			<span class="keyword">if</span> (st != <span class="number">-2e9</span>)res.<span class="built_in">push_back</span>(&#123; st,ed &#125;);</span><br><span class="line">			st = item.first;   ed = item.second;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> ed = <span class="built_in">max</span>(ed, item.second);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> (st != <span class="number">-2e9</span>)res.<span class="built_in">push_back</span>(&#123; st,ed &#125;);</span><br><span class="line">	segs = res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cin &gt;&gt; n;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">		<span class="type">int</span> l, r;</span><br><span class="line">		cin &gt;&gt; l &gt;&gt; r;</span><br><span class="line">		segs.<span class="built_in">push_back</span>(&#123; l,r &#125;);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">merge</span>(segs);</span><br><span class="line">	cout &lt;&lt; segs.<span class="built_in">size</span>() &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><br></p>
<h1 id="ç¬¬äºŒè®²-æ•°æ®ç»“æ„">ç¬¬äºŒè®² æ•°æ®ç»“æ„</h1>
<h2 id="å•é“¾è¡¨">1. å•é“¾è¡¨</h2>
<h3 id="å•é“¾è¡¨-1">1.1 <a
href="https://www.acwing.com/problem/content/828/">å•é“¾è¡¨</a></h3>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1e5</span> + <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> e[N], h = <span class="number">-1</span>, ne[N], idx = <span class="number">0</span>, m;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">headInsert</span><span class="params">(<span class="type">int</span> x)</span> </span>&#123;</span><br><span class="line">	e[idx] = x;</span><br><span class="line">	ne[idx] = h;</span><br><span class="line">	h = idx++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">deleteNum</span><span class="params">(<span class="type">int</span> k)</span> </span>&#123;</span><br><span class="line">	ne[k - <span class="number">1</span>] = ne[ne[k - <span class="number">1</span>]];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">addk</span><span class="params">(<span class="type">int</span> k, <span class="type">int</span> num)</span> </span>&#123;</span><br><span class="line">	e[idx] = num;  ne[idx] = ne[k - <span class="number">1</span>];</span><br><span class="line">	ne[k - <span class="number">1</span>] = idx++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cin &gt;&gt; m;</span><br><span class="line">	string op;</span><br><span class="line">	<span class="type">int</span> x, k;</span><br><span class="line">	<span class="keyword">while</span> (m--) &#123;</span><br><span class="line">		cin &gt;&gt; op;</span><br><span class="line">		<span class="keyword">if</span> (op == <span class="string">&quot;H&quot;</span>) &#123;</span><br><span class="line">			cin &gt;&gt; x;</span><br><span class="line">			<span class="built_in">headInsert</span>(x);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span>(op==<span class="string">&quot;D&quot;</span>) &#123;</span><br><span class="line">			cin &gt;&gt; k;</span><br><span class="line">			<span class="keyword">if</span> (k == <span class="number">0</span>) h = ne[h];</span><br><span class="line">			<span class="keyword">else</span> <span class="built_in">deleteNum</span>(k);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> &#123;</span><br><span class="line">			cin &gt;&gt; k &gt;&gt; x;</span><br><span class="line">			<span class="built_in">addk</span>(k, x);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = h; i != <span class="number">-1</span>; i = ne[i]) cout &lt;&lt; e[i] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="åŒé“¾è¡¨">2.åŒé“¾è¡¨</h2>
<h3 id="åŒé“¾è¡¨-1">2.1 <a
href="https://www.acwing.com/problem/content/829/">åŒé“¾è¡¨</a></h3>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1e5</span> + <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> l[N], r[N], e[N], idx;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Inite</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	idx = <span class="number">2</span>;</span><br><span class="line">	l[<span class="number">1</span>] = <span class="number">0</span>;</span><br><span class="line">	r[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Insert_right</span><span class="params">(<span class="type">int</span> k,<span class="type">int</span> x)</span> </span>&#123;</span><br><span class="line">	e[idx] = x;</span><br><span class="line">	r[idx] = r[k];</span><br><span class="line">	l[idx] = k;</span><br><span class="line">	l[r[k]] = idx;</span><br><span class="line">	r[k] = idx++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">remove</span><span class="params">(<span class="type">int</span> k)</span> </span>&#123;</span><br><span class="line">	r[l[k]] = r[k];</span><br><span class="line">	l[r[k]] = l[k];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">Inite</span>();</span><br><span class="line">	string op;</span><br><span class="line">	<span class="type">int</span> m, k, x;</span><br><span class="line">	cin &gt;&gt; m;</span><br><span class="line">	<span class="keyword">while</span> (m--) &#123;</span><br><span class="line">		cin &gt;&gt; op;</span><br><span class="line">		<span class="keyword">if</span> (op == <span class="string">&quot;L&quot;</span>) &#123;</span><br><span class="line">			cin &gt;&gt; x;</span><br><span class="line">			<span class="built_in">Insert_right</span>(<span class="number">0</span>, x);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (op == <span class="string">&quot;R&quot;</span>) &#123;</span><br><span class="line">			cin &gt;&gt; x;</span><br><span class="line">			<span class="built_in">Insert_right</span>(l[<span class="number">1</span>], x);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (op == <span class="string">&quot;D&quot;</span>) &#123;</span><br><span class="line">			cin &gt;&gt; k;</span><br><span class="line">			<span class="built_in">remove</span>(k<span class="number">+1</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (op==<span class="string">&quot;IL&quot;</span>) &#123;</span><br><span class="line">			cin &gt;&gt; k &gt;&gt; x;</span><br><span class="line">			<span class="built_in">Insert_right</span>(l[k<span class="number">+1</span>], x);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (op == <span class="string">&quot;IR&quot;</span>) &#123;</span><br><span class="line">			cin &gt;&gt; k &gt;&gt; x;</span><br><span class="line">			<span class="built_in">Insert_right</span>(k<span class="number">+1</span>, x);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = r[<span class="number">0</span>]; i != <span class="number">1</span>; i = r[i]) cout &lt;&lt; e[i] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="æ ˆ">3. æ ˆ</h2>
<h3 id="æ¨¡æ‹Ÿæ ˆ">3.1 <a
href="https://www.acwing.com/problem/content/830/">æ¨¡æ‹Ÿæ ˆ</a></h3>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1e5</span> + <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> arr[N], hh = <span class="number">0</span>, tt = <span class="number">-1</span>;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">isEmpty</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> tt &lt; hh;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">push</span><span class="params">(<span class="type">int</span> num)</span> </span>&#123;</span><br><span class="line">	arr[++tt] = num;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">pop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (<span class="built_in">isEmpty</span>()) <span class="keyword">return</span>;</span><br><span class="line">	tt--;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="type">int</span> m, num;</span><br><span class="line">	cin &gt;&gt; m;</span><br><span class="line">	string op;</span><br><span class="line">	<span class="keyword">while</span> (m--) &#123;</span><br><span class="line">		cin &gt;&gt; op;</span><br><span class="line">		<span class="keyword">if</span> (op == <span class="string">&quot;push&quot;</span>) &#123;</span><br><span class="line">			cin &gt;&gt; num;</span><br><span class="line">			<span class="built_in">push</span>(num);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (op == <span class="string">&quot;pop&quot;</span>) &#123;</span><br><span class="line">			<span class="built_in">pop</span>();</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span>(op==<span class="string">&quot;empty&quot;</span>) &#123;</span><br><span class="line">			<span class="keyword">if</span> (<span class="built_in">isEmpty</span>()) cout &lt;&lt; <span class="string">&quot;YES\n&quot;</span>;</span><br><span class="line">			<span class="keyword">else</span> cout &lt;&lt; <span class="string">&quot;NO\n&quot;</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> &#123;</span><br><span class="line">			cout &lt;&lt; arr[tt] &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="è¡¨è¾¾å¼æ±‚å€¼">3.2 <a
href="https://www.acwing.com/problem/content/3305/">è¡¨è¾¾å¼æ±‚å€¼</a></h3>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;unordered_map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line">stack&lt;<span class="type">char</span>&gt;op;</span><br><span class="line">stack&lt;<span class="type">int</span>&gt;num;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">eval</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="type">int</span> a = num.<span class="built_in">top</span>();  num.<span class="built_in">pop</span>();</span><br><span class="line">	<span class="type">int</span> b = num.<span class="built_in">top</span>();  num.<span class="built_in">pop</span>();</span><br><span class="line">	<span class="type">char</span> c = op.<span class="built_in">top</span>();   op.<span class="built_in">pop</span>();</span><br><span class="line">	<span class="keyword">if</span> (c == <span class="string">&#x27;+&#x27;</span>)num.<span class="built_in">push</span>(a + b);</span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">if</span> (c == <span class="string">&#x27;-&#x27;</span>)num.<span class="built_in">push</span>(b - a);</span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">if</span> (c == <span class="string">&#x27;*&#x27;</span>)num.<span class="built_in">push</span>(b * a);</span><br><span class="line">	<span class="keyword">else</span> num.<span class="built_in">push</span>(b / a);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	unordered_map&lt;<span class="type">char</span>, <span class="type">int</span>&gt; pr&#123; &#123;<span class="string">&#x27;+&#x27;</span>,<span class="number">1</span>&#125;,&#123;<span class="string">&#x27;-&#x27;</span>,<span class="number">1</span>&#125;,&#123;<span class="string">&#x27;*&#x27;</span>,<span class="number">2</span>&#125;,&#123;<span class="string">&#x27;/&#x27;</span>,<span class="number">2</span>&#125; &#125;;</span><br><span class="line">	string str;</span><br><span class="line">	cin &gt;&gt; str;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; str.<span class="built_in">size</span>(); ++i) &#123;</span><br><span class="line">		<span class="keyword">auto</span> c = str[i];</span><br><span class="line">		<span class="keyword">if</span> (<span class="built_in">isdigit</span>(c)) &#123;</span><br><span class="line">			<span class="type">int</span> x = <span class="number">0</span>, j = i;</span><br><span class="line">			<span class="keyword">while</span> (j &lt; str.<span class="built_in">size</span>() &amp;&amp; <span class="built_in">isdigit</span>(str[j])) &#123;</span><br><span class="line">				x = x * <span class="number">10</span> + str[j++] - <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">			&#125;</span><br><span class="line">			i = j - <span class="number">1</span>;</span><br><span class="line">			num.<span class="built_in">push</span>(x);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (c == <span class="string">&#x27;(&#x27;</span>) op.<span class="built_in">push</span>(c);</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (c == <span class="string">&#x27;)&#x27;</span>) &#123;</span><br><span class="line">			<span class="keyword">while</span> (op.<span class="built_in">top</span>() != <span class="string">&#x27;(&#x27;</span>)<span class="built_in">eval</span>();</span><br><span class="line">			op.<span class="built_in">pop</span>();</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="keyword">while</span> (op.<span class="built_in">size</span>() &amp;&amp; pr[op.<span class="built_in">top</span>()] &gt;= pr[c])<span class="built_in">eval</span>();</span><br><span class="line">			op.<span class="built_in">push</span>(c);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">while</span> (op.<span class="built_in">size</span>())<span class="built_in">eval</span>();</span><br><span class="line">	cout &lt;&lt; num.<span class="built_in">top</span>() &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="é˜Ÿåˆ—">4. é˜Ÿåˆ—</h2>
<h3 id="æ¨¡æ‹Ÿé˜Ÿåˆ—">4.1 <a
href="https://www.acwing.com/problem/content/831/">æ¨¡æ‹Ÿé˜Ÿåˆ—</a></h3>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1e5</span> + <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> arr[N], hh = <span class="number">0</span>, tt = <span class="number">-1</span>;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">isEmpty</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> hh &gt; tt;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">push</span><span class="params">(<span class="type">int</span> x)</span> </span>&#123;</span><br><span class="line">	arr[++tt] = x;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">pop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (<span class="built_in">isEmpty</span>()) <span class="keyword">return</span>;</span><br><span class="line">	hh++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="type">int</span> m;</span><br><span class="line">	cin &gt;&gt; m;</span><br><span class="line">	string op;   <span class="type">int</span> x;</span><br><span class="line">	<span class="keyword">while</span> (m--) &#123;</span><br><span class="line">		cin &gt;&gt; op;</span><br><span class="line">		<span class="keyword">if</span> (op == <span class="string">&quot;push&quot;</span>) &#123;</span><br><span class="line">			cin &gt;&gt; x;</span><br><span class="line">			<span class="built_in">push</span>(x);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (op == <span class="string">&quot;pop&quot;</span>) &#123;</span><br><span class="line">			<span class="built_in">pop</span>();</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (op == <span class="string">&quot;empty&quot;</span>) &#123;</span><br><span class="line">			<span class="keyword">if</span> (<span class="built_in">isEmpty</span>()) cout &lt;&lt; <span class="string">&quot;YES\n&quot;</span>;</span><br><span class="line">			<span class="keyword">else</span> cout &lt;&lt; <span class="string">&quot;NO\n&quot;</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> cout &lt;&lt; arr[hh] &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="å•è°ƒæ ˆ">5. å•è°ƒæ ˆ</h2>
<h3 id="å•è°ƒæ ˆ-1">5.1 <a
href="https://www.acwing.com/problem/content/832/">å•è°ƒæ ˆ</a></h3>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1e5</span> + <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> n, st[N], tt = <span class="number">-1</span>, num;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cin &gt;&gt; n;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">		cin &gt;&gt; num;</span><br><span class="line">		<span class="keyword">while</span> (tt &gt;= <span class="number">0</span> &amp;&amp; num &lt;= st[tt]) --tt;</span><br><span class="line">		<span class="keyword">if</span> (tt &gt;= <span class="number">0</span>) cout &lt;&lt; st[tt] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">		<span class="keyword">else</span> cout &lt;&lt; <span class="number">-1</span> &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">		st[++tt] = num;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="å•è°ƒé˜Ÿåˆ—">6. å•è°ƒé˜Ÿåˆ—</h2>
<h3 id="æ»‘åŠ¨çª—å£">6.1 <a
href="https://www.acwing.com/problem/content/156/">æ»‘åŠ¨çª—å£</a></h3>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1e6</span> + <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> arr[N], q[N], n, k, hh = <span class="number">0</span>, tt = <span class="number">-1</span>;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>, &amp;n, &amp;k);</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;arr[i]);</span><br><span class="line">		<span class="keyword">if</span> (hh &lt;= tt &amp;&amp; q[hh] &lt; i - k + <span class="number">1</span>) hh++;</span><br><span class="line">		<span class="keyword">while</span> (hh &lt;= tt &amp;&amp; arr[q[tt]] &gt;= arr[i]) tt--;</span><br><span class="line">		q[++tt] = i;</span><br><span class="line">		<span class="keyword">if</span> (i &gt;= k - <span class="number">1</span>) <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, arr[q[hh]]);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">puts</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line">	hh = <span class="number">0</span>;  tt = <span class="number">-1</span>;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">		<span class="keyword">if</span> (hh &lt;= tt &amp;&amp; q[hh] &lt; i - k + <span class="number">1</span>) hh++;</span><br><span class="line">		<span class="keyword">while</span> (hh &lt;= tt &amp;&amp; arr[q[tt]] &lt;= arr[i]) tt--;</span><br><span class="line">		q[++tt] = i;</span><br><span class="line">		<span class="keyword">if</span> (i &gt;= k - <span class="number">1</span>) <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, arr[q[hh]]);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="kmp">7. KMP</h2>
<h3 id="kmpå­—ç¬¦ä¸²">7.1 <a
href="https://www.acwing.com/problem/content/833/">KMPå­—ç¬¦ä¸²</a></h3>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1e5</span> + <span class="number">10</span>, M = <span class="number">1e6</span> + <span class="number">10</span>;</span><br><span class="line"><span class="type">char</span> p[N], s[M];</span><br><span class="line"><span class="type">int</span> n, m, ne[N];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d %s %d %s&quot;</span>, &amp;n, p + <span class="number">1</span>, &amp;m, s + <span class="number">1</span>);</span><br><span class="line">	<span class="comment">// æ±‚next æ•°ç»„</span></span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">2</span>, j = <span class="number">0</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">		<span class="keyword">while</span> (j &amp;&amp; p[i] != p[j + <span class="number">1</span>]) j = ne[j];</span><br><span class="line">		<span class="keyword">if</span> (p[j + <span class="number">1</span>] == p[i]) j++;</span><br><span class="line">		ne[i] = j;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// KMP</span></span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>, j = <span class="number">0</span>; i &lt;= m; ++i) &#123;</span><br><span class="line">		<span class="keyword">while</span> (j &amp;&amp; s[i] != p[j + <span class="number">1</span>]) j = ne[j];</span><br><span class="line">		<span class="keyword">if</span> (s[i] == p[j + <span class="number">1</span>]) j++;</span><br><span class="line">		<span class="keyword">if</span> (j == n) &#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, i - n);</span><br><span class="line">			j = ne[j];</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="trie">8. Trie</h2>
<h3 id="trieå­—ç¬¦ä¸²ç»Ÿè®¡">8.1 Trieå­—ç¬¦ä¸²ç»Ÿè®¡</h3>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1e5</span> + <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> son[N][<span class="number">26</span>], idx = <span class="number">0</span>, cnt[N], x = <span class="number">0</span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Insert</span><span class="params">(string str)</span> </span>&#123;</span><br><span class="line">	<span class="type">int</span> p = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; str[i]; ++i) &#123;</span><br><span class="line">		<span class="type">int</span> s = str[i] - <span class="string">&#x27;a&#x27;</span>;</span><br><span class="line">		<span class="keyword">if</span> (!son[p][s]) son[p][s] = ++idx;</span><br><span class="line">		p = son[p][s];</span><br><span class="line">	&#125;</span><br><span class="line">	cnt[p] += <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">Query</span><span class="params">(string str)</span> </span>&#123;</span><br><span class="line">	<span class="type">int</span> p = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; str[i]; ++i) &#123;</span><br><span class="line">		<span class="type">int</span> s = str[i] - <span class="string">&#x27;a&#x27;</span>;</span><br><span class="line">		<span class="keyword">if</span> (!son[p][s]) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">		p = son[p][s];</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> cnt[p];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="type">int</span> n;</span><br><span class="line">	cin &gt;&gt; n;</span><br><span class="line">	string str, op;</span><br><span class="line">	<span class="keyword">while</span> (n--) &#123;</span><br><span class="line">		cin &gt;&gt; op &gt;&gt; str;</span><br><span class="line">		<span class="keyword">if</span> (op == <span class="string">&quot;I&quot;</span>) <span class="built_in">Insert</span>(str);</span><br><span class="line">		<span class="keyword">else</span> cout &lt;&lt; <span class="built_in">Query</span>(str) &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æœ€å¤§å¼‚æˆ–å¯¹">8.2 <a
href="https://www.acwing.com/problem/content/145/">æœ€å¤§å¼‚æˆ–å¯¹</a></h3>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1e5</span> + <span class="number">10</span>, M = <span class="number">3e6</span> + <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> son[M][<span class="number">2</span>], idx = <span class="number">0</span>, arr[N], res = <span class="number">0</span>, n = <span class="number">0</span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Insert</span><span class="params">(<span class="type">int</span> num)</span> </span>&#123;</span><br><span class="line">	<span class="type">int</span> p = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">30</span>; ~i; --i) &#123;</span><br><span class="line">		<span class="type">int</span> s = num &gt;&gt; i &amp; <span class="number">1</span>;</span><br><span class="line">		<span class="keyword">if</span> (!son[p][s]) son[p][s] = ++idx;</span><br><span class="line">		p = son[p][s];</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">query</span><span class="params">(<span class="type">int</span> num)</span> </span>&#123;</span><br><span class="line">	<span class="type">int</span> p = <span class="number">0</span>, ans = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">30</span>; ~i; --i) &#123;</span><br><span class="line">		<span class="type">int</span> s = num &gt;&gt; i &amp; <span class="number">1</span>;</span><br><span class="line">		<span class="keyword">if</span> (son[p][!s]) &#123;</span><br><span class="line">			ans += <span class="number">1</span> &lt;&lt; i;</span><br><span class="line">			p = son[p][!s];</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> p = son[p][s];</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;arr[i]);</span><br><span class="line">		<span class="built_in">Insert</span>(arr[i]);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) res = <span class="built_in">max</span>(res, <span class="built_in">query</span>(arr[i]));</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, res);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="å¹¶æŸ¥é›†">9. å¹¶æŸ¥é›†</h2>
<h3 id="åˆå¹¶é›†åˆ">9.1 <a
href="https://www.acwing.com/problem/content/838/">åˆå¹¶é›†åˆ</a></h3>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1e5</span> + <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> n, m, a, b, path[N];</span><br><span class="line">string op;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">find</span><span class="params">(<span class="type">int</span> x)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (path[x] == x) <span class="keyword">return</span> x;</span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">return</span> path[x] = <span class="built_in">find</span>(path[x]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">merge</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span> </span>&#123;</span><br><span class="line">	<span class="type">int</span> tx = <span class="built_in">find</span>(x);</span><br><span class="line">	<span class="type">int</span> ty = <span class="built_in">find</span>(y);</span><br><span class="line">	<span class="keyword">if</span> (tx != ty) path[tx] = ty;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) path[i] = i;</span><br><span class="line">	<span class="keyword">while</span> (m--) &#123;</span><br><span class="line">		cin &gt;&gt; op &gt;&gt; a &gt;&gt; b;</span><br><span class="line">		<span class="keyword">if</span> (op == <span class="string">&quot;M&quot;</span>)<span class="built_in">merge</span>(a, b);</span><br><span class="line">		<span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="type">int</span> ta = <span class="built_in">find</span>(a), tb = <span class="built_in">find</span>(b);</span><br><span class="line">			<span class="keyword">if</span> (ta == tb) cout &lt;&lt; <span class="string">&quot;Yes\n&quot;</span>;</span><br><span class="line">			<span class="keyword">else</span> cout &lt;&lt; <span class="string">&quot;No\n&quot;</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="è¿é€šå—ä¸­ç‚¹çš„æ•°é‡">9.2 <a
href="https://www.acwing.com/problem/content/839/">è¿é€šå—ä¸­ç‚¹çš„æ•°é‡</a></h3>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1e5</span> + <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> path[N], cnt[N];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">find</span><span class="params">(<span class="type">int</span> a)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (path[a] == a) <span class="keyword">return</span> a;</span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">return</span> path[a] = <span class="built_in">find</span>(path[a]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">merge</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> </span>&#123;</span><br><span class="line">	<span class="type">int</span> ta = <span class="built_in">find</span>(a);</span><br><span class="line">	<span class="type">int</span> tb = <span class="built_in">find</span>(b);</span><br><span class="line">	<span class="keyword">if</span> (ta == tb) <span class="keyword">return</span>;</span><br><span class="line">	path[ta] = tb;</span><br><span class="line">	cnt[tb] = cnt[ta] + cnt[tb];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="type">int</span> n, m;</span><br><span class="line">	cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">		path[i] = i;   cnt[i] = <span class="number">1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	string op;</span><br><span class="line">	<span class="type">int</span> a, b;</span><br><span class="line">	<span class="keyword">while</span> (m--) &#123;</span><br><span class="line">		cin &gt;&gt; op;</span><br><span class="line">		<span class="keyword">if</span> (op == <span class="string">&quot;C&quot;</span>) &#123;</span><br><span class="line">			cin &gt;&gt; a &gt;&gt; b;</span><br><span class="line">			<span class="built_in">merge</span>(a, b);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (op == <span class="string">&quot;Q1&quot;</span>) &#123;</span><br><span class="line">			cin &gt;&gt; a &gt;&gt; b;</span><br><span class="line">			<span class="type">int</span> ta = <span class="built_in">find</span>(a);</span><br><span class="line">			<span class="type">int</span> tb = <span class="built_in">find</span>(b);</span><br><span class="line">			<span class="keyword">if</span> (ta == tb) cout &lt;&lt; <span class="string">&quot;Yes&quot;</span> &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">			<span class="keyword">else</span> cout &lt;&lt; <span class="string">&quot;No&quot;</span> &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> &#123;</span><br><span class="line">			cin &gt;&gt; a;</span><br><span class="line">			<span class="type">int</span> ta = <span class="built_in">find</span>(a);</span><br><span class="line">			cout &lt;&lt; cnt[ta] &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="é£Ÿç‰©é“¾">9.3 <a
href="https://www.acwing.com/problem/content/242/">é£Ÿç‰©é“¾</a></h3>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1e5</span> + <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> pre[N], dis[N], n, m, res = <span class="number">0</span>;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">find</span><span class="params">(<span class="type">int</span> x)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (x != pre[x]) &#123;</span><br><span class="line">		<span class="type">int</span> u = <span class="built_in">find</span>(pre[x]);</span><br><span class="line">		dis[x] += dis[pre[x]];</span><br><span class="line">		pre[x] = u;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> pre[x];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) pre[i] = i;</span><br><span class="line">	<span class="type">int</span> d, x, y;</span><br><span class="line">	<span class="keyword">while</span> (m--) &#123;</span><br><span class="line">		cin &gt;&gt; d &gt;&gt; x &gt;&gt; y;</span><br><span class="line">		<span class="keyword">if</span> (x &gt; n || y &gt; n) &#123;</span><br><span class="line">			res++;  <span class="keyword">continue</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="type">int</span> tx = <span class="built_in">find</span>(x), ty = <span class="built_in">find</span>(y);</span><br><span class="line">		<span class="keyword">if</span> (d == <span class="number">1</span>) &#123;</span><br><span class="line">			<span class="keyword">if</span> (tx == ty &amp;&amp; (dis[x] - dis[y]) % <span class="number">3</span>) res++;</span><br><span class="line">			<span class="keyword">else</span> <span class="keyword">if</span> (tx != ty) &#123;</span><br><span class="line">				pre[tx] = ty;</span><br><span class="line">				dis[tx] = dis[y] - dis[x];</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="keyword">if</span> (tx == ty &amp;&amp; (dis[x] - dis[y] - <span class="number">1</span>) % <span class="number">3</span>) res++;</span><br><span class="line">			<span class="keyword">else</span> <span class="keyword">if</span> (tx != ty) &#123;</span><br><span class="line">				pre[tx] = ty;</span><br><span class="line">				dis[tx] = dis[y] - dis[x] + <span class="number">1</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	cout &lt;&lt; res &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="å †">10. å †</h2>
<h3 id="å †æ’åº">10.1 <a
href="https://www.acwing.com/problem/content/840/">å †æ’åº</a></h3>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1e5</span><span class="number">+10</span>;</span><br><span class="line"><span class="type">int</span> h[N],len = <span class="number">0</span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">down</span><span class="params">(<span class="type">int</span> u)</span></span>&#123;</span><br><span class="line">    <span class="type">int</span> t = u;</span><br><span class="line">    <span class="keyword">if</span>(u*<span class="number">2</span>&lt;=len&amp;&amp;h[t]&gt;h[u*<span class="number">2</span>])t = u*<span class="number">2</span>;</span><br><span class="line">    <span class="keyword">if</span>(u*<span class="number">2</span><span class="number">+1</span>&lt;=len&amp;&amp;h[t]&gt;h[u*<span class="number">2</span><span class="number">+1</span>])t = u*<span class="number">2</span><span class="number">+1</span>;</span><br><span class="line">    <span class="keyword">if</span>(t!=u)&#123;</span><br><span class="line">        <span class="built_in">swap</span>(h[t],h[u]);</span><br><span class="line">        <span class="built_in">down</span>(t);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> n,m;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;n,&amp;m);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>;i&lt;=n;++i)<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;h[i]);</span><br><span class="line">    len = n;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = n/<span class="number">2</span>; i;--i)<span class="built_in">down</span>(i);</span><br><span class="line">    <span class="keyword">while</span>(m--)&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>,h[<span class="number">1</span>]);</span><br><span class="line">        h[<span class="number">1</span>] = h[len];</span><br><span class="line">        len--;</span><br><span class="line">        <span class="built_in">down</span>(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æ¨¡æ‹Ÿå †">10.2 <a
href="https://www.acwing.com/problem/content/841/">æ¨¡æ‹Ÿå †</a></h3>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">1e5</span><span class="number">+10</span>;</span><br><span class="line"><span class="type">int</span> h[N];   <span class="comment">//å †</span></span><br><span class="line"><span class="type">int</span> ph[N];  <span class="comment">//å­˜æ”¾ç¬¬kä¸ªæ’å…¥ç‚¹çš„ä¸‹æ ‡</span></span><br><span class="line"><span class="type">int</span> hp[N];  <span class="comment">//å­˜æ”¾å †ä¸­ç‚¹çš„æ’å…¥æ¬¡åº</span></span><br><span class="line"><span class="type">int</span> cur_size;   <span class="comment">//size è®°å½•çš„æ˜¯å †å½“å‰çš„æ•°æ®å¤šå°‘</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//è¿™ä¸ªäº¤æ¢è¿‡ç¨‹å…¶å®æœ‰é‚£ä¹ˆäº›ç»• ä½†å…³é”®æ˜¯ç†è§£ å¦‚æœhp[u]=k åˆ™ph[k]=u çš„æ˜ å°„å…³ç³»</span></span><br><span class="line"><span class="comment">//ä¹‹æ‰€ä»¥è¦è¿›è¡Œè¿™æ ·çš„æ“ä½œæ˜¯å› ä¸º ç»è¿‡ä¸€ç³»åˆ—æ“ä½œ å †ä¸­çš„å…ƒç´ å¹¶ä¸ä¼šä¿æŒåŸæœ‰çš„æ’å…¥é¡ºåº</span></span><br><span class="line"><span class="comment">//ä»è€Œæˆ‘ä»¬éœ€è¦å¯¹åº”åˆ°åŸå…ˆç¬¬Kä¸ªå †ä¸­å…ƒç´ </span></span><br><span class="line"><span class="comment">//å¦‚æœç†è§£è¿™ä¸ªåŸç† é‚£ä¹ˆå°±èƒ½æ˜ç™½å…¶å®ä¸‰æ­¥äº¤æ¢çš„é¡ºåºæ˜¯å¯ä»¥äº’æ¢ </span></span><br><span class="line"><span class="comment">//h,hp,phä¹‹é—´ä¸¤ä¸¤å­˜åœ¨æ˜ å°„å…³ç³» æ‰€ä»¥äº¤æ¢é¡ºåºçš„ä¸åŒå¯¹ç»“æœå¹¶ä¸ä¼šäº§ç”Ÿå½±å“</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">heap_swap</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> v)</span></span></span><br><span class="line"><span class="function"></span>&#123;   </span><br><span class="line">    <span class="built_in">swap</span>(h[u],h[v]); </span><br><span class="line">     <span class="built_in">swap</span>(hp[u],hp[v]);     </span><br><span class="line">     <span class="built_in">swap</span>(ph[hp[u]],ph[hp[v]]);            </span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">down</span><span class="params">(<span class="type">int</span> u)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> t=u;</span><br><span class="line">    <span class="keyword">if</span>(u*<span class="number">2</span>&lt;=cur_size&amp;&amp;h[t]&gt;h[u*<span class="number">2</span>]) t=u*<span class="number">2</span>;</span><br><span class="line">    <span class="keyword">if</span>(u*<span class="number">2</span><span class="number">+1</span>&lt;=cur_size&amp;&amp;h[t]&gt;h[u*<span class="number">2</span><span class="number">+1</span>])  t=u*<span class="number">2</span><span class="number">+1</span>;</span><br><span class="line">    <span class="keyword">if</span>(u!=t)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">heap_swap</span>(u,t);</span><br><span class="line">        <span class="built_in">down</span>(t);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">up</span><span class="params">(<span class="type">int</span> u)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(u/<span class="number">2</span>&gt;<span class="number">0</span>&amp;&amp;h[u]&lt;h[u/<span class="number">2</span>]) </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">heap_swap</span>(u,u/<span class="number">2</span>);</span><br><span class="line">        <span class="built_in">up</span>(u&gt;&gt;<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    cin&gt;&gt;n;</span><br><span class="line">    <span class="type">int</span> m=<span class="number">0</span>;      <span class="comment">//mç”¨æ¥è®°å½•æ’å…¥çš„æ•°çš„ä¸ªæ•°</span></span><br><span class="line">                <span class="comment">//æ³¨æ„mçš„æ„ä¹‰ä¸cur_sizeæ˜¯ä¸åŒçš„ cur_sizeæ˜¯è®°å½•å †ä¸­å½“å‰æ•°æ®çš„å¤šå°‘</span></span><br><span class="line">                <span class="comment">//å¯¹åº”ä¸Šæ–‡ må³æ˜¯hpä¸­åº”è¯¥å­˜çš„å€¼</span></span><br><span class="line">    <span class="keyword">while</span>(n--)</span><br><span class="line">    &#123;</span><br><span class="line">        string op;</span><br><span class="line">        <span class="type">int</span> k,x;</span><br><span class="line">        cin&gt;&gt;op;</span><br><span class="line">        <span class="keyword">if</span>(op==<span class="string">&quot;I&quot;</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            cin&gt;&gt;x;</span><br><span class="line">            m++;</span><br><span class="line">            h[++cur_size]=x;</span><br><span class="line">            ph[m]=cur_size;</span><br><span class="line">            hp[cur_size]=m;</span><br><span class="line">            <span class="comment">//down(size);</span></span><br><span class="line">            <span class="built_in">up</span>(cur_size);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(op==<span class="string">&quot;PM&quot;</span>)    cout&lt;&lt;h[<span class="number">1</span>]&lt;&lt;endl;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(op==<span class="string">&quot;DM&quot;</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">heap_swap</span>(<span class="number">1</span>,cur_size);</span><br><span class="line">            cur_size--;</span><br><span class="line">            <span class="built_in">down</span>(<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(op==<span class="string">&quot;D&quot;</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            cin&gt;&gt;k;</span><br><span class="line">            <span class="type">int</span> u=ph[k];                <span class="comment">//è¿™é‡Œä¸€å®šè¦ç”¨u=ph[k]ä¿å­˜ç¬¬kä¸ªæ’å…¥ç‚¹çš„ä¸‹æ ‡</span></span><br><span class="line">            <span class="built_in">heap_swap</span>(u,cur_size);          <span class="comment">//å› ä¸ºåœ¨æ­¤å¤„heap_swapæ“ä½œåph[k]çš„å€¼å·²ç»å‘ç”Ÿ </span></span><br><span class="line">            cur_size--;                    <span class="comment">//å¦‚æœåœ¨up,downæ“ä½œä¸­ä»ç„¶ä½¿ç”¨ph[k]ä½œä¸ºå‚æ•°å°±ä¼šå‘ç”Ÿé”™è¯¯</span></span><br><span class="line">            <span class="built_in">up</span>(u);</span><br><span class="line">           <span class="built_in">down</span>(u);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(op==<span class="string">&quot;C&quot;</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            cin&gt;&gt;k&gt;&gt;x;</span><br><span class="line">            h[ph[k]]=x;                 <span class="comment">//æ­¤å¤„ç”±äºæœªæ¶‰åŠheap_swapæ“ä½œä¸”ä¸‹é¢çš„upã€downæ“ä½œåªä¼šå‘ç”Ÿä¸€ä¸ªæ‰€ä»¥</span></span><br><span class="line">            <span class="built_in">down</span>(ph[k]);                <span class="comment">//æ‰€ä»¥å¯ç›´æ¥ä¼ å…¥ph[k]ä½œä¸ºå‚æ•°</span></span><br><span class="line">            <span class="built_in">up</span>(ph[k]);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="å“ˆå¸Œè¡¨">11. å“ˆå¸Œè¡¨</h2>
<h3 id="æ¨¡æ‹Ÿæ•£åˆ—è¡¨">11.1 <a
href="https://www.acwing.com/problem/content/842/">æ¨¡æ‹Ÿæ•£åˆ—è¡¨</a></h3>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1e5</span><span class="number">+3</span>;</span><br><span class="line"><span class="type">int</span> e[N],idx = <span class="number">0</span>,ne[N],h[N];</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">insert</span><span class="params">(<span class="type">int</span> x)</span></span>&#123;</span><br><span class="line">    <span class="type">int</span> k = (x%N+N)%N;</span><br><span class="line">    e[idx] = x;</span><br><span class="line">    ne[idx] = h[k];</span><br><span class="line">    h[k] = idx++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">query</span><span class="params">(<span class="type">int</span> x)</span></span>&#123;</span><br><span class="line">    <span class="type">int</span> k = (x%N+N)%N;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = h[k];i!=<span class="number">-1</span>;i = ne[i])&#123;</span><br><span class="line">        <span class="keyword">if</span>(e[i]==x)<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(h,<span class="number">-1</span>,<span class="built_in">sizeof</span>(h));</span><br><span class="line">    <span class="type">int</span> x, n;</span><br><span class="line">    <span class="type">char</span> op;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="keyword">while</span>( n-- )&#123;</span><br><span class="line">        cin&gt;&gt;op&gt;&gt;x;</span><br><span class="line">        <span class="keyword">if</span>(op==<span class="string">&#x27;I&#x27;</span>)<span class="built_in">insert</span>(x);</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">if</span>(<span class="built_in">query</span>(x))cout&lt;&lt;<span class="string">&quot;Yes&quot;</span>&lt;&lt;<span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">            <span class="keyword">else</span> cout&lt;&lt;<span class="string">&quot;No&quot;</span>&lt;&lt;<span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="å­—ç¬¦ä¸²å“ˆå¸Œ">11.2 <a
href="https://www.acwing.com/problem/content/843/">å­—ç¬¦ä¸²å“ˆå¸Œ</a></h3>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">unsigned</span> <span class="type">long</span> <span class="type">long</span> ull;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1e5</span><span class="number">+10</span>, P = <span class="number">131</span>;</span><br><span class="line"><span class="type">int</span> n,m;</span><br><span class="line"><span class="type">char</span> str[N];</span><br><span class="line">ull h[N],p[N];</span><br><span class="line"><span class="function">ull <span class="title">get</span><span class="params">(<span class="type">int</span> l,<span class="type">int</span> r)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> h[r]-h[l<span class="number">-1</span>]*p[r-l<span class="number">+1</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d%s&quot;</span>,&amp;n,&amp;m,str<span class="number">+1</span>);</span><br><span class="line">    p[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>;i&lt;=n;++i)&#123;</span><br><span class="line">        p[i] = p[i<span class="number">-1</span>]*P;</span><br><span class="line">        h[i] = h[i<span class="number">-1</span>]*P+str[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span>(m--)&#123;</span><br><span class="line">        <span class="type">int</span> l1,r1,l2,r2;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d%d&quot;</span>,&amp;l1,&amp;r1,&amp;l2,&amp;r2);</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">get</span>(l1,r1)==<span class="built_in">get</span>(l2,r2))<span class="built_in">puts</span>(<span class="string">&quot;Yes&quot;</span>);</span><br><span class="line">        <span class="keyword">else</span> <span class="built_in">puts</span>(<span class="string">&quot;No&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>ç®—æ³•</category>
      </categories>
      <tags>
        <tag>algorithm</tag>
        <tag>C++</tag>
        <tag>ç®—æ³•æ¿å­</tag>
      </tags>
  </entry>
  <entry>
    <title>è‹±æ–‡å•è¯</title>
    <url>/2024/12/04/Life/%E8%8B%B1%E6%96%87%E5%8D%95%E8%AF%8D/</url>
    <content><![CDATA[
]]></content>
      <categories>
        <category>è‹±è¯­</category>
      </categories>
      <tags>
        <tag>è‹±è¯­å•è¯3000ä¸ª</tag>
        <tag>ç§¯ç´¯</tag>
      </tags>
  </entry>
  <entry>
    <title>è®¾ç½®hexoé¦–é¡µåªæ˜¾ç¤ºéƒ¨åˆ†æ‘˜è¦ï¼ˆä¸æ˜¾ç¤ºå…¨æ–‡ï¼‰</title>
    <url>/2024/12/03/Hexo/%E8%AE%BE%E7%BD%AEhexo%E9%A6%96%E9%A1%B5%E5%8F%AA%E6%98%BE%E7%A4%BA%E9%83%A8%E5%88%86%E6%91%98%E8%A6%81/</url>
    <content><![CDATA[<p>â—æœ¬æ–‡é’ˆå¯¹hexoçš„Nextä¸»é¢˜çš„è®¾ç½®æœ‰æ•ˆï¼Œå…¶ä»–ä¸»é¢˜å¯ä»¥çœ‹çœ‹æœ‰æ²¡æœ‰ç›¸åŒå­—æ®µ
Nexté»˜è®¤æ˜¯ä¼šåœ¨é¦–é¡µæ˜¾ç¤ºå…¨æ–‡çš„ï¼Œçœ‹èµ·æ¥å†—é•¿ä¸ç®€æ´ã€‚è¦æƒ³é¦–é¡µä»…å±•ç¤ºæ–‡ç« æ ‡é¢˜æˆ–è€…æ‘˜è¦ï¼Œè¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤è¿›è¡Œï¼š</p>
<h3 id="ä¿®æ”¹é…ç½®">ä¿®æ”¹é…ç½®</h3>
<p>é¦–å…ˆéœ€è¦åœ¨Nextä¸»é¢˜çš„<code>_config.yml</code>ä¸­æŠŠè®¾ç½®æ‰“å¼€(é»˜è®¤å®‰è£…æ—¶å°±æ‰“å¼€äº†):
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">excerpt_description:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure></p>
<h3 id="è®¾ç½®å±•ç¤ºçš„å†…å®¹">è®¾ç½®å±•ç¤ºçš„å†…å®¹</h3>
<h4 id="æ–¹æ³•ä¸€å†™æ¦‚è¿°">æ–¹æ³•ä¸€ï¼šå†™æ¦‚è¿°</h4>
<p>åœ¨æ–‡ç« çš„<code>front-matter</code>ä¸­æ·»åŠ <code>description</code>ï¼Œå…¶ä¸­<code>descriptio</code>nä¸­çš„å†…å®¹å°±ä¼šè¢«æ˜¾ç¤ºåœ¨é¦–é¡µä¸Šï¼Œå…¶ä½™ä¸€å¾‹ä¸æ˜¾ç¤ºã€‚
<img
src="https://ych-blog.oss-cn-guangzhou.aliyuncs.com/Snipaste_2024-12-04_00-04-00.png" /></p>
<p>PS:
è¿™ç§æ–¹æ³•ä¸»è¦æ˜¯è¦è‡ªå·±å¯¹æ–‡ç« å†…å®¹è¿›è¡Œç®€å•æ€»ç»“ï¼Œæœ‰æ—¶å€™ä¸å–œæ¬¢å†™æ€»ç»“ä»‹ç»çš„è¯ï¼Œå¯ä»¥ç”¨ä¸‹é¢ç¬¬äºŒç§æ–¹æ³•</p>
<h4 id="æ–¹æ³•äºŒæ–‡ç« æˆªæ–­">æ–¹æ³•äºŒï¼šæ–‡ç« æˆªæ–­</h4>
<p>åœ¨éœ€è¦æˆªæ–­çš„åœ°æ–¹åŠ å…¥ï¼š <figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--more--&gt;</span></span><br></pre></td></tr></table></figure>
é¦–é¡µå°±ä¼šæ˜¾ç¤ºè¿™æ¡ä»¥ä¸Šçš„æ‰€æœ‰å†…å®¹ï¼Œéšè—æ¥ä¸‹æ¥çš„æ‰€æœ‰å†…å®¹ã€‚</p>
<p>è¿™ä¸ªæ˜æ˜¾ä¼šæ–¹ä¾¿å¾ˆå¤šï¼Œä½†å½“ç„¶æœ‰åˆ©æœ‰å¼Šï¼Œæˆ‘ä¸€èˆ¬å–œæ¬¢ç”¨æ–¹æ³•ä¸€ï¼Œä¹Ÿå¸Œæœ›è‡ªå·±å†™çš„<code>description</code>èƒ½å¤Ÿç»™è¯»è€…å¿«é€Ÿäº†è§£æ–‡ç« å†…å®¹çš„æ•ˆæœ</p>
]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
        <tag>æ•™ç¨‹</tag>
      </tags>
  </entry>
  <entry>
    <title>ç¢ç¢å¿µ</title>
    <url>/2024/12/01/Life/%E7%A2%8E%E7%A2%8E%E5%BF%B5/</url>
    <content><![CDATA[<p><font size=4>ğŸš©
çœŸæ­£çš„è‡ªç”±æ„å‘³ç€æ§åˆ¶ä½ æ•´ä¸ªç”Ÿæ´»ï¼Œå­¦ä¼šè®¡åˆ’ã€æ‰¿è¯ºå’Œå†³å®šï¼Œä¸ºä½ è‡ªå·±çš„è¡Œä¸ºè´Ÿè´£ï¼</font>
<br></p>
<blockquote>
<p><font face="æ¥·ä½“">
åŸæ¥ï¼Œè®©å†…å¿ƒå¼ºå¤§ï¼Œæˆ‘åªéœ€è¦çœ‹åˆ°è‡ªå·±ï¼Œæ¥çº³æˆ‘è¿˜ä¸èƒ½åšçš„ï¼Œæ¬£èµæˆ‘å·²ç»åšåˆ°çš„
â€”â€”ã€Šå½“æˆ‘çœŸçš„è¶³å¤Ÿå¼ºå¤§ã€‹ </font></p>
</blockquote>
<p><br></p>
<blockquote>
<p><font face="æ¥·ä½“">
æ²¡æœ‰ä¸€ç§æ‰¹åˆ¤æ¯”è‡ªæˆ‘æ‰¹åˆ¤æ›´å¼ºçƒˆï¼Œä¹Ÿæ²¡æœ‰ä¸€ç§æ³•å®˜æ¯”æˆ‘ä»¬è‡ªå·±æ›´ä¸¥è‹›ã€‚
â€”â€”ã€Šè›¤èŸ†å…ˆç”Ÿå»çœ‹å¿ƒç†åŒ»ç”Ÿã€‹</font></p>
</blockquote>
<p><br></p>
<blockquote>
<p><font face="æ¥·ä½“">
å¯¹æŠ—æ¶ˆæçš„ä¸æ˜¯ç§¯æï¼Œè€Œæ˜¯ä¸“æ³¨ã€‚ç§¯æçš„æƒ…ç»ªæ˜¯æ— æ³•å‡»é€€æ¶ˆææƒ…ç»ªçš„ï¼Œåªæœ‰æŠŠè‡ªå·±æ²‰æµ¸åœ¨æŸä»¶äº‹ä»¶ä¸Šæ‰èƒ½ä»æ¶ˆææƒ…ç»ªä¸­èµ°å‡ºæ¥ã€‚
â€”â€”è‹¥æ—æ­£æ­ </font></p>
</blockquote>
<p><br></p>
<blockquote>
<p><font face="æ¥·ä½“"> ç”Ÿæ´»çš„ä¸ç¡®å®šæ€§æ­£æ˜¯æˆ‘ä»¬å¸Œæœ›çš„æ¥æºã€‚ â€”â€”é˜¿å¾·å‹’
</font></p>
</blockquote>
<p><br></p>
<blockquote>
<p><font face="æ¥·ä½“">
é‚£äº›çœ‹èµ·æ¥æ¯”ä½ å‹‡æ•¢çš„äººä¹Ÿåƒä½ ä¸€æ ·å®³æ€•ï¼Œä»–ä»¬åªæ˜¯åœ¨é»‘æš—ä¸­æŠŠå£å“¨å¹å¾—å“äº®ä¸€äº›ç½¢äº†ã€‚
â€”â€”ã€Šä¸ºä»€ä¹ˆé•¿å¤§ã€‹ </font></p>
</blockquote>
<p><br></p>
<blockquote>
<p><font face="æ¥·ä½“">
é‚£æ™šï¼Œæˆ‘ç‚¹äº†ä¸€æŠŠç¯ç«ï¼Œå¤§åœ°åœ¨æœˆäº®çœ¼ä¸­äº®èµ·äº†ä¸€é¢—æ˜Ÿæ˜Ÿã€‚ â€”â€”å¼±æ™ºå§
</font></p>
</blockquote>
<p><br></p>
<blockquote>
<p><font face="æ¥·ä½“"> è¿™ä¹±ç³Ÿç³Ÿçš„ä¸–ä¸Šè¿˜æœ‰äººæ‹¿ç€èŠ±å››å¤„èµ°èµ°ã€‚
â€”â€”ææ²§ä¸œã€Šç«ä¸ç°ã€‹ </font></p>
</blockquote>
<p><br></p>
<blockquote>
<p><font face="æ¥·ä½“"> å¥½åœ¨ï¼Œåˆ«äººå¦‚ä½•åˆ†ææˆ‘ï¼Œè·Ÿæˆ‘æœ¬èº«æ˜¯ä¸€ç‚¹å…³ç³»éƒ½æ²¡æœ‰çš„ã€‚
â€”â€”ä¸‰æ¯›ã€Šæ’’å“ˆæ‹‰çš„æ•…äº‹ã€‹ </font></p>
</blockquote>
<p><br></p>
<blockquote>
<p><font face="æ¥·ä½“"> ä½ æç›®è¿œæœ›ï¼Œå…¶ä½™çš„ç”±å¿ƒå»å®Œæˆã€‚ </font></p>
</blockquote>
<p><br></p>
<blockquote>
<p><font face="æ¥·ä½“"> ä¸€ä¸ªäººå˜å¥½çš„å‰ææ˜¯ï¼Œå…è®¸è‡ªå·±ä¸å¥½ã€‚ â€”â€”æ­¦å¿—çº¢
</font></p>
</blockquote>
<p><br></p>
<blockquote>
<p><font face="æ¥·ä½“">
çº¯ç²¹ï¼Œå°±æ˜¯ä¸è¦ä¸€å¿ƒè¦æˆä¸ºé«˜è´µæˆ–è€…å¼ºå¤§çš„äººï¼Œè€Œæ˜¯æˆä¸ºè‡ªå·±ã€‚
â€”â€”ä½©ç´¢é˜¿ã€Šæƒ¶ç„¶å½•ã€‹ </font></p>
</blockquote>
<p><br></p>
<blockquote>
<p><font face="æ¥·ä½“">
äººäººéƒ½æœ‰å¤©èµ‹ï¼Œä½†å¯è´µçš„æ˜¯ï¼Œä½ æ˜¯å¦æœ‰å‹‡æ°”è¿½éšä½ çš„å¤©èµ‹åˆ°é»‘æš—ä¹‹åœ°ã€‚
â€”â€”è‰¾ä¸½å¡Â·ç¼ </font></p>
</blockquote>
<p><br></p>
<blockquote>
<p><font face="æ¥·ä½“">
éšç€å¹´é¾„çš„å¢é•¿ï¼Œä½ è¶Šæ¥è¶Šä¸åœ¨æ„åˆ«äººæ€ä¹ˆçœ‹ä½ ï¼Œåªæœ‰é‚£æ—¶ä½ æ‰èƒ½æ„ˆåŠ è‡ªç”±ã€‚
â€”â€”ã€Šå¤±è¸ªæ ‘æœ¨çš„å²›å±¿ã€‹ </font></p>
</blockquote>
<p><br></p>
<blockquote>
<p><font face="æ¥·ä½“">
äººè„‘è™½ç„¶å¯ä»¥åŠªåŠ›ä»€ä¹ˆéƒ½è¯•å›¾è®°ä½ï¼Œä½†å†™ä¸‹æ¥å°±å¯ä»¥å®‰å¿ƒå¿˜è®°äº†ã€‚ â€”â€”ã€Šå‘Šç™½ã€‹
</font></p>
</blockquote>
<p><br></p>
<blockquote>
<p><font face="æ¥·ä½“">
åæ¥æˆ‘çŸ¥é“äº†ï¼Œäººç”Ÿåœ¨ä¸–ï¼Œä¸´åˆ°æ¯ä¸€ä¸ªç´§è¦å…³å¤´ï¼Œä½ éƒ½æ˜¯å­¤å†›è¡°å…µã€‚
â€”â€”ã€Šå…³å±±å¤ºè·¯ã€‹ </font></p>
</blockquote>
<p><br></p>
<blockquote>
<p><font face="æ¥·ä½“">
æˆ‘ä»¬æœ¬èƒ½åœ°æŠŠé”™è¯¯å½’å’äºä»–äººï¼Œä½†æœ€é‡è¦çš„æ˜¯ï¼Œåäº‹æƒ…å‘ç”Ÿæ—¶ï¼Œåº”è¯¥å¯»æ‰¾åŸå› ï¼Œè€Œä¸æ˜¯å¯»æ‰¾åäººã€‚
â€”â€”ã€Šäº‹å®ã€‹ </font></p>
</blockquote>
<p><br></p>
<blockquote>
<p><font face="æ¥·ä½“">
å‹‡æ°”ï¼Œå¹¶ä¸æ˜¯é—ªé—ªå‘å…‰çš„è‹±é›„ä¸»ä¹‰ï¼Œå‹‡æ•¢ä¸­ä¹ŸåŒ…å«æ€¯æ‡¦ï¼Œå°±åƒçˆ±ä¸­ä¹Ÿæœ‰ä¸çˆ±çš„æ—¶åˆ»ã€‚è¿™æ¥å›æ‘‡æ‘†çš„è¸±æ­¥ï¼Œæ–‘é©³çš„æ‚è´¨ï¼Œæ‰æ˜¯çœŸç›¸ã€‚
â€”â€”ã€ŠèŒ«ç„¶å°˜ä¸–çš„çå®ã€‹ </font></p>
</blockquote>
<p><br></p>
<blockquote>
<p><font face="æ¥·ä½“"> æˆ‘ç‹¬è‡ªåº¦è¿‡äº†å¤ªå¤šæ—¶å…‰ï¼Œæ²‰é»˜å·²æˆä¸€ç§ä¹ æƒ¯ã€‚
â€”â€”ã€Šå¤œèˆªè¥¿é£ã€‹ </font></p>
</blockquote>
<p><br></p>
<blockquote>
<p><font face="æ¥·ä½“">
å¹¸ç¦çš„å…³é”®ï¼Œå¹¶ä¸åœ¨äºä½ æ˜¯å¦ç»“å©šã€æ˜¯å¦æœ‰å­©å­ç­‰ï¼Œè€Œæ˜¯æ— è®ºä½ å¤„äºä»€ä¹ˆæ ·çš„çŠ¶æ€éƒ½æœ‰ä¸åœè¿½æ±‚å¹¸ç¦çš„è¡ŒåŠ¨åŠ›ï¼Œä»¥åŠæ— è®ºå¤šå°çš„ä¸€ä»¶äº‹ï¼Œä½ éƒ½èƒ½æ„Ÿåˆ°å¹¸ç¦çš„èƒ½åŠ›ã€‚å¯ä»¥è¯´ï¼Œå¹¸ç¦çš„å…³é”®æ˜¯ä¸€ç§å¿ƒæ€ã€‚
â€”â€”ã€Šè¶…å•èº«ç¤¾ä¼šã€‹ </font></p>
</blockquote>
<p><br></p>
<blockquote>
<p><font face="æ¥·ä½“">
å› ä¸ºæœ‰äº†ä»ªå¼ï¼ŒæŸä¸€å¤©æ‰æœ‰åˆ«äºå…¶ä»–ä»»ä½•ä¸€å¤©ï¼ŒæŸä¸€ä¸ªå°æ—¶æ‰æœ‰åˆ«äºå…¶ä»–ä»»ä½•ä¸€ä¸ªæ—¶åˆ»ã€‚
â€”â€”åœ£Â·åŸƒå…‹çµ®ä½©é‡Œ </font></p>
</blockquote>
<p><br></p>
<blockquote>
<p><font face="æ¥·ä½“">
æ—¶é—´ä¸æ˜¯ä¸€æ¡ç›´çº¿ï¼Œè€Œæ˜¯ä¸€ä¸ªå¾ªç¯ï¼Œæˆ‘ä»¬åœ¨å…¶ä¸­ä¸æ–­é‡å¤ç€ç›¸ä¼¼çš„æ•…äº‹ï¼Œç›´åˆ°æˆ‘ä»¬å­¦ä¼šä»ä¸­è§£è„±ã€‚
â€”â€”ã€Šæ‚‰è¾¾å¤šã€‹ </font></p>
</blockquote>
<p><br></p>
<blockquote>
<p><font face="æ¥·ä½“">
ä½ ä¸èƒ½åœ¨èµ¢çš„æ—¶å€™æ‰è‡ªä¿¡ï¼Œé‚£ä¸æ˜¯è‡ªä¿¡ï¼Œæ˜¯å¯¹ç»“æœçš„å¤è¯»ã€‚ â€”â€”å†¯éª¥ </font></p>
</blockquote>
<p><br></p>
<blockquote>
<p><font face="æ¥·ä½“">
å‡ºè·¯åªæœ‰ä¸€æ¡ï¼šåœ¨åˆ«äººå¤´è„‘å‘çƒ­å¤§å£°å–§é—¹çš„æ—¶å€™ï¼Œé€€å›åˆ°è‡ªå·±çš„å†…å¿ƒå¹¶ä¿æŒæ²‰é»˜
â€”â€”ã€Šæ˜¨æ—¥çš„ä¸–ç•Œã€‹ </font></p>
</blockquote>
<p><br></p>
<blockquote>
<p><font face="æ¥·ä½“">
æ— è®ºé£æš´å°†æˆ‘å¸¦åˆ°ä»€ä¹ˆæ ·çš„å²¸è¾¹ï¼Œæˆ‘éƒ½å°†ä»¥ä¸»äººçš„èº«ä»½ä¸Šå²¸
â€”â€”æ˜†å›¾æ–¯Â·è´ºæ‹‰æ–¯Â·å¼—æ‹‰åº“æ–¯ </font></p>
</blockquote>
<p><br></p>
<blockquote>
<p><font face="æ¥·ä½“"> è€Œæˆ‘ï¼Œè¿˜æ˜¯é‚£ä¸ªèº«æŠ«éœå…‰çš„äºº
<br>é›¨æ°´æµè¿‡å±±å²šï¼Œå­¤ç‹¬å¦‚æœé¹ƒå¼€æ”¾ â€”â€”ä½™ç§€å </font></p>
</blockquote>
<p><br></p>
<blockquote>
<p><font face="æ¥·ä½“">
èƒ½å¤Ÿç”¨å¹²å‡€åˆ©è½ã€æ¯«ä¸å¦¥åçš„æ€åº¦çœ‹å¾…äº‹æƒ…ï¼Œæœ¬èº«å°±æ˜¯ä¸€ç§æˆå°±ã€‚
â€”â€”ã€Šæ°¸ä¸åœæ­¥ã€‹ </font></p>
</blockquote>
<p><br></p>
<blockquote>
<p><font face="æ¥·ä½“"> æˆ‘ä¸€å®šä¼šå¹¸ç¦ï¼Œä¸ºæ­¤ï¼Œæˆ‘ç°åœ¨è¦åšå¿…é¡»åšçš„äº‹ã€‚
â€”â€”ä¸Šé‡åƒé¹¤å­ </font></p>
</blockquote>
<p><br></p>
<blockquote>
<p><font face="æ¥·ä½“"> æˆ‘ä¸€å®šä¼šå¹¸ç¦ï¼Œä¸ºæ­¤ï¼Œæˆ‘ç°åœ¨è¦åšå¿…é¡»åšçš„äº‹ã€‚
â€”â€”ä¸Šé‡åƒé¹¤å­ </font></p>
</blockquote>
]]></content>
      <categories>
        <category>ç”Ÿæ´»</category>
      </categories>
      <tags>
        <tag>ç”Ÿæ´»</tag>
        <tag>åè¨€ç§¯ç´¯</tag>
      </tags>
  </entry>
</search>
